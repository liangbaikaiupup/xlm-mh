(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["xlm-mh"]=e():t["xlm-mh"]=e()})("undefined"!==typeof self?self:this,(function(){return function(){var t={4747:function(t){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t=1e3,e=6e4,n=36e5,i="millisecond",a="second",r="minute",s="hour",o="day",l="week",c="month",d="quarter",u="year",h="date",_="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},m=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),a=n%60;return(e<=0?"+":"-")+m(i,2,"0")+":"+m(a,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),a=e.clone().add(i,c),r=n-a<0,s=e.clone().add(i+(r?-1:1),c);return+(-(i+(n-a)/(r?a-s:s-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:u,w:l,d:o,D:h,h:s,m:r,s:a,ms:i,Q:d}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},k="en",y={};y[k]=p;var b="$isDayjsObject",x=function(t){return t instanceof T||!(!t||!t[b])},$=function t(e,n,i){var a;if(!e)return k;if("string"==typeof e){var r=e.toLowerCase();y[r]&&(a=r),n&&(y[r]=n,a=r);var s=e.split("-");if(!a&&s.length>1)return t(s[0])}else{var o=e.name;y[o]=e,a=o}return!i&&a&&(k=a),a||!i&&k},w=function(t,e){if(x(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new T(n)},S=v;S.l=$,S.i=x,S.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var T=function(){function p(t){this.$L=$(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[b]=!0}var m=p.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(f);if(i){var a=i[2]-1||0,r=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)):new Date(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,r)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return S},m.isValid=function(){return!(this.$d.toString()===_)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return S.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,i=!!S.u(e)||e,d=S.p(t),_=function(t,e){var a=S.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return i?a:a.endOf(o)},f=function(t,e){return S.w(n.toDate()[t].apply(n.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,p=this.$M,m=this.$D,v="set"+(this.$u?"UTC":"");switch(d){case u:return i?_(1,0):_(31,11);case c:return i?_(1,p):_(0,p+1);case l:var k=this.$locale().weekStart||0,y=(g<k?g+7:g)-k;return _(i?m-y:m+(6-y),p);case o:case h:return f(v+"Hours",0);case s:return f(v+"Minutes",1);case r:return f(v+"Seconds",2);case a:return f(v+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,l=S.p(t),d="set"+(this.$u?"UTC":""),_=(n={},n[o]=d+"Date",n[h]=d+"Date",n[c]=d+"Month",n[u]=d+"FullYear",n[s]=d+"Hours",n[r]=d+"Minutes",n[a]=d+"Seconds",n[i]=d+"Milliseconds",n)[l],f=l===o?this.$D+(e-this.$W):e;if(l===c||l===u){var g=this.clone().set(h,1);g.$d[_](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else _&&this.$d[_](f);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[S.p(t)]()},m.add=function(i,d){var h,_=this;i=Number(i);var f=S.p(d),g=function(t){var e=w(_);return S.w(e.date(e.date()+Math.round(t*i)),_)};if(f===c)return this.set(c,this.$M+i);if(f===u)return this.set(u,this.$y+i);if(f===o)return g(1);if(f===l)return g(7);var p=(h={},h[r]=e,h[s]=n,h[a]=t,h)[f]||1,m=this.$d.getTime()+i*p;return S.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||_;var i=t||"YYYY-MM-DDTHH:mm:ssZ",a=S.z(this),r=this.$H,s=this.$m,o=this.$M,l=n.weekdays,c=n.months,d=n.meridiem,u=function(t,n,a,r){return t&&(t[n]||t(e,i))||a[n].slice(0,r)},h=function(t){return S.s(r%12||12,t,"0")},f=d||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(g,(function(t,i){return i||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return S.s(e.$y,4,"0");case"M":return o+1;case"MM":return S.s(o+1,2,"0");case"MMM":return u(n.monthsShort,o,c,3);case"MMMM":return u(c,o);case"D":return e.$D;case"DD":return S.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return u(n.weekdaysMin,e.$W,l,2);case"ddd":return u(n.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(r);case"HH":return S.s(r,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return f(r,s,!0);case"A":return f(r,s,!1);case"m":return String(s);case"mm":return S.s(s,2,"0");case"s":return String(e.$s);case"ss":return S.s(e.$s,2,"0");case"SSS":return S.s(e.$ms,3,"0");case"Z":return a}return null}(t)||a.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(i,h,_){var f,g=this,p=S.p(h),m=w(i),v=(m.utcOffset()-this.utcOffset())*e,k=this-m,y=function(){return S.m(g,m)};switch(p){case u:f=y()/12;break;case c:f=y();break;case d:f=y()/3;break;case l:f=(k-v)/6048e5;break;case o:f=(k-v)/864e5;break;case s:f=k/n;break;case r:f=k/e;break;case a:f=k/t;break;default:f=k}return _?f:S.a(f)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return y[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=$(t,e,!0);return i&&(n.$L=i),n},m.clone=function(){return S.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},p}(),E=T.prototype;return w.prototype=E,[["$ms",i],["$s",a],["$m",r],["$H",s],["$W",o],["$M",c],["$y",u],["$D",h]].forEach((function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,T,w),t.$i=!0),w},w.locale=$,w.isDayjs=x,w.unix=function(t){return w(1e3*t)},w.en=y[k],w.Ls=y,w.p={},w}))},9306:function(t,e,n){"use strict";var i=n(4901),a=n(6823),r=TypeError;t.exports=function(t){if(i(t))return t;throw new r(a(t)+" is not a function")}},7080:function(t,e,n){"use strict";var i=n(4402).has;t.exports=function(t){return i(t),t}},679:function(t,e,n){"use strict";var i=n(1625),a=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw new a("Incorrect invocation")}},8551:function(t,e,n){"use strict";var i=n(34),a=String,r=TypeError;t.exports=function(t){if(i(t))return t;throw new r(a(t)+" is not an object")}},9617:function(t,e,n){"use strict";var i=n(5397),a=n(5610),r=n(6198),s=function(t){return function(e,n,s){var o=i(e),l=r(o);if(0===l)return!t&&-1;var c,d=a(s,l);if(t&&n!==n){while(l>d)if(c=o[d++],c!==c)return!0}else for(;l>d;d++)if((t||d in o)&&o[d]===n)return t||d||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},4527:function(t,e,n){"use strict";var i=n(3724),a=n(4376),r=TypeError,s=Object.getOwnPropertyDescriptor,o=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=o?function(t,e){if(a(t)&&!s(t,"length").writable)throw new r("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},6319:function(t,e,n){"use strict";var i=n(8551),a=n(9539);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(s){a(t,"throw",s)}}},2195:function(t,e,n){"use strict";var i=n(9504),a=i({}.toString),r=i("".slice);t.exports=function(t){return r(a(t),8,-1)}},6955:function(t,e,n){"use strict";var i=n(2140),a=n(4901),r=n(2195),s=n(8227),o=s("toStringTag"),l=Object,c="Arguments"===r(function(){return arguments}()),d=function(t,e){try{return t[e]}catch(n){}};t.exports=i?r:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=d(e=l(t),o))?n:c?r(e):"Object"===(i=r(e))&&a(e.callee)?"Arguments":i}},7740:function(t,e,n){"use strict";var i=n(9297),a=n(5031),r=n(7347),s=n(4913);t.exports=function(t,e,n){for(var o=a(e),l=s.f,c=r.f,d=0;d<o.length;d++){var u=o[d];i(t,u)||n&&i(n,u)||l(t,u,c(e,u))}}},2211:function(t,e,n){"use strict";var i=n(9039);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},2529:function(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},6699:function(t,e,n){"use strict";var i=n(3724),a=n(4913),r=n(6980);t.exports=i?function(t,e,n){return a.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},6980:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},4659:function(t,e,n){"use strict";var i=n(3724),a=n(4913),r=n(6980);t.exports=function(t,e,n){i?a.f(t,e,r(0,n)):t[e]=n}},2106:function(t,e,n){"use strict";var i=n(283),a=n(4913);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),a.f(t,e,n)}},6840:function(t,e,n){"use strict";var i=n(4901),a=n(4913),r=n(283),s=n(9433);t.exports=function(t,e,n,o){o||(o={});var l=o.enumerable,c=void 0!==o.name?o.name:e;if(i(n)&&r(n,c,o),o.global)l?t[e]=n:s(e,n);else{try{o.unsafe?t[e]&&(l=!0):delete t[e]}catch(d){}l?t[e]=n:a.f(t,e,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return t}},6279:function(t,e,n){"use strict";var i=n(6840);t.exports=function(t,e,n){for(var a in e)i(t,a,e[a],n);return t}},9433:function(t,e,n){"use strict";var i=n(4576),a=Object.defineProperty;t.exports=function(t,e){try{a(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},3724:function(t,e,n){"use strict";var i=n(9039);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4055:function(t,e,n){"use strict";var i=n(4576),a=n(34),r=i.document,s=a(r)&&a(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},6837:function(t){"use strict";var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},8727:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2839:function(t,e,n){"use strict";var i=n(4576),a=i.navigator,r=a&&a.userAgent;t.exports=r?String(r):""},9519:function(t,e,n){"use strict";var i,a,r=n(4576),s=n(2839),o=r.process,l=r.Deno,c=o&&o.versions||l&&l.version,d=c&&c.v8;d&&(i=d.split("."),a=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!a&&s&&(i=s.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/),i&&(a=+i[1]))),t.exports=a},6518:function(t,e,n){"use strict";var i=n(4576),a=n(7347).f,r=n(6699),s=n(6840),o=n(9433),l=n(7740),c=n(2796);t.exports=function(t,e){var n,d,u,h,_,f,g=t.target,p=t.global,m=t.stat;if(d=p?i:m?i[g]||o(g,{}):i[g]&&i[g].prototype,d)for(u in e){if(_=e[u],t.dontCallGetSet?(f=a(d,u),h=f&&f.value):h=d[u],n=c(p?u:g+(m?".":"#")+u,t.forced),!n&&void 0!==h){if(typeof _==typeof h)continue;l(_,h)}(t.sham||h&&h.sham)&&r(_,"sham",!0),s(d,u,_,t)}}},9039:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},6080:function(t,e,n){"use strict";var i=n(7476),a=n(9306),r=n(616),s=i(i.bind);t.exports=function(t,e){return a(t),void 0===e?t:r?s(t,e):function(){return t.apply(e,arguments)}}},616:function(t,e,n){"use strict";var i=n(9039);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},9565:function(t,e,n){"use strict";var i=n(616),a=Function.prototype.call;t.exports=i?a.bind(a):function(){return a.apply(a,arguments)}},350:function(t,e,n){"use strict";var i=n(3724),a=n(9297),r=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,o=a(r,"name"),l=o&&"something"===function(){}.name,c=o&&(!i||i&&s(r,"name").configurable);t.exports={EXISTS:o,PROPER:l,CONFIGURABLE:c}},6706:function(t,e,n){"use strict";var i=n(9504),a=n(9306);t.exports=function(t,e,n){try{return i(a(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(r){}}},7476:function(t,e,n){"use strict";var i=n(2195),a=n(9504);t.exports=function(t){if("Function"===i(t))return a(t)}},9504:function(t,e,n){"use strict";var i=n(616),a=Function.prototype,r=a.call,s=i&&a.bind.bind(r,r);t.exports=i?s:function(t){return function(){return r.apply(t,arguments)}}},7751:function(t,e,n){"use strict";var i=n(4576),a=n(4901),r=function(t){return a(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?r(i[t]):i[t]&&i[t][e]}},1767:function(t){"use strict";t.exports=function(t){return{iterator:t,next:t.next,done:!1}}},851:function(t,e,n){"use strict";var i=n(6955),a=n(5966),r=n(4117),s=n(6269),o=n(8227),l=o("iterator");t.exports=function(t){if(!r(t))return a(t,l)||a(t,"@@iterator")||s[i(t)]}},81:function(t,e,n){"use strict";var i=n(9565),a=n(9306),r=n(8551),s=n(6823),o=n(851),l=TypeError;t.exports=function(t,e){var n=arguments.length<2?o(t):e;if(a(n))return r(i(n,t));throw new l(s(t)+" is not iterable")}},5966:function(t,e,n){"use strict";var i=n(9306),a=n(4117);t.exports=function(t,e){var n=t[e];return a(n)?void 0:i(n)}},3789:function(t,e,n){"use strict";var i=n(9306),a=n(8551),r=n(9565),s=n(1291),o=n(1767),l="Invalid size",c=RangeError,d=TypeError,u=Math.max,h=function(t,e){this.set=t,this.size=u(e,0),this.has=i(t.has),this.keys=i(t.keys)};h.prototype={getIterator:function(){return o(a(r(this.keys,this.set)))},includes:function(t){return r(this.has,this.set,t)}},t.exports=function(t){a(t);var e=+t.size;if(e!==e)throw new d(l);var n=s(e);if(n<0)throw new c(l);return new h(t,n)}},4576:function(t,e,n){"use strict";var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:function(t,e,n){"use strict";var i=n(9504),a=n(8981),r=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(a(t),e)}},421:function(t){"use strict";t.exports={}},397:function(t,e,n){"use strict";var i=n(7751);t.exports=i("document","documentElement")},5917:function(t,e,n){"use strict";var i=n(3724),a=n(9039),r=n(4055);t.exports=!i&&!a((function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},7055:function(t,e,n){"use strict";var i=n(9504),a=n(9039),r=n(2195),s=Object,o=i("".split);t.exports=a((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===r(t)?o(t,""):s(t)}:s},3706:function(t,e,n){"use strict";var i=n(9504),a=n(4901),r=n(7629),s=i(Function.toString);a(r.inspectSource)||(r.inspectSource=function(t){return s(t)}),t.exports=r.inspectSource},1181:function(t,e,n){"use strict";var i,a,r,s=n(8622),o=n(4576),l=n(34),c=n(6699),d=n(9297),u=n(7629),h=n(6119),_=n(421),f="Object already initialized",g=o.TypeError,p=o.WeakMap,m=function(t){return r(t)?a(t):i(t,{})},v=function(t){return function(e){var n;if(!l(e)||(n=a(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return n}};if(s||u.state){var k=u.state||(u.state=new p);k.get=k.get,k.has=k.has,k.set=k.set,i=function(t,e){if(k.has(t))throw new g(f);return e.facade=t,k.set(t,e),e},a=function(t){return k.get(t)||{}},r=function(t){return k.has(t)}}else{var y=h("state");_[y]=!0,i=function(t,e){if(d(t,y))throw new g(f);return e.facade=t,c(t,y,e),e},a=function(t){return d(t,y)?t[y]:{}},r=function(t){return d(t,y)}}t.exports={set:i,get:a,has:r,enforce:m,getterFor:v}},4209:function(t,e,n){"use strict";var i=n(8227),a=n(6269),r=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(a.Array===t||s[r]===t)}},4376:function(t,e,n){"use strict";var i=n(2195);t.exports=Array.isArray||function(t){return"Array"===i(t)}},4901:function(t){"use strict";var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},2796:function(t,e,n){"use strict";var i=n(9039),a=n(4901),r=/#|\.prototype\./,s=function(t,e){var n=l[o(t)];return n===d||n!==c&&(a(e)?i(e):!!e)},o=s.normalize=function(t){return String(t).replace(r,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",d=s.POLYFILL="P";t.exports=s},4117:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},34:function(t,e,n){"use strict";var i=n(4901);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},6395:function(t){"use strict";t.exports=!1},757:function(t,e,n){"use strict";var i=n(7751),a=n(4901),r=n(1625),s=n(7040),o=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return a(e)&&r(e.prototype,o(t))}},507:function(t,e,n){"use strict";var i=n(9565);t.exports=function(t,e,n){var a,r,s=n?t:t.iterator,o=t.next;while(!(a=i(o,s)).done)if(r=e(a.value),void 0!==r)return r}},2652:function(t,e,n){"use strict";var i=n(6080),a=n(9565),r=n(8551),s=n(6823),o=n(4209),l=n(6198),c=n(1625),d=n(81),u=n(851),h=n(9539),_=TypeError,f=function(t,e){this.stopped=t,this.result=e},g=f.prototype;t.exports=function(t,e,n){var p,m,v,k,y,b,x,$=n&&n.that,w=!(!n||!n.AS_ENTRIES),S=!(!n||!n.IS_RECORD),T=!(!n||!n.IS_ITERATOR),E=!(!n||!n.INTERRUPTED),C=i(e,$),D=function(t){return p&&h(p,"normal",t),new f(!0,t)},A=function(t){return w?(r(t),E?C(t[0],t[1],D):C(t[0],t[1])):E?C(t,D):C(t)};if(S)p=t.iterator;else if(T)p=t;else{if(m=u(t),!m)throw new _(s(t)+" is not iterable");if(o(m)){for(v=0,k=l(t);k>v;v++)if(y=A(t[v]),y&&c(g,y))return y;return new f(!1)}p=d(t,m)}b=S?t.next:p.next;while(!(x=a(b,p)).done){try{y=A(x.value)}catch(I){h(p,"throw",I)}if("object"==typeof y&&y&&c(g,y))return y}return new f(!1)}},9539:function(t,e,n){"use strict";var i=n(9565),a=n(8551),r=n(5966);t.exports=function(t,e,n){var s,o;a(t);try{if(s=r(t,"return"),!s){if("throw"===e)throw n;return n}s=i(s,t)}catch(l){o=!0,s=l}if("throw"===e)throw n;if(o)throw s;return a(s),n}},9462:function(t,e,n){"use strict";var i=n(9565),a=n(2360),r=n(6699),s=n(6279),o=n(8227),l=n(1181),c=n(5966),d=n(7657).IteratorPrototype,u=n(2529),h=n(9539),_=o("toStringTag"),f="IteratorHelper",g="WrapForValidIterator",p=l.set,m=function(t){var e=l.getterFor(t?g:f);return s(a(d),{next:function(){var n=e(this);if(t)return n.nextHandler();try{var i=n.done?void 0:n.nextHandler();return u(i,n.done)}catch(a){throw n.done=!0,a}},return:function(){var n=e(this),a=n.iterator;if(n.done=!0,t){var r=c(a,"return");return r?i(r,a):u(void 0,!0)}if(n.inner)try{h(n.inner.iterator,"normal")}catch(s){return h(a,"throw",s)}return a&&h(a,"normal"),u(void 0,!0)}})},v=m(!0),k=m(!1);r(k,_,"Iterator Helper"),t.exports=function(t,e){var n=function(n,i){i?(i.iterator=n.iterator,i.next=n.next):i=n,i.type=e?g:f,i.nextHandler=t,i.counter=0,i.done=!1,p(this,i)};return n.prototype=e?v:k,n}},713:function(t,e,n){"use strict";var i=n(9565),a=n(9306),r=n(8551),s=n(1767),o=n(9462),l=n(6319),c=o((function(){var t=this.iterator,e=r(i(this.next,t)),n=this.done=!!e.done;if(!n)return l(t,this.mapper,[e.value,this.counter++],!0)}));t.exports=function(t){return r(this),a(t),new c(s(this),{mapper:t})}},7657:function(t,e,n){"use strict";var i,a,r,s=n(9039),o=n(4901),l=n(34),c=n(2360),d=n(2787),u=n(6840),h=n(8227),_=n(6395),f=h("iterator"),g=!1;[].keys&&(r=[].keys(),"next"in r?(a=d(d(r)),a!==Object.prototype&&(i=a)):g=!0);var p=!l(i)||s((function(){var t={};return i[f].call(t)!==t}));p?i={}:_&&(i=c(i)),o(i[f])||u(i,f,(function(){return this})),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},6269:function(t){"use strict";t.exports={}},6198:function(t,e,n){"use strict";var i=n(8014);t.exports=function(t){return i(t.length)}},283:function(t,e,n){"use strict";var i=n(9504),a=n(9039),r=n(4901),s=n(9297),o=n(3724),l=n(350).CONFIGURABLE,c=n(3706),d=n(1181),u=d.enforce,h=d.get,_=String,f=Object.defineProperty,g=i("".slice),p=i("".replace),m=i([].join),v=o&&!a((function(){return 8!==f((function(){}),"length",{value:8}).length})),k=String(String).split("String"),y=t.exports=function(t,e,n){"Symbol("===g(_(e),0,7)&&(e="["+p(_(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(o?f(t,"name",{value:e,configurable:!0}):t.name=e),v&&n&&s(n,"arity")&&t.length!==n.arity&&f(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?o&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(a){}var i=u(t);return s(i,"source")||(i.source=m(k,"string"==typeof e?e:"")),t};Function.prototype.toString=y((function(){return r(this)&&h(this).source||c(this)}),"toString")},741:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},2360:function(t,e,n){"use strict";var i,a=n(8551),r=n(6801),s=n(8727),o=n(421),l=n(397),c=n(4055),d=n(6119),u=">",h="<",_="prototype",f="script",g=d("IE_PROTO"),p=function(){},m=function(t){return h+f+u+t+h+"/"+f+u},v=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},k=function(){var t,e=c("iframe"),n="java"+f+":";return e.style.display="none",l.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(m("document.F=Object")),t.close(),t.F},y=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}y="undefined"!=typeof document?document.domain&&i?v(i):k():v(i);var t=s.length;while(t--)delete y[_][s[t]];return y()};o[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(p[_]=a(t),n=new p,p[_]=null,n[g]=t):n=y(),void 0===e?n:r.f(n,e)}},6801:function(t,e,n){"use strict";var i=n(3724),a=n(8686),r=n(4913),s=n(8551),o=n(5397),l=n(1072);e.f=i&&!a?Object.defineProperties:function(t,e){s(t);var n,i=o(e),a=l(e),c=a.length,d=0;while(c>d)r.f(t,n=a[d++],i[n]);return t}},4913:function(t,e,n){"use strict";var i=n(3724),a=n(5917),r=n(8686),s=n(8551),o=n(6969),l=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",h="configurable",_="writable";e.f=i?r?function(t,e,n){if(s(t),e=o(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&_ in n&&!n[_]){var i=d(t,e);i&&i[_]&&(t[e]=n.value,n={configurable:h in n?n[h]:i[h],enumerable:u in n?n[u]:i[u],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=o(e),s(n),a)try{return c(t,e,n)}catch(i){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},7347:function(t,e,n){"use strict";var i=n(3724),a=n(9565),r=n(8773),s=n(6980),o=n(5397),l=n(6969),c=n(9297),d=n(5917),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=o(t),e=l(e),d)try{return u(t,e)}catch(n){}if(c(t,e))return s(!a(r.f,t,e),t[e])}},8480:function(t,e,n){"use strict";var i=n(1828),a=n(8727),r=a.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},3717:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},2787:function(t,e,n){"use strict";var i=n(9297),a=n(4901),r=n(8981),s=n(6119),o=n(2211),l=s("IE_PROTO"),c=Object,d=c.prototype;t.exports=o?c.getPrototypeOf:function(t){var e=r(t);if(i(e,l))return e[l];var n=e.constructor;return a(n)&&e instanceof n?n.prototype:e instanceof c?d:null}},1625:function(t,e,n){"use strict";var i=n(9504);t.exports=i({}.isPrototypeOf)},1828:function(t,e,n){"use strict";var i=n(9504),a=n(9297),r=n(5397),s=n(9617).indexOf,o=n(421),l=i([].push);t.exports=function(t,e){var n,i=r(t),c=0,d=[];for(n in i)!a(o,n)&&a(i,n)&&l(d,n);while(e.length>c)a(i,n=e[c++])&&(~s(d,n)||l(d,n));return d}},1072:function(t,e,n){"use strict";var i=n(1828),a=n(8727);t.exports=Object.keys||function(t){return i(t,a)}},8773:function(t,e){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,a=i&&!n.call({1:2},1);e.f=a?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},4270:function(t,e,n){"use strict";var i=n(9565),a=n(4901),r=n(34),s=TypeError;t.exports=function(t,e){var n,o;if("string"===e&&a(n=t.toString)&&!r(o=i(n,t)))return o;if(a(n=t.valueOf)&&!r(o=i(n,t)))return o;if("string"!==e&&a(n=t.toString)&&!r(o=i(n,t)))return o;throw new s("Can't convert object to primitive value")}},5031:function(t,e,n){"use strict";var i=n(7751),a=n(9504),r=n(8480),s=n(3717),o=n(8551),l=a([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(o(t)),n=s.f;return n?l(e,n(t)):e}},7750:function(t,e,n){"use strict";var i=n(4117),a=TypeError;t.exports=function(t){if(i(t))throw new a("Can't call method on "+t);return t}},9286:function(t,e,n){"use strict";var i=n(4402),a=n(8469),r=i.Set,s=i.add;t.exports=function(t){var e=new r;return a(t,(function(t){s(e,t)})),e}},3440:function(t,e,n){"use strict";var i=n(7080),a=n(4402),r=n(9286),s=n(5170),o=n(3789),l=n(8469),c=n(507),d=a.has,u=a.remove;t.exports=function(t){var e=i(this),n=o(t),a=r(e);return s(e)<=n.size?l(e,(function(t){n.includes(t)&&u(a,t)})):c(n.getIterator(),(function(t){d(e,t)&&u(a,t)})),a}},4402:function(t,e,n){"use strict";var i=n(9504),a=Set.prototype;t.exports={Set:Set,add:i(a.add),has:i(a.has),remove:i(a["delete"]),proto:a}},8750:function(t,e,n){"use strict";var i=n(7080),a=n(4402),r=n(5170),s=n(3789),o=n(8469),l=n(507),c=a.Set,d=a.add,u=a.has;t.exports=function(t){var e=i(this),n=s(t),a=new c;return r(e)>n.size?l(n.getIterator(),(function(t){u(e,t)&&d(a,t)})):o(e,(function(t){n.includes(t)&&d(a,t)})),a}},4449:function(t,e,n){"use strict";var i=n(7080),a=n(4402).has,r=n(5170),s=n(3789),o=n(8469),l=n(507),c=n(9539);t.exports=function(t){var e=i(this),n=s(t);if(r(e)<=n.size)return!1!==o(e,(function(t){if(n.includes(t))return!1}),!0);var d=n.getIterator();return!1!==l(d,(function(t){if(a(e,t))return c(d,"normal",!1)}))}},3838:function(t,e,n){"use strict";var i=n(7080),a=n(5170),r=n(8469),s=n(3789);t.exports=function(t){var e=i(this),n=s(t);return!(a(e)>n.size)&&!1!==r(e,(function(t){if(!n.includes(t))return!1}),!0)}},8527:function(t,e,n){"use strict";var i=n(7080),a=n(4402).has,r=n(5170),s=n(3789),o=n(507),l=n(9539);t.exports=function(t){var e=i(this),n=s(t);if(r(e)<n.size)return!1;var c=n.getIterator();return!1!==o(c,(function(t){if(!a(e,t))return l(c,"normal",!1)}))}},8469:function(t,e,n){"use strict";var i=n(9504),a=n(507),r=n(4402),s=r.Set,o=r.proto,l=i(o.forEach),c=i(o.keys),d=c(new s).next;t.exports=function(t,e,n){return n?a({iterator:c(t),next:d},e):l(t,e)}},4916:function(t,e,n){"use strict";var i=n(7751),a=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};t.exports=function(t){var e=i("Set");try{(new e)[t](a(0));try{return(new e)[t](a(-1)),!1}catch(n){return!0}}catch(r){return!1}}},5170:function(t,e,n){"use strict";var i=n(6706),a=n(4402);t.exports=i(a.proto,"size","get")||function(t){return t.size}},3650:function(t,e,n){"use strict";var i=n(7080),a=n(4402),r=n(9286),s=n(3789),o=n(507),l=a.add,c=a.has,d=a.remove;t.exports=function(t){var e=i(this),n=s(t).getIterator(),a=r(e);return o(n,(function(t){c(e,t)?d(a,t):l(a,t)})),a}},4204:function(t,e,n){"use strict";var i=n(7080),a=n(4402).add,r=n(9286),s=n(3789),o=n(507);t.exports=function(t){var e=i(this),n=s(t).getIterator(),l=r(e);return o(n,(function(t){a(l,t)})),l}},6119:function(t,e,n){"use strict";var i=n(5745),a=n(3392),r=i("keys");t.exports=function(t){return r[t]||(r[t]=a(t))}},7629:function(t,e,n){"use strict";var i=n(6395),a=n(4576),r=n(9433),s="__core-js_shared__",o=t.exports=a[s]||r(s,{});(o.versions||(o.versions=[])).push({version:"3.39.0",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:function(t,e,n){"use strict";var i=n(7629);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},4495:function(t,e,n){"use strict";var i=n(9519),a=n(9039),r=n(4576),s=r.String;t.exports=!!Object.getOwnPropertySymbols&&!a((function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},5610:function(t,e,n){"use strict";var i=n(1291),a=Math.max,r=Math.min;t.exports=function(t,e){var n=i(t);return n<0?a(n+e,0):r(n,e)}},5397:function(t,e,n){"use strict";var i=n(7055),a=n(7750);t.exports=function(t){return i(a(t))}},1291:function(t,e,n){"use strict";var i=n(741);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},8014:function(t,e,n){"use strict";var i=n(1291),a=Math.min;t.exports=function(t){var e=i(t);return e>0?a(e,9007199254740991):0}},8981:function(t,e,n){"use strict";var i=n(7750),a=Object;t.exports=function(t){return a(i(t))}},2777:function(t,e,n){"use strict";var i=n(9565),a=n(34),r=n(757),s=n(5966),o=n(4270),l=n(8227),c=TypeError,d=l("toPrimitive");t.exports=function(t,e){if(!a(t)||r(t))return t;var n,l=s(t,d);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!a(n)||r(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),o(t,e)}},6969:function(t,e,n){"use strict";var i=n(2777),a=n(757);t.exports=function(t){var e=i(t,"string");return a(e)?e:e+""}},2140:function(t,e,n){"use strict";var i=n(8227),a=i("toStringTag"),r={};r[a]="z",t.exports="[object z]"===String(r)},6823:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},3392:function(t,e,n){"use strict";var i=n(9504),a=0,r=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++a+r,36)}},7040:function(t,e,n){"use strict";var i=n(4495);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:function(t,e,n){"use strict";var i=n(3724),a=n(9039);t.exports=i&&a((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8622:function(t,e,n){"use strict";var i=n(4576),a=n(4901),r=i.WeakMap;t.exports=a(r)&&/native code/.test(String(r))},8227:function(t,e,n){"use strict";var i=n(4576),a=n(5745),r=n(9297),s=n(3392),o=n(4495),l=n(7040),c=i.Symbol,d=a("wks"),u=l?c["for"]||c:c&&c.withoutSetter||s;t.exports=function(t){return r(d,t)||(d[t]=o&&r(c,t)?c[t]:u("Symbol."+t)),d[t]}},4114:function(t,e,n){"use strict";var i=n(6518),a=n(8981),r=n(6198),s=n(4527),o=n(6837),l=n(9039),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),d=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},u=c||!d();i({target:"Array",proto:!0,arity:1,forced:u},{push:function(t){var e=a(this),n=r(e),i=arguments.length;o(n+i);for(var l=0;l<i;l++)e[n]=arguments[l],n++;return s(e,n),n}})},8111:function(t,e,n){"use strict";var i=n(6518),a=n(4576),r=n(679),s=n(8551),o=n(4901),l=n(2787),c=n(2106),d=n(4659),u=n(9039),h=n(9297),_=n(8227),f=n(7657).IteratorPrototype,g=n(3724),p=n(6395),m="constructor",v="Iterator",k=_("toStringTag"),y=TypeError,b=a[v],x=p||!o(b)||b.prototype!==f||!u((function(){b({})})),$=function(){if(r(this,f),l(this)===f)throw new y("Abstract class Iterator not directly constructable")},w=function(t,e){g?c(f,t,{configurable:!0,get:function(){return e},set:function(e){if(s(this),this===f)throw new y("You can't redefine this property");h(this,t)?this[t]=e:d(this,t,e)}}):f[t]=e};h(f,k)||w(k,v),!x&&h(f,m)&&f[m]!==Object||w(m,$),$.prototype=f,i({global:!0,constructor:!0,forced:x},{Iterator:$})},1148:function(t,e,n){"use strict";var i=n(6518),a=n(2652),r=n(9306),s=n(8551),o=n(1767);i({target:"Iterator",proto:!0,real:!0},{every:function(t){s(this),r(t);var e=o(this),n=0;return!a(e,(function(e,i){if(!t(e,n++))return i()}),{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})},2489:function(t,e,n){"use strict";var i=n(6518),a=n(9565),r=n(9306),s=n(8551),o=n(1767),l=n(9462),c=n(6319),d=n(6395),u=l((function(){var t,e,n,i=this.iterator,r=this.predicate,o=this.next;while(1){if(t=s(a(o,i)),e=this.done=!!t.done,e)return;if(n=t.value,c(i,r,[n,this.counter++],!0))return n}}));i({target:"Iterator",proto:!0,real:!0,forced:d},{filter:function(t){return s(this),r(t),new u(o(this),{predicate:t})}})},116:function(t,e,n){"use strict";var i=n(6518),a=n(2652),r=n(9306),s=n(8551),o=n(1767);i({target:"Iterator",proto:!0,real:!0},{find:function(t){s(this),r(t);var e=o(this),n=0;return a(e,(function(e,i){if(t(e,n++))return i(e)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},7588:function(t,e,n){"use strict";var i=n(6518),a=n(2652),r=n(9306),s=n(8551),o=n(1767);i({target:"Iterator",proto:!0,real:!0},{forEach:function(t){s(this),r(t);var e=o(this),n=0;a(e,(function(e){t(e,n++)}),{IS_RECORD:!0})}})},1701:function(t,e,n){"use strict";var i=n(6518),a=n(713),r=n(6395);i({target:"Iterator",proto:!0,real:!0,forced:r},{map:a})},8237:function(t,e,n){"use strict";var i=n(6518),a=n(2652),r=n(9306),s=n(8551),o=n(1767),l=TypeError;i({target:"Iterator",proto:!0,real:!0},{reduce:function(t){s(this),r(t);var e=o(this),n=arguments.length<2,i=n?void 0:arguments[1],c=0;if(a(e,(function(e){n?(n=!1,i=e):i=t(i,e,c),c++}),{IS_RECORD:!0}),n)throw new l("Reduce of empty iterator with no initial value");return i}})},7642:function(t,e,n){"use strict";var i=n(6518),a=n(3440),r=n(4916);i({target:"Set",proto:!0,real:!0,forced:!r("difference")},{difference:a})},8004:function(t,e,n){"use strict";var i=n(6518),a=n(9039),r=n(8750),s=n(4916),o=!s("intersection")||a((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));i({target:"Set",proto:!0,real:!0,forced:o},{intersection:r})},3853:function(t,e,n){"use strict";var i=n(6518),a=n(4449),r=n(4916);i({target:"Set",proto:!0,real:!0,forced:!r("isDisjointFrom")},{isDisjointFrom:a})},5876:function(t,e,n){"use strict";var i=n(6518),a=n(3838),r=n(4916);i({target:"Set",proto:!0,real:!0,forced:!r("isSubsetOf")},{isSubsetOf:a})},2475:function(t,e,n){"use strict";var i=n(6518),a=n(8527),r=n(4916);i({target:"Set",proto:!0,real:!0,forced:!r("isSupersetOf")},{isSupersetOf:a})},5024:function(t,e,n){"use strict";var i=n(6518),a=n(3650),r=n(4916);i({target:"Set",proto:!0,real:!0,forced:!r("symmetricDifference")},{symmetricDifference:a})},1698:function(t,e,n){"use strict";var i=n(6518),a=n(4204),r=n(4916);i({target:"Set",proto:!0,real:!0,forced:!r("union")},{union:a})},8992:function(t,e,n){"use strict";n(8111)},3215:function(t,e,n){"use strict";n(1148)},4520:function(t,e,n){"use strict";n(2489)},2577:function(t,e,n){"use strict";n(116)},3949:function(t,e,n){"use strict";n(7588)},1454:function(t,e,n){"use strict";n(1701)},8872:function(t,e,n){"use strict";n(8237)}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}!function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){n.p=""}();var i={};return function(){"use strict";if(n.r(i),n.d(i,{default:function(){return Ta}}),"undefined"!==typeof window){var t=window.document.currentScript,e=t&&t.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);e&&(n.p=e[1])}n(1454);var a=function(){var t=this,e=t._self._c;return e("div",[t._v("a")])},r=[],s={name:"xlmOfficeView",props:{item:{type:Object,default:()=>{}}}},o=s;function l(t,e,n,i,a,r,s,o){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),s?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=l):a&&(l=o?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:t,options:c}}var c=l(o,a,r,!1,null,null,null),d=c.exports;d.install=function(t){t.component(d.name,d)};var u,h=d,_=function(){var t=this,e=t._self._c;return e("div",[e("div",{ref:"gantt",staticClass:"gantt-app"})])},f=[];n(4114),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(8992),n(3215),n(4520),n(2577),n(3949),n(8872);
/** @license

dhtmlxGantt v.9.0.3 Standard

This version of dhtmlxGantt is distributed under GPL 2.0 license and can be legally used in GPL projects.

To use dhtmlxGantt in non-GPL projects (and get Pro version of the product), please obtain Individual, Commercial, Enterprise or Ultimate license on our site https://dhtmlx.com/docs/products/dhtmlxGantt/#licensing or contact us at info@dhtmlx.com

(c) XB Software

*/
function g(t){var e=0,n=0,i=0,a=0;if(t.getBoundingClientRect){var r=t.getBoundingClientRect(),s=document.body,o=document.documentElement||document.body.parentNode||document.body,l=window.pageYOffset||o.scrollTop||s.scrollTop,c=window.pageXOffset||o.scrollLeft||s.scrollLeft,d=o.clientTop||s.clientTop||0,u=o.clientLeft||s.clientLeft||0;e=r.top+l-d,n=r.left+c-u,i=document.body.offsetWidth-r.right,a=document.body.offsetHeight-r.bottom}else{for(;t;)e+=parseInt(t.offsetTop,10),n+=parseInt(t.offsetLeft,10),t=t.offsetParent;i=document.body.offsetWidth-t.offsetWidth-n,a=document.body.offsetHeight-t.offsetHeight-e}return{y:Math.round(e),x:Math.round(n),width:t.offsetWidth,height:t.offsetHeight,right:Math.round(i),bottom:Math.round(a)}}function p(t){var e=!1,n=!1;if(window.getComputedStyle){var i=window.getComputedStyle(t,null);e=i.display,n=i.visibility}else t.currentStyle&&(e=t.currentStyle.display,n=t.currentStyle.visibility);return"none"!=e&&"hidden"!=n}function m(t){return!isNaN(t.getAttribute("tabindex"))&&1*t.getAttribute("tabindex")>=0}function v(t){return!{a:!0,area:!0}[t.nodeName.loLowerCase()]||!!t.getAttribute("href")}function k(t){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[t.nodeName.toLowerCase()]||!t.hasAttribute("disabled")}function y(t){for(var e=t.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),n=Array.prototype.slice.call(e,0),i=0;i<n.length;i++)n[i].$position=i;for(n.sort((function(t,e){return 0===t.tabIndex&&0!==e.tabIndex?1:0!==t.tabIndex&&0===e.tabIndex?-1:t.tabIndex===e.tabIndex?t.$position-e.$position:t.tabIndex<e.tabIndex?-1:1})),i=0;i<n.length;i++){var a=n[i];(m(a)||k(a)||v(a))&&p(a)||(n.splice(i,1),i--)}return n}function b(){var t=document.createElement("div");t.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),Math.max(e,15)}function x(t){if(!t)return"";var e=t.className||"";return e.baseVal&&(e=e.baseVal),e.indexOf||(e=""),I(e)}function $(t,e){e&&-1===t.className.indexOf(e)&&(t.className+=" "+e)}function w(t,e){e=e.split(" ");for(var n=0;n<e.length;n++){var i=new RegExp("\\s?\\b"+e[n]+"\\b(?![-_.])","");t.className=t.className.replace(i,"")}}function S(t){return"string"==typeof t?document.getElementById(t)||document.querySelector(t)||document.body:t||document.body}function T(t,e){u||(u=document.createElement("div")),u.innerHTML=e;var n=u.firstChild;return t.appendChild(n),n}function E(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function C(t,e){for(var n=t.childNodes,i=n.length,a=[],r=0;r<i;r++){var s=n[r];s.className&&-1!==s.className.indexOf(e)&&a.push(s)}return a}function D(t){var e;return t.tagName?e=t:(e=(t=t||window.event).target||t.srcElement).shadowRoot&&t.composedPath&&(e=t.composedPath()[0]),e}function A(t,e){if(e){for(var n=D(t);n;){if(n.getAttribute&&n.getAttribute(e))return n;n=n.parentNode}return null}}function I(t){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(t)}function M(t,e,n){var i=D(t),a="";for(void 0===n&&(n=!0);i;){if(a=x(i)){var r=a.indexOf(e);if(r>=0){if(!n)return i;var s=0===r||!I(a.charAt(r-1)),o=r+e.length>=a.length||!I(a.charAt(r+e.length));if(s&&o)return i}}i=i.parentNode}return null}function N(t,e){var n=document.documentElement,i=g(e);return{x:t.clientX+n.scrollLeft-n.clientLeft-i.x+e.scrollLeft,y:t.clientY+n.scrollTop-n.clientTop-i.y+e.scrollTop}}function L(t,e){const n=g(t),i=g(e);return{x:n.x-i.x,y:n.y-i.y}}function P(t,e){if(!t||!e)return!1;for(;t&&t!=e;)t=t.parentNode;return t===e}function R(t,e){if(t.closest)return t.closest(e);if(t.matches||t.msMatchesSelector||t.webkitMatchesSelector){var n=t;if(!document.documentElement.contains(n))return null;do{if((n.matches||n.msMatchesSelector||n.webkitMatchesSelector).call(n,e))return n;n=n.parentElement||n.parentNode}while(null!==n&&1===n.nodeType);return null}return console.error("Your browser is not supported"),null}function O(t){for(;t;){if(t.offsetWidth>0&&t.offsetHeight>0)return t;t=t.parentElement}return null}function H(){return document.head.createShadowRoot||document.head.attachShadow}function B(){var t=document.activeElement;return t.shadowRoot&&(t=t.shadowRoot.activeElement),t===document.body&&document.getSelection&&(t=document.getSelection().focusNode||document.body),t}function z(t){if(!t||!H())return document.body;for(;t.parentNode&&(t=t.parentNode);)if(t instanceof ShadowRoot)return t.host;return document.body}const j=Object.freeze(Object.defineProperty({__proto__:null,addClassName:$,closest:R,getActiveElement:B,getChildNodes:C,getClassName:x,getClosestSizedElement:O,getFocusableNodes:y,getNodePosition:g,getRelativeEventPosition:N,getRelativeNodePosition:L,getRootNode:z,getScrollSize:b,getTargetNode:D,hasClass:function(t,e){return"classList"in t?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)},hasShadowParent:function(t){return!!z(t)},insertNode:T,isChildOf:P,isShadowDomSupported:H,locateAttribute:A,locateClassName:M,removeClassName:w,removeNode:E,toNode:S},Symbol.toStringTag,{value:"Module"})),W=typeof window<"u"?window:n.g;let F=class{constructor(t){this._mouseDown=!1,this._gantt=t,this._domEvents=t._createDomEventScope()}attach(t,e,n){const i=this._gantt,a=t.getViewPort();this._originPosition=W.getComputedStyle(a).display,this._restoreOriginPosition=()=>{a.style.position=this._originPosition},"static"===this._originPosition&&(a.style.position="relative");const r=i.$services.getService("state");r.registerProvider("clickDrag",(()=>({autoscroll:!1})));let s=null;const o=()=>{s&&(this._mouseDown=!0,t.setStart(i.copy(s)),t.setPosition(i.copy(s)),t.setEnd(i.copy(s)),s=null)};this._domEvents.attach(a,"mousedown",(a=>{s=null;let o=".gantt_task_line, .gantt_task_link";void 0!==n&&(o=n instanceof Array?n.join(", "):n),o&&i.utils.dom.closest(a.target,o)||(r.registerProvider("clickDrag",(()=>({autoscroll:this._mouseDown}))),e&&!0!==a[e]||(s=this._getCoordinates(a,t)))}));const l=z(i.$root)||document.body;this._domEvents.attach(l,"mouseup",(n=>{if(s=null,(!e||!0===n[e])&&!0===this._mouseDown){this._mouseDown=!1;const e=this._getCoordinates(n,t);t.dragEnd(e)}})),this._domEvents.attach(a,"mousemove",(n=>{if(e&&!0!==n[e])return;const i=this._gantt.ext.clickDrag,a=(this._gantt.config.drag_timeline||{}).useKey;if(i&&a&&!e&&n[a])return;let r=null;if(!this._mouseDown&&s)return r=this._getCoordinates(n,t),void(Math.abs(s.relative.left-r.relative.left)>5&&o());!0===this._mouseDown&&(r=this._getCoordinates(n,t),t.setEnd(r),t.render())}))}detach(){const t=this._gantt;this._domEvents.detachAll(),this._restoreOriginPosition&&this._restoreOriginPosition(),t.$services.getService("state").unregisterProvider("clickDrag")}destructor(){this.detach()}_getCoordinates(t,e){const n=e.getViewPort(),i=n.getBoundingClientRect(),{clientX:a,clientY:r}=t;return{absolute:{left:a,top:r},relative:{left:a-i.left+n.scrollLeft,top:r-i.top+n.scrollTop}}}};var V=function(){this._silent_mode=!1,this.listeners={}};V.prototype={_silentStart:function(){this._silent_mode=!0},_silentEnd:function(){this._silent_mode=!1}};var U=function(t){var e={},n=0,i=function(){var n=!0;for(var i in e){var a=e[i].apply(t,arguments);n=n&&a}return n};return i.addEvent=function(t,a){if("function"==typeof t){var r;if(a&&a.id?r=a.id:(r=n,n++),a&&a.once){var s=t;t=function(){s(),i.removeEvent(r)}}return e[r]=t,r}return!1},i.removeEvent=function(t){delete e[t]},i.clear=function(){e={}},i};function q(t){var e=new V;t.attachEvent=function(t,n,i){t="ev_"+t.toLowerCase(),e.listeners[t]||(e.listeners[t]=U(this)),i&&i.thisObject&&(n=n.bind(i.thisObject));var a=t+":"+e.listeners[t].addEvent(n,i);return i&&i.id&&(a=i.id),a},t.attachAll=function(t){this.attachEvent("listen_all",t)},t.callEvent=function(t,n){if(e._silent_mode)return!0;var i="ev_"+t.toLowerCase(),a=e.listeners;return a.ev_listen_all&&a.ev_listen_all.apply(this,[t].concat(n)),!a[i]||a[i].apply(this,n)},t.checkEvent=function(t){return!!e.listeners["ev_"+t.toLowerCase()]},t.detachEvent=function(t){if(t){var n=e.listeners;for(var i in n)n[i].removeEvent(t);var a=t.split(":");if(n=e.listeners,2===a.length){var r=a[0],s=a[1];n[r]&&n[r].removeEvent(s)}}},t.detachAllEvents=function(){for(var t in e.listeners)e.listeners[t].clear()}}var G={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:7776e3,year:31536e3};function Y(t){return G[t]||G.hour}function J(t,e){if(t.forEach)t.forEach(e);else for(var n=t.slice(),i=0;i<n.length;i++)e(n[i],i)}function K(t,e){if(t.find)return t.find(e);for(var n=0;n<t.length;n++)if(e(t[n],n))return t[n]}function X(t,e){if(t.includes)return t.includes(e);for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1}function Z(t){return Array.isArray?Array.isArray(t):t&&void 0!==t.length&&t.pop&&t.push}function Q(t){return!(!t||"object"!=typeof t)&&!!(t.getFullYear&&t.getMonth&&t.getDate)}function tt(t){return Q(t)&&!isNaN(t.getTime())}function et(t,e){var n,i=function(){i.$cancelTimeout(),i.$pending=!0;var a=Array.prototype.slice.call(arguments);n=setTimeout((function(){t.apply(this,a),i.$pending=!1}),e)};return i.$pending=!1,i.$cancelTimeout=function(){clearTimeout(n),i.$pending=!1},i.$execute=function(){var e=Array.prototype.slice.call(arguments);t.apply(this,e),i.$cancelTimeout()},i}function nt(t,e){return it(t)&&!it(e)&&(t="0"),t}function it(t){return 0===t}function at(t,e){for(var n,i,a,r=0,s=t.length-1;r<=s;)if(i=+t[n=Math.floor((r+s)/2)],a=+t[n-1],i<e)r=n+1;else{if(!(i>e)){for(;+t[n]==+t[n+1];)n++;return n}if(!isNaN(a)&&a<e)return n-1;s=n-1}return t.length-1}class rt{constructor(t,e,n){var i;this._el=document.createElement("div"),this.defaultRender=(t,e)=>{this._el||(this._el=document.createElement("div"));const n=this._el,i=Math.min(t.relative.top,e.relative.top),a=Math.max(t.relative.top,e.relative.top),r=Math.min(t.relative.left,e.relative.left),s=Math.max(t.relative.left,e.relative.left);if(this._singleRow){const t=this._getTaskPositionByTop(this._startPoint.relative.top);n.style.height=t.height+"px",n.style.top=t.top+"px"}else n.style.height=Math.abs(a-i)+"px",n.style.top=i+"px";return n.style.width=Math.abs(s-r)+"px",n.style.left=r+"px",n},this._gantt=e,this._view=n,this._viewPort=t.viewPort,this._el.classList.add(t.className),"function"==typeof t.callback&&(this._callback=t.callback),this.render=()=>{let e;e=t.render?t.render(this._startPoint,this._endPoint):this.defaultRender(this._startPoint,this._endPoint),e!==this._el&&(this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el),this._el=e),""!==t.className&&this._el.classList.add(t.className),this.draw()},(i=this._viewPort).attachEvent&&i.detachEvent||q(this._viewPort),this._singleRow=t.singleRow,this._useRequestAnimationFrame=t.useRequestAnimationFrame}draw(){if(this._useRequestAnimationFrame)return requestAnimationFrame((()=>{this._viewPort.appendChild(this.getElement())}));this._viewPort.appendChild(this.getElement())}clear(){if(this._useRequestAnimationFrame)return requestAnimationFrame((()=>{this._el.parentNode&&this._viewPort.removeChild(this._el)}));this._el.parentNode&&this._viewPort.removeChild(this._el)}getElement(){return this._el}getViewPort(){return this._viewPort}setStart(t){const e=this._gantt;this._startPoint=t,this._startDate=e.dateFromPos(this._startPoint.relative.left),this._viewPort.callEvent("onBeforeDrag",[this._startPoint])}setEnd(t){const e=this._gantt;if(this._endPoint=t,this._singleRow){const t=this._getTaskPositionByTop(this._startPoint.relative.top);this._endPoint.relative.top=t.top}this._endDate=e.dateFromPos(this._endPoint.relative.left),this._startPoint.relative.left>this._endPoint.relative.left&&(this._positionPoint={relative:{left:this._endPoint.relative.left,top:this._positionPoint.relative.top},absolute:{left:this._endPoint.absolute.left,top:this._positionPoint.absolute.top}}),this._startPoint.relative.top>this._endPoint.relative.top&&(this._positionPoint={relative:{left:this._positionPoint.relative.left,top:this._endPoint.relative.top},absolute:{left:this._positionPoint.absolute.left,top:this._endPoint.absolute.top}}),this._viewPort.callEvent("onDrag",[this._startPoint,this._endPoint])}setPosition(t){this._positionPoint=t}dragEnd(t){const e=this._gantt;t.relative.left<0&&(t.relative.left=0),this._viewPort.callEvent("onBeforeDragEnd",[this._startPoint,t]),this.setEnd(t),this._endDate=this._endDate||e.getState().max_date,this._startDate.valueOf()>this._endDate.valueOf()&&([this._startDate,this._endDate]=[this._endDate,this._startDate]),this.clear();const n=e.getTaskByTime(this._startDate,this._endDate),i=this._getTasksByTop(this._startPoint.relative.top,this._endPoint.relative.top);this._viewPort.callEvent("onDragEnd",[this._startPoint,this._endPoint]),this._callback&&this._callback(this._startPoint,this._endPoint,this._startDate,this._endDate,n,i)}getInBounds(){return this._singleRow}_getTasksByTop(t,e){const n=this._gantt;let i=t,a=e;t>e&&(i=e,a=t);const r=this._getTaskPositionByTop(i).index,s=this._getTaskPositionByTop(a).index,o=[];for(let l=r;l<=s;l++)n.getTaskByIndex(l)&&o.push(n.getTaskByIndex(l));return o}_getTaskPositionByTop(t){const e=this._gantt,n=this._view,i=n.getItemIndexByTopPosition(t),a=e.getTaskByIndex(i);if(a){const t=n.getItemHeight(a.id);return{top:n.getItemTop(a.id)||0,height:t||0,index:i}}{const i=n.getTotalHeight();return{top:t>i?i:0,height:e.config.row_height,index:t>i?e.getTaskCount():0}}}}class st{constructor(t){this._mouseDown=!1,this._calculateDirectionVector=()=>{if(this._trace.length>=10){const t=this._trace.slice(this._trace.length-10),e=[];for(let i=1;i<t.length;i++)e.push({x:t[i].x-t[i-1].x,y:t[i].y-t[i-1].y});const n={x:0,y:0};return e.forEach((t=>{n.x+=t.x,n.y+=t.y})),{magnitude:Math.sqrt(n.x*n.x+n.y*n.y),angleDegrees:180*Math.atan2(Math.abs(n.y),Math.abs(n.x))/Math.PI}}return null},this._applyDndReadyStyles=()=>{this._timeline.$task.classList.add("gantt_timeline_move_available")},this._clearDndReadyStyles=()=>{this._timeline.$task.classList.remove("gantt_timeline_move_available")},this._getScrollPosition=t=>{const e=this._gantt;return{x:e.$ui.getView(t.$config.scrollX).getScrollState().position,y:e.$ui.getView(t.$config.scrollY).getScrollState().position}},this._countNewScrollPosition=t=>{const e=this._calculateDirectionVector();let n=this._startPoint.x-t.x,i=this._startPoint.y-t.y;return e&&(e.angleDegrees<15?i=0:e.angleDegrees>75&&(n=0)),{x:this._scrollState.x+n,y:this._scrollState.y+i}},this._setScrollPosition=(t,e)=>{const n=this._gantt;requestAnimationFrame((()=>{n.scrollLayoutCell(t.$id,e.x,e.y)}))},this._stopDrag=t=>{const e=this._gantt;if(this._trace=[],e.$root.classList.remove("gantt_noselect"),void 0!==this._originalReadonly&&(e.config.readonly=this._originalReadonly,this._mouseDown&&e.config.drag_timeline&&e.config.drag_timeline.render&&e.render()),void 0!==this._originAutoscroll&&(e.config.autoscroll=this._originAutoscroll),e.config.drag_timeline){const{useKey:n}=e.config.drag_timeline;if(n&&!0!==t[n])return}this._mouseDown=!1},this._startDrag=t=>{const e=this._gantt;this._originAutoscroll=e.config.autoscroll,e.config.autoscroll=!1,e.$root.classList.add("gantt_noselect"),this._originalReadonly=e.config.readonly,e.config.readonly=!0,e.config.drag_timeline&&e.config.drag_timeline.render&&e.render(),this._trace=[],this._mouseDown=!0;const{x:n,y:i}=this._getScrollPosition(this._timeline);this._scrollState={x:n,y:i},this._startPoint={x:t.clientX,y:t.clientY},this._trace.push(this._startPoint)},this._gantt=t,this._domEvents=t._createDomEventScope(),this._trace=[]}static create(t){return new st(t)}destructor(){this._domEvents.detachAll()}attach(t){this._timeline=t;const e=this._gantt;this._domEvents.attach(t.$task,"mousedown",(t=>{if(!e.config.drag_timeline)return;const{useKey:n,ignore:i,enabled:a}=e.config.drag_timeline;if(!1===a)return;let r=".gantt_task_line, .gantt_task_link";void 0!==i&&(r=i instanceof Array?i.join(", "):i),r&&e.utils.dom.closest(t.target,r)||n&&!0!==t[n]||this._startDrag(t)})),this._domEvents.attach(document,"keydown",(t=>{if(!e.config.drag_timeline)return;const{useKey:n}=e.config.drag_timeline;n&&!0===t[n]&&this._applyDndReadyStyles()})),this._domEvents.attach(document,"keyup",(t=>{if(!e.config.drag_timeline)return;const{useKey:n}=e.config.drag_timeline;n&&!1===t[n]&&(this._clearDndReadyStyles(),this._stopDrag(t))})),this._domEvents.attach(document,"mouseup",(t=>{this._stopDrag(t)})),this._domEvents.attach(e.$root,"mouseup",(t=>{this._stopDrag(t)})),this._domEvents.attach(document,"mouseleave",(t=>{this._stopDrag(t)})),this._domEvents.attach(e.$root,"mouseleave",(t=>{this._stopDrag(t)})),this._domEvents.attach(e.$root,"mousemove",(n=>{if(!e.config.drag_timeline)return;const{useKey:i}=e.config.drag_timeline;if(i&&!0!==n[i])return;const a=this._gantt.ext.clickDrag,r=(this._gantt.config.click_drag||{}).useKey;if((!a||!r||i||!n[r])&&!0===this._mouseDown){this._trace.push({x:n.clientX,y:n.clientY});const e=this._countNewScrollPosition({x:n.clientX,y:n.clientY});this._setScrollPosition(t,e),this._scrollState=e,this._startPoint={x:n.clientX,y:n.clientY}}}))}}function ot(t){(function(){var e=[];function n(){return!!e.length}function i(e){setTimeout((function(){n()||t.$destroyed||t.focus()}),1)}function a(n){t.eventRemove(n,"keydown",s),t.event(n,"keydown",s),e.push(n)}function r(){var n=e.pop();n&&t.eventRemove(n,"keydown",s),i()}function s(n){var i=n.currentTarget;i==e[e.length-1]&&t.$keyboardNavigation.trapFocus(i,n)}function o(){a(t.getLightbox())}t.attachEvent("onLightbox",o),t.attachEvent("onAfterLightbox",r),t.attachEvent("onLightboxChange",(function(){r(),o()})),t.attachEvent("onAfterQuickInfo",(function(){i()})),t.attachEvent("onMessagePopup",(function(e){l=t.utils.dom.getActiveElement(),a(e)})),t.attachEvent("onAfterMessagePopup",(function(){r(),setTimeout((function(){l&&(l.focus(),l=null)}),1)}));var l=null;t.$keyboardNavigation.isModal=n})()}class lt{constructor(t){this.show=(t,e)=>{void 0===e?this._showForTask(t):this._showAtCoordinates(t,e)},this.hide=t=>{const e=this._gantt,n=this._quickInfoBox;this._quickInfoBoxId=0;const i=this._quickInfoTask;if(this._quickInfoTask=null,n&&n.parentNode){if(e.config.quick_info_detached)return e.callEvent("onAfterQuickInfo",[i]),n.parentNode.removeChild(n);n.className+=" gantt_qi_hidden","auto"===n.style.right?n.style.left="-350px":n.style.right="-350px",t&&(n.style.left=n.style.right="",n.parentNode.removeChild(n)),e.callEvent("onAfterQuickInfo",[i])}},this.getNode=()=>this._quickInfoBox?this._quickInfoBox:null,this.setContainer=t=>{t&&(this._container="string"==typeof t?document.getElementById(t):t)},this.setContent=t=>{const e=this._gantt,n={taskId:null,header:{title:"",date:""},content:"",buttons:e.config.quickinfo_buttons};t||(t=n),t.taskId||(t.taskId=n.taskId),t.header||(t.header=n.header),t.header.title||(t.header.title=n.header.title),t.header.date||(t.header.date=n.header.date),t.content||(t.content=n.content),t.buttons||(t.buttons=n.buttons);let i=this.getNode();i||(i=this._createQuickInfoElement()),t.taskId&&(this._quickInfoBoxId=t.taskId);const a=i.querySelector(".gantt_cal_qi_title"),r=a.querySelector(".gantt_cal_qi_tcontent"),s=a.querySelector(".gantt_cal_qi_tdate"),o=i.querySelector(".gantt_cal_qi_content"),l=i.querySelector(".gantt_cal_qi_controls");e._waiAria.quickInfoHeader(i,[t.header.title,t.header.date].join(" ")),r.innerHTML=t.header.title,s.innerHTML=t.header.date,t.header.title||t.header.date?a.style.display="":a.style.display="none",o.innerHTML=t.content;const c=t.buttons;c.length?l.style.display="":l.style.display="none";let d="";for(let u=0;u<c.length;u++){const t=e._waiAria.quickInfoButtonAttrString(e.locale.labels[c[u]]);d+=`<div class="gantt_qi_big_icon ${c[u]} dhx_gantt_${c[u]}" title="${e.locale.labels[c[u]]}" ${t}>\n            <div class='dhx_menu_icon dhx_gantt_icon ${c[u]} gantt_menu_icon dhx_gantt_${c[u]}'></div>\n            <div>${e.locale.labels[c[u]]}</div>\n         </div>`}l.innerHTML=d,e.eventRemove(i,"click",this._qiButtonClickHandler),e.eventRemove(i,"keypress",this._qiKeyPressHandler),e.event(i,"click",this._qiButtonClickHandler),e.event(i,"keypress",this._qiKeyPressHandler)},this._qiButtonClickHandler=t=>{this._qi_button_click(t.target)},this._qiKeyPressHandler=t=>{const e=t.which;13!==e&&32!==e||setTimeout((()=>{this._qi_button_click(t.target)}),1)},this._gantt=t}_showAtCoordinates(t,e){this.hide(!0),this._quickInfoBoxId=0,this._quickInfoTask=null,this._quickInfoBox||(this._createQuickInfoElement(),this.setContent()),this._appendAtCoordinates(t,e),this._gantt.callEvent("onQuickInfo",[null])}_showForTask(t){const e=this._gantt;if(t===this._quickInfoBoxId&&e.utils.dom.isChildOf(this._quickInfoBox,document.body)||!e.config.show_quick_info)return;this.hide(!0);const n=this._getContainer(),i=this._get_event_counter_part(t,6,n.xViewport,n.yViewport);i&&(this._quickInfoBox=this._init_quick_info(t),this._quickInfoTask=t,this._quickInfoBox.className=this._prepare_quick_info_classname(t),this._fill_quick_data(t),this._show_quick_info(i,6),e.callEvent("onQuickInfo",[t]))}_get_event_counter_part(t,e,n,i){const a=this._gantt;let r=a.getTaskNode(t);if(!r&&(r=a.getTaskRowNode(t),!r))return null;let s=0;const o=e+r.offsetTop+r.offsetHeight;let l=r;if(a.utils.dom.isChildOf(l,n))for(;l&&l!==n;)s+=l.offsetLeft,l=l.offsetParent;const c=a.getScrollState();return l?{left:s,top:o,dx:s+r.offsetWidth/2-c.x>n.offsetWidth/2?1:0,dy:o+r.offsetHeight/2-c.y>i.offsetHeight/2?1:0,width:r.offsetWidth,height:r.offsetHeight}:null}_createQuickInfoElement(){const t=this._gantt,e=document.createElement("div");e.className+="gantt_cal_quick_info",t._waiAria.quickInfoAttr(e);var n=`\n\t\t<div class="gantt_cal_qi_tcontrols">\n\t\t\t<a class="gantt_cal_qi_close_btn dhx_gantt_icon dhx_gantt_icon_close"></a>\n\t\t</div>\n\t\t<div class="gantt_cal_qi_title" ${t._waiAria.quickInfoHeaderAttrString()}>\n\t\t\t\t\n\t\t\t\t<div class="gantt_cal_qi_tcontent"></div>\n\t\t\t\t<div class="gantt_cal_qi_tdate"></div>\n\t\t\t</div>\n\t\t\t<div class="gantt_cal_qi_content"></div>`;if(n+='<div class="gantt_cal_qi_controls">',n+="</div>",e.innerHTML=n,t.config.quick_info_detached){const e=this._getContainer();t.event(e.parent,"scroll",(()=>{this.hide()}))}return this._quickInfoBox=e,e}_init_quick_info(t){const e=this._gantt,n=e.getTask(t);return"boolean"==typeof this._quickInfoReadonly&&e.isReadonly(n)!==this._quickInfoReadonly&&(this.hide(!0),this._quickInfoBox=null),this._quickInfoReadonly=e.isReadonly(n),this._quickInfoBox||(this._quickInfoBox=this._createQuickInfoElement()),this._quickInfoBox}_prepare_quick_info_classname(t){const e=this._gantt,n=e.getTask(t);let i=`gantt_cal_quick_info gantt_${e.getTaskType(n)}`;const a=e.templates.quick_info_class(n.start_date,n.end_date,n);return a&&(i+=" "+a),i}_fill_quick_data(t){const e=this._gantt,n=e.getTask(t);this._quickInfoBoxId=t;let i=[];if(this._quickInfoReadonly){const t=e.config.quickinfo_buttons,n={icon_delete:!0,icon_edit:!0};for(let e=0;e<t.length;e++)this._quickInfoReadonly&&n[t[e]]||i.push(t[e])}else i=e.config.quickinfo_buttons;this.setContent({header:{title:e.templates.quick_info_title(n.start_date,n.end_date,n),date:e.templates.quick_info_date(n.start_date,n.end_date,n)},content:e.templates.quick_info_content(n.start_date,n.end_date,n),buttons:i})}_appendAtCoordinates(t,e){const n=this._quickInfoBox,i=this._getContainer();n.parentNode&&"#document-fragment"!==n.parentNode.nodeName.toLowerCase()||i.parent.appendChild(n),n.style.left=t+"px",n.style.top=e+"px"}_show_quick_info(t,e){const n=this._gantt,i=this._quickInfoBox;if(n.config.quick_info_detached){const a=this._getContainer();i.parentNode&&"#document-fragment"!==i.parentNode.nodeName.toLowerCase()||a.parent.appendChild(i);const r=i.offsetWidth,s=i.offsetHeight,o=n.getScrollState(),l=a.xViewport,c=a.yViewport,d=l.offsetWidth+o.x-r,u=t.top-o.y+s;let h=t.top;u>c.offsetHeight/2&&(h=t.top-(s+t.height+2*e),h<o.y&&u<=c.offsetHeight&&(h=t.top)),h<o.y&&(h=o.y);const _=Math.min(Math.max(o.x,t.left-t.dx*(r-t.width)),d),f=h;this._appendAtCoordinates(_,f)}else i.style.top="20px",1===t.dx?(i.style.right="auto",i.style.left="-300px",setTimeout((()=>{i.style.left="10px"}),1)):(i.style.left="auto",i.style.right="-300px",setTimeout((()=>{i.style.right="10px"}),1)),i.className+=" gantt_qi_"+(1===t.dx?"left":"right"),n.$root.appendChild(i)}_qi_button_click(t){const e=this._gantt,n=this._quickInfoBox;if(!t||t===n)return;if(t.closest(".gantt_cal_qi_close_btn"))return void this.hide();const i=t.className;if(-1!==i.indexOf("_icon")){const t=this._quickInfoBoxId;e.$click.buttons[i.split(" ")[1].replace("icon_","")](t)}else this._qi_button_click(t.parentNode)}_getContainer(){const t=this._gantt;let e=this._container?this._container:t.$task_data;return e&&e.offsetHeight&&e.offsetWidth?{parent:e,xViewport:t.$task,yViewport:t.$task_data}:(e=this._container?this._container:t.$grid_data,e&&e.offsetHeight&&e.offsetWidth?{parent:e,xViewport:t.$grid,yViewport:t.$grid_data}:{parent:this._container?this._container:t.$layout,xViewport:t.$layout,yViewport:t.$layout})}}var ct,dt={}.constructor.toString();function ut(t){var e,n;if(t&&"object"==typeof t)switch(!0){case Q(t):n=new Date(t);break;case Z(t):for(n=new Array(t.length),e=0;e<t.length;e++)n[e]=ut(t[e]);break;default:for(e in n=function(t){return t.constructor.toString()!==dt}(t)?Object.create(t):{},t)Object.prototype.hasOwnProperty.apply(t,[e])&&(n[e]=ut(t[e]))}return n||t}function ht(t,e,n){for(var i in e)(void 0===t[i]||n)&&(t[i]=e[i]);return t}function _t(t){return void 0!==t}function ft(){return ct||(ct=(new Date).valueOf()),++ct}function gt(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}}function pt(t,e,n,i){t.addEventListener?t.addEventListener(e,n,void 0!==i&&i):t.attachEvent&&t.attachEvent("on"+e,n)}function mt(t,e,n,i){t.removeEventListener?t.removeEventListener(e,n,void 0!==i&&i):t.detachEvent&&t.detachEvent("on"+e,n)}const vt=Object.freeze(Object.defineProperty({__proto__:null,bind:gt,copy:ut,defined:_t,event:pt,eventRemove:mt,mixin:ht,uid:ft},Symbol.toStringTag,{value:"Module"}));function kt(t,e){t=t||pt,e=e||mt;var n=[],i={attach:function(e,i,a,r){n.push({element:e,event:i,callback:a,capture:r}),t(e,i,a,r)},detach:function(t,i,a,r){e(t,i,a,r);for(var s=0;s<n.length;s++){var o=n[s];o.element===t&&o.event===i&&o.callback===a&&o.capture===r&&(n.splice(s,1),s--)}},detachAll:function(){for(var t=n.slice(),e=0;e<t.length;e++){var a=t[e];i.detach(a.element,a.event,a.callback,a.capture),i.detach(a.element,a.event,a.callback,void 0),i.detach(a.element,a.event,a.callback,!1),i.detach(a.element,a.event,a.callback,!0)}n.splice(0,n.length)},extend:function(){return kt(this.event,this.eventRemove)}};return i}class yt{constructor(t){this._gantt=t}getNode(){const t=this._gantt;return this._tooltipNode||(this._tooltipNode=document.createElement("div"),this._tooltipNode.className="gantt_tooltip",t._waiAria.tooltipAttr(this._tooltipNode)),this._tooltipNode}setViewport(t){return this._root=t,this}show(t,e){const n=this._gantt,i=document.body,a=this.getNode();if(P(a,i)||(this.hide(),a.style.top=a.style.top||"0px",a.style.left=a.style.left||"0px",i.appendChild(a)),this._isLikeMouseEvent(t)){const n=this._calculateTooltipPosition(t);e=n.top,t=n.left}return a.style.top=e+"px",a.style.left=t+"px",n._waiAria.tooltipVisibleAttr(a),this}hide(){const t=this._gantt,e=this.getNode();return e&&e.parentNode&&e.parentNode.removeChild(e),t._waiAria.tooltipHiddenAttr(e),this}setContent(t){return this.getNode().innerHTML=t,this}_isLikeMouseEvent(t){return!(!t||"object"!=typeof t)&&"clientX"in t&&"clientY"in t}_getViewPort(){return this._root||document.body}_calculateTooltipPosition(t){const e=this._gantt,n=this._getViewPortSize(),i=this.getNode(),a={top:0,left:0,width:i.offsetWidth,height:i.offsetHeight,bottom:0,right:0},r=e.config.tooltip_offset_x,s=e.config.tooltip_offset_y,o=document.body,l=N(t,o),c=g(o);l.y+=c.y,a.top=l.y,a.left=l.x,a.top+=s,a.left+=r,a.bottom=a.top+a.height,a.right=a.left+a.width;const d=window.scrollY+o.scrollTop;return a.top<n.top-d?(a.top=n.top,a.bottom=a.top+a.height):a.bottom>n.bottom&&(a.bottom=n.bottom,a.top=a.bottom-a.height),a.left<n.left?(a.left=n.left,a.right=n.left+a.width):a.right>n.right&&(a.right=n.right,a.left=a.right-a.width),l.x>=a.left&&l.x<=a.right&&(a.left=l.x-a.width-r,a.right=a.left+a.width),l.y>=a.top&&l.y<=a.bottom&&(a.top=l.y-a.height-s,a.bottom=a.top+a.height),a}_getViewPortSize(){const t=this._gantt,e=this._getViewPort();let n,i=e,a=window.scrollY+document.body.scrollTop,r=window.scrollX+document.body.scrollLeft;return e===t.$task_data?(i=t.$task,a=0,r=0,n=g(t.$task)):n=g(i),{left:n.x+r,top:n.y+a,width:n.width,height:n.height,bottom:n.y+n.height+a,right:n.x+n.width+r}}}class bt{constructor(t){this._listeners={},this.tooltip=new yt(t),this._gantt=t,this._domEvents=kt(),this._initDelayedFunctions()}destructor(){this.tooltip.hide(),this._domEvents.detachAll()}hideTooltip(){this.delayHide()}attach(t){let e=document.body;const n=this._gantt;t.global||(e=n.$root);let i=null;const a=e=>{const n=D(e),a=R(n,t.selector);if(P(n,this.tooltip.getNode()))return;const r=()=>{i=a,t.onmouseenter(e,a)};i?a&&a===i?t.onmousemove(e,a):(t.onmouseleave(e,i),i=null,a&&a!==i&&r()):a&&r()};this.detach(t.selector),this._domEvents.attach(e,"mousemove",a),this._listeners[t.selector]={node:e,handler:a}}detach(t){const e=this._listeners[t];e&&this._domEvents.detach(e.node,"mousemove",e.handler)}tooltipFor(t){const e=t=>{let e=t;return document.createEventObject&&!document.createEvent&&(e=document.createEventObject(t)),e};this._initDelayedFunctions(),this.attach({selector:t.selector,global:t.global,onmouseenter:(n,i)=>{const a=t.html(n,i);a&&this.delayShow(e(n),a)},onmousemove:(n,i)=>{const a=t.html(n,i);a?this.delayShow(e(n),a):(this.delayShow.$cancelTimeout(),this.delayHide())},onmouseleave:()=>{this.delayShow.$cancelTimeout(),this.delayHide()}})}_initDelayedFunctions(){const t=this._gantt;this.delayShow&&this.delayShow.$cancelTimeout(),this.delayHide&&this.delayHide.$cancelTimeout(),this.tooltip.hide(),this.delayShow=et(((e,n)=>{!1===t.callEvent("onBeforeTooltip",[e])?this.tooltip.hide():(this.tooltip.setContent(n),this.tooltip.show(e))}),t.config.tooltip_timeout||1),this.delayHide=et((()=>{this.delayShow.$cancelTimeout(),this.tooltip.hide()}),t.config.tooltip_hide_timeout||1)}}const xt={onBeforeUndo:"onAfterUndo",onBeforeRedo:"onAfterRedo"},$t=["onTaskDragStart","onAfterTaskUpdate","onAfterParentExpand","onAfterTaskDelete","onBeforeBatchUpdate"];class wt{constructor(t,e){this._batchAction=null,this._batchMode=!1,this._ignore=!1,this._ignoreMoveEvents=!1,this._initialTasks={},this._initialLinks={},this._nestedTasks={},this._nestedLinks={},this._undo=t,this._gantt=e,this._attachEvents()}store(t,e,n=!1){return e===this._gantt.config.undo_types.task?this._storeTask(t,n):e===this._gantt.config.undo_types.link&&this._storeLink(t,n)}isMoveEventsIgnored(){return this._ignoreMoveEvents}toggleIgnoreMoveEvents(t){this._ignoreMoveEvents=t||!1}startIgnore(){this._ignore=!0}stopIgnore(){this._ignore=!1}startBatchAction(){this._timeout||(this._timeout=setTimeout((()=>{this.stopBatchAction(),this._timeout=null}),10)),this._ignore||this._batchMode||(this._batchMode=!0,this._batchAction=this._undo.action.create())}stopBatchAction(){if(this._ignore)return;const t=this._undo;this._batchAction&&t.logAction(this._batchAction),this._batchMode=!1,this._batchAction=null}onTaskAdded(t){this._ignore||this._storeTaskCommand(t,this._undo.command.type.add)}onTaskUpdated(t){this._ignore||this._storeTaskCommand(t,this._undo.command.type.update)}onTaskMoved(t){if(!this._ignore){t.$local_index=this._gantt.getTaskIndex(t.id);const e=this.getInitialTask(t.id);if(t.$local_index===e.$local_index&&this._gantt.getParent(t)===this._gantt.getParent(e))return;this._storeEntityCommand(t,this.getInitialTask(t.id),this._undo.command.type.move,this._undo.command.entity.task)}}onTaskDeleted(t){if(!this._ignore){if(this._storeTaskCommand(t,this._undo.command.type.remove),this._nestedTasks[t.id]){const e=this._nestedTasks[t.id];for(let t=0;t<e.length;t++)this._storeTaskCommand(e[t],this._undo.command.type.remove)}if(this._nestedLinks[t.id]){const e=this._nestedLinks[t.id];for(let t=0;t<e.length;t++)this._storeLinkCommand(e[t],this._undo.command.type.remove)}}}onLinkAdded(t){this._ignore||this._storeLinkCommand(t,this._undo.command.type.add)}onLinkUpdated(t){this._ignore||this._storeLinkCommand(t,this._undo.command.type.update)}onLinkDeleted(t){this._ignore||this._storeLinkCommand(t,this._undo.command.type.remove)}setNestedTasks(t,e){const n=this._gantt;let i=null;const a=[];let r=this._getLinks(n.getTask(t));for(let l=0;l<e.length;l++)i=this.setInitialTask(e[l]),r=r.concat(this._getLinks(i)),a.push(i);const s={};for(let l=0;l<r.length;l++)s[r[l]]=!0;const o=[];for(const l in s)o.push(this.setInitialLink(l));this._nestedTasks[t]=a,this._nestedLinks[t]=o}setInitialTask(t,e){const n=this._gantt;if(e||!this._initialTasks[t]||!this._batchMode){const e=n.copy(n.getTask(t));e.$index=n.getGlobalTaskIndex(t),e.$local_index=n.getTaskIndex(t),this.setInitialTaskObject(t,e)}return this._initialTasks[t]}getInitialTask(t){return this._initialTasks[t]}clearInitialTasks(){this._initialTasks={}}setInitialTaskObject(t,e){this._initialTasks[t]=e}setInitialLink(t,e){return this._initialLinks[t]&&this._batchMode||(this._initialLinks[t]=this._gantt.copy(this._gantt.getLink(t))),this._initialLinks[t]}getInitialLink(t){return this._initialLinks[t]}clearInitialLinks(){this._initialLinks={}}_attachEvents(){let t=null;const e=this._gantt,n=()=>{t||(t=setTimeout((()=>{t=null})),this.clearInitialTasks(),e.eachTask((t=>{this.setInitialTask(t.id)})),this.clearInitialLinks(),e.getLinks().forEach((t=>{this.setInitialLink(t.id)})))},i=t=>e.copy(e.getTask(t));for(const o in xt)e.attachEvent(o,(()=>(this.startIgnore(),!0))),e.attachEvent(xt[o],(()=>(this.stopIgnore(),!0)));for(let o=0;o<$t.length;o++)e.attachEvent($t[o],(()=>(this.startBatchAction(),!0)));e.attachEvent("onParse",(()=>{this._undo.clearUndoStack(),this._undo.clearRedoStack(),n()})),e.attachEvent("onAfterTaskAdd",((t,e)=>{this.setInitialTask(t,!0),this.onTaskAdded(e)})),e.attachEvent("onAfterTaskUpdate",((t,e)=>{this.onTaskUpdated(e)})),e.attachEvent("onAfterParentExpand",((t,e)=>{this.onTaskUpdated(e)})),e.attachEvent("onAfterTaskDelete",((t,e)=>{this.onTaskDeleted(e)})),e.attachEvent("onAfterLinkAdd",((t,e)=>{this.setInitialLink(t,!0),this.onLinkAdded(e)})),e.attachEvent("onAfterLinkUpdate",((t,e)=>{this.onLinkUpdated(e)})),e.attachEvent("onAfterLinkDelete",((t,e)=>{this.onLinkDeleted(e)})),e.attachEvent("onRowDragEnd",((t,e)=>(this.onTaskMoved(i(t)),this.toggleIgnoreMoveEvents(),!0))),e.attachEvent("onBeforeTaskDelete",(t=>{this.store(t,e.config.undo_types.task);const i=[];return n(),e.eachTask((t=>{i.push(t.id)}),t),this.setNestedTasks(t,i),!0}));const a=e.getDatastore("task");a.attachEvent("onBeforeItemMove",((t,e,i)=>(this.isMoveEventsIgnored()||n(),!0))),a.attachEvent("onAfterItemMove",((t,e,n)=>(this.isMoveEventsIgnored()||this.onTaskMoved(i(t)),!0))),e.attachEvent("onRowDragStart",((t,e,i)=>(this.toggleIgnoreMoveEvents(!0),n(),!0)));let r=null,s=!1;if(e.attachEvent("onBeforeTaskDrag",(t=>{if(r=e.getState().drag_id,r===t){const n=e.getTask(t);e.isSummaryTask(n)&&e.config.drag_project&&(s=!0)}if(e.plugins().multiselect){const t=e.getSelectedTasks();t.length>1&&t.forEach((t=>{this.store(t,e.config.undo_types.task,!0)}))}return this.store(t,e.config.undo_types.task)})),e.attachEvent("onAfterTaskDrag",(t=>{(s||e.plugins().multiselect&&e.getSelectedTasks().length>1)&&r===t&&(s=!1,r=null,this.stopBatchAction()),this.store(t,e.config.undo_types.task,!0)})),e.attachEvent("onLightbox",(t=>this.store(t,e.config.undo_types.task))),e.attachEvent("onBeforeTaskAutoSchedule",(t=>(this.store(t.id,e.config.undo_types.task,!0),!0))),e.ext.inlineEditors){let t=null,n=null;e.attachEvent("onGanttLayoutReady",(()=>{t&&e.ext.inlineEditors.detachEvent(t),n&&e.ext.inlineEditors.detachEvent(n),n=e.ext.inlineEditors.attachEvent("onEditStart",(t=>{this.store(t.id,e.config.undo_types.task)})),t=e.ext.inlineEditors.attachEvent("onBeforeEditStart",(t=>(this.stopBatchAction(),!0)))}))}}_storeCommand(t){const e=this._undo;if(e.updateConfigs(),e.undoEnabled)if(this._batchMode)this._batchAction.commands.push(t);else{const n=e.action.create([t]);e.logAction(n)}}_storeEntityCommand(t,e,n,i){const a=this._undo.command.create(t,e,n,i);this._storeCommand(a)}_storeTaskCommand(t,e){this._gantt.isTaskExists(t.id)&&(t.$local_index=this._gantt.getTaskIndex(t.id)),this._storeEntityCommand(t,this.getInitialTask(t.id),e,this._undo.command.entity.task)}_storeLinkCommand(t,e){this._storeEntityCommand(t,this.getInitialLink(t.id),e,this._undo.command.entity.link)}_getLinks(t){return t.$source.concat(t.$target)}_storeTask(t,e=!1){const n=this._gantt;return this.setInitialTask(t,e),n.eachTask((t=>{this.setInitialTask(t.id)}),t),!0}_storeLink(t,e=!1){return this.setInitialLink(t,e),!0}}class St{constructor(t){this.maxSteps=100,this.undoEnabled=!0,this.redoEnabled=!0,this.action={create:t=>({commands:t?t.slice():[]}),invert:t=>{const e=this._gantt.copy(t),n=this.command;for(let i=0;i<t.commands.length;i++){const t=e.commands[i]=n.invert(e.commands[i]);t.type!==n.type.update&&t.type!==n.type.move||([t.value,t.oldValue]=[t.oldValue,t.value])}return e}},this.command={entity:null,type:null,create:(t,e,n,i)=>{const a=this._gantt;return{entity:i,type:n,value:a.copy(t),oldValue:a.copy(e||t)}},invert:t=>{const e=this._gantt.copy(t);return e.type=this.command.inverseCommands(t.type),e},inverseCommands:t=>{const e=this._gantt,n=this.command.type;switch(t){case n.update:return n.update;case n.remove:return n.add;case n.add:return n.remove;case n.move:return n.move;default:return e.assert(!1,"Invalid command "+t),null}}},this._undoStack=[],this._redoStack=[],this._gantt=t}getUndoStack(){return this._undoStack}setUndoStack(t){this._undoStack=t}getRedoStack(){return this._redoStack}setRedoStack(t){this._redoStack=t}clearUndoStack(){this._undoStack=[]}clearRedoStack(){this._redoStack=[]}updateConfigs(){const t=this._gantt;this.maxSteps=t.config.undo_steps||100,this.command.entity=t.config.undo_types,this.command.type=t.config.undo_actions,this.undoEnabled=!!t.config.undo,this.redoEnabled=!!t.config.redo}undo(){const t=this._gantt;if(this.updateConfigs(),!this.undoEnabled)return;const e=this._pop(this._undoStack);if(e&&this._reorderCommands(e),!1!==t.callEvent("onBeforeUndo",[e])&&e)return this._applyAction(this.action.invert(e)),this._push(this._redoStack,t.copy(e)),void t.callEvent("onAfterUndo",[e]);t.callEvent("onAfterUndo",[null])}redo(){const t=this._gantt;if(this.updateConfigs(),!this.redoEnabled)return;const e=this._pop(this._redoStack);if(e&&this._reorderCommands(e),!1!==t.callEvent("onBeforeRedo",[e])&&e)return this._applyAction(e),this._push(this._undoStack,t.copy(e)),void t.callEvent("onAfterRedo",[e]);t.callEvent("onAfterRedo",[null])}logAction(t){this._push(this._undoStack,t),this._redoStack=[]}_push(t,e){const n=this._gantt;if(!e.commands.length)return;const i=t===this._undoStack?"onBeforeUndoStack":"onBeforeRedoStack";if(!1!==n.callEvent(i,[e])&&e.commands.length){for(t.push(e);t.length>this.maxSteps;)t.shift();return e}}_pop(t){return t.pop()}_reorderCommands(t){const e={any:0,link:1,task:2},n={move:1,any:0};t.commands.sort((function(t,i){if("task"===t.entity&&"task"===i.entity)return t.type!==i.type?(n[i.type]||0)-(n[t.type]||0):"move"===t.type&&t.oldValue&&i.oldValue&&i.oldValue.parent===t.oldValue.parent?t.oldValue.$index-i.oldValue.$index:0;{const n=e[t.entity]||e.any;return(e[i.entity]||e.any)-n}}))}_applyAction(t){let e=null;const n=this.command.entity,i=this.command.type,a=this._gantt,r={};r[n.task]={add:"addTask",get:"getTask",update:"updateTask",remove:"deleteTask",move:"moveTask",isExists:"isTaskExists"},r[n.link]={add:"addLink",get:"getLink",update:"updateLink",remove:"deleteLink",isExists:"isLinkExists"},a.batchUpdate((function(){for(let n=0;n<t.commands.length;n++){e=t.commands[n];const s=r[e.entity][e.type],o=r[e.entity].get,l=r[e.entity].isExists;if(e.type===i.add)a[s](e.oldValue,e.oldValue.parent,e.oldValue.$local_index);else if(e.type===i.remove)a[l](e.value.id)&&a[s](e.value.id);else if(e.type===i.update){const t=a[o](e.value.id);for(const n in e.value){let i=!(n.startsWith("$")||n.startsWith("_"));["$open"].indexOf(n)>-1&&(i=!0),i&&(t[n]=e.value[n])}a[s](e.value.id)}else e.type===i.move&&(a[s](e.value.id,e.value.$local_index,e.value.parent),a.callEvent("onRowDragEnd",[e.value.id]))}}))}}const Tt={click_drag:function(t){t.ext||(t.ext={});const e={className:"gantt_click_drag_rect",useRequestAnimationFrame:!0,callback:void 0,singleRow:!1},n=new F(t);t.ext.clickDrag=n,t.attachEvent("onGanttReady",(()=>{const n={viewPort:t.$task_data,...e};if(t.config.click_drag){const i=t.config.click_drag;n.render=i.render||e.render,n.className=i.className||e.className,n.callback=i.callback||e.callback,n.viewPort=i.viewPort||t.$task_data,n.useRequestAnimationFrame=void 0===i.useRequestAnimationFrame?e.useRequestAnimationFrame:i.useRequestAnimationFrame,n.singleRow=void 0===i.singleRow?e.singleRow:i.singleRow;const a=t.$ui.getView("timeline"),r=new rt(n,t,a);t.ext.clickDrag.attach(r,i.useKey,i.ignore)}})),t.attachEvent("onDestroy",(()=>{n.destructor()}))},drag_timeline:function(t){t.ext||(t.ext={}),t.ext.dragTimeline={create:()=>st.create(t)},t.config.drag_timeline={enabled:!0,render:!1}},fullscreen:function(t){function e(){const t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return!(!t||t!==document.body)}function n(){try{return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}catch(t){console.error("Fullscreen is not available:",t)}}t.$services.getService("state").registerProvider("fullscreen",(()=>n()?{fullscreen:e()}:void 0));let i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null};const a={width:null,height:null,top:null,left:null,position:null,zIndex:null,modified:!1};let r=null;function s(t,e){e.width=t.width,e.height=t.height,e.top=t.top,e.left=t.left,e.position=t.position,e.zIndex=t.zIndex}let o=!1;function l(){if(!t.$container)return;let n;e()?o&&(n="onExpand",function(){const e=t.ext.fullscreen.getFullscreenElement(),n=document.body;s(e.style,a),i={overflow:n.style.overflow,padding:n.style.padding?n.style.padding:null,paddingTop:n.style.paddingTop?n.style.paddingTop:null,paddingRight:n.style.paddingRight?n.style.paddingRight:null,paddingBottom:n.style.paddingBottom?n.style.paddingBottom:null,paddingLeft:n.style.paddingLeft?n.style.paddingLeft:null},n.style.padding&&(n.style.padding="0"),n.style.paddingTop&&(n.style.paddingTop="0"),n.style.paddingRight&&(n.style.paddingRight="0"),n.style.paddingBottom&&(n.style.paddingBottom="0"),n.style.paddingLeft&&(n.style.paddingLeft="0"),n.style.overflow="hidden",e.style.width="100vw",e.style.height="100vh",e.style.top="0px",e.style.left="0px",e.style.position="absolute",e.style.zIndex=1,a.modified=!0,r=function(t){let e=t.parentNode;const n=[];for(;e&&e.style;)n.push({element:e,originalPositioning:e.style.position}),e.style.position="static",e=e.parentNode;return n}(e)}()):o&&(o=!1,n="onCollapse",function(){const e=t.ext.fullscreen.getFullscreenElement(),n=document.body;a.modified&&(i.padding&&(n.style.padding=i.padding),i.paddingTop&&(n.style.paddingTop=i.paddingTop),i.paddingRight&&(n.style.paddingRight=i.paddingRight),i.paddingBottom&&(n.style.paddingBottom=i.paddingBottom),i.paddingLeft&&(n.style.paddingLeft=i.paddingLeft),n.style.overflow=i.overflow,i={overflow:null,padding:null,paddingTop:null,paddingRight:null,paddingBottom:null,paddingLeft:null},s(a,e.style),a.modified=!1),r.forEach((t=>{t.element.style.position=t.originalPositioning})),r=null}()),setTimeout((()=>{t.render()})),setTimeout((()=>{t.callEvent(n,[t.ext.fullscreen.getFullscreenElement()])}))}function c(){return!t.$container||!t.ext.fullscreen.getFullscreenElement()||!n()&&((console.warning||console.log)("The `fullscreen` feature not being allowed, or full-screen mode not being supported"),!0)}t.ext.fullscreen={expand(){if(c()||e()||!t.callEvent("onBeforeExpand",[this.getFullscreenElement()]))return;o=!0;const n=document.body,i=n.webkitRequestFullscreen?[Element.ALLOW_KEYBOARD_INPUT]:[],a=n.msRequestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullscreen||n.requestFullscreen;a&&a.apply(n,i)},collapse(){if(c()||!e()||!t.callEvent("onBeforeCollapse",[this.getFullscreenElement()]))return;const n=document.msExitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen||document.exitFullscreen;n&&n.apply(document)},toggle(){c()||(e()?this.collapse():this.expand())},getFullscreenElement:()=>t.$root},t.expand=function(){t.ext.fullscreen.expand()},t.collapse=function(){t.ext.fullscreen.collapse()},t.attachEvent("onGanttReady",(function(){t.event(document,"webkitfullscreenchange",l),t.event(document,"mozfullscreenchange",l),t.event(document,"MSFullscreenChange",l),t.event(document,"fullscreenChange",l),t.event(document,"fullscreenchange",l)}))},keyboard_navigation:function(t){(function(t){t.config.keyboard_navigation=!0,t.config.keyboard_navigation_cells=!1,t.$keyboardNavigation={},t._compose=function(){for(var t=Array.prototype.slice.call(arguments,0),e={},n=0;n<t.length;n++){var i=t[n];for(var a in"function"==typeof i&&(i=new i),i)e[a]=i[a]}return e},function(t){t.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null}},parse:function(t){for(var e=[],n=this.getExpressions(this.trim(t)),i=0;i<n.length;i++){for(var a=this.getWords(n[i]),r=this.createCommand(),s=0;s<a.length;s++)this.commandKeys[a[s]]?r.modifiers[a[s]]=!0:this.specialKeys[a[s]]?r.keyCode=this.specialKeys[a[s]]:r.keyCode=a[s].charCodeAt(0);e.push(r)}return e},getCommandFromEvent:function(t){var e=this.createCommand();e.modifiers.shift=!!t.shiftKey,e.modifiers.alt=!!t.altKey,e.modifiers.ctrl=!!t.ctrlKey,e.modifiers.meta=!!t.metaKey,e.keyCode=t.which||t.keyCode,e.keyCode>=96&&e.keyCode<=105&&(e.keyCode-=48);var n=String.fromCharCode(e.keyCode);return n&&(e.keyCode=n.toLowerCase().charCodeAt(0)),e},getHashFromEvent:function(t){return this.getHash(this.getCommandFromEvent(t))},getHash:function(t){var e=[];for(var n in t.modifiers)t.modifiers[n]&&e.push(n);return e.push(t.keyCode),e.join(this.junctionChar)},getExpressions:function(t){return t.split(this.junctionChar)},getWords:function(t){return t.split(this.combinationChar)},trim:function(t){return t.replace(/\s/g,"")},junctionChar:",",combinationChar:"+",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}}}(t),function(t){t.$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(e){this._handlers||(this._handlers={});var n=t.$keyboardNavigation.shortcuts.getHash(e);return this._handlers[n]},doAction:function(e,n){var i=this.findHandler(e);if(i){if(!1===t.$keyboardNavigation.facade.callEvent("onBeforeAction",[e,n]))return;i.call(this,n),n.preventDefault?n.preventDefault():n.returnValue=!1}},bind:function(e,n){this._handlers||(this._handlers={});for(var i=t.$keyboardNavigation.shortcuts,a=i.parse(e),r=0;r<a.length;r++)this._handlers[i.getHash(a[r])]=n},unbind:function(e){for(var n=t.$keyboardNavigation.shortcuts,i=n.parse(e),a=0;a<i.length;a++)this._handlers[n.getHash(i[a])]&&delete this._handlers[n.getHash(i[a])]},bindAll:function(t){for(var e in t)this.bind(e,t[e])},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys)}}}(t),function(t){t.$keyboardNavigation.getFocusableNodes=y,t.$keyboardNavigation.trapFocus=function(e,n){if(9!=n.keyCode)return!1;for(var i=t.$keyboardNavigation.getFocusableNodes(e),a=B(),r=-1,s=0;s<i.length;s++)if(i[s]==a){r=s;break}if(n.shiftKey){if(r<=0){var o=i[i.length-1];if(o)return o.focus(),n.preventDefault(),!0}}else if(r>=i.length-1){var l=i[0];if(l)return l.focus(),n.preventDefault(),!0}return!1}}(t),function(t){t.$keyboardNavigation.GanttNode=function(){},t.$keyboardNavigation.GanttNode.prototype=t._compose(t.$keyboardNavigation.EventHandler,{focus:function(){t.focus()},blur:function(){},isEnabled:function(){return t.$container.hasAttribute("tabindex")},scrollHorizontal:function(e){var n=t.dateFromPos(t.getScrollState().x),i=t.getScale(),a=e<0?-i.step:i.step;n=t.date.add(n,a,i.unit),t.scrollTo(t.posFromDate(n))},scrollVertical:function(e){var n=t.getScrollState().y,i=t.config.row_height;t.scrollTo(null,n+(e<0?-1:1)*i)},keys:{"alt+left":function(t){this.scrollHorizontal(-1)},"alt+right":function(t){this.scrollHorizontal(1)},"alt+up":function(t){this.scrollVertical(-1)},"alt+down":function(t){this.scrollVertical(1)},"ctrl+z":function(){t.undo&&t.undo()},"ctrl+r":function(){t.redo&&t.redo()}}}),t.$keyboardNavigation.GanttNode.prototype.bindAll(t.$keyboardNavigation.GanttNode.prototype.keys)}(t),function(t){t.$keyboardNavigation.KeyNavNode=function(){},t.$keyboardNavigation.KeyNavNode.prototype=t._compose(t.$keyboardNavigation.EventHandler,{isValid:function(){return!0},fallback:function(){return null},moveTo:function(e){t.$keyboardNavigation.dispatcher.setActiveNode(e)},compareTo:function(t){if(!t)return!1;for(var e in this){if(!!this[e]!=!!t[e])return!1;var n=!(!this[e]||!this[e].toString),i=!(!t[e]||!t[e].toString);if(i!=n)return!1;if(i&&n){if(t[e].toString()!=this[e].toString())return!1}else if(t[e]!=this[e])return!1}return!0},getNode:function(){},focus:function(){var e=this.getNode();if(e){var n=t.$keyboardNavigation.facade;!1!==n.callEvent("onBeforeFocus",[e])&&e&&(e.setAttribute("tabindex","-1"),e.$eventAttached||(e.$eventAttached=!0,t.event(e,"focus",(function(t){return t.preventDefault(),!1}),!1)),t.utils.dom.isChildOf(document.activeElement,e)&&(e=document.activeElement),e.focus&&e.focus(),n.callEvent("onFocus",[this.getNode()]))}},blur:function(){var e=this.getNode();e&&(t.$keyboardNavigation.facade.callEvent("onBlur",[e]),e.setAttribute("tabindex","-1"))}})}(t),function(t){t.$keyboardNavigation.HeaderCell=function(t){this.index=t||0},t.$keyboardNavigation.HeaderCell.prototype=t._compose(t.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return!(!t.config.show_grid&&t.getVisibleTaskCount()||!t.getGridColumns()[this.index]&&t.getVisibleTaskCount())},fallback:function(){if(!t.config.show_grid)return t.getVisibleTaskCount()?new t.$keyboardNavigation.TaskRow:null;for(var e=t.getGridColumns(),n=this.index;n>=0&&!e[n];)n--;return e[n]?new t.$keyboardNavigation.HeaderCell(n):null},fromDomElement:function(e){var n=M(e,"gantt_grid_head_cell");if(n){for(var i=0;n&&n.previousSibling;)n=n.previousSibling,i+=1;return new t.$keyboardNavigation.HeaderCell(i)}return null},getNode:function(){return t.$grid_scale.childNodes[this.index]},keys:{left:function(){this.index>0&&this.moveTo(new t.$keyboardNavigation.HeaderCell(this.index-1))},right:function(){var e=t.getGridColumns();this.index<e.length-1&&this.moveTo(new t.$keyboardNavigation.HeaderCell(this.index+1))},down:function(){var e,n=t.getChildren(t.config.root_id);t.isTaskExists(n[0])&&(e=n[0]),e&&(t.config.keyboard_navigation_cells?this.moveTo(new t.$keyboardNavigation.TaskCell(e,this.index)):this.moveTo(new t.$keyboardNavigation.TaskRow(e)))},end:function(){var e=t.getGridColumns();this.moveTo(new t.$keyboardNavigation.HeaderCell(e.length-1))},home:function(){this.moveTo(new t.$keyboardNavigation.HeaderCell(0))},"enter, space":function(){B().click()},"ctrl+enter":function(){t.isReadonly(this)||t.createTask({},this.taskId)}}}),t.$keyboardNavigation.HeaderCell.prototype.bindAll(t.$keyboardNavigation.HeaderCell.prototype.keys)}(t),function(t){t.$keyboardNavigation.TaskRow=function(e){if(!e){var n=t.getChildren(t.config.root_id);n[0]&&(e=n[0])}this.taskId=e,t.isTaskExists(this.taskId)&&(this.index=t.getTaskIndex(this.taskId),this.globalIndex=t.getGlobalTaskIndex(this.taskId),this.splitItem=!!t.getTask(this.taskId).$split_subtask,this.parentId=t.getParent(this.taskId))},t.$keyboardNavigation.TaskRow.prototype=t._compose(t.$keyboardNavigation.KeyNavNode,{_handlers:null,isValid:function(){return t.isTaskExists(this.taskId)&&t.getTaskIndex(this.taskId)>-1},fallback:function(){if(!t.getVisibleTaskCount()){var e=new t.$keyboardNavigation.HeaderCell;return e.isValid()?e:null}if(this.splitItem)return new t.$keyboardNavigation.TaskRow(this.parentId);var n=-1;if(t.getTaskByIndex(this.globalIndex-1))n=this.globalIndex-1;else if(t.getTaskByIndex(this.globalIndex+1))n=this.globalIndex+1;else for(var i=this.globalIndex;i>=0;){if(t.getTaskByIndex(i)){n=i;break}i--}return n>-1?new t.$keyboardNavigation.TaskRow(t.getTaskByIndex(n).id):void 0},fromDomElement:function(e){if(t.config.keyboard_navigation_cells)return null;var n=t.locate(e);return t.isTaskExists(n)?new t.$keyboardNavigation.TaskRow(n):null},getNode:function(){if(t.isTaskExists(this.taskId)&&t.isTaskVisible(this.taskId))return t.config.show_grid?t.$grid.querySelector(".gantt_row["+t.config.task_attribute+"='"+this.taskId+"']"):t.getTaskNode(this.taskId)},focus:function(e){if(!e){const e=t.getTaskPosition(t.getTask(this.taskId)),n=t.getTaskHeight(this.taskId),i=t.getScrollState();let a,r;a=t.$task?t.$task.offsetWidth:i.inner_width,r=t.$grid_data||t.$task_data?(t.$grid_data||t.$task_data).offsetHeight:i.inner_height,e.top<i.y||e.top+n>i.y+r?t.scrollTo(null,e.top-20):t.config.scroll_on_click&&t.config.show_chart&&(e.left>i.x+a?t.scrollTo(e.left-t.config.task_scroll_offset):e.left+e.width<i.x&&t.scrollTo(e.left+e.width-t.config.task_scroll_offset))}t.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this,[e]),function(){var e=t.$ui.getView("grid"),n=parseInt(e.$grid.scrollLeft),i=parseInt(e.$grid_data.scrollTop),a=e.$config.scrollX;if(a&&e.$config.scrollable){var r=t.$ui.getView(a);r&&r.scrollTo(n,i)}var s=e.$config.scrollY;if(s){var o=t.$ui.getView(s);o&&o.scrollTo(n,i)}}()},keys:{pagedown:function(){t.getVisibleTaskCount()&&this.moveTo(new t.$keyboardNavigation.TaskRow(t.getTaskByIndex(t.getVisibleTaskCount()-1).id))},pageup:function(){t.getVisibleTaskCount()&&this.moveTo(new t.$keyboardNavigation.TaskRow(t.getTaskByIndex(0).id))},up:function(){var e=null,n=t.getPrev(this.taskId);e=t.isTaskExists(n)?new t.$keyboardNavigation.TaskRow(n):new t.$keyboardNavigation.HeaderCell,this.moveTo(e)},down:function(){var e=t.getNext(this.taskId);t.isTaskExists(e)&&this.moveTo(new t.$keyboardNavigation.TaskRow(e))},"shift+down":function(){t.hasChild(this.taskId)&&!t.getTask(this.taskId).$open&&t.open(this.taskId)},"shift+up":function(){t.hasChild(this.taskId)&&t.getTask(this.taskId).$open&&t.close(this.taskId)},"shift+right":function(){if(!t.isReadonly(this)){var e=t.getPrevSibling(this.taskId);t.isTaskExists(e)&&!t.isChildOf(this.taskId,e)&&(t.getTask(e).$open=!0,!1!==t.moveTask(this.taskId,-1,e)&&t.updateTask(this.taskId))}},"shift+left":function(){if(!t.isReadonly(this)){var e=t.getParent(this.taskId);t.isTaskExists(e)&&!1!==t.moveTask(this.taskId,t.getTaskIndex(e)+1,t.getParent(e))&&t.updateTask(this.taskId)}},space:function(e){t.isSelectedTask(this.taskId)?t.unselectTask(this.taskId):t.selectTask(this.taskId)},"ctrl+left":function(e){t.close(this.taskId)},"ctrl+right":function(e){t.open(this.taskId)},delete:function(e){t.isReadonly(this)||t.$click.buttons.delete(this.taskId)},enter:function(){t.isReadonly(this)||t.showLightbox(this.taskId)},"ctrl+enter":function(){t.isReadonly(this)||t.createTask({},this.taskId)}}}),t.$keyboardNavigation.TaskRow.prototype.bindAll(t.$keyboardNavigation.TaskRow.prototype.keys)}(t),function(t){t.$keyboardNavigation.TaskCell=function(e,n){if(!(e=nt(e,t.config.root_id))){var i=t.getChildren(t.config.root_id);i[0]&&(e=i[0])}this.taskId=e,this.columnIndex=n||0,t.isTaskExists(this.taskId)&&(this.index=t.getTaskIndex(this.taskId),this.globalIndex=t.getGlobalTaskIndex(this.taskId))},t.$keyboardNavigation.TaskCell.prototype=t._compose(t.$keyboardNavigation.TaskRow,{_handlers:null,isValid:function(){return t.$keyboardNavigation.TaskRow.prototype.isValid.call(this)&&!!t.getGridColumns()[this.columnIndex]},fallback:function(){var e=t.$keyboardNavigation.TaskRow.prototype.fallback.call(this),n=e;if(e instanceof t.$keyboardNavigation.TaskRow){for(var i=t.getGridColumns(),a=this.columnIndex;a>=0&&!i[a];)a--;i[a]&&(n=new t.$keyboardNavigation.TaskCell(e.taskId,a))}return n},fromDomElement:function(e){if(!t.config.keyboard_navigation_cells)return null;var n=t.locate(e);if(t.isTaskExists(n)){var i=0,a=A(e,"data-column-index");return a&&(i=1*a.getAttribute("data-column-index")),new t.$keyboardNavigation.TaskCell(n,i)}return null},getNode:function(){if(t.isTaskExists(this.taskId)&&t.isTaskVisible(this.taskId)){if(t.config.show_grid){var e=t.$grid.querySelector(".gantt_row["+t.config.task_attribute+"='"+this.taskId+"']");return e?e.querySelector("[data-column-index='"+this.columnIndex+"']"):null}return t.getTaskNode(this.taskId)}},keys:{up:function(){var e=null,n=t.getPrev(this.taskId);e=t.isTaskExists(n)?new t.$keyboardNavigation.TaskCell(n,this.columnIndex):new t.$keyboardNavigation.HeaderCell(this.columnIndex),this.moveTo(e)},down:function(){var e=t.getNext(this.taskId);t.isTaskExists(e)&&this.moveTo(new t.$keyboardNavigation.TaskCell(e,this.columnIndex))},left:function(){this.columnIndex>0&&this.moveTo(new t.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex-1))},right:function(){var e=t.getGridColumns();this.columnIndex<e.length-1&&this.moveTo(new t.$keyboardNavigation.TaskCell(this.taskId,this.columnIndex+1))},end:function(){var e=t.getGridColumns();this.moveTo(new t.$keyboardNavigation.TaskCell(this.taskId,e.length-1))},home:function(){this.moveTo(new t.$keyboardNavigation.TaskCell(this.taskId,0))},pagedown:function(){t.getVisibleTaskCount()&&this.moveTo(new t.$keyboardNavigation.TaskCell(t.getTaskByIndex(t.getVisibleTaskCount()-1).id,this.columnIndex))},pageup:function(){t.getVisibleTaskCount()&&this.moveTo(new t.$keyboardNavigation.TaskCell(t.getTaskByIndex(0).id,this.columnIndex))}}}),t.$keyboardNavigation.TaskCell.prototype.bindAll(t.$keyboardNavigation.TaskRow.prototype.keys),t.$keyboardNavigation.TaskCell.prototype.bindAll(t.$keyboardNavigation.TaskCell.prototype.keys)}(t),ot(t),function(t){t.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new t.$keyboardNavigation.GanttNode,enable:function(){this.isActive=!0,this.setActiveNode(this.getActiveNode())},disable:function(){this.isActive=!1},isEnabled:function(){return!!this.isActive},getDefaultNode:function(){var e;return(e=t.config.keyboard_navigation_cells?new t.$keyboardNavigation.TaskCell:new t.$keyboardNavigation.TaskRow).isValid()||(e=e.fallback()),e},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode())},getActiveNode:function(){var t=this.activeNode;return t&&!t.isValid()&&(t=t.fallback()),t},fromDomElement:function(e){for(var n=[t.$keyboardNavigation.TaskRow,t.$keyboardNavigation.TaskCell,t.$keyboardNavigation.HeaderCell],i=0;i<n.length;i++)if(n[i].prototype.fromDomElement){var a=n[i].prototype.fromDomElement(e);if(a)return a}return null},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode)},setActiveNode:function(t){var e=!0;this.activeNode&&this.activeNode.compareTo(t)&&(e=!1),this.isEnabled()&&(e&&this.blurNode(this.activeNode),this.activeNode=t,this.focusNode(this.activeNode,!e))},focusNode:function(t,e){t&&t.focus&&t.focus(e)},blurNode:function(t){t&&t.blur&&t.blur()},keyDownHandler:function(e){if(!t.$keyboardNavigation.isModal()&&this.isEnabled()&&!e.defaultPrevented){var n=this.globalNode,i=t.$keyboardNavigation.shortcuts.getCommandFromEvent(e),a=this.getActiveNode();!1!==t.$keyboardNavigation.facade.callEvent("onKeyDown",[i,e])&&(a?a.findHandler(i)?a.doAction(i,e):n.findHandler(i)&&n.doAction(i,e):this.setDefaultNode())}},_timeout:null,awaitsFocus:function(){return null!==this._timeout},delay:function(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(t.bind((function(){this._timeout=null,e()}),this),n||1)},clearDelay:function(){clearTimeout(this._timeout)}}}(t),function(){var e=t.$keyboardNavigation.dispatcher;e.isTaskFocused=function(n){var i=e.activeNode;return(i instanceof t.$keyboardNavigation.TaskRow||i instanceof t.$keyboardNavigation.TaskCell)&&i.taskId==n};var n=function(n){if(t.config.keyboard_navigation&&(t.config.keyboard_navigation_cells||!r(n))&&!s(n)&&!function(t){return!!R(t.target,".gantt_cal_light")}(n))return e.keyDownHandler(n)},i=function(n){if(e.$preventDefault)return n.preventDefault(),t.$container.blur(),!1;e.awaitsFocus()||e.focusGlobalNode()},a=function(){if(!e.isEnabled())return;const n=!P(document.activeElement,t.$container)&&"body"!=document.activeElement.localName;var i=e.getActiveNode();if(i&&!n){var a,r,s=i.getNode();s&&s.parentNode&&(a=s.parentNode.scrollTop,r=s.parentNode.scrollLeft),i.focus(!0),s&&s.parentNode&&(s.parentNode.scrollTop=a,s.parentNode.scrollLeft=r)}};function r(t){return!!R(t.target,".gantt_grid_editor_placeholder")}function s(t){return!!R(t.target,".no_keyboard_navigation")}function o(n){if(!t.config.keyboard_navigation||!t.config.keyboard_navigation_cells&&r(n))return!0;if(!s(n)){var i,a=e.fromDomElement(n);a&&(e.activeNode instanceof t.$keyboardNavigation.TaskCell&&P(n.target,t.$task)&&(a=new t.$keyboardNavigation.TaskCell(a.taskId,e.activeNode.columnIndex)),i=a),i?e.isEnabled()?e.delay((function(){e.setActiveNode(i)})):e.activeNode=i:(e.$preventDefault=!0,setTimeout((function(){e.$preventDefault=!1}),300))}}t.attachEvent("onDataRender",(function(){t.config.keyboard_navigation&&a()})),t.attachEvent("onGanttRender",(function(){t.eventRemove(t.$root,"keydown",n),t.eventRemove(t.$container,"focus",i),t.eventRemove(t.$container,"mousedown",o),t.config.keyboard_navigation?(t.event(t.$root,"keydown",n),t.event(t.$container,"focus",i),t.event(t.$container,"mousedown",o),t.$container.setAttribute("tabindex","0")):t.$container.removeAttribute("tabindex")}));var l=t.attachEvent("onGanttReady",(function(){if(t.detachEvent(l),t.$data.tasksStore.attachEvent("onStoreUpdated",(function(n){if(t.config.keyboard_navigation&&e.isEnabled()){const i=e.getActiveNode(),r=t.$ui.getView("grid"),s=r.getItemTop(n),o=r.$grid_data.scrollTop,l=o+r.$grid_data.getBoundingClientRect().height;i&&i.taskId==n&&o<=s&&l>=s&&a()}})),t._smart_render){var n=t._smart_render._redrawTasks;t._smart_render._redrawTasks=function(i,a){if(t.config.keyboard_navigation&&e.isEnabled()){var r=e.getActiveNode();if(r&&void 0!==r.taskId){for(var s=!1,o=0;o<a.length;o++)if(a[o].id==r.taskId&&a[o].start_date){s=!0;break}s||a.push(t.getTask(r.taskId))}}return n.apply(this,arguments)}}}));let c=null,d=!1;t.attachEvent("onTaskCreated",(function(t){return c=t.id,!0})),t.attachEvent("onAfterTaskAdd",(function(n,i){if(!t.config.keyboard_navigation)return!0;if(e.isEnabled()){if(n==c&&(d=!0,setTimeout((()=>{d=!1,c=null}))),d&&i.type==t.config.types.placeholder)return;var a=0,r=e.activeNode;r instanceof t.$keyboardNavigation.TaskCell&&(a=r.columnIndex);var s=t.config.keyboard_navigation_cells?t.$keyboardNavigation.TaskCell:t.$keyboardNavigation.TaskRow;i.type==t.config.types.placeholder&&!1===t.config.placeholder_task.focusOnCreate||e.setActiveNode(new s(n,a))}})),t.attachEvent("onTaskIdChange",(function(n,i){if(!t.config.keyboard_navigation)return!0;var a=e.activeNode;return e.isTaskFocused(n)&&(a.taskId=i),!0}));var u=setInterval((function(){t.config.keyboard_navigation&&(e.isEnabled()||e.enable())}),500);function h(e){var n={gantt:t.$keyboardNavigation.GanttNode,headerCell:t.$keyboardNavigation.HeaderCell,taskRow:t.$keyboardNavigation.TaskRow,taskCell:t.$keyboardNavigation.TaskCell};return n[e]||n.gantt}function _(e){for(var n=t.getGridColumns(),i=0;i<n.length;i++)if(n[i].name==e)return i;return 0}t.attachEvent("onDestroy",(function(){clearInterval(u)}));var f={};q(f),t.mixin(f,{addShortcut:function(t,e,n){var i=h(n);i&&i.prototype.bind(t,e)},getShortcutHandler:function(e,n){var i=t.$keyboardNavigation.shortcuts.parse(e);if(i.length)return f.getCommandHandler(i[0],n)},getCommandHandler:function(t,e){var n=h(e);if(n&&t)return n.prototype.findHandler(t)},removeShortcut:function(t,e){var n=h(e);n&&n.prototype.unbind(t)},focus:function(t){var n,i=t?t.type:null,a=h(i);switch(i){case"taskCell":n=new a(t.id,_(t.column));break;case"taskRow":n=new a(t.id);break;case"headerCell":n=new a(_(t.column))}e.delay((function(){n?e.setActiveNode(n):(e.enable(),e.getActiveNode()?e.awaitsFocus()||e.enable():e.setDefaultNode())}))},getActiveNode:function(){if(e.isEnabled()){var n=e.getActiveNode(),i=(r=n)instanceof t.$keyboardNavigation.GanttNode?"gantt":r instanceof t.$keyboardNavigation.HeaderCell?"headerCell":r instanceof t.$keyboardNavigation.TaskRow?"taskRow":r instanceof t.$keyboardNavigation.TaskCell?"taskCell":null,a=t.getGridColumns();switch(i){case"taskCell":return{type:"taskCell",id:n.taskId,column:a[n.columnIndex].name};case"taskRow":return{type:"taskRow",id:n.taskId};case"headerCell":return{type:"headerCell",column:a[n.index].name}}}var r;return null}}),t.$keyboardNavigation.facade=f,t.ext.keyboardNavigation=f,t.focus=function(){f.focus()},t.addShortcut=f.addShortcut,t.getShortcutHandler=f.getShortcutHandler,t.removeShortcut=f.removeShortcut}()})(t)},quick_info:function(t){t.ext||(t.ext={}),t.ext.quickInfo=new lt(t),t.config.quickinfo_buttons=["icon_edit","icon_delete"],t.config.quick_info_detached=!0,t.config.show_quick_info=!0,t.templates.quick_info_title=function(t,e,n){return n.text.substr(0,50)},t.templates.quick_info_content=function(t,e,n){return n.details||n.text},t.templates.quick_info_date=function(e,n,i){return t.templates.task_time(e,n,i)},t.templates.quick_info_class=function(t,e,n){return""},t.attachEvent("onTaskClick",(function(e,n){return t.utils.dom.closest(n.target,".gantt_add")||setTimeout((function(){t.ext.quickInfo.show(e)}),0),!0}));const e=["onViewChange","onLightbox","onBeforeTaskDelete","onBeforeDrag"],n=function(){return t.ext.quickInfo.hide(),!0};for(let a=0;a<e.length;a++)t.attachEvent(e[a],n);function i(){return t.ext.quickInfo.hide(),t.ext.quickInfo._quickInfoBox=null,!0}t.attachEvent("onEmptyClick",(function(e){let i=!0;const a=document.querySelector(".gantt_cal_quick_info");a&&t.utils.dom.isChildOf(e.target,a)&&(i=!1),i&&n()})),t.attachEvent("onGanttReady",i),t.attachEvent("onDestroy",i),t.event(window,"keydown",(function(e){27===e.keyCode&&t.ext.quickInfo.hide()})),t.showQuickInfo=function(){t.ext.quickInfo.show.apply(t.ext.quickInfo,arguments)},t.hideQuickInfo=function(){t.ext.quickInfo.hide.apply(t.ext.quickInfo,arguments)}},tooltip:function(t){t.config.tooltip_timeout=30,t.config.tooltip_offset_y=20,t.config.tooltip_offset_x=10,t.config.tooltip_hide_timeout=30;const e=new bt(t);t.ext.tooltips=e,t.attachEvent("onGanttReady",(function(){e.tooltipFor({selector:"["+t.config.task_attribute+"]:not(.gantt_task_row)",html:e=>{if(t.config.touch&&!t.config.touch_tooltip)return;const n=t.locate(e);if(t.isTaskExists(n)){const e=t.getTask(n);return t.templates.tooltip_text(e.start_date,e.end_date,e)}return null},global:!1})})),t.attachEvent("onDestroy",(function(){e.destructor()})),t.attachEvent("onLightbox",(function(){e.hideTooltip()})),t.attachEvent("onBeforeTooltip",(function(){if(t.getState().link_source_id)return!1})),t.attachEvent("onGanttScroll",(function(){e.hideTooltip()}))},undo:function(t){const e=new St(t),n=new wt(e,t);function i(t,e,n){t&&(t.id===e&&(t.id=n),t.parent===e&&(t.parent=n))}function a(t,e,n){i(t.value,e,n),i(t.oldValue,e,n)}function r(t,e,n){t&&(t.source===e&&(t.source=n),t.target===e&&(t.target=n))}function s(t,e,n){r(t.value,e,n),r(t.oldValue,e,n)}function o(t,n,i){const r=e;for(let e=0;e<t.length;e++){const o=t[e];for(let t=0;t<o.commands.length;t++)o.commands[t].entity===r.command.entity.task?a(o.commands[t],n,i):o.commands[t].entity===r.command.entity.link&&s(o.commands[t],n,i)}}function l(t,n,i){const a=e;for(let e=0;e<t.length;e++){const r=t[e];for(let t=0;t<r.commands.length;t++){const e=r.commands[t];e.entity===a.command.entity.link&&(e.value&&e.value.id===n&&(e.value.id=i),e.oldValue&&e.oldValue.id===n&&(e.oldValue.id=i))}}}t.config.undo=!0,t.config.redo=!0,t.config.undo_types={link:"link",task:"task"},t.config.undo_actions={update:"update",remove:"remove",add:"add",move:"move"},t.ext||(t.ext={}),t.ext.undo={undo:()=>e.undo(),redo:()=>e.redo(),getUndoStack:()=>e.getUndoStack(),setUndoStack:t=>e.setUndoStack(t),getRedoStack:()=>e.getRedoStack(),setRedoStack:t=>e.setRedoStack(t),clearUndoStack:()=>e.clearUndoStack(),clearRedoStack:()=>e.clearRedoStack(),saveState:(t,e)=>n.store(t,e,!0),getInitialState:(e,i)=>i===t.config.undo_types.link?n.getInitialLink(e):n.getInitialTask(e)},t.undo=t.ext.undo.undo,t.redo=t.ext.undo.redo,t.getUndoStack=t.ext.undo.getUndoStack,t.getRedoStack=t.ext.undo.getRedoStack,t.clearUndoStack=t.ext.undo.clearUndoStack,t.clearRedoStack=t.ext.undo.clearRedoStack,t.attachEvent("onTaskIdChange",((t,n)=>{const i=e;o(i.getUndoStack(),t,n),o(i.getRedoStack(),t,n)})),t.attachEvent("onLinkIdChange",((t,n)=>{const i=e;l(i.getUndoStack(),t,n),l(i.getRedoStack(),t,n)})),t.attachEvent("onGanttReady",(()=>{e.updateConfigs()}))},marker:function(t){function e(e){if(!t.config.show_markers||!e.start_date)return!1;var n=t.getState();if(+e.start_date>+n.max_date||(!e.end_date||+e.end_date<+n.min_date)&&+e.start_date<+n.min_date)return;var i=document.createElement("div");i.setAttribute("data-marker-id",e.id);var a="gantt_marker";t.templates.marker_class&&(a+=" "+t.templates.marker_class(e)),e.css&&(a+=" "+e.css),t.templates.marker_class&&(a+=" "+t.templates.marker_class(e)),e.title&&(i.title=e.title),i.className=a;var r=t.posFromDate(e.start_date);i.style.left=r+"px";let s=Math.max(t.getRowTop(t.getVisibleTaskCount()),0)+"px";if(t.config.timeline_placeholder&&t.$task_data&&(s=t.$task_data.scrollHeight+"px"),i.style.height=s,e.end_date){var o=t.posFromDate(e.end_date);i.style.width=Math.max(o-r,0)+"px"}return e.text&&(i.innerHTML="<div class='gantt_marker_content' >"+e.text+"</div>"),i}function n(){if(t.$task_data){var e=document.createElement("div");e.className="gantt_marker_area",t.$task_data.appendChild(e),t.$marker_area=e}}t._markers||(t._markers=t.createDatastore({name:"marker",initItem:function(e){return e.id=e.id||t.uid(),e}})),t.config.show_markers=!0,t.attachEvent("onBeforeGanttRender",(function(){t.$marker_area||n()})),t.attachEvent("onDataRender",(function(){t.$marker_area||(n(),t.renderMarkers())})),t.attachEvent("onGanttLayoutReady",(function(){t.attachEvent("onBeforeGanttRender",(function(){n(),t.$services.getService("layers").createDataRender({name:"marker",defaultContainer:function(){return t.$marker_area}}).addLayer(e)}),{once:!0})})),t.getMarker=function(t){return this._markers?this._markers.getItem(t):null},t.addMarker=function(t){return this._markers.addItem(t)},t.deleteMarker=function(t){return!!this._markers.exists(t)&&(this._markers.removeItem(t),!0)},t.updateMarker=function(t){this._markers.refresh(t)},t._getMarkers=function(){return this._markers.getItems()},t.renderMarkers=function(){this._markers.refresh()}},multiselect:function(t){t.config.multiselect=!0,t.config.multiselect_one_level=!1,t._multiselect={_selected:{},_one_level:!1,_active:!0,_first_selected_when_shift:null,getDefaultSelected:function(){var t=this.getSelected();return t.length?t[t.length-1]:null},setFirstSelected:function(t){this._first_selected_when_shift=t},getFirstSelected:function(){return this._first_selected_when_shift},isActive:function(){return this.updateState(),this._active},updateState:function(){this._one_level=t.config.multiselect_one_level;var e=this._active;this._active=t.config.select_task,this._active!=e&&this.reset()},reset:function(){this._selected={}},setLastSelected:function(e){t.$data.tasksStore.silent((function(){var n=t.$data.tasksStore;e?n.select(e+""):n.unselect(null)}))},getLastSelected:function(){var e=t.$data.tasksStore.getSelectedId();return e&&t.isTaskExists(e)?e:null},select:function(e,n){return!!(e&&t.callEvent("onBeforeTaskMultiSelect",[e,!0,n])&&t.callEvent("onBeforeTaskSelected",[e]))&&(this._selected[e]=!0,this.setLastSelected(e),this.afterSelect(e),t.callEvent("onTaskMultiSelect",[e,!0,n]),t.callEvent("onTaskSelected",[e]),!0)},toggle:function(t,e){this._selected[t]?this.unselect(t,e):this.select(t,e)},unselect:function(e,n){e&&t.callEvent("onBeforeTaskMultiSelect",[e,!1,n])&&(this._selected[e]=!1,this.getLastSelected()==e&&this.setLastSelected(this.getDefaultSelected()),this.afterSelect(e),t.callEvent("onTaskMultiSelect",[e,!1,n]),t.callEvent("onTaskUnselected",[e]))},isSelected:function(e){return!(!t.isTaskExists(e)||!this._selected[e])},getSelected:function(){var e=[];for(var n in this._selected)this._selected[n]&&t.isTaskExists(n)?e.push(n):this._selected[n]=!1;return e.sort((function(e,n){return t.getGlobalTaskIndex(e)>t.getGlobalTaskIndex(n)?1:-1})),e},forSelected:function(t){for(var e=this.getSelected(),n=0;n<e.length;n++)t(e[n])},isSameLevel:function(e){if(!this._one_level)return!0;var n=this.getLastSelected();return!n||!t.isTaskExists(n)||!t.isTaskExists(e)||t.calculateTaskLevel(t.getTask(n))==t.calculateTaskLevel(t.getTask(e))},afterSelect:function(e){t.isTaskExists(e)&&t._quickRefresh((function(){t.refreshTask(e)}))},doSelection:function(e){if(!this.isActive()||t._is_icon_open_click(e))return!1;var n=t.locate(e);if(!n||!t.callEvent("onBeforeMultiSelect",[e]))return!1;var i=this.getSelected(),a=this.getFirstSelected(),r=!1,s=this.getLastSelected(),o=t.config.multiselect,l=function(){var a=t.ext.inlineEditors,r=a.getState(),s=a.locateCell(e.target);t.config.inline_editors_multiselect_open&&s&&a.getEditorConfig(s.columnName)&&(a.isVisible()&&r.id==s.id&&r.columnName==s.columnName||a.startEdit(s.id,s.columnName)),this.setFirstSelected(n),this.isSelected(n)||this.select(n,e),i=this.getSelected();for(var o=0;o<i.length;o++)i[o]!==n&&this.unselect(i[o],e)}.bind(this),c=function(){if(s){if(n){var i=t.getGlobalTaskIndex(this.getFirstSelected()),o=t.getGlobalTaskIndex(n),l=t.getGlobalTaskIndex(s);-1!=i&&-1!=l||(i=o,this.reset());for(var c=s;t.getGlobalTaskIndex(c)!==i;)this.unselect(c,e),c=i>l?t.getNext(c):t.getPrev(c);for(c=n;t.getGlobalTaskIndex(c)!==i;)this.select(c,e)&&!r&&(r=!0,a=c),c=i>o?t.getNext(c):t.getPrev(c)}}else s=n}.bind(this);return o&&(e.ctrlKey||e.metaKey)?(this.isSelected(n)||this.setFirstSelected(n),n&&this.toggle(n,e)):o&&e.shiftKey?(t.isTaskExists(this.getFirstSelected())&&null!==this.getFirstSelected()||this.setFirstSelected(n),i.length?c():l()):l(),this.isSelected(n)?this.setLastSelected(n):a?n==s&&this.setLastSelected(e.shiftKey?a:this.getDefaultSelected()):this.setLastSelected(null),this.getSelected().length||this.setLastSelected(null),this.getLastSelected()&&this.isSelected(this.getFirstSelected())||this.setFirstSelected(this.getLastSelected()),!0}},function(){var e=t.selectTask;t.selectTask=function(n){if(!(n=nt(n,this.config.root_id)))return!1;var i=t._multiselect,a=n;return i.isActive()?(i.select(n,null)&&i.setLastSelected(n),i.setFirstSelected(i.getLastSelected())):a=e.call(this,n),a};var n=t.unselectTask;t.unselectTask=function(e){var i=t._multiselect,a=i.isActive();(e=e||i.getLastSelected())&&a&&(i.unselect(e,null),e==i.getLastSelected()&&i.setLastSelected(null),t.refreshTask(e),i.setFirstSelected(i.getLastSelected()));var r=e;return a||(r=n.call(this,e)),r},t.toggleTaskSelection=function(e){var n=t._multiselect;e&&n.isActive()&&(n.toggle(e),n.setFirstSelected(n.getLastSelected()))},t.getSelectedTasks=function(){var e=t._multiselect;return e.isActive(),e.getSelected()},t.eachSelectedTask=function(t){return this._multiselect.forSelected(t)},t.isSelectedTask=function(t){return this._multiselect.isSelected(t)},t.getLastSelectedTask=function(){return this._multiselect.getLastSelected()},t.attachEvent("onGanttReady",(function(){var e=t.$data.tasksStore.isSelected;t.$data.tasksStore.isSelected=function(n){return t._multiselect.isActive()?t._multiselect.isSelected(n):e.call(this,n)}}))}(),t.attachEvent("onTaskIdChange",(function(e,n){var i=t._multiselect;if(!i.isActive())return!0;t.isSelectedTask(e)&&(i.unselect(e,null),i.select(n,null))})),t.attachEvent("onAfterTaskDelete",(function(e,n){var i=t._multiselect;if(!i.isActive())return!0;i._selected[e]&&(i._selected[e]=!1,i.setLastSelected(i.getDefaultSelected())),i.forSelected((function(e){t.isTaskExists(e)||i.unselect(e,null)}))})),t.attachEvent("onBeforeTaskMultiSelect",(function(e,n,i){const a=t._multiselect;if(n&&a.isActive()){let n=t.getSelectedId(),r=null;n&&(r=t.getTask(n));let s=t.getTask(e),o=!1;if(r&&r.$level!=s.$level&&(o=!0),t.config.multiselect_one_level&&o&&!i.ctrlKey&&!i.shiftKey)return!0;if(a._one_level)return a.isSameLevel(e)}return!0})),t.attachEvent("onTaskClick",(function(e,n){return t._multiselect.doSelection(n)&&t.callEvent("onMultiSelect",[n]),!0}))},export_api:function(t){return t.ext=t.ext||{},t.ext.export_api=t.ext.export_api||{_apiUrl:"https://export.dhtmlx.com/gantt",_preparePDFConfigRaw(e,n){let i=null;e.start&&e.end&&(i={start_date:t.config.start_date,end_date:t.config.end_date},t.config.start_date=t.date.str_to_date(t.config.date_format)(e.start),t.config.end_date=t.date.str_to_date(t.config.date_format)(e.end)),e=t.mixin(e,{name:"gantt."+n,data:t.ext.export_api._serializeHtml()}),i&&(t.config.start_date=i.start_date,t.config.end_date=i.end_date)},_prepareConfigPDF:(e,n)=>(e=t.mixin(e||{},{name:"gantt."+n,data:t.ext.export_api._serializeAll(),config:t.config}),t.ext.export_api._fixColumns(e.config.columns),e),_pdfExportRouter(e,n){e&&e.raw?t.ext.export_api._preparePDFConfigRaw(e,n):e=t.ext.export_api._prepareConfigPDF(e,n),e.version=t.version,t.ext.export_api._sendToExport(e,n)},exportToPDF(e){t.ext.export_api._pdfExportRouter(e,"pdf")},exportToPNG(e){t.ext.export_api._pdfExportRouter(e,"png")},exportToICal(e){e=t.mixin(e||{},{name:"gantt.ical",data:t.ext.export_api._serializePlain().data,version:t.version}),t.ext.export_api._sendToExport(e,"ical")},exportToExcel(e){let n,i,a,r;e=e||{};const s=t.config.smart_rendering;if("base-colors"===e.visual&&(t.config.smart_rendering=!1),e.start||e.end){a=t.getState(),i=[t.config.start_date,t.config.end_date],r=t.getScrollState();const o=t.date.str_to_date(t.config.date_format);n=t.eachTask,e.start&&(t.config.start_date=o(e.start)),e.end&&(t.config.end_date=o(e.end)),t.render(),t.config.smart_rendering=s,t.eachTask=t.ext.export_api._eachTaskTimed(t.config.start_date,t.config.end_date)}else"base-colors"===e.visual&&(t.render(),t.config.smart_rendering=s);t._no_progress_colors="base-colors"===e.visual,(e=t.mixin(e,{name:"gantt.xlsx",title:"Tasks",data:t.ext.export_api._serializeTimeline(e).data,columns:t.ext.export_api._serializeGrid({rawDates:!0}),version:t.version})).visual&&(e.scales=t.ext.export_api._serializeScales(e)),t.ext.export_api._sendToExport(e,"excel"),(e.start||e.end)&&(t.config.start_date=a.min_date,t.config.end_date=a.max_date,t.eachTask=n,t.render(),t.scrollTo(r.x,r.y),t.config.start_date=i[0],t.config.end_date=i[1])},exportToJSON(e){e=t.mixin(e||{},{name:"gantt.json",data:t.ext.export_api._serializeAll(),config:t.config,columns:t.ext.export_api._serializeGrid(),worktime:t.ext.export_api._getWorktimeSettings(),version:t.version}),t.ext.export_api._sendToExport(e,"json")},importFromExcel(e){try{const t=e.data;if(t instanceof File){const n=new FormData;n.append("file",t),e.data=n}}catch{}t.ext.export_api._sendImportAjaxExcel(e)},importFromMSProject(e){const n=e.data;try{if(n instanceof File){const t=new FormData;t.append("file",n),e.data=t}}catch{}t.ext.export_api._sendImportAjaxMSP(e)},importFromPrimaveraP6:e=>(e.type="primaveraP6-parse",t.importFromMSProject(e)),exportToMSProject(e){(e=e||{}).skip_circular_links=void 0===e.skip_circular_links||!!e.skip_circular_links;const n=t.templates.xml_format,i=t.templates.format_date,a=t.config.xml_date,r=t.config.date_format,s="%d-%m-%Y %H:%i:%s";t.config.xml_date=s,t.config.date_format=s,t.templates.xml_format=t.date.date_to_str(s),t.templates.format_date=t.date.date_to_str(s);const o=t.ext.export_api._serializeAll();t.ext.export_api._customProjectProperties(o,e),t.ext.export_api._customTaskProperties(o,e),e.skip_circular_links&&t.ext.export_api._clearRecLinks(o),e=t.ext.export_api._exportConfig(o,e),t.ext.export_api._sendToExport(e,e.type||"msproject"),t.config.xml_date=a,t.config.date_format=r,t.templates.xml_format=n,t.templates.format_date=i,t.config.$custom_data=null,t.config.custom=null},exportToPrimaveraP6:e=>((e=e||{}).type="primaveraP6",t.exportToMSProject(e)),_fixColumns(e){for(let n=0;n<e.length;n++)e[n].label=e[n].label||t.locale.labels["column_"+e[n].name],"string"==typeof e[n].width&&(e[n].width=1*e[n].width)},_xdr(e,n,i){t.ajax.post(e,n,i)},_markColumns(t){const e=t.config.columns;if(e)for(let n=0;n<e.length;n++)e[n].template&&(e[n].$template=!0)},_sendImportAjaxExcel(e){const n=e.server||t.ext.export_api._apiUrl,i=e.store||0,a=e.data,r=e.callback;a.append("type","excel-parse"),a.append("data",JSON.stringify({sheet:e.sheet||0})),i&&a.append("store",i);const s=new XMLHttpRequest;s.onreadystatechange=function(t){4===s.readyState&&0===s.status&&r&&r(null)},s.onload=function(){let t=null;if(!(s.status>400))try{t=JSON.parse(s.responseText)}catch{}r&&r(t)},s.open("POST",n,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(a)},_ajaxToExport(e,n,i){delete e.callback;const a=e.server||t.ext.export_api._apiUrl,r="type="+n+"&store=1&data="+encodeURIComponent(JSON.stringify(e));t.ext.export_api._xdr(a,r,(function(t){const e=t.xmlDoc||t;let n=null;if(!(e.status>400))try{n=JSON.parse(e.responseText)}catch{}i(n)}))},_serializableGanttConfig(e){const n=t.mixin({},e);return n.columns&&(n.columns=n.columns.map((function(e){const n=t.mixin({},e);return delete n.editor,n}))),delete n.editor_types,n},_sendToExport(e,n){const i=t.date.date_to_str(t.config.date_format||t.config.xml_date);if(e.skin||(e.skin=t.skin),e.config&&(e.config=t.copy(t.ext.export_api._serializableGanttConfig(e.config)),t.ext.export_api._markColumns(e,n),e.config.start_date&&e.config.end_date&&(e.config.start_date instanceof Date&&(e.config.start_date=i(e.config.start_date)),e.config.end_date instanceof Date&&(e.config.end_date=i(e.config.end_date)))),e.callback)return t.ext.export_api._ajaxToExport(e,n,e.callback);const a=t.ext.export_api._createHiddenForm();a.firstChild.action=e.server||t.ext.export_api._apiUrl,a.firstChild.childNodes[0].value=JSON.stringify(e),a.firstChild.childNodes[1].value=n,a.firstChild.submit()},_createHiddenForm(){if(!t.ext.export_api._hidden_export_form){const e=t.ext.export_api._hidden_export_form=document.createElement("div");e.style.display="none",e.innerHTML="<form method='POST' target='_blank'><textarea name='data' style='width:0px; height:0px;' readonly='true'></textarea><input type='hidden' name='type' value=''></form>",document.body.appendChild(e)}return t.ext.export_api._hidden_export_form},_copyObjectBase(e){const n={start_date:void 0,end_date:void 0,constraint_date:void 0,deadline:void 0};for(const t in e)"$"!==t.charAt(0)&&"baselines"!==t&&(n[t]=e[t]);const i=t.templates.xml_format||t.templates.format_date;return n.start_date=i(n.start_date),n.end_date&&(n.end_date=i(n.end_date)),n.constraint_date&&(n.constraint_date=i(n.constraint_date)),n.deadline&&(n.deadline=i(n.deadline)),n},_color_box:null,_color_hash:{},_getStyles(e){if(t.ext.export_api._color_box||(t.ext.export_api._color_box=document.createElement("DIV"),t.ext.export_api._color_box.style.cssText="position:absolute; display:none;",document.body.appendChild(t.ext.export_api._color_box)),t.ext.export_api._color_hash[e])return t.ext.export_api._color_hash[e];t.ext.export_api._color_box.className=e;const n=t.ext.export_api._getColor(t.ext.export_api._color_box,"color"),i=t.ext.export_api._getColor(t.ext.export_api._color_box,"backgroundColor");return t.ext.export_api._color_hash[e]=n+";"+i},_getMinutesWorktimeSettings(t){const e=[];return t.forEach((function(t){e.push(t.startMinute),e.push(t.endMinute)})),e},_getWorktimeSettings(){const e={hours:[0,24],minutes:null,dates:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0}};let n;if(t.config.work_time){const i=t._working_time_helper;if(i&&i.get_calendar)n=i.get_calendar();else if(i)n={hours:i.hours,minutes:null,dates:i.dates};else if(t.config.worktimes&&t.config.worktimes.global){const e=t.config.worktimes.global;if(e.parsed){n={hours:null,minutes:t.ext.export_api._getMinutesWorktimeSettings(e.parsed.hours),dates:{}};for(const i in e.parsed.dates)Array.isArray(e.parsed.dates[i])?n.dates[i]=t.ext.export_api._getMinutesWorktimeSettings(e.parsed.dates[i]):n.dates[i]=e.parsed.dates[i]}else n={hours:e.hours,minutes:null,dates:e.dates}}else n=e}else n=e;return n},_eachTaskTimed:(e,n)=>function(i,a,r){a=a||t.config.root_id,r=r||t;const s=t.getChildren(a);if(s)for(let o=0;o<s.length;o++){const a=t._pull[s[o]];(!e||a.end_date>e)&&(!n||a.start_date<n)&&i.call(r,a),t.hasChild(a.id)&&t.eachTask(i,a.id,r)}},_originalCopyObject:t.json._copyObject,_copyObjectPlain(e){const n=t.templates.task_text(e.start_date,e.end_date,e),i=t.ext.export_api._copyObjectBase(e);return i.text=n||i.text,i},_getColor(t,e){const n=t.currentStyle?t.currentStyle[e]:getComputedStyle(t,null)[e],i=n.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+)/i);return(i&&4===i.length?("0"+parseInt(i[1],10).toString(16)).slice(-2)+("0"+parseInt(i[2],10).toString(16)).slice(-2)+("0"+parseInt(i[3],10).toString(16)).slice(-2):n).replace("#","")},_copyObjectTable(e){const n=t.date.date_to_str("%Y-%m-%dT%H:%i:%s.000Z"),i=t.ext.export_api._copyObjectColumns(e,t.ext.export_api._copyObjectPlain(e));i.start_date&&(i.start_date=n(e.start_date)),i.end_date&&(i.end_date=n(e.end_date));const a=t._day_index_by_date?t._day_index_by_date:t.columnIndexByDate;i.$start=a.call(t,e.start_date),i.$end=a.call(t,e.end_date);let r=0;const s=t.getScale().width;if(s.indexOf(0)>-1){let t=0;for(;t<i.$start;t++)s[t]||r++;for(i.$start-=r;t<i.$end;t++)s[t]||r++;i.$end-=r}i.$level=e.$level,i.$type=e.$rendered_type;const o=t.templates;return i.$text=o.task_text(e.start,e.end_date,e),i.$left=o.leftside_text?o.leftside_text(e.start,e.end_date,e):"",i.$right=o.rightside_text?o.rightside_text(e.start,e.end_date,e):"",i},_copyObjectColors(e){const n=t.ext.export_api._copyObjectTable(e),i=t.getTaskNode(e.id);if(i&&i.firstChild){let e=t.ext.export_api._getColor(t._no_progress_colors?i:i.firstChild,"backgroundColor");"363636"===e&&(e=t.ext.export_api._getColor(i,"backgroundColor")),n.$color=e}else e.color&&(n.$color=e.color);return n},_copyObjectColumns(e,n){for(let i=0;i<t.config.columns.length;i++){const a=t.config.columns[i].template;if(a){let r=a(e);r instanceof Date&&(r=t.templates.date_grid(r,e)),n["_"+i]=r}}return n},_copyObjectAll(e){const n=t.ext.export_api._copyObjectBase(e),i=["leftside_text","rightside_text","task_text","progress_text","task_class"];for(let a=0;a<i.length;a++){const r=t.templates[i[a]];r&&(n["$"+a]=r(e.start_date,e.end_date,e))}return t.ext.export_api._copyObjectColumns(e,n),n.open=e.$open,n},_serializeHtml(){const e=t.config.smart_scales,n=t.config.smart_rendering;(e||n)&&(t.config.smart_rendering=!1,t.config.smart_scales=!1,t.render());const i=t.$container.parentNode.innerHTML;return(e||n)&&(t.config.smart_scales=e,t.config.smart_rendering=n,t.render()),i},_serializeAll(){t.json._copyObject=t.ext.export_api._copyObjectAll;const e=t.ext.export_api._exportSerialize();return t.json._copyObject=t.ext.export_api._originalCopyObject,e},_serializePlain(){const e=t.templates.xml_format,n=t.templates.format_date;t.templates.xml_format=t.date.date_to_str("%Y%m%dT%H%i%s",!0),t.templates.format_date=t.date.date_to_str("%Y%m%dT%H%i%s",!0),t.json._copyObject=t.ext.export_api._copyObjectPlain;const i=t.ext.export_api._exportSerialize();return t.templates.xml_format=e,t.templates.format_date=n,t.json._copyObject=t.ext.export_api._originalCopyObject,delete i.links,i},_getRaw(){if(t._scale_helpers){const e=t._get_scales(),n=t.config.min_column_width,i=t._get_resize_options().x?Math.max(t.config.autosize_min_width,0):t.config.$task.offsetWidth,a=t.config.config.scale_height-1;return t._scale_helpers.prepareConfigs(e,n,i,a)}{const e=t.$ui.getView("timeline");if(e){let n=e.$config.width;"x"!==t.config.autosize&&"xy"!==t.config.autosize||(n=Math.max(t.config.autosize_min_width,0));const i=t.getState(),a=e._getScales(),r=t.config.min_column_width,s=t.config.scale_height-1,o=t.config.rtl;return e.$scaleHelper.prepareConfigs(a,r,n,s,i.min_date,i.max_date,o)}}},_serializeTimeline(e){t.json._copyObject=e.visual?t.ext.export_api._copyObjectColors:t.ext.export_api._copyObjectTable;const n=t.ext.export_api._exportSerialize();if(t.json._copyObject=t.ext.export_api._originalCopyObject,delete n.links,e.cellColors){const e=t.templates.timeline_cell_class||t.templates.task_cell_class;if(e){const i=t.ext.export_api._getRaw();let a=i[0].trace_x;for(let t=1;t<i.length;t++)i[t].trace_x.length>a.length&&(a=i[t].trace_x);for(let r=0;r<n.data.length;r++){n.data[r].styles=[];const i=t.getTask(n.data[r].id);for(let s=0;s<a.length;s++){const o=e(i,a[s]);o&&n.data[r].styles.push({index:s,styles:t.ext.export_api._getStyles(o)})}}}}return n},_serializeScales(e){const n=[],i=t.ext.export_api._getRaw();let a=1/0,r=0;for(let t=0;t<i.length;t++)a=Math.min(a,i[t].col_width);for(let s=0;s<i.length;s++){let o=0,l=0;const c=[];n.push(c);const d=i[s];r=Math.max(r,d.trace_x.length);const u=d.format||d.template||(d.date?t.date.date_to_str(d.date):t.config.date_scale);for(let n=0;n<d.trace_x.length;n++){const i=d.trace_x[n];l=o+Math.round(d.width[n]/a);const r={text:u(i),start:o,end:l,styles:""};if(e.cellColors){const e=d.css||t.templates.scaleCell_class;if(e){const n=e(i);n&&(r.styles=t.ext.export_api._getStyles(n))}}c.push(r),o=l}}return{width:r,height:n.length,data:n}},_serializeGrid(e){t.exportMode=!0;const n=[],i=t.config.columns;let a=0;for(let r=0;r<i.length;r++)"add"!==i[r].name&&"buttons"!==i[r].name&&(n[a]={id:i[r].template?"_"+r:i[r].name,header:i[r].label||t.locale.labels["column_"+i[r].name],width:i[r].width?Math.floor(i[r].width/4):"",tree:i[r].tree||!1},"duration"===i[r].name&&(n[a].type="number"),"start_date"!==i[r].name&&"end_date"!==i[r].name||(n[a].type="date",e&&e.rawDates&&(n[a].id=i[r].name)),a++);return t.exportMode=!1,n},_exportSerialize(){t.exportMode=!0;const e=t.templates.xml_format,n=t.templates.format_date;t.templates.xml_format=t.templates.format_date=t.date.date_to_str(t.config.date_format||t.config.xml_date);const i=t.serialize();return t.templates.xml_format=e,t.templates.format_date=n,t.exportMode=!1,i},_setLevel(t){for(let e=0;e<t.length;e++){0==t[e].parent&&(t[e]._lvl=1);for(let n=e+1;n<t.length;n++)t[e].id==t[n].parent&&(t[n]._lvl=t[e]._lvl+1)}},_clearLevel(t){for(let e=0;e<t.length;e++)delete t[e]._lvl},_clearRecLinks(e){t.ext.export_api._setLevel(e.data);const n={};for(let t=0;t<e.data.length;t++)n[e.data[t].id]=e.data[t];const i={};for(let r=0;r<e.links.length;r++){const a=e.links[r];t.isTaskExists(a.source)&&t.isTaskExists(a.target)&&n[a.source]&&n[a.target]&&(i[a.id]=a)}for(const r in i)t.ext.export_api._makeLinksSameLevel(i[r],n);const a={};for(const r in n)t.ext.export_api._clearCircDependencies(n[r],i,n,{},a,null);Object.keys(i)&&t.ext.export_api._clearLinksSameLevel(i,n);for(let t=0;t<e.links.length;t++)i[e.links[t].id]||(e.links.splice(t,1),t--);t.ext.export_api._clearLevel(e.data)},_clearCircDependencies(e,n,i,a,r,s){const o=e.$_source;if(!o)return;a[e.id]&&t.ext.export_api._onCircDependencyFind(s,n,a,r),a[e.id]=!0;const l={};for(let c=0;c<o.length;c++){if(r[o[c]])continue;const e=n[o[c]],s=i[e._target];l[s.id]&&t.ext.export_api._onCircDependencyFind(e,n,a,r),l[s.id]=!0,t.ext.export_api._clearCircDependencies(s,n,i,a,r,e)}a[e.id]=!1},_onCircDependencyFind(e,n,i,a){e&&(t.callEvent("onExportCircularDependency",[e.id,e])&&delete n[e.id],delete i[e._source],delete i[e._target],a[e.id]=!0)},_makeLinksSameLevel(t,e){let n,i;const a={target:e[t.target],source:e[t.source]};if(a.target._lvl!=a.source._lvl){a.target._lvl<a.source._lvl?(n="source",i=a.target._lvl):(n="target",i=a.source._lvl);do{const t=e[a[n].parent];if(!t)break;a[n]=t}while(a[n]._lvl<i);let t=e[a.source.parent],r=e[a.target.parent];for(;t&&r&&t.id!=r.id;)a.source=t,a.target=r,t=e[a.source.parent],r=e[a.target.parent]}t._target=a.target.id,t._source=a.source.id,a.target.$_target||(a.target.$_target=[]),a.target.$_target.push(t.id),a.source.$_source||(a.source.$_source=[]),a.source.$_source.push(t.id)},_clearLinksSameLevel(t,e){for(const n in t)delete t[n]._target,delete t[n]._source;for(const n in e)delete e[n].$_source,delete e[n].$_target},_customProjectProperties(e,n){if(n&&n.project){for(const e in n.project)t.config.$custom_data||(t.config.$custom_data={}),t.config.$custom_data[e]="function"==typeof n.project[e]?n.project[e](t.config):n.project[e];delete n.project}},_customTaskProperties(e,n){n&&n.tasks&&(e.data.forEach((function(e){for(const i in n.tasks)e.$custom_data||(e.$custom_data={}),e.$custom_data[i]="function"==typeof n.tasks[i]?n.tasks[i](e,t.config):n.tasks[i]})),delete n.tasks)},_exportConfig(e,n){const i=n.name||"gantt.xml";delete n.name,t.config.custom=n;const a=t.ext.export_api._getWorktimeSettings(),r=t.getSubtaskDates();if(r.start_date&&r.end_date){const e=t.templates.format_date||t.templates.xml_format;t.config.start_end={start_date:e(r.start_date),end_date:e(r.end_date)}}const s=void 0!==n.auto_scheduling&&!!n.auto_scheduling,o={callback:n.callback||null,config:t.config,data:e,manual:s,name:i,worktime:a};for(const t in n)o[t]=n[t];return o},_sendImportAjaxMSP(e){const n=e.server||t.ext.export_api._apiUrl,i=e.store||0,a=e.data,r=e.callback,s={durationUnit:e.durationUnit||void 0,projectProperties:e.projectProperties||void 0,taskProperties:e.taskProperties||void 0};a.append("type",e.type||"msproject-parse"),a.append("data",JSON.stringify(s)),i&&a.append("store",i);const o=new XMLHttpRequest;o.onreadystatechange=function(t){4===o.readyState&&0===o.status&&r&&r(null)},o.onload=function(){let t=null;if(!(o.status>400))try{t=JSON.parse(o.responseText)}catch{}r&&r(t)},o.open("POST",n,!0),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(a)}},t.exportToPDF=t.ext.export_api.exportToPDF,t.exportToPNG=t.ext.export_api.exportToPNG,t.exportToICal=t.ext.export_api.exportToICal,t.exportToExcel=t.ext.export_api.exportToExcel,t.exportToJSON=t.ext.export_api.exportToJSON,t.importFromExcel=t.ext.export_api.importFromExcel,t.importFromMSProject=t.ext.export_api.importFromMSProject,t.exportToMSProject=t.ext.export_api.exportToMSProject,t.importFromPrimaveraP6=t.ext.export_api.importFromPrimaveraP6,t.exportToPrimaveraP6=t.ext.export_api.exportToPrimaveraP6,t.ext.export_api}},Et={KEY_CODES:{UP:38,DOWN:40,LEFT:37,RIGHT:39,SPACE:32,ENTER:13,DELETE:46,ESC:27,TAB:9}};class Ct{constructor(t){this.addExtension=(t,e)=>{this._extensions[t]=e},this.getExtension=t=>this._extensions[t],this._extensions={};for(const e in t)this._extensions[e]=t[e]}}const Dt=()=>({layout:{css:"gantt_container",rows:[{cols:[{view:"grid",scrollX:"scrollHor",scrollY:"scrollVer"},{resizer:!0,width:1},{view:"timeline",scrollX:"scrollHor",scrollY:"scrollVer"},{view:"scrollbar",id:"scrollVer"}]},{view:"scrollbar",id:"scrollHor",height:20}]},links:{finish_to_start:"0",start_to_start:"1",finish_to_finish:"2",start_to_finish:"3"},types:{task:"task",project:"project",milestone:"milestone"},auto_types:!1,duration_unit:"day",work_time:!1,correct_work_time:!1,skip_off_time:!1,cascade_delete:!0,autosize:!1,autosize_min_width:0,autoscroll:!0,autoscroll_speed:30,deepcopy_on_parse:!1,show_links:!0,show_task_cells:!0,static_background:!1,static_background_cells:!0,branch_loading:!1,branch_loading_property:"$has_child",show_loading:!1,show_chart:!0,show_grid:!0,min_duration:36e5,date_format:"%d-%m-%Y %H:%i",xml_date:void 0,start_on_monday:!0,server_utc:!1,show_progress:!0,fit_tasks:!1,select_task:!0,scroll_on_click:!0,smart_rendering:!0,preserve_scroll:!0,readonly:!1,container_resize_timeout:20,deadlines:!0,date_grid:"%Y-%m-%d",drag_links:!0,drag_progress:!0,drag_resize:!0,drag_project:!1,drag_move:!0,drag_mode:{resize:"resize",progress:"progress",move:"move",ignore:"ignore"},round_dnd_dates:!0,link_wrapper_width:20,link_arrow_size:12,root_id:0,autofit:!1,columns:[{name:"text",tree:!0,width:"*",resize:!0},{name:"start_date",align:"center",resize:!0},{name:"duration",align:"center"},{name:"add",width:44}],scale_offset_minimal:!0,inherit_scale_class:!1,scales:[{unit:"day",step:1,date:"%d %M"}],time_step:60,duration_step:1,task_date:"%d %F %Y",time_picker:"%H:%i",task_attribute:"data-task-id",link_attribute:"data-link-id",layer_attribute:"data-layer",buttons_left:["gantt_save_btn","gantt_cancel_btn"],_migrate_buttons:{dhx_save_btn:"gantt_save_btn",dhx_cancel_btn:"gantt_cancel_btn",dhx_delete_btn:"gantt_delete_btn"},buttons_right:["gantt_delete_btn"],lightbox:{sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"time",type:"duration",map_to:"auto"}],project_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",readonly:!0,map_to:"auto"}],milestone_sections:[{name:"description",height:70,map_to:"text",type:"textarea",focus:!0},{name:"type",type:"typeselect",map_to:"type"},{name:"time",type:"duration",single_date:!0,map_to:"auto"}]},drag_lightbox:!0,sort:!1,details_on_create:!0,details_on_dblclick:!0,initial_scroll:!0,task_scroll_offset:100,order_branch:!1,order_branch_free:!1,task_height:void 0,bar_height:"full",bar_height_padding:9,min_column_width:70,min_grid_column_width:70,grid_resizer_column_attribute:"data-column-index",keep_grid_width:!1,grid_resize:!1,grid_elastic_columns:!1,show_tasks_outside_timescale:!1,show_unscheduled:!0,resize_rows:!1,task_grid_row_resizer_attribute:"data-row-index",min_task_grid_row_height:30,row_height:36,readonly_property:"readonly",editable_property:"editable",calendar_property:"calendar_id",resource_calendars:{},dynamic_resource_calendars:!1,inherit_calendar:!1,type_renderers:{},open_tree_initially:!1,optimize_render:!0,prevent_default_scroll:!1,show_errors:!0,wai_aria_attributes:!0,smart_scales:!0,rtl:!1,placeholder_task:!1,horizontal_scroll_key:"shiftKey",drag_timeline:{useKey:void 0,ignore:".gantt_task_line, .gantt_task_link",render:!1},drag_multiple:!0,csp:"auto"});var At=typeof window<"u";const It={isIE:At&&(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0),isIE6:At&&!XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:At&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:At&&navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:At&&navigator.userAgent.indexOf("Opera")>=0,isChrome:At&&navigator.userAgent.indexOf("Chrome")>=0,isKHTML:At&&(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0),isFF:At&&navigator.userAgent.indexOf("Firefox")>=0,isIPad:At&&navigator.userAgent.search(/iPad/gi)>=0,isEdge:At&&-1!=navigator.userAgent.indexOf("Edge"),isNode:!At||typeof navigator>"u"||!1};function Mt(t){if("string"==typeof t||"number"==typeof t)return t;let e="";for(const n in t){let i="";t.hasOwnProperty(n)&&(i="string"==typeof t[n]?encodeURIComponent(t[n]):"number"==typeof t[n]?String(t[n]):encodeURIComponent(JSON.stringify(t[n])),i=n+"="+i,e.length&&(i="&"+i),e+=i)}return e}function Nt(t,e){var n={method:t};if(0===e.length)throw new Error("Arguments list of query is wrong.");if(1===e.length)return"string"==typeof e[0]?(n.url=e[0],n.async=!0):(n.url=e[0].url,n.async=e[0].async||!0,n.callback=e[0].callback,n.headers=e[0].headers),e[0].data?"string"!=typeof e[0].data?n.data=Mt(e[0].data):n.data=e[0].data:n.data="",n;switch(n.url=e[0],t){case"GET":case"DELETE":n.callback=e[1],n.headers=e[2];break;case"POST":case"PUT":e[1]?"string"!=typeof e[1]?n.data=Mt(e[1]):n.data=e[1]:n.data="",n.callback=e[2],n.headers=e[3]}return n}const Lt={date_to_str:(t,e,n)=>{t=t.replace(/%[a-zA-Z]/g,(t=>{switch(t){case"%d":return`"+to_fixed(date.get${e?"UTC":""}Date())+"`;case"%m":return`"+to_fixed((date.get${e?"UTC":""}Month()+1))+"`;case"%j":return`"+date.get${e?"UTC":""}Date()+"`;case"%n":return`"+(date.get${e?"UTC":""}Month()+1)+"`;case"%y":return`"+to_fixed(date.get${e?"UTC":""}FullYear()%100)+"`;case"%Y":return`"+date.get${e?"UTC":""}FullYear()+"`;case"%D":return`"+locale.date.day_short[date.get${e?"UTC":""}Day()]+"`;case"%l":return`"+locale.date.day_full[date.get${e?"UTC":""}Day()]+"`;case"%M":return`"+locale.date.month_short[date.get${e?"UTC":""}Month()]+"`;case"%F":return`"+locale.date.month_full[date.get${e?"UTC":""}Month()]+"`;case"%h":return`"+to_fixed((date.get${e?"UTC":""}Hours()+11)%12+1)+"`;case"%g":return`"+((date.get${e?"UTC":""}Hours()+11)%12+1)+"`;case"%G":return`"+date.get${e?"UTC":""}Hours()+"`;case"%H":return`"+to_fixed(date.get${e?"UTC":""}Hours())+"`;case"%i":return`"+to_fixed(date.get${e?"UTC":""}Minutes())+"`;case"%a":return`"+(date.get${e?"UTC":""}Hours()>11?"pm":"am")+"`;case"%A":return`"+(date.get${e?"UTC":""}Hours()>11?"PM":"AM")+"`;case"%s":return`"+to_fixed(date.get${e?"UTC":""}Seconds())+"`;case"%W":return'"+to_fixed(getISOWeek(date))+"';case"%w":return'"+to_fixed(getWeek(date))+"';default:return t}}));const i=new Function("date","to_fixed","locale","getISOWeek","getWeek",`return "${t}";`);return t=>i(t,n.date.to_fixed,n.locale,n.date.getISOWeek,n.date.getWeek)},str_to_date:(t,e,n)=>{let i="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);";const a=t.match(/%[a-zA-Z]/g);for(let o=0;o<a.length;o++)switch(a[o]){case"%j":case"%d":i+=`set[2]=temp[${o}]||1;`;break;case"%n":case"%m":i+=`set[1]=(temp[${o}]||1)-1;`;break;case"%y":i+=`set[0]=temp[${o}]*1+(temp[${o}]>50?1900:2000);`;break;case"%g":case"%G":case"%h":case"%H":i+=`set[3]=temp[${o}]||0;`;break;case"%i":i+=`set[4]=temp[${o}]||0;`;break;case"%Y":i+=`set[0]=temp[${o}]||0;`;break;case"%a":case"%A":i+=`set[3]=set[3]%12+((temp[${o}]||'').toLowerCase()=='am'?0:12);`;break;case"%s":i+=`set[5]=temp[${o}]||0;`;break;case"%M":i+=`set[1]=locale.date.month_short_hash[temp[${o}]]||0;`;break;case"%F":i+=`set[1]=locale.date.month_full_hash[temp[${o}]]||0;`}let r="set[0],set[1],set[2],set[3],set[4],set[5]";e&&(r=` Date.UTC(${r})`);const s=new Function("date","locale",`var set=[0,0,1,0,0,0]; ${i} return new Date(${r});`);return t=>s(t,n.locale)}},Pt={date_to_str:(t,e,n)=>i=>t.replace(/%[a-zA-Z]/g,(t=>{switch(t){case"%d":return e?n.date.to_fixed(i.getUTCDate()):n.date.to_fixed(i.getDate());case"%m":return e?n.date.to_fixed(i.getUTCMonth()+1):n.date.to_fixed(i.getMonth()+1);case"%j":return e?i.getUTCDate():i.getDate();case"%n":return e?i.getUTCMonth()+1:i.getMonth()+1;case"%y":return e?n.date.to_fixed(i.getUTCFullYear()%100):n.date.to_fixed(i.getFullYear()%100);case"%Y":return e?i.getUTCFullYear():i.getFullYear();case"%D":return e?n.locale.date.day_short[i.getUTCDay()]:n.locale.date.day_short[i.getDay()];case"%l":return e?n.locale.date.day_full[i.getUTCDay()]:n.locale.date.day_full[i.getDay()];case"%M":return e?n.locale.date.month_short[i.getUTCMonth()]:n.locale.date.month_short[i.getMonth()];case"%F":return e?n.locale.date.month_full[i.getUTCMonth()]:n.locale.date.month_full[i.getMonth()];case"%h":return e?n.date.to_fixed((i.getUTCHours()+11)%12+1):n.date.to_fixed((i.getHours()+11)%12+1);case"%g":return e?(i.getUTCHours()+11)%12+1:(i.getHours()+11)%12+1;case"%G":return e?i.getUTCHours():i.getHours();case"%H":return e?n.date.to_fixed(i.getUTCHours()):n.date.to_fixed(i.getHours());case"%i":return e?n.date.to_fixed(i.getUTCMinutes()):n.date.to_fixed(i.getMinutes());case"%a":return e?i.getUTCHours()>11?"pm":"am":i.getHours()>11?"pm":"am";case"%A":return e?i.getUTCHours()>11?"PM":"AM":i.getHours()>11?"PM":"AM";case"%s":return e?n.date.to_fixed(i.getUTCSeconds()):n.date.to_fixed(i.getSeconds());case"%W":return e?n.date.to_fixed(n.date.getUTCISOWeek(i)):n.date.to_fixed(n.date.getISOWeek(i));default:return t}})),str_to_date:(t,e,n)=>i=>{const a=[0,0,1,0,0,0],r=i.match(/[a-zA-Z]+|[0-9]+/g),s=t.match(/%[a-zA-Z]/g);for(let t=0;t<s.length;t++)switch(s[t]){case"%j":case"%d":a[2]=r[t]||1;break;case"%n":case"%m":a[1]=(r[t]||1)-1;break;case"%y":a[0]=1*r[t]+(r[t]>50?1900:2e3);break;case"%g":case"%G":case"%h":case"%H":a[3]=r[t]||0;break;case"%i":a[4]=r[t]||0;break;case"%Y":a[0]=r[t]||0;break;case"%a":case"%A":a[3]=a[3]%12+("am"===(r[t]||"").toLowerCase()?0:12);break;case"%s":a[5]=r[t]||0;break;case"%M":a[1]=n.locale.date.month_short_hash[r[t]]||0;break;case"%F":a[1]=n.locale.date.month_full_hash[r[t]]||0}return e?new Date(Date.UTC(a[0],a[1],a[2],a[3],a[4],a[5])):new Date(a[0],a[1],a[2],a[3],a[4],a[5])}};function Rt(t){var e=null;function n(){var n=!1;return"auto"===t.config.csp?(null===e&&function(){try{new Function("canUseCsp = false;")}catch{e=!0}}(),n=e):n=t.config.csp,n}var i={init:function(){for(var e=t.locale,n=e.date.month_short,i=e.date.month_short_hash={},a=0;a<n.length;a++)i[n[a]]=a;for(n=e.date.month_full,i=e.date.month_full_hash={},a=0;a<n.length;a++)i[n[a]]=a},date_part:function(t){var e=new Date(t);return t.setHours(0),this.hour_start(t),t.getHours()&&(t.getDate()<e.getDate()||t.getMonth()<e.getMonth()||t.getFullYear()<e.getFullYear())&&t.setTime(t.getTime()+36e5*(24-t.getHours())),t},time_part:function(t){return(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},week_start:function(e){var n=e.getDay();return t.config.start_on_monday&&(0===n?n=6:n--),this.date_part(this.add(e,-1*n,"day"))},month_start:function(t){return t.setDate(1),this.date_part(t)},quarter_start:function(t){this.month_start(t);var e,n=t.getMonth();return e=n>=9?9:n>=6?6:n>=3?3:0,t.setMonth(e),t},year_start:function(t){return t.setMonth(0),this.month_start(t)},day_start:function(t){return this.date_part(t)},hour_start:function(t){return t.getMinutes()&&t.setMinutes(0),this.minute_start(t),t},minute_start:function(t){return t.getSeconds()&&t.setSeconds(0),t.getMilliseconds()&&t.setMilliseconds(0),t},_add_days:function(t,e,n){t.setDate(t.getDate()+e);var i=e>=0,a=!n.getHours()&&t.getHours(),r=t.getDate()<=n.getDate()||t.getMonth()<n.getMonth()||t.getFullYear()<n.getFullYear();return i&&a&&r&&t.setTime(t.getTime()+36e5*(24-t.getHours())),e>1&&a&&t.setHours(0),t},add:function(t,e,n){var i=new Date(t.valueOf());switch(n){case"day":i=this._add_days(i,e,t);break;case"week":i=this._add_days(i,7*e,t);break;case"month":i.setMonth(i.getMonth()+e);break;case"year":i.setYear(i.getFullYear()+e);break;case"hour":i.setTime(i.getTime()+60*e*60*1e3);break;case"minute":i.setTime(i.getTime()+60*e*1e3);break;default:return this["add_"+n](t,e,n)}return i},add_quarter:function(t,e){return this.add(t,3*e,"month")},to_fixed:function(t){return t<10?"0"+t:t},copy:function(t){return new Date(t.valueOf())},date_to_str:function(e,i){var a=Lt;return n()&&(a=Pt),a.date_to_str(e,i,t)},str_to_date:function(e,i){var a=Lt;return n()&&(a=Pt),a.str_to_date(e,i,t)},getISOWeek:function(e){return t.date._getWeekNumber(e,!0)},_getWeekNumber:function(t,e){if(!t)return!1;var n=t.getDay();e&&0===n&&(n=7);var i=new Date(t.valueOf());i.setDate(t.getDate()+(4-n));var a=i.getFullYear(),r=Math.round((i.getTime()-new Date(a,0,1).getTime())/864e5);return 1+Math.floor(r/7)},getWeek:function(e){return t.date._getWeekNumber(e,t.config.start_on_monday)},getUTCISOWeek:function(e){return t.date.getISOWeek(e)},convert_to_utc:function(t){return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())},parseDate:function(e,n){return e&&!e.getFullYear&&("function"!=typeof n&&(n="string"==typeof n?"parse_date"===n||"xml_date"===n?t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date:t.defined(t.templates[n])?t.templates[n]:t.date.str_to_date(n):t.defined(t.templates.xml_date)?t.templates.xml_date:t.templates.parse_date),e=e?n(e):null),e}};return i}class Ot{constructor(t){const{url:e,token:n}=t;this._url=e,this._token=n,this._mode=1,this._seed=1,this._queue=[],this.data={},this.api={},this._events={}}headers(){return{Accept:"application/json","Content-Type":"application/json","Remote-Token":this._token}}fetch(t,e){const n={credentials:"include",headers:this.headers()};return e&&(n.method="POST",n.body=e),fetch(t,n).then((t=>t.json()))}load(t){return t&&(this._url=t),this.fetch(this._url).then((t=>this.parse(t)))}parse(t){const{key:e,websocket:n}=t;e&&(this._token=t.key);for(const i in t.data)this.data[i]=t.data[i];for(const i in t.api){const e=this.api[i]={},n=t.api[i];for(const t in n)e[t]=this._wrapper(i+"."+t)}return n&&this.connect(),this}connect(){const t=this._socket;t&&(this._socket=null,t.onclose=function(){},t.close()),this._mode=2,this._socket=function(t,e,n,i){let a=e;"/"===a[0]&&(a=document.location.protocol+"//"+document.location.host+e),a=a.replace(/^http(s|):/,"ws$1:");const r=-1!=a.indexOf("?")?"&":"?";a=`${a}${r}token=${n}&ws=1`;const s=new WebSocket(a);return s.onclose=()=>setTimeout((()=>t.connect()),2e3),s.onmessage=e=>{const n=JSON.parse(e.data);switch(n.action){case"result":t.result(n.body,[]);break;case"event":t.fire(n.body.name,n.body.value);break;case"start":i();break;default:t.onError(n.data)}},s}(this,this._url,this._token,(()=>(this._mode=3,this._send(),this._resubscribe(),this)))}_wrapper(t){return function(){const e=[].slice.call(arguments);let n=null;const i=new Promise(((i,a)=>{n={data:{id:this._uid(),name:t,args:e},status:1,resolve:i,reject:a},this._queue.push(n)}));return this.onCall(n,i),3===this._mode?this._send(n):setTimeout((()=>this._send()),1),i}.bind(this)}_uid(){return(this._seed++).toString()}_send(t){if(2==this._mode)return void setTimeout((()=>this._send()),100);const e=t?[t]:this._queue.filter((t=>1===t.status));if(!e.length)return;const n=e.map((t=>(t.status=2,t.data)));3!==this._mode?this.fetch(this._url,JSON.stringify(n)).catch((t=>this.onError(t))).then((t=>this.result(t,n))):this._socket.send(JSON.stringify({action:"call",body:n}))}result(t,e){const n={};if(t)for(let i=0;i<t.length;i++)n[t[i].id]=t[i];else for(let i=0;i<e.length;i++)n[e[i].id]={id:e[i].id,error:"Network Error",data:null};for(let i=this._queue.length-1;i>=0;i--){const t=this._queue[i],e=n[t.data.id];e&&(this.onResponse(t,e),e.error?t.reject(e.error):t.resolve(e.data),this._queue.splice(i,1))}}on(t,e){const n=this._uid();let i=this._events[t];const a=!!i;return a||(i=this._events[t]=[]),i.push({id:n,handler:e}),a||3!=this._mode||this._socket.send(JSON.stringify({action:"subscribe",name:t})),{name:t,id:n}}_resubscribe(){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:"subscribe",name:t}))}detach(t){if(!t){if(3==this._mode)for(const t in this._events)this._socket.send(JSON.stringify({action:"unsubscribe",key:t}));return void(this._events={})}const{id:e,name:n}=t,i=this._events[n];if(i){const t=i.filter((t=>t.id!=e));t.length?this._events[n]=t:(delete this._events[n],3==this._mode&&this._socket.send(JSON.stringify({action:"unsubscribe",name:n})))}}fire(t,e){const n=this._events[t];if(n)for(let i=0;i<n.length;i++)n[i].handler(e)}onError(t){return null}onCall(t,e){}onResponse(t,e){}}const Ht=function(t,e){const n=new Ot({url:t,token:e});n.fetch=function(t,e){const n={headers:this.headers()};return e&&(n.method="POST",n.body=e),fetch(t,n).then((t=>t.json()))},this._ready=n.load().then((t=>this._remote=t)),this.ready=function(){return this._ready},this.on=function(t,e){this.ready().then((n=>{if("string"==typeof t)n.on(t,e);else for(const e in t)n.on(e,t[e])}))}};function Bt(t,e){if(!e)return!0;if(t._on_timeout)return!1;var n=Math.ceil(1e3/e);return n<2||(setTimeout((function(){delete t._on_timeout}),n),t._on_timeout=!0),!0}var zt=function(){var t={};return{getState:function(e){if(t[e])return t[e].method();var n={};for(var i in t)t[i].internal||ht(n,t[i].method(),!0);return n},registerProvider:function(e,n,i){t[e]={method:n,internal:i}},unregisterProvider:function(e){delete t[e]}}};const jt=Promise;var Wt={$create:function(t){return ht(t||[],this)},$removeAt:function(t,e){t>=0&&this.splice(t,e||1)},$remove:function(t){this.$removeAt(this.$find(t))},$insertAt:function(t,e){if(e||0===e){var n=this.splice(e,this.length-e);this[e]=t,this.push.apply(this,n)}else this.push(t)},$find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},$each:function(t,e){for(var n=0;n<this.length;n++)t.call(e||this,this[n])},$map:function(t,e){for(var n=0;n<this.length;n++)this[n]=t.call(e||this,this[n]);return this},$filter:function(t,e){for(var n=0;n<this.length;n++)t.call(e||this,this[n])||(this.splice(n,1),n--);return this}};function Ft(t,e,n,i){return!!((i=e?e.config:i)&&i.placeholder_task&&n.exists(t))&&n.getItem(t).type===i.types.placeholder}var Vt=function(t){return this.pull={},this.$initItem=t.initItem,this.visibleOrder=Wt.$create(),this.fullOrder=Wt.$create(),this._skip_refresh=!1,this._filterRule=null,this._searchVisibleOrder={},this._indexRangeCache={},this._getItemsCache=null,this.$config=t,q(this),this._attachDataChange((function(){return this._indexRangeCache={},this._getItemsCache=null,!0})),this};Vt.prototype={_attachDataChange:function(t){this.attachEvent("onClearAll",t),this.attachEvent("onBeforeParse",t),this.attachEvent("onBeforeUpdate",t),this.attachEvent("onBeforeDelete",t),this.attachEvent("onBeforeAdd",t),this.attachEvent("onParse",t),this.attachEvent("onBeforeFilter",t)},_parseInner:function(t){for(var e=null,n=[],i=0,a=t.length;i<a;i++)e=t[i],this.$initItem&&(this.$config.copyOnParse()&&(e=ut(e)),e=this.$initItem(e)),this.callEvent("onItemLoading",[e])&&(this.pull.hasOwnProperty(e.id)||this.fullOrder.push(e.id),n.push(e),this.pull[e.id]=e);return n},parse:function(t){this.isSilent()||this.callEvent("onBeforeParse",[t]);var e=this._parseInner(t);this.isSilent()||(this.refresh(),this.callEvent("onParse",[e]))},getItem:function(t){return this.pull[t]},_updateOrder:function(t){t.call(this.visibleOrder),t.call(this.fullOrder)},updateItem:function(t,e){if(_t(e)||(e=this.getItem(t)),!this.isSilent()&&!1===this.callEvent("onBeforeUpdate",[e.id,e]))return!1;ht(this.pull[t],e,!0),this.isSilent()||(this.callEvent("onAfterUpdate",[e.id,e]),this.callEvent("onStoreUpdated",[e.id,e,"update"]))},_removeItemInner:function(t){this._updateOrder((function(){this.$remove(t)})),delete this.pull[t]},removeItem:function(t){var e=this.getItem(t);if(!this.isSilent()&&!1===this.callEvent("onBeforeDelete",[e.id,e]))return!1;this.callEvent("onAfterDeleteConfirmed",[e.id,e]),this._removeItemInner(t),this.isSilent()&&this.callEvent("onAfterSilentDelete",[e.id,e]),this.isSilent()||(this.filter(),this.callEvent("onAfterDelete",[e.id,e]),this.callEvent("onStoreUpdated",[e.id,e,"delete"]))},_addItemInner:function(t,e){if(this.exists(t.id))this.silent((function(){this.updateItem(t.id,t)}));else{var n=this.visibleOrder,i=n.length;(!_t(e)||e<0)&&(e=i),e>i&&(e=Math.min(n.length,e))}this.pull[t.id]=t,this.isSilent()||this._updateOrder((function(){-1===this.$find(t.id)&&this.$insertAt(t.id,e)})),this.filter()},isVisible:function(t){return this.visibleOrder.$find(t)>-1},getVisibleItems:function(){return this.getIndexRange()},addItem:function(t,e){return _t(t.id)||(t.id=ft()),this.$initItem&&(t=this.$initItem(t)),!(!this.isSilent()&&!1===this.callEvent("onBeforeAdd",[t.id,t]))&&(this._addItemInner(t,e),this.isSilent()||(this.callEvent("onAfterAdd",[t.id,t]),this.callEvent("onStoreUpdated",[t.id,t,"add"])),t.id)},_changeIdInner:function(t,e){this.pull[t]&&(this.pull[e]=this.pull[t]);var n=this._searchVisibleOrder[t];this.pull[e].id=e,this._updateOrder((function(){this[this.$find(t)]=e})),this._searchVisibleOrder[e]=n,delete this._searchVisibleOrder[t],delete this.pull[t]},changeId:function(t,e){this._changeIdInner(t,e),this.callEvent("onIdChange",[t,e])},exists:function(t){return!!this.pull[t]},_moveInner:function(t,e){var n=this.getIdByIndex(t);this._updateOrder((function(){this.$removeAt(t),this.$insertAt(n,Math.min(this.length,e))}))},move:function(t,e){var n=this.getIdByIndex(t),i=this.getItem(n);this._moveInner(t,e),this.isSilent()||this.callEvent("onStoreUpdated",[i.id,i,"move"])},clearAll:function(){this.$destroyed||(this.silent((function(){this.unselect()})),this.pull={},this.visibleOrder=Wt.$create(),this.fullOrder=Wt.$create(),this.isSilent()||(this.callEvent("onClearAll",[]),this.refresh()))},silent:function(t,e){var n=!1;this.isSilent()&&(n=!0),this._skip_refresh=!0,t.call(e||this),n||(this._skip_refresh=!1)},isSilent:function(){return!!this._skip_refresh},arraysEqual:function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},refresh:function(t,e){var n,i;if(!this.isSilent()&&(t&&(n=this.getItem(t)),i=t?[t,n,"paint"]:[null,null,null],!1!==this.callEvent("onBeforeStoreUpdate",i))){var a=this._quick_refresh&&!this._mark_recompute;if(this._mark_recompute=!1,t){if(!e&&!a){var r=this.visibleOrder;this.filter(),this.arraysEqual(r,this.visibleOrder)||(t=void 0)}}else a||this.filter();i=t?[t,n,"paint"]:[null,null,null],this.callEvent("onStoreUpdated",i)}},count:function(){return this.fullOrder.length},countVisible:function(){return this.visibleOrder.length},sort:function(t){},serialize:function(){},eachItem:function(t){for(var e=0;e<this.fullOrder.length;e++){var n=this.getItem(this.fullOrder[e]);t.call(this,n)}},find:function(t){var e=[];return this.eachItem((function(n){t(n)&&e.push(n)})),e},filter:function(t){this.isSilent()||this.callEvent("onBeforeFilter",[]),this.callEvent("onPreFilter",[]);var e=Wt.$create(),n=[];this.eachItem((function(t){this.callEvent("onFilterItem",[t.id,t])&&(Ft(t.id,null,this,this._ganttConfig)?n.push(t.id):e.push(t.id))}));for(var i=0;i<n.length;i++)e.push(n[i]);for(this.visibleOrder=e,this._searchVisibleOrder={},i=0;i<this.visibleOrder.length;i++)this._searchVisibleOrder[this.visibleOrder[i]]=i;this.isSilent()||this.callEvent("onFilter",[])},getIndexRange:function(t,e){var n=Math.min(e||1/0,this.countVisible()-1),i=t||0,a=i+"-"+n;if(this._indexRangeCache[a])return this._indexRangeCache[a].slice();for(var r=[],s=i;s<=n;s++)r.push(this.getItem(this.visibleOrder[s]));return this._indexRangeCache[a]=r.slice(),r},getItems:function(){if(this._getItemsCache)return this._getItemsCache.slice();var t=[];for(var e in this.pull)t.push(this.pull[e]);return this._getItemsCache=t.slice(),t},getIdByIndex:function(t){return this.visibleOrder[t]},getIndexById:function(t){var e=this._searchVisibleOrder[t];return void 0===e&&(e=-1),e},_getNullIfUndefined:function(t){return void 0===t?null:t},getFirst:function(){return this._getNullIfUndefined(this.visibleOrder[0])},getLast:function(){return this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1])},getNext:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)+1])},getPrev:function(t){return this._getNullIfUndefined(this.visibleOrder[this.getIndexById(t)-1])},destructor:function(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.$destroyed=!0,this.pull=null,this.$initItem=null,this.visibleOrder=null,this.fullOrder=null,this._skip_refresh=null,this._filterRule=null,this._searchVisibleOrder=null,this._indexRangeCache={}}};var Ut=function(t){var e;Vt.apply(this,[t]),this._branches={},this.pull={},this.$initItem=function(e){var n=e;t.initItem&&(n=t.initItem(n));var i=this.getItem(e.id);return i&&i.parent!=n.parent&&this.move(n.id,n.$index||-1,n.parent||this._ganttConfig.root_id),n},this.$parentProperty=t.parentProperty||"parent","function"!=typeof t.rootId?this.$getRootId=(e=t.rootId||0,function(){return e}):this.$getRootId=t.rootId,this.$openInitially=t.openInitially,this.visibleOrder=Wt.$create(),this.fullOrder=Wt.$create(),this._searchVisibleOrder={},this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,this._skip_refresh=!1,this._ganttConfig=null,t.getConfig&&(this._ganttConfig=t.getConfig());var n={},i={},a={},r={},s=!1;return this._attachDataChange((function(){return this._indexRangeCache={},this._eachItemMainRangeCache=null,this._getItemsCache=null,!0})),this.attachEvent("onPreFilter",(function(){this._indexRangeCache={},this._eachItemMainRangeCache=null,n={},i={},a={},r={},s=!1,this.eachItem((function(t){var e=this.getParent(t.id);t.$open&&!1!==a[e]?a[t.id]=!0:a[t.id]=!1,this._isSplitItem(t)&&(s=!0,n[t.id]=!0,i[t.id]=!0),s&&i[e]&&(i[t.id]=!0),a[e]||void 0===a[e]?r[t.id]=!0:r[t.id]=!1}))})),this.attachEvent("onFilterItem",(function(t,e){var a=!1;this._ganttConfig&&(a=this._ganttConfig.open_split_tasks);var o=r[e.id];return s&&(o&&i[e.id]&&!n[e.id]&&(o=!!a),i[e.id]&&!n[e.id]&&(e.$split_subtask=!0)),e.$expanded_branch=!!r[e.id],!!o})),this.attachEvent("onFilter",(function(){n={},i={},a={},r={}})),this};function qt(t){return It.isNode||!t.$root}Ut.prototype=ht({_buildTree:function(t){for(var e=null,n=this.$getRootId(),i=0,a=t.length;i<a;i++)e=t[i],this.setParent(e,nt(this.getParent(e),n)||n);for(i=0,a=t.length;i<a;i++)e=t[i],this._add_branch(e),e.$level=this.calculateItemLevel(e),e.$local_index=this.getBranchIndex(e.id),_t(e.$open)||(e.$open=_t(e.open)?e.open:this.$openInitially());this._updateOrder()},_isSplitItem:function(t){return"split"==t.render&&this.hasChild(t.id)},parse:function(t){this._skip_refresh||this.callEvent("onBeforeParse",[t]);var e=this._parseInner(t);this._buildTree(e),this.filter(),this._skip_refresh||this.callEvent("onParse",[e])},_addItemInner:function(t,e){var n=this.getParent(t);_t(n)||(n=this.$getRootId(),this.setParent(t,n));var i=this.getIndexById(n)+Math.min(Math.max(e,0),this.visibleOrder.length);1*i!==i&&(i=void 0),Vt.prototype._addItemInner.call(this,t,i),this.setParent(t,n),t.hasOwnProperty("$rendered_parent")&&this._move_branch(t,t.$rendered_parent),this._add_branch(t,e)},_changeIdInner:function(t,e){var n=this.getChildren(t),i=this._searchVisibleOrder[t];Vt.prototype._changeIdInner.call(this,t,e);var a=this.getParent(e);this._replace_branch_child(a,t,e),this._branches[t]&&(this._branches[e]=this._branches[t]);for(var r=0;r<n.length;r++){var s=this.getItem(n[r]);s[this.$parentProperty]=e,s.$rendered_parent=e}this._searchVisibleOrder[e]=i,delete this._branches[t]},_traverseBranches:function(t,e){_t(e)||(e=this.$getRootId());var n=this._branches[e];if(n)for(var i=0;i<n.length;i++){var a=n[i];t.call(this,a),this._branches[a]&&this._traverseBranches(t,a)}},_updateOrder:function(t){this.fullOrder=Wt.$create(),this._traverseBranches((function(t){this.fullOrder.push(t)})),t&&Vt.prototype._updateOrder.call(this,t)},_removeItemInner:function(t){var e=[];this.eachItem((function(t){e.push(t)}),t),e.push(this.getItem(t));for(var n=0;n<e.length;n++)this._move_branch(e[n],this.getParent(e[n]),null),Vt.prototype._removeItemInner.call(this,e[n].id),this._move_branch(e[n],this.getParent(e[n]),null)},move:function(t,e,n){var i=arguments[3],a=(this._ganttConfig||{}).root_id||0;if(i=nt(i,a)){if(i===t)return;n=this.getParent(i),e=this.getBranchIndex(i)}if(t!=n){_t(n)||(n=this.$getRootId());var r=this.getItem(t),s=this.getParent(r.id),o=this.getChildren(n);if(-1==e&&(e=o.length+1),s==n&&this.getBranchIndex(t)==e)return;if(!1===this.callEvent("onBeforeItemMove",[t,n,e]))return!1;for(var l=[],c=0;c<o.length;c++)Ft(o[c],null,this,this._ganttConfig)&&(l.push(o[c]),o.splice(c,1),c--);this._replace_branch_child(s,t);var d=(o=this.getChildren(n))[e];(d=nt(d,a))?o=o.slice(0,e).concat([t]).concat(o.slice(e)):o.push(t),l.length&&(o=o.concat(l)),r.$rendered_parent!==s&&s!==n&&(r.$rendered_parent=s),this.setParent(r,n),this._branches[n]=o;var u=this.calculateItemLevel(r)-r.$level;r.$level+=u,this.eachItem((function(t){t.$level+=u}),r.id,this),this._moveInner(this.getIndexById(t),this.getIndexById(n)+e),this.callEvent("onAfterItemMove",[t,n,e]),this.refresh()}},getBranchIndex:function(t){var e=this.getChildren(this.getParent(t));let n=e.indexOf(t+"");return-1==n&&(n=e.indexOf(+t)),n},hasChild:function(t){var e=this._branches[t];return e&&e.length},getChildren:function(t){var e=this._branches[t];return e||Wt.$create()},isChildOf:function(t,e){if(!this.exists(t))return!1;if(e===this.$getRootId())return!0;if(!this.hasChild(e))return!1;var n=this.getItem(t),i=this.getParent(t);if(this.getItem(e).$level>=n.$level)return!1;for(;n&&this.exists(i);){if((n=this.getItem(i))&&n.id==e)return!0;i=this.getParent(n)}return!1},getSiblings:function(t){if(!this.exists(t))return Wt.$create();var e=this.getParent(t);return this.getChildren(e)},getNextSibling:function(t){for(var e=this.getSiblings(t),n=0,i=e.length;n<i;n++)if(e[n]==t){var a=e[n+1];return 0===a&&n>0&&(a="0"),a||null}return null},getPrevSibling:function(t){for(var e=this.getSiblings(t),n=0,i=e.length;n<i;n++)if(e[n]==t){var a=e[n-1];return 0===a&&n>0&&(a="0"),a||null}return null},getParent:function(t){var e=null;return(e=void 0!==t.id?t:this.getItem(t))?e[this.$parentProperty]:this.$getRootId()},clearAll:function(){this._branches={},Vt.prototype.clearAll.call(this)},calculateItemLevel:function(t){var e=0;return this.eachParent((function(){e++}),t),e},_setParentInner:function(t,e,n){n||(t.hasOwnProperty("$rendered_parent")?this._move_branch(t,t.$rendered_parent,e):this._move_branch(t,t[this.$parentProperty],e))},setParent:function(t,e,n){this._setParentInner(t,e,n),t[this.$parentProperty]=e},_eachItemCached:function(t,e){for(var n=0,i=e.length;n<i;n++)t.call(this,e[n])},_eachItemIterate:function(t,e,n){var i=this.getChildren(e);for(i.length&&(i=i.slice().reverse());i.length;){var a=i.pop(),r=this.getItem(a);if(t.call(this,r),n&&n.push(r),this.hasChild(r.id))for(var s=this.getChildren(r.id),o=s.length-1;o>=0;o--)i.push(s[o])}},eachItem:function(t,e){var n=this.$getRootId();_t(e)||(e=n);var i=nt(e,n)||n,a=!1,r=!1,s=null;i===n&&(this._eachItemMainRangeCache?(a=!0,s=this._eachItemMainRangeCache):(r=!0,s=this._eachItemMainRangeCache=[])),a?this._eachItemCached(t,s):this._eachItemIterate(t,i,r?s:null)},eachParent:function(t,e){for(var n={},i=e,a=this.getParent(i);this.exists(a);){if(n[a])throw new Error("Invalid tasks tree. Cyclic reference has been detected on task "+a);n[a]=!0,i=this.getItem(a),t.call(this,i),a=this.getParent(i)}},_add_branch:function(t,e,n){var i=void 0===n?this.getParent(t):n;this.hasChild(i)||(this._branches[i]=Wt.$create());var a=this.getChildren(i);a.indexOf(t.id+"")>-1||a.indexOf(+t.id)>-1||(1*e==e?a.splice(e,0,t.id):a.push(t.id),t.$rendered_parent=i)},_move_branch:function(t,e,n){this._eachItemMainRangeCache=null,this._replace_branch_child(e,t.id),this.exists(n)||n==this.$getRootId()?this._add_branch(t,void 0,n):delete this._branches[t.id],t.$level=this.calculateItemLevel(t),this.eachItem((function(t){t.$level=this.calculateItemLevel(t)}),t.id)},_replace_branch_child:function(t,e,n){var i=this.getChildren(t);if(i&&void 0!==t){var a=Wt.$create();let r=i.indexOf(e+"");-1!=r||isNaN(+e)||(r=i.indexOf(+e)),r>-1&&(n?i.splice(r,1,n):i.splice(r,1)),a=i,this._branches[t]=a}},sort:function(t,e,n){this.exists(n)||(n=this.$getRootId()),t||(t="order");var i="string"==typeof t?function(e,n){return e[t]==n[t]||Q(e[t])&&Q(n[t])&&e[t].valueOf()==n[t].valueOf()?0:e[t]>n[t]?1:-1}:t;if(e){var a=i;i=function(t,e){return a(e,t)}}var r=this.getChildren(n);if(r){for(var s=[],o=r.length-1;o>=0;o--)s[o]=this.getItem(r[o]);for(s.sort(i),o=0;o<s.length;o++)r[o]=s[o].id,this.sort(t,e,r[o])}},filter:function(t){for(let e in this.pull){const t=this.pull[e].$rendered_parent,n=this.getParent(this.pull[e]);t!==n&&this._move_branch(this.pull[e],t,n)}return Vt.prototype.filter.apply(this,arguments)},open:function(t){this.exists(t)&&(this.getItem(t).$open=!0,this._skipTaskRecalculation=!0,this.callEvent("onItemOpen",[t]))},close:function(t){this.exists(t)&&(this.getItem(t).$open=!1,this._skipTaskRecalculation=!0,this.callEvent("onItemClose",[t]))},destructor:function(){Vt.prototype.destructor.call(this),this._branches=null,this._indexRangeCache={},this._eachItemMainRangeCache=null}},Vt.prototype);const Gt=function(t,e){const n=e.getDatastore(t),i=function(t,e){const i=e.getLayers(),a=n.getItem(t);if(a&&n.isVisible(t))for(let n=0;n<i.length;n++)i[n].render_item(a)},a=function(t){const e=t.getLayers();for(let n=0;n<e.length;n++)e[n].clear();let i=null;const a={};for(let o=0;o<e.length;o++){const t=e[o];let l;if(t.get_visible_range){var r=t.get_visible_range(n);if(void 0!==r.start&&void 0!==r.end){var s=r.start+" - "+r.end;a[s]?l=a[s]:(l=n.getIndexRange(r.start,r.end),a[s]=l)}else{if(void 0===r.ids)throw new Error("Invalid range returned from 'getVisibleRange' of the layer");l=r.ids.map((function(t){return n.getItem(t)}))}}else i||(i=n.getVisibleItems()),l=i;t.prepare_data&&t.prepare_data(l),e[o].render_items(l)}},r=function(t){if(t.update_items){let i=[];if(t.get_visible_range){var e=t.get_visible_range(n);if(void 0!==e.start&&void 0!==e.end&&(i=n.getIndexRange(e.start,e.end)),void 0!==e.ids){let t=e.ids.map((function(t){return n.getItem(t)}));t.length>0&&(t=t.filter((t=>void 0!==t)),i=i.concat(t))}if((null==e.start||null==e.end)&&null==e.ids)throw new Error("Invalid range returned from 'getVisibleRange' of the layer")}else i=n.getVisibleItems();t.prepare_data&&t.prepare_data(i,t),t.update_items(i)}};function s(t){return!!t.$services.getService("state").getState("batchUpdate").batch_update}n.attachEvent("onStoreUpdated",(function(n,i,a){if(qt(e))return!0;const s=e.$services.getService("layers").getDataRender(t);s&&(s.onUpdateRequest=function(t){r(t)})})),n.attachEvent("onStoreUpdated",(function(t,i,a){s(e)||(t&&"move"!=a&&"delete"!=a?(n.callEvent("onBeforeRefreshItem",[i.id]),n.callEvent("onAfterRefreshItem",[i.id])):(n.callEvent("onBeforeRefreshAll",[]),n.callEvent("onAfterRefreshAll",[])))})),n.attachEvent("onAfterRefreshAll",(function(){if(qt(e))return!0;const n=e.$services.getService("layers").getDataRender(t);n&&!s(e)&&a(n)})),n.attachEvent("onAfterRefreshItem",(function(n){if(qt(e))return!0;const a=e.$services.getService("layers").getDataRender(t);a&&i(n,a)})),n.attachEvent("onItemOpen",(function(){if(qt(e))return!0;e.render()})),n.attachEvent("onItemClose",(function(){if(qt(e))return!0;e.render()})),n.attachEvent("onIdChange",(function(a,r){if(qt(e))return!0;if(n.callEvent("onBeforeIdChange",[a,r]),!s(e)&&!n.isSilent()){const s=e.$services.getService("layers").getDataRender(t);s?(function(t,e,n){for(let i=0;i<t.length;i++)t[i].change_id(e,n)}(s.getLayers(),a,r,n.getItem(r)),i(r,s)):e.render()}}))};function Yt(){for(var t=this.$services.getService("datastores"),e=[],n=0;n<t.length;n++){var i=this.getDatastore(t[n]);i.$destroyed||e.push(i)}return e}const Jt={create:function(){var t=ht({},{createDatastore:function(t){var e="treedatastore"==(t.type||"").toLowerCase()?Ut:Vt;if(t){var n=this;t.openInitially=function(){return n.config.open_tree_initially},t.copyOnParse=function(){return n.config.deepcopy_on_parse}}var i=new e(t);if(this.mixin(i,function(t){var e=null,n=t._removeItemInner;function i(t){e=null,this.callEvent("onAfterUnselect",[t])}return t._removeItemInner=function(t){return e==t&&i.call(this,t),e&&this.eachItem&&this.eachItem((function(t){t.id==e&&i.call(this,t.id)}),t),n.apply(this,arguments)},t.attachEvent("onIdChange",(function(e,n){t.getSelectedId()==e&&t.silent((function(){t.unselect(e),t.select(n)}))})),{select:function(t){if(t){if(e==t)return e;if(!this._skip_refresh&&!this.callEvent("onBeforeSelect",[t]))return!1;this.unselect(),e=t,this._skip_refresh||(this.refresh(t),this.callEvent("onAfterSelect",[t]))}return e},getSelectedId:function(){return e},isSelected:function(t){return t==e},unselect:function(t){(t=t||e)&&(e=null,this._skip_refresh||(this.refresh(t),i.call(this,t)))}}}(i)),t.name){var a="datastore:"+t.name;i.attachEvent("onDestroy",function(){this.$services.dropService(a);for(var e=this.$services.getService("datastores"),n=0;n<e.length;n++)if(e[n]===t.name){e.splice(n,1);break}}.bind(this)),this.$services.dropService(a),this.$services.setService(a,(function(){return i}));var r=this.$services.getService("datastores");r?r.indexOf(t.name)<0&&r.push(t.name):(r=[],this.$services.setService("datastores",(function(){return r})),r.push(t.name)),Gt(t.name,this)}return i},getDatastore:function(t){return this.$services.getService("datastore:"+t)},_getDatastores:Yt,refreshData:function(){var t;qt(this)||(t=this.getScrollState()),this.callEvent("onBeforeDataRender",[]);for(var e=Yt.call(this),n=0;n<e.length;n++)e[n].refresh();this.config.preserve_scroll&&!qt(this)&&(t.x||t.y)&&this.scrollTo(t.x,t.y),this.callEvent("onDataRender",[])},isChildOf:function(t,e){return this.$data.tasksStore.isChildOf(t,e)},refreshTask:function(t,e){var n=this.getTask(t),i=this;function a(){if(void 0===e||e){for(var t=0;t<n.$source.length;t++)i.refreshLink(n.$source[t]);for(t=0;t<n.$target.length;t++)i.refreshLink(n.$target[t])}}if(n&&this.isTaskVisible(t))this.$data.tasksStore.refresh(t,!!this.getState("tasksDnd").drag_id||!1===e),a();else if(this.isTaskExists(t)&&this.isTaskExists(this.getParent(t))&&!this._bulk_dnd){this.refreshTask(this.getParent(t));var r=!1;this.eachParent((function(t){(r||this.isSplitTask(t))&&(r=!0)}),t),r&&a()}},refreshLink:function(t){this.$data.linksStore.refresh(t,!!this.getState("tasksDnd").drag_id)},silent:function(t){var e=this;e.$data.tasksStore.silent((function(){e.$data.linksStore.silent((function(){t()}))}))},clearAll:function(){for(var t=Yt.call(this),e=0;e<t.length;e++)t[e].silent((function(){t[e].clearAll()}));for(e=0;e<t.length;e++)t[e].clearAll();this._update_flags(),this.userdata={},this.callEvent("onClear",[]),this.render()},_clear_data:function(){this.$data.tasksStore.clearAll(),this.$data.linksStore.clearAll(),this._update_flags(),this.userdata={}},selectTask:function(t){var e=this.$data.tasksStore;if(!this.config.select_task)return!1;if(t=nt(t,this.config.root_id)){let n=this.getSelectedId();e._skipResourceRepaint=!0,e.select(t),e._skipResourceRepaint=!1,n&&e.pull[n].$split_subtask&&n!=t&&this.refreshTask(n),e.pull[t].$split_subtask&&n!=t&&this.refreshTask(t)}return e.getSelectedId()},unselectTask:function(t){var e=this.$data.tasksStore;e.unselect(t),t&&e.pull[t].$split_subtask&&this.refreshTask(t)},isSelectedTask:function(t){return this.$data.tasksStore.isSelected(t)},getSelectedId:function(){return this.$data.tasksStore.getSelectedId()}});return ht(t,{getTask:function(t){t=nt(t,this.config.root_id),this.assert(t,"Invalid argument for gantt.getTask");var e=this.$data.tasksStore.getItem(t);return this.assert(e,"Task not found id="+t),e},getTaskByTime:function(t,e){var n=this.$data.tasksStore.getItems(),i=[];if(t||e){t=+t||-1/0,e=+e||1/0;for(var a=0;a<n.length;a++){var r=n[a];+r.start_date<e&&+r.end_date>t&&i.push(r)}}else i=n;return i},isTaskExists:function(t){return!(!this.$data||!this.$data.tasksStore)&&this.$data.tasksStore.exists(t)},updateTask:function(t,e){_t(e)||(e=this.getTask(t)),this.$data.tasksStore.updateItem(t,e),this.isTaskExists(t)&&this.refreshTask(t)},addTask:function(t,e,n){if(_t(t.id)||(t.id=ft()),this.isTaskExists(t.id)&&this.getTask(t.id).$index!=t.$index)return t.start_date&&"string"==typeof t.start_date&&(t.start_date=this.date.parseDate(t.start_date,"parse_date")),t.end_date&&"string"==typeof t.end_date&&(t.end_date=this.date.parseDate(t.end_date,"parse_date")),this.$data.tasksStore.updateItem(t.id,t);if(_t(e)||(e=this.getParent(t)||0),this.isTaskExists(e)||(e=this.config.root_id),this.setParent(t,e),this.getState().lightbox&&this.isTaskExists(e)){var i=this.getTask(e);this.callEvent("onAfterParentExpand",[e,i])}return this.$data.tasksStore.addItem(t,n,e)},deleteTask:function(t){return t=nt(t,this.config.root_id),this.$data.tasksStore.removeItem(t)},getTaskCount:function(){return this.$data.tasksStore.count()},getVisibleTaskCount:function(){return this.$data.tasksStore.countVisible()},getTaskIndex:function(t){return this.$data.tasksStore.getBranchIndex(t)},getGlobalTaskIndex:function(t){return t=nt(t,this.config.root_id),this.assert(t,"Invalid argument"),this.$data.tasksStore.getIndexById(t)},eachTask:function(t,e,n){return this.$data.tasksStore.eachItem(gt(t,n||this),e)},eachParent:function(t,e,n){return this.$data.tasksStore.eachParent(gt(t,n||this),e)},changeTaskId:function(t,e){this.$data.tasksStore.changeId(t,e);var n=this.$data.tasksStore.getItem(e),i=[];n.$source&&(i=i.concat(n.$source)),n.$target&&(i=i.concat(n.$target));for(var a=0;a<i.length;a++){var r=this.getLink(i[a]);r.source==t&&(r.source=e),r.target==t&&(r.target=e)}},calculateTaskLevel:function(t){return this.$data.tasksStore.calculateItemLevel(t)},getNext:function(t){return this.$data.tasksStore.getNext(t)},getPrev:function(t){return this.$data.tasksStore.getPrev(t)},getParent:function(t){return this.$data.tasksStore.getParent(t)},setParent:function(t,e,n){return this.$data.tasksStore.setParent(t,e,n)},getSiblings:function(t){return this.$data.tasksStore.getSiblings(t).slice()},getNextSibling:function(t){return this.$data.tasksStore.getNextSibling(t)},getPrevSibling:function(t){return this.$data.tasksStore.getPrevSibling(t)},getTaskByIndex:function(t){var e=this.$data.tasksStore.getIdByIndex(t);return this.isTaskExists(e)?this.getTask(e):null},getChildren:function(t){return this.hasChild(t)?this.$data.tasksStore.getChildren(t).slice():[]},hasChild:function(t){return this.$data.tasksStore.hasChild(t)},open:function(t){this.$data.tasksStore.open(t)},close:function(t){this.$data.tasksStore.close(t)},moveTask:function(t,e,n){return n=nt(n,this.config.root_id),this.$data.tasksStore.move.apply(this.$data.tasksStore,arguments)},sort:function(t,e,n,i){var a=!i;this.$data.tasksStore.sort(t,e,n),this.callEvent("onAfterSort",[t,e,n]),a&&this.render()}}),ht(t,{getLinkCount:function(){return this.$data.linksStore.count()},getLink:function(t){return this.$data.linksStore.getItem(t)},getLinks:function(){return this.$data.linksStore.getItems()},isLinkExists:function(t){return this.$data.linksStore.exists(t)},addLink:function(t){const e=this.$data.linksStore.addItem(t);return this.$data.linksStore.isSilent()&&this.$data.linksStore.fullOrder.push(e),e},updateLink:function(t,e){_t(e)||(e=this.getLink(t)),this.$data.linksStore.updateItem(t,e)},deleteLink:function(t){return this.$data.linksStore.removeItem(t)},changeLinkId:function(t,e){return this.$data.linksStore.changeId(t,e)}}),t}};function Kt(t){var e=t.date,n=t.$services;return{getSum:function(t,e,n){void 0===n&&(n=t.length-1),void 0===e&&(e=0);for(var i=0,a=e;a<=n;a++)i+=t[a];return i},setSumWidth:function(t,e,n,i){var a=e.width;void 0===i&&(i=a.length-1),void 0===n&&(n=0);var r=i-n+1;if(!(n>a.length-1||r<=0||i>a.length-1)){var s=t-this.getSum(a,n,i);this.adjustSize(s,a,n,i),this.adjustSize(-s,a,i+1),e.full_width=this.getSum(a)}},splitSize:function(t,e){for(var n=[],i=0;i<e;i++)n[i]=0;return this.adjustSize(t,n),n},adjustSize:function(t,e,n,i){n||(n=0),void 0===i&&(i=e.length-1);for(var a=i-n+1,r=this.getSum(e,n,i),s=n;s<=i;s++){var o=Math.floor(t*(r?e[s]/r:1/a));r-=e[s],t-=o,a--,e[s]+=o}e[e.length-1]+=t},sortScales:function(t){function n(t,n){var i=new Date(1970,0,1);return e.add(i,n,t)-i}t.sort((function(t,e){return n(t.unit,t.step)<n(e.unit,e.step)?1:n(t.unit,t.step)>n(e.unit,e.step)?-1:0}));for(var i=0;i<t.length;i++)t[i].index=i},_isLegacyMode:function(e){var n=e||t.config;return n.scale_unit||n.date_scale||n.subscales},_prepareScaleObject:function(e){var n=e.format;return n||(n=e.template||e.date||"%d %M"),"string"==typeof n&&(n=t.date.date_to_str(n)),{unit:e.unit||"day",step:e.step||1,format:n,css:e.css}},primaryScale:function(e){var i,a=n.getService("templateLoader"),r=this._isLegacyMode(e),s=e||t.config;if(r)a.initTemplate("date_scale",void 0,void 0,s,t.config.templates),i={unit:t.config.scale_unit,step:t.config.step,template:t.templates.date_scale,date:t.config.date_scale,css:t.templates.scale_cell_class};else{var o=s.scales[0];i={unit:o.unit,step:o.step,template:o.template,format:o.format,date:o.date,css:o.css||t.templates.scale_cell_class}}return this._prepareScaleObject(i)},getSubScales:function(e){var n,i=this._isLegacyMode(e),a=e||t.config;if(i){let e="https://docs.dhtmlx.com/gantt/migrating.html#:~:text=%3D%20false%3B-,Time%20scale%20settings,-Configuration%20of%20time";t.env.isFF&&(e="https://docs.dhtmlx.com/gantt/migrating.html#6162"),console.warn(`You are using the obsolete scale configuration.\nIt will stop working in the future versions.\nPlease migrate the configuration to the newer version:\n${e}`),n=a.subscales||[]}else n=a.scales.slice(1);return n.map(function(t){return this._prepareScaleObject(t)}.bind(this))},prepareConfigs:function(t,e,n,i,a,r,s){for(var o=this.splitSize(i,t.length),l=n,c=[],d=t.length-1;d>=0;d--){var u=d==t.length-1,h=this.initScaleConfig(t[d],a,r);u&&this.processIgnores(h),this.initColSizes(h,e,l,o[d]),this.limitVisibleRange(h),u&&(l=h.full_width),c.unshift(h)}for(d=0;d<c.length-1;d++)this.alineScaleColumns(c[c.length-1],c[d]);for(d=0;d<c.length;d++)s&&this.reverseScale(c[d]),this.setPosSettings(c[d]);return c},reverseScale:function(t){t.width=t.width.reverse(),t.trace_x=t.trace_x.reverse();var e=t.trace_indexes;t.trace_indexes={},t.trace_index_transition={},t.rtl=!0;for(var n=0;n<t.trace_x.length;n++)t.trace_indexes[t.trace_x[n].valueOf()]=n,t.trace_index_transition[e[t.trace_x[n].valueOf()]]=n;return t},setPosSettings:function(t){for(var e=0,n=t.trace_x.length;e<n;e++)t.left.push((t.width[e-1]||0)+(t.left[e-1]||0))},_ignore_time_config:function(n,i){if(t.config.skip_off_time){for(var a=!0,r=n,s=0;s<i.step;s++)s&&(r=e.add(n,s,i.unit)),a=a&&!this.isWorkTime(r,i.unit);return a}return!1},processIgnores:function(t){t.ignore_x={},t.display_count=t.count},initColSizes:function(t,n,i,a){var r=i;t.height=a;var s=void 0===t.display_count?t.count:t.display_count;s||(s=1),t.col_width=Math.floor(r/s),n&&t.col_width<n&&(t.col_width=n,r=t.col_width*s),t.width=[];for(var o=t.ignore_x||{},l=0;l<t.trace_x.length;l++)if(o[t.trace_x[l].valueOf()]||t.display_count==t.count)t.width[l]=0;else{var c=1;"month"==t.unit&&(c=Math.round((e.add(t.trace_x[l],t.step,t.unit)-t.trace_x[l])/864e5)),t.width[l]=c}this.adjustSize(r-this.getSum(t.width),t.width),t.full_width=this.getSum(t.width)},initScaleConfig:function(t,e,n){var i=ht({count:0,col_width:0,full_width:0,height:0,width:[],left:[],trace_x:[],trace_indexes:{},min_date:new Date(e),max_date:new Date(n)},t);return this.eachColumn(t.unit,t.step,e,n,(function(t){i.count++,i.trace_x.push(new Date(t)),i.trace_indexes[t.valueOf()]=i.trace_x.length-1})),i.trace_x_ascending=i.trace_x.slice(),i},iterateScales:function(t,e,n,i,a){for(var r=e.trace_x,s=t.trace_x,o=n||0,l=i||s.length-1,c=0,d=1;d<r.length;d++){var u=t.trace_indexes[+r[d]];void 0!==u&&u<=l&&(a&&a.apply(this,[c,d,o,u]),o=u,c=d)}},alineScaleColumns:function(t,e,n,i){this.iterateScales(t,e,n,i,(function(n,i,a,r){var s=this.getSum(t.width,a,r-1);this.getSum(e.width,n,i-1)!=s&&this.setSumWidth(s,e,n,i-1)}))},eachColumn:function(n,i,a,r,s){var o=new Date(a),l=new Date(r);e[n+"_start"]&&(o=e[n+"_start"](o));var c=new Date(o);for(+c>=+l&&(l=e.add(c,i,n));+c<+l;){s.call(this,new Date(c));var d=c.getTimezoneOffset();c=e.add(c,i,n),c=t._correct_dst_change(c,d,i,n),e[n+"_start"]&&(c=e[n+"_start"](c))}},limitVisibleRange:function(t){var n=t.trace_x,i=t.width.length-1,a=0;if(+n[0]<+t.min_date&&0!=i){var r=Math.floor(t.width[0]*((n[1]-t.min_date)/(n[1]-n[0])));a+=t.width[0]-r,t.width[0]=r,n[0]=new Date(t.min_date)}var s=n.length-1,o=n[s],l=e.add(o,t.step,t.unit);if(+l>+t.max_date&&s>0&&(r=t.width[s]-Math.floor(t.width[s]*((l-t.max_date)/(l-o))),a+=t.width[s]-r,t.width[s]=r),a){for(var c=this.getSum(t.width),d=0,u=0;u<t.width.length;u++){var h=Math.floor(a*(t.width[u]/c));t.width[u]+=h,d+=h}this.adjustSize(a-d,t.width)}}}}function Xt(t){var e=function(t){var e=new Kt(t).primaryScale(),n=e.unit,i=e.step;if(t.config.scale_offset_minimal){var a=new Kt(t),r=[a.primaryScale()].concat(a.getSubScales());a.sortScales(r),n=r[r.length-1].unit,i=r[r.length-1].step||1}return{unit:n,step:i}}(t),n=e.unit,i=e.step,a=function(t,e){var n={start_date:null,end_date:null};if(e.config.start_date&&e.config.end_date){n.start_date=e.date[t+"_start"](new Date(e.config.start_date));var i=new Date(e.config.end_date),a=e.date[t+"_start"](new Date(i));i=+i!=+a?e.date.add(a,1,t):a,n.end_date=i}return n}(n,t);if(!a.start_date||!a.end_date){for(var r=!0,s=t.getTaskByTime(),o=0;o<s.length;o++)if(s[o].type!==t.config.types.project){r=!1;break}if(s.length&&r){var l=s[0].start_date,c=t.date.add(l,1,t.config.duration_unit);a={start_date:new Date(l),end_date:new Date(c)}}else a=t.getSubtaskDates();a.start_date&&a.end_date||(a={start_date:new Date,end_date:new Date}),t.eachTask((function(e){!1!==t.config.deadlines&&e.deadline&&Zt(a,e.deadline,e.deadline),e.constraint_date&&e.constraint_type&&t.config.constraint_types&&e.constraint_type!==t.config.constraint_types.ASAP&&e.constraint_type!==t.config.constraint_types.ALAP&&Zt(a,e.constraint_date,e.constraint_date),!1!==t.config.baselines&&e.baselines&&e.baselines.forEach((function(t){Zt(a,t.start_date,t.end_date)}))})),a.start_date=t.date[n+"_start"](a.start_date),a.start_date=t.calculateEndDate({start_date:t.date[n+"_start"](a.start_date),duration:-1,unit:n,step:i}),a.end_date=t.date[n+"_start"](a.end_date),a.end_date=t.calculateEndDate({start_date:a.end_date,duration:2,unit:n,step:i})}t._min_date=a.start_date,t._max_date=a.end_date}function Zt(t,e,n){e<t.start_date&&(t.start_date=new Date(e)),n>t.end_date&&(t.end_date=new Date(n))}function Qt(t){Xt(t),function(t){if(t.config.fit_tasks){var e=+t._min_date,n=+t._max_date;if(+t._min_date!=e||+t._max_date!=n)t.render(),t.callEvent("onScaleAdjusted",[])}}(t)}function te(t,e,n){for(var i=0;i<e.length;i++)t.isLinkExists(e[i])&&(n[e[i]]=t.getLink(e[i]))}function ee(t,e,n){te(t,e.$source,n),te(t,e.$target,n)}const ne={getSubtreeLinks:function(t,e){var n={};return t.isTaskExists(e)&&ee(t,t.getTask(e),n),t.eachTask((function(e){ee(t,e,n)}),e),n},getSubtreeTasks:function(t,e){var n={};return t.eachTask((function(t){n[t.id]=t}),e),n}};class ie{constructor(t,e){this.$gantt=t,this.$dp=e,this._dataProcessorHandlers=[]}attach(){const t=this.$dp,e=this.$gantt,n={},i=n=>this.clientSideDelete(n,t,e);this._dataProcessorHandlers.push(e.attachEvent("onAfterTaskAdd",(function(n,i){e.isTaskExists(n)&&(t.setGanttMode("tasks"),t.setUpdated(n,!0,"inserted"))}))),this._dataProcessorHandlers.push(e.attachEvent("onAfterTaskUpdate",(function(n,i){e.isTaskExists(n)&&(t.setGanttMode("tasks"),t.setUpdated(n,!0),e._sendTaskOrder&&e._sendTaskOrder(n,i))}))),this._dataProcessorHandlers.push(e.attachEvent("onBeforeTaskDelete",(function(i,a){return e.config.cascade_delete&&(n[i]={tasks:ne.getSubtreeTasks(e,i),links:ne.getSubtreeLinks(e,i)}),!t.deleteAfterConfirmation||(t.setGanttMode("tasks"),t.setUpdated(i,!0,"deleted"),!1)}))),this._dataProcessorHandlers.push(e.attachEvent("onAfterTaskDelete",(function(a,r){t.setGanttMode("tasks");const s=!i(a),o=e.config.cascade_delete&&n[a];if(s||o){if(o){const e=t.updateMode;t.setUpdateMode("off");const r=n[a];for(const n in r.tasks)i(n)||(t.storeItem(r.tasks[n]),t.setUpdated(n,!0,"deleted"));t.setGanttMode("links");for(const n in r.links)i(n)||(t.storeItem(r.links[n]),t.setUpdated(n,!0,"deleted"));n[a]=null,"off"!==e&&t.sendAllData(),t.setGanttMode("tasks"),t.setUpdateMode(e)}s&&(t.storeItem(r),t.deleteAfterConfirmation||t.setUpdated(a,!0,"deleted")),"off"===t.updateMode||t._tSend||t.sendAllData()}}))),this._dataProcessorHandlers.push(e.attachEvent("onAfterLinkUpdate",(function(n,i){e.isLinkExists(n)&&(t.setGanttMode("links"),t.setUpdated(n,!0))}))),this._dataProcessorHandlers.push(e.attachEvent("onAfterLinkAdd",(function(n,i){e.isLinkExists(n)&&(t.setGanttMode("links"),t.setUpdated(n,!0,"inserted"))}))),this._dataProcessorHandlers.push(e.attachEvent("onAfterLinkDelete",(function(e,n){t.setGanttMode("links"),!i(e)&&(t.storeItem(n),t.setUpdated(e,!0,"deleted"))}))),this._dataProcessorHandlers.push(e.attachEvent("onRowDragEnd",(function(t,n){e._sendTaskOrder(t,e.getTask(t))})));let a=null,r=null;this._dataProcessorHandlers.push(e.attachEvent("onTaskIdChange",(function(n,i){if(!t._waitMode)return;const s=e.getChildren(i);if(s.length){a=a||{};for(let t=0;t<s.length;t++){const e=this.getTask(s[t]);a[e.id]=e}}const o=function(t){let e=[];return t.$source&&(e=e.concat(t.$source)),t.$target&&(e=e.concat(t.$target)),e}(this.getTask(i));if(o.length){r=r||{};for(let t=0;t<o.length;t++){const e=this.getLink(o[t]);r[e.id]=e}}}))),t.attachEvent("onAfterUpdateFinish",(function(){(a||r)&&(e.batchUpdate((function(){for(const t in a)e.updateTask(a[t].id);for(const t in r)e.updateLink(r[t].id);a=null,r=null})),a?e._dp.setGanttMode("tasks"):e._dp.setGanttMode("links"))})),t.attachEvent("onBeforeDataSending",(function(){if("CUSTOM"===this._tMode)return!0;let t=this._serverProcessor;if("REST-JSON"===this._tMode||"REST"===this._tMode){const e=this._ganttMode;t=t.substring(0,t.indexOf("?")>-1?t.indexOf("?"):t.length),this.serverProcessor=t+("/"===t.slice(-1)?"":"/")+e}else{const n=this._ganttMode+"s";this.serverProcessor=t+e.ajax.urlSeparator(t)+"gantt_mode="+n}return!0})),t.attachEvent("insertCallback",(function(t,n,i,a){const r=t.data||e.xml._xmlNodeToJSON(t.firstChild),s={add:e.addTask,isExist:e.isTaskExists};"links"===a&&(s.add=e.addLink,s.isExist=e.isLinkExists),s.isExist.call(e,n)||(r.id=n,s.add.call(e,r))})),t.attachEvent("updateCallback",(function(t,n){const i=t.data||e.xml._xmlNodeToJSON(t.firstChild);if(!e.isTaskExists(n))return;const a=e.getTask(n);for(const r in i){let t=i[r];switch(r){case"id":continue;case"start_date":case"end_date":t=e.defined(e.templates.xml_date)?e.templates.xml_date(t):e.templates.parse_date(t);break;case"duration":a.end_date=e.calculateEndDate({start_date:a.start_date,duration:t,task:a})}a[r]=t}e.updateTask(n),e.refreshData()})),t.attachEvent("deleteCallback",(function(t,n,i,a){const r={delete:e.deleteTask,isExist:e.isTaskExists};"links"===a?(r.delete=e.deleteLink,r.isExist=e.isLinkExists):"assignment"===a&&(r.delete=function(t){e.$data.assignmentsStore.remove(t)},r.isExist=function(t){return e.$data.assignmentsStore.exists(t)}),r.isExist.call(e,n)&&r.delete.call(e,n)})),this.handleResourceCRUD(t,e),this.handleResourceAssignmentCRUD(t,e),this.handleBaselineCRUD(t,e)}clientSideDelete(t,e,n){const i=e.updatedRows.slice();let a=!1;"true_deleted"===n.getUserData(t,"!nativeeditor_status",e._ganttMode)&&(a=!0,e.setUpdated(t,!1));for(let r=0;r<i.length&&!e._in_progress[t];r++)i[r]===t&&("inserted"===n.getUserData(t,"!nativeeditor_status",e._ganttMode)&&(a=!0),e.setUpdated(t,!1));return a}handleResourceAssignmentCRUD(t,e){if(!e.config.resources||!0!==e.config.resources.dataprocessor_assignments)return;const n=e.getDatastore(e.config.resource_assignment_store),i={},a={};function r(e){const i=e.id;n.exists(i)&&(t.setGanttMode("assignment"),t.setUpdated(i,!0,"inserted")),delete a[i]}e.attachEvent("onBeforeTaskAdd",(function(t,e){return i[t]=!0,!0})),e.attachEvent("onTaskIdChange",(function(t,e){delete i[t]})),n.attachEvent("onAfterAdd",((t,e)=>{i[e.task_id]?function(t){a[t.id]=t,i[t.task_id]=!0}(e):r(e)})),n.attachEvent("onAfterUpdate",((e,i)=>{n.exists(e)&&(a[e]?r(i):(t.setGanttMode("assignment"),t.setUpdated(e,!0)))})),n.attachEvent("onAfterDelete",((n,i)=>{t.setGanttMode("assignment"),!this.clientSideDelete(n,t,e)&&(t.storeItem(i),t.setUpdated(n,!0,"deleted"))}))}handleResourceCRUD(t,e){if(!e.config.resources||!0!==e.config.resources.dataprocessor_resources)return;const n=e.getDatastore(e.config.resource_store);n.attachEvent("onAfterAdd",((e,i)=>{(function(e){const i=e.id;n.exists(i)&&(t.setGanttMode("resource"),t.setUpdated(i,!0,"inserted"))})(i)})),n.attachEvent("onAfterUpdate",((e,i)=>{n.exists(e)&&(t.setGanttMode("resource"),t.setUpdated(e,!0))})),n.attachEvent("onAfterDelete",((n,i)=>{t.setGanttMode("resource"),!this.clientSideDelete(n,t,e)&&(t.storeItem(i),t.setUpdated(n,!0,"deleted"))}))}handleBaselineCRUD(t,e){if(!e.config.baselines||!0!==e.config.baselines.dataprocessor_baselines)return;const n=e.getDatastore(e.config.baselines.datastore);n.attachEvent("onAfterAdd",((e,i)=>{(function(e){const i=e.id;n.exists(i)&&(t.setGanttMode("baseline"),t.setUpdated(i,!0,"inserted"))})(i)})),n.attachEvent("onAfterUpdate",((e,i)=>{n.exists(e)&&(t.setGanttMode("baseline"),t.setUpdated(e,!0))})),n.attachEvent("onAfterDelete",((n,i)=>{t.setGanttMode("baseline"),!this.clientSideDelete(n,t,e)&&(t.storeItem(i),t.setUpdated(n,!0,"deleted"))}))}detach(){J(this._dataProcessorHandlers,(t=>{this.$gantt.detachEvent(t)})),this._dataProcessorHandlers=[]}}const ae=class{constructor(){this.clear=()=>{this._storage={}},this.storeItem=t=>{this._storage[t.id]=ut(t)},this.getStoredItem=t=>this._storage[t]||null,this._storage={}}};ae.create=()=>new ae;let re=ae,se=class{constructor(t){this.serverProcessor=t,this.action_param="!nativeeditor_status",this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._headers=null,this._payload=null,this._postDelim="_",this._routerParametersFormat="parameters",this._waitMode=0,this._in_progress={},this._storage=re.create(),this._invalid={},this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),q(this)}setTransactionMode(t,e){"object"==typeof t?(this._tMode=t.mode||this._tMode,_t(t.headers)&&(this._headers=t.headers),_t(t.payload)&&(this._payload=t.payload),this._tSend=!!e):(this._tMode=t,this._tSend=e),"REST"===this._tMode&&(this._tSend=!1),"JSON"===this._tMode||"REST-JSON"===this._tMode?(this._tSend=!1,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers["Content-Type"]="application/json"):this._headers&&!this._headers["Content-Type"]&&(this._headers["Content-Type"]="application/x-www-form-urlencoded"),"CUSTOM"===this._tMode&&(this._tSend=!1,this._router=t.router)}escape(t){return this._utf?encodeURIComponent(t):escape(t)}enableUTFencoding(t){this._utf=!!t}getSyncState(){return!this.updatedRows.length}setUpdateMode(t,e){this.autoUpdate="cell"===t,this.updateMode=t,this.dnd=e}ignore(t,e){this._silent_mode=!0,t.call(e||W),this._silent_mode=!1}setUpdated(t,e,n){if(this._silent_mode)return;const i=this.findRow(t);n=n||"updated";const a=this.$gantt.getUserData(t,this.action_param,this._ganttMode);a&&"updated"===n&&(n=a),e?(this.set_invalid(t,!1),this.updatedRows[i]=t,this.$gantt.setUserData(t,this.action_param,n,this._ganttMode),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(i,1),this.$gantt.setUserData(t,this.action_param,"",this._ganttMode)),this.markRow(t,e,n),e&&this.autoUpdate&&this.sendData(t)}markRow(t,e,n){let i="";const a=this.is_invalid(t);if(a&&(i=this.styles[a],e=!0),this.callEvent("onRowMark",[t,e,n,a])&&(i=this.styles[e?n:"clear"]+" "+i,this.$gantt[this._methods[0]](t,i),a&&a.details)){i+=this.styles[a+"_cell"];for(let e=0;e<a.details.length;e++)a.details[e]&&this.$gantt[this._methods[1]](t,e,i)}}getActionByState(t){return"inserted"===t?"create":"updated"===t?"update":"deleted"===t?"delete":"update"}getState(t){return this.$gantt.getUserData(t,this.action_param,this._ganttMode)}is_invalid(t){return this._invalid[t]}set_invalid(t,e,n){n&&(e={value:e,details:n,toString:function(){return this.value.toString()}}),this._invalid[t]=e}checkBeforeUpdate(t){return!0}sendData(t){if(this.$gantt.editStop&&this.$gantt.editStop(),void 0===t||this._tSend){const t=[];if(this.modes&&["task","link","assignment","baseline"].forEach((e=>{this.modes[e]&&this.modes[e].updatedRows.length&&t.push(e)})),t.length){for(let e=0;e<t.length;e++)this.setGanttMode(t[e]),this.sendAllData();return}return this.sendAllData()}return!this._in_progress[t]&&(this.messages=[],!(!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages]))&&void this._beforeSendData(this._getRowData(t),t))}serialize(t,e){if(this._serializeAsJson)return this._serializeAsJSON(t);if("string"==typeof t)return t;if(void 0!==e)return this.serialize_one(t,"");{const e=[],n=[];for(const i in t)t.hasOwnProperty(i)&&(e.push(this.serialize_one(t[i],i+this._postDelim)),n.push(i));return e.push("ids="+this.escape(n.join(","))),this.$gantt.security_key&&e.push("dhx_security="+this.$gantt.security_key),e.join("&")}}serialize_one(t,e){if("string"==typeof t)return t;const n=[];let i="";for(const a in t)if(t.hasOwnProperty(a)){if(("id"===a||a==this.action_param)&&"REST"===this._tMode)continue;i="string"==typeof t[a]||"number"==typeof t[a]?String(t[a]):JSON.stringify(t[a]),n.push(this.escape((e||"")+a)+"="+this.escape(i))}return n.join("&")}sendAllData(){if(!this.updatedRows.length)return;this.messages=[];let t=!0;if(this._forEachUpdatedRow((function(e){t=t&&this.checkBeforeUpdate(e)})),!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow((function(t){if(!this._in_progress[t]){if(this.is_invalid(t))return;this._beforeSendData(this._getRowData(t),t)}}))}findRow(t){let e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e}defineAction(t,e){this._uActions||(this._uActions={}),this._uActions[t]=e}afterUpdateCallback(t,e,n,i,a){if(!this.$gantt)return;this.setGanttMode(a);const r=t,s="error"!==n&&"invalid"!==n;if(s||this.set_invalid(t,n),this._uActions&&this._uActions[n]&&!this._uActions[n](i))return delete this._in_progress[r];"wait"!==this._in_progress[r]&&this.setUpdated(t,!1);const o=t;switch(n){case"inserted":case"insert":e!=t&&(this.setUpdated(t,!1),this.$gantt[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":if(this.deleteAfterConfirmation&&"task"===this._ganttMode){if("task"===this._ganttMode&&this.$gantt.isTaskExists(t)){this.$gantt.setUserData(t,this.action_param,"true_deleted",this._ganttMode);const e=this.$gantt.getTask(t);this.$gantt.silent((()=>{this.$gantt.deleteTask(t)})),this.$gantt.callEvent("onAfterTaskDelete",[t,e]),this.$gantt.render(),delete this._in_progress[r]}return this.callEvent("onAfterUpdate",[t,n,e,i])}return this.$gantt.setUserData(t,this.action_param,"true_deleted",this._ganttMode),this.$gantt[this._methods[3]](t),delete this._in_progress[r],this.callEvent("onAfterUpdate",[t,n,e,i])}"wait"!==this._in_progress[r]?(s&&this.$gantt.setUserData(t,this.action_param,"",this._ganttMode),delete this._in_progress[r]):(delete this._in_progress[r],this.setUpdated(e,!0,this.$gantt.getUserData(t,this.action_param,this._ganttMode))),this.callEvent("onAfterUpdate",[o,n,e,i])}afterUpdate(t,e,n){let i;i=3===arguments.length?arguments[1]:arguments[4];let a=this.getGanttMode();const r=i.filePath||i.url;a="REST"!==this._tMode&&"REST-JSON"!==this._tMode?-1!==r.indexOf("gantt_mode=links")?"link":-1!==r.indexOf("gantt_mode=assignments")?"assignment":-1!==r.indexOf("gantt_mode=baselines")?"baseline":"task":r.indexOf("/link")>=0?"link":r.indexOf("/assignment")>=0?"assignment":r.indexOf("/baseline")>=0?"baseline":"task",this.setGanttMode(a);const s=this.$gantt.ajax;let o;try{o=JSON.parse(e.xmlDoc.responseText)}catch{e.xmlDoc.responseText.length||(o={})}const l=e=>{const n=o.action||this.getState(e)||"updated",i=o.sid||e[0],r=o.tid||e[0];t.afterUpdateCallback(i,r,n,o,a)};if(o)return Array.isArray(n)&&n.length>1?n.forEach((t=>l(t))):l(n),t.finalizeUpdate(),void this.setGanttMode(a);const c=s.xmltop("data",e.xmlDoc);if(!c)return this.cleanUpdate(n);const d=s.xpath("//data/action",c);if(!d.length)return this.cleanUpdate(n);for(let u=0;u<d.length;u++){const e=d[u],n=e.getAttribute("type"),i=e.getAttribute("sid"),r=e.getAttribute("tid");t.afterUpdateCallback(i,r,n,e,a)}t.finalizeUpdate()}cleanUpdate(t){if(t)for(let e=0;e<t.length;e++)delete this._in_progress[t[e]]}finalizeUpdate(){this._waitMode&&this._waitMode--,this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])}init(t){if(this._initialized)return;this.$gantt=t,this.$gantt._dp_init&&this.$gantt._dp_init(this),this._setDefaultTransactionMode(),this.styles={updated:"gantt_updated",order:"gantt_updated",inserted:"gantt_inserted",deleted:"gantt_deleted",delete_confirmation:"gantt_deleted",invalid:"gantt_invalid",error:"gantt_error",clear:""},this._methods=["_row_style","setCellTextStyle","_change_id","_delete_task"],function(t,e){t.getUserData=function(t,e,n){return this.userdata||(this.userdata={}),this.userdata[n]=this.userdata[n]||{},this.userdata[n][t]&&this.userdata[n][t][e]?this.userdata[n][t][e]:""},t.setUserData=function(t,e,n,i){this.userdata||(this.userdata={}),this.userdata[i]=this.userdata[i]||{},this.userdata[i][t]=this.userdata[i][t]||{},this.userdata[i][t][e]=n},t._change_id=function(t,e){switch(this._dp._ganttMode){case"task":this.changeTaskId(t,e);break;case"link":this.changeLinkId(t,e);break;case"assignment":this.$data.assignmentsStore.changeId(t,e);break;case"resource":this.$data.resourcesStore.changeId(t,e);break;case"baseline":this.$data.baselineStore.changeId(t,e);break;default:throw new Error(`Invalid mode of the dataProcessor after database id is received: ${this._dp._ganttMode}, new id: ${e}`)}},t._row_style=function(e,n){"task"===this._dp._ganttMode&&t.isTaskExists(e)&&(t.getTask(e).$dataprocessor_class=n,t.refreshTask(e))},t._delete_task=function(t,e){},t._sendTaskOrder=function(t,e){e.$drop_target&&(this._dp.setGanttMode("task"),this.getTask(t).target=e.$drop_target,this._dp.setUpdated(t,!0,"order"),delete this.getTask(t).$drop_target)},t.setDp=function(){this._dp=e},t.setDp()}(this.$gantt,this);const e=new ie(this.$gantt,this);e.attach(),this.attachEvent("onDestroy",(function(){delete this.setGanttMode,delete this._getRowData,delete this.$gantt._dp,delete this.$gantt._change_id,delete this.$gantt._row_style,delete this.$gantt._delete_task,delete this.$gantt._sendTaskOrder,delete this.$gantt,e.detach()})),this.$gantt.callEvent("onDataProcessorReady",[this]),this._initialized=!0}setOnAfterUpdate(t){this.attachEvent("onAfterUpdate",t)}setOnBeforeUpdateHandler(t){this.attachEvent("onBeforeDataSending",t)}setAutoUpdate(t,e){t=t||2e3,this._user=e||(new Date).valueOf(),this._needUpdate=!1,this._updateBusy=!1,this.attachEvent("onAfterUpdate",this.afterAutoUpdate),this.attachEvent("onFullSync",this.fullSync),setInterval((()=>{this.loadUpdate()}),t)}afterAutoUpdate(t,e,n,i){return"collision"!==e||(this._needUpdate=!0,!1)}fullSync(){return this._needUpdate&&(this._needUpdate=!1,this.loadUpdate()),!0}getUpdates(t,e){const n=this.$gantt.ajax;if(this._updateBusy)return!1;this._updateBusy=!0,n.get(t,e)}loadUpdate(){const t=this.$gantt.ajax,e=this.$gantt.getUserData(0,"version",this._ganttMode);let n=this.serverProcessor+t.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+e].join("&");n=n.replace("editing=true&",""),this.getUpdates(n,(e=>{const n=t.xpath("//userdata",e);this.$gantt.setUserData(0,"version",this._getXmlNodeValue(n[0]),this._ganttMode);const i=t.xpath("//update",e);if(i.length){this._silent_mode=!0;for(let t=0;t<i.length;t++){const e=i[t].getAttribute("status"),n=i[t].getAttribute("id"),a=i[t].getAttribute("parent");switch(e){case"inserted":this.callEvent("insertCallback",[i[t],n,a]);break;case"updated":this.callEvent("updateCallback",[i[t],n,a]);break;case"deleted":this.callEvent("deleteCallback",[i[t],n,a])}}this._silent_mode=!1}this._updateBusy=!1}))}destructor(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._storage.clear(),this._storage=null,this._headers=null,this._payload=null,delete this._initialized}setGanttMode(t){"tasks"===t?t="task":"links"===t&&(t="link");const e=this.modes||{},n=this.getGanttMode();n&&(e[n]={_in_progress:this._in_progress,_invalid:this._invalid,_storage:this._storage,updatedRows:this.updatedRows});let i=e[t];i||(i=e[t]={_in_progress:{},_invalid:{},_storage:re.create(),updatedRows:[]}),this._in_progress=i._in_progress,this._invalid=i._invalid,this._storage=i._storage,this.updatedRows=i.updatedRows,this.modes=e,this._ganttMode=t}getGanttMode(){return this._ganttMode}storeItem(t){this._storage.storeItem(t)}url(t){this.serverProcessor=this._serverProcessor=t}_beforeSendData(t,e){if(!this.callEvent("onBeforeUpdate",[e,this.getState(e),t]))return!1;this._sendData(t,e)}_serializeAsJSON(t){if("string"==typeof t)return t;const e=ut(t);return"REST-JSON"===this._tMode&&(delete e.id,delete e[this.action_param]),JSON.stringify(e)}_applyPayload(t){const e=this.$gantt.ajax;if(this._payload)for(const n in this._payload)t=t+e.urlSeparator(t)+this.escape(n)+"="+this.escape(this._payload[n]);return t}_cleanupArgumentsBeforeSend(t){let e;if(void 0===t[this.action_param]){e={};for(const n in t)e[n]=this._cleanupArgumentsBeforeSend(t[n])}else e=this._cleanupItemBeforeSend(t);return e}_cleanupItemBeforeSend(t){let e=null;return t&&("deleted"===t[this.action_param]?(e={},e.id=t.id,e[this.action_param]=t[this.action_param]):e=t),e}_sendData(t,e){if(!t)return;if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=(new Date).valueOf());const n=this.$gantt.ajax;if("CUSTOM"===this._tMode){const n=this.getState(e),i=this.getActionByState(n),a=this.getGanttMode(),r=t=>{let i=n||"updated",r=e,s=e;t&&(i=t.action||n,r=t.sid||r,s=t.id||t.tid||s),this.afterUpdateCallback(r,s,i,t,a)};let s;if(this._router instanceof Function)if("object"===this._routerParametersFormat){const n={entity:a,action:i,data:t,id:e};s=this._router(n)}else s=this._router(a,i,t,e);else if(this._router[a]instanceof Function)s=this._router[a](i,t,e);else{const i="Incorrect configuration of gantt.createDataProcessor",r="\nYou need to either add missing properties to the dataProcessor router object or to use a router function.\nSee https://docs.dhtmlx.com/gantt/desktop__server_side.html#customrouting and https://docs.dhtmlx.com/gantt/api__gantt_createdataprocessor.html for details.";if(!this._router[a])throw new Error(`${i}: router for the **${a}** entity is not defined. ${r}`);switch(n){case"inserted":if(!this._router[a].create)throw new Error(`${i}: **create** action for the **${a}** entity is not defined. ${r}`);s=this._router[a].create(t);break;case"deleted":if(!this._router[a].delete)throw new Error(`${i}: **delete** action for the **${a}** entity is not defined. ${r}`);s=this._router[a].delete(e);break;default:if(!this._router[a].update)throw new Error(`${i}: **update**" action for the **${a}** entity is not defined. ${r}`);s=this._router[a].update(t,e)}}if(s){if(!s.then&&void 0===s.id&&void 0===s.tid&&void 0===s.action)throw new Error("Incorrect router return value. A Promise or a response object is expected");s.then?s.then(r).catch((t=>{t&&t.action?r(t):r({action:"error",value:t})})):r(s)}else r(null);return}let i;i={callback:n=>{const i=[];if(e)i.push(e);else if(t)for(const e in t)i.push(e);return this.afterUpdate(this,n,i)},headers:this._headers};const a="dhx_version="+this.$gantt.getUserData(0,"version",this._ganttMode),r=this.serverProcessor+(this._user?n.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,a].join("&"):"");let s,o=this._applyPayload(r);switch(this._tMode){case"GET":s=this._cleanupArgumentsBeforeSend(t),i.url=o+n.urlSeparator(o)+this.serialize(s,e),i.method="GET";break;case"POST":s=this._cleanupArgumentsBeforeSend(t),i.url=o,i.method="POST",i.data=this.serialize(s,e);break;case"JSON":s={};const a=this._cleanupItemBeforeSend(t);for(const t in a)t!==this.action_param&&"id"!==t&&"gr_id"!==t&&(s[t]=a[t]);i.url=o,i.method="POST",i.data=JSON.stringify({id:e,action:t[this.action_param],data:s});break;case"REST":case"REST-JSON":switch(o=r.replace(/(&|\?)editing=true/,""),s="",this.getState(e)){case"inserted":i.method="POST",i.data=this.serialize(t,e);break;case"deleted":i.method="DELETE",o=o+("/"===o.slice(-1)?"":"/")+e;break;default:i.method="PUT",i.data=this.serialize(t,e),o=o+("/"===o.slice(-1)?"":"/")+e}i.url=this._applyPayload(o)}return this._waitMode++,n.query(i)}_forEachUpdatedRow(t){const e=this.updatedRows.slice();for(let n=0;n<e.length;n++){const i=e[n];this.$gantt.getUserData(i,this.action_param,this._ganttMode)&&t.call(this,i)}}_setDefaultTransactionMode(){this.serverProcessor&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!==this.serverProcessor.indexOf("?")?"&":"?")+"editing=true",this._serverProcessor=this.serverProcessor)}_getXmlNodeValue(t){return t.firstChild?t.firstChild.nodeValue:""}_getAllData(){const t={};let e=!1;return this._forEachUpdatedRow((function(n){if(this._in_progress[n]||this.is_invalid(n))return;const i=this._getRowData(n);this.callEvent("onBeforeUpdate",[n,this.getState(n),i])&&(t[n]=i,e=!0,this._in_progress[n]=(new Date).valueOf())})),e?t:null}_prepareDate(t){return this.$gantt.defined(this.$gantt.templates.xml_format)?this.$gantt.templates.xml_format(t):this.$gantt.templates.format_date(t)}_prepareArray(t,e){return e.push(t),t.map((t=>Q(t)?this._prepareDate(t):Array.isArray(t)&&!X(e,t)?this._prepareArray(t,e):t&&"object"==typeof t&&!X(e,t)?this._prepareObject(t,e):t))}_prepareObject(t,e){const n={};e.push(t);for(const i in t){if("$"===i.substr(0,1))continue;const a=t[i];Q(a)?n[i]=this._prepareDate(a):null===a?n[i]="":Array.isArray(a)&&!X(e,a)?n[i]=this._prepareArray(a,e):a&&"object"==typeof a&&!X(e,a)?n[i]=this._prepareObject(a,e):n[i]=a}return n}_prepareDataItem(t){const e=this._prepareObject(t,[]);return e[this.action_param]=this.$gantt.getUserData(t.id,this.action_param,this._ganttMode),e}getStoredItem(t){return this._storage.getStoredItem(t)}_getRowData(t){let e;const n=this.$gantt;return"task"===this.getGanttMode()?n.isTaskExists(t)&&(e=this.$gantt.getTask(t)):"assignment"===this.getGanttMode()?this.$gantt.$data.assignmentsStore.exists(t)&&(e=this.$gantt.$data.assignmentsStore.getItem(t)):"baseline"===this.getGanttMode()?this.$gantt.$data.baselineStore.exists(t)&&(e=this.$gantt.$data.baselineStore.getItem(t)):n.isLinkExists(t)&&(e=this.$gantt.getLink(t)),e||(e=this.getStoredItem(t)),e||(e={id:t}),this._prepareDataItem(e)}};const oe={DEPRECATED_api:function(t){return new se(t)},createDataProcessor:function(t){let e,n,i;t instanceof Function?e=t:t.hasOwnProperty("router")?e=t.router:t.hasOwnProperty("assignment")||t.hasOwnProperty("baseline")||t.hasOwnProperty("link")||t.hasOwnProperty("task")?e=t:t.hasOwnProperty("headers")&&(i=t.headers),n=e?"CUSTOM":t.mode||"REST-JSON";const a=new se(t.url);return a.init(this),a.setTransactionMode({mode:n,router:e,headers:i},t.batchUpdate),t.deleteAfterConfirmation&&(a.deleteAfterConfirmation=t.deleteAfterConfirmation),a}};function le(t){var e={},n=!1;function i(t,n){n="function"==typeof n?n:function(){},e[t]||(e[t]=this[t],this[t]=n)}function a(t){e[t]&&(this[t]=e[t],e[t]=null)}function r(t){for(var e in t)i.call(this,e,t[e])}function s(){for(var t in e)a.call(this,t)}function o(t){try{t()}catch(e){W.console.error(e)}}return t.$services.getService("state").registerProvider("batchUpdate",(function(){return{batch_update:n}}),!1),function(t,e){if(n)o(t);else{var i,a=this._dp&&"off"!=this._dp.updateMode;a&&(i=this._dp.updateMode,this._dp.setUpdateMode("off"));var l={},c={render:!0,refreshData:!0,refreshTask:!0,refreshLink:!0,resetProjectDates:function(t){l[t.id]=t}};for(var d in r.call(this,c),n=!0,this.callEvent("onBeforeBatchUpdate",[]),o(t),this.callEvent("onAfterBatchUpdate",[]),s.call(this),l)this.resetProjectDates(l[d]);n=!1,e||this.render(),a&&(this._dp.setUpdateMode(i),this._dp.setGanttMode("task"),this._dp.sendData(),this._dp.setGanttMode("link"),this._dp.sendData())}}}function ce(t){t.batchUpdate=le(t)}var de=function(t){return{_needRecalc:!0,reset:function(){this._needRecalc=!0},_isRecalcNeeded:function(){return!this._isGroupSort()&&this._needRecalc},_isGroupSort:function(){return!!t.getState().group_mode},_getWBSCode:function(t){return t?(this._isRecalcNeeded()&&this._calcWBS(),t.$virtual?"":this._isGroupSort()?t.$wbs||"":(t.$wbs||(this.reset(),this._calcWBS()),t.$wbs)):""},_setWBSCode:function(t,e){t.$wbs=e},getWBSCode:function(t){return this._getWBSCode(t)},getByWBSCode:function(e){for(var n=e.split("."),i=t.config.root_id,a=0;a<n.length;a++){var r=t.getChildren(i),s=1*n[a]-1;if(!t.isTaskExists(r[s]))return null;i=r[s]}return t.isTaskExists(i)?t.getTask(i):null},_calcWBS:function(){if(this._isRecalcNeeded()){var e=!0;t.eachTask((function(n){if(e)return e=!1,void this._setWBSCode(n,"1");var i=t.getPrevSibling(n.id);if(null!==i){var a=t.getTask(i).$wbs;a&&((a=a.split("."))[a.length-1]++,this._setWBSCode(n,a.join(".")))}else{var r=t.getParent(n.id);this._setWBSCode(n,t.getTask(r).$wbs+".1")}}),t.config.root_id,this),this._needRecalc=!1}}}};function ue(t){var e=de(t);function n(){return e.reset(),!0}t.getWBSCode=function(t){return e.getWBSCode(t)},t.getTaskByWBSCode=function(t){return e.getByWBSCode(t)},t.attachEvent("onAfterTaskMove",n),t.attachEvent("onBeforeParse",n),t.attachEvent("onAfterTaskDelete",n),t.attachEvent("onAfterTaskAdd",n),t.attachEvent("onAfterSort",n)}function he(t){var e={},n=!1;t.$data.tasksStore.attachEvent("onStoreUpdated",(function(){e={},n=!1})),t.attachEvent("onBeforeGanttRender",(function(){e={}}));var i=String(Math.random());function a(t){return null===t?i+String(t):String(t)}function r(t,e,n){return Array.isArray(t)?t.map((function(t){return a(t)})).join("_")+`_${e}_${n}`:a(t)+`_${e}_${n}`}function s(i,s,o){var l,c=r(s,i,JSON.stringify(o)),d={};return J(s,(function(t){d[a(t)]=!0})),e[c]?l=e[c]:(l=e[c]=[],t.eachTask((function(s){if(o){if(!o[t.getTaskType(s)])return}else if(s.type==t.config.types.project)return;i in s&&J(Z(s[i])?s[i]:[s[i]],(function(t){var o=t&&t.resource_id?t.resource_id:t;if(d[a(o)])l.push(s);else if(!n){var c=r(t,i);e[c]||(e[c]=[]),e[c].push(s)}}))})),n=!0),l}function o(e,n,i){var a=t.config.resource_property,r=[];if(t.getDatastore("task").exists(n)){var s=t.getTask(n);r=s[a]||[]}Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++)r[o].resource_id==e&&i.push({task_id:s.id,resource_id:r[o].resource_id,value:r[o].value})}return{getTaskBy:function(e,n,i){return"function"==typeof e?(a=e,r=[],t.eachTask((function(t){a(t)&&r.push(t)})),r):Z(n)?s(e,n,i):s(e,[n],i);var a,r},getResourceAssignments:function(e,n){var i=[],a=t.config.resource_property;return void 0!==n?o(e,n,i):t.getTaskBy(a,e).forEach((function(t){o(e,t.id,i)})),i}}}function _e(t){var e=he(t);t.ext.resources=function(t){const e={renderEditableLabel:function(e,n,i,a,r){const s=t.config.readonly?"":"contenteditable";if(e<i.end_date&&n>i.start_date){for(let a=0;a<r.length;a++){const o=r[a];return"<div "+s+" data-assignment-cell data-assignment-id='"+o.id+"' data-row-id='"+i.id+"' data-task='"+i.$task_id+"' data-start-date='"+t.templates.format_date(e)+"' data-end-date='"+t.templates.format_date(n)+"'>"+o.value+"</div>"}return"<div "+s+" data-assignment-cell data-empty  data-row-id='"+i.id+"' data-resource-id='"+i.$resource_id+"' data-task='"+i.$task_id+"' data-start-date='"+t.templates.format_date(e)+"''  data-end-date='"+t.templates.format_date(n)+"'>-</div>"}return""},renderSummaryLabel:function(t,e,n,i,a){let r=a.reduce((function(t,e){return t+Number(e.value)}),0);return r%1&&(r=Math.round(10*r)/10),r?"<div>"+r+"</div>":""},editableResourceCellTemplate:function(t,n,i,a,r){return"task"===i.$role?e.renderEditableLabel(t,n,i,a,r):e.renderSummaryLabel(t,n,i,a,r)},editableResourceCellClass:function(t,e,n,i,a){const r=[];r.push("resource_marker"),"task"===n.$role?r.push("task_cell"):r.push("resource_cell");const s=a.reduce((function(t,e){return t+Number(e.value)}),0);let o=Number(n.capacity);return isNaN(o)&&(o=8),s<=o?r.push("workday_ok"):r.push("workday_over"),r.join(" ")},getSummaryResourceAssignments:function(e){let n;const i=t.getDatastore(t.config.resource_store),a=i.getItem(e);return"task"===a.$role?n=t.getResourceAssignments(a.$resource_id,a.$task_id):(n=t.getResourceAssignments(e),i.eachItem&&i.eachItem((function(e){"task"!==e.$role&&(n=n.concat(t.getResourceAssignments(e.id)))}),e)),n},initEditableDiagram:function(){t.config.resource_render_empty_cells=!0,function(){let e=null;function n(){return e&&cancelAnimationFrame(e),e=requestAnimationFrame((function(){t.$container&&Array.prototype.slice.call(t.$container.querySelectorAll(".resourceTimeline_cell [data-assignment-cell]")).forEach((function(t){t.contentEditable=!0}))})),!0}t.attachEvent("onGanttReady",(function(){t.getDatastore(t.config.resource_assignment_store).attachEvent("onStoreUpdated",n),t.getDatastore(t.config.resource_store).attachEvent("onStoreUpdated",n)}),{once:!0}),t.attachEvent("onGanttLayoutReady",(function(){t.$layout.getCellsByType("viewCell").forEach((function(t){t.$config&&"resourceTimeline"===t.$config.view&&t.$content&&t.$content.attachEvent("onScroll",n)}))}))}(),t.attachEvent("onGanttReady",(function(){let e=!1;t.event(t.$container,"keypress",(function(t){var e=t.target.closest(".resourceTimeline_cell [data-assignment-cell]");e&&(13!==t.keyCode&&27!==t.keyCode||e.blur())})),t.event(t.$container,"focusout",(function(n){if(!e){e=!0,setTimeout((function(){e=!1}),300);var i=n.target.closest(".resourceTimeline_cell [data-assignment-cell]");if(i){var a=(i.innerText||"").trim();"-"==a&&(a="0");var r=Number(a),s=i.getAttribute("data-row-id"),o=i.getAttribute("data-assignment-id"),l=i.getAttribute("data-task"),c=i.getAttribute("data-resource-id"),d=t.templates.parse_date(i.getAttribute("data-start-date")),u=t.templates.parse_date(i.getAttribute("data-end-date")),h=t.getDatastore(t.config.resource_assignment_store);if(isNaN(r))t.getDatastore(t.config.resource_store).refresh(s);else{var _=t.getTask(l);if(t.plugins().undo&&t.ext.undo.saveState(l,"task"),o){if(r===(g=h.getItem(o)).value)return;if(g.start_date.valueOf()===d.valueOf()&&g.end_date.valueOf()===u.valueOf())g.value=r,r?h.updateItem(g.id):h.removeItem(g.id);else{if(g.end_date.valueOf()>u.valueOf()){var f=t.copy(g);f.id=t.uid(),f.start_date=u,f.duration=t.calculateDuration({start_date:f.start_date,end_date:f.end_date,task:_}),f.delay=t.calculateDuration({start_date:_.start_date,end_date:f.start_date,task:_}),f.mode=g.mode||"default",0!==f.duration&&h.addItem(f)}g.start_date.valueOf()<d.valueOf()?(g.end_date=d,g.duration=t.calculateDuration({start_date:g.start_date,end_date:g.end_date,task:_}),g.mode="fixedDuration",0===g.duration?h.removeItem(g.id):h.updateItem(g.id)):h.removeItem(g.id),r&&h.addItem({task_id:g.task_id,resource_id:g.resource_id,value:r,start_date:d,end_date:u,duration:t.calculateDuration({start_date:d,end_date:u,task:_}),delay:t.calculateDuration({start_date:_.start_date,end_date:d,task:_}),mode:"fixedDuration"})}t.updateTaskAssignments(_.id),t.updateTask(_.id)}else if(r){var g={task_id:l,resource_id:c,value:r,start_date:d,end_date:u,duration:t.calculateDuration({start_date:d,end_date:u,task:_}),delay:t.calculateDuration({start_date:_.start_date,end_date:d,task:_}),mode:"fixedDuration"};h.addItem(g),t.updateTaskAssignments(_.id),t.updateTask(_.id)}}}}}))}),{once:!0})}};return e}(t),t.config.resources={dataprocessor_assignments:!1,dataprocessor_resources:!1,editable_resource_diagram:!1,resource_store:{type:"treeDataStore",fetchTasks:!1,initItem:function(e){return e.parent=e.parent||t.config.root_id,e[t.config.resource_property]=e.parent,e.open=!0,e}},lightbox_resources:function(e){const n=[],i=t.getDatastore(t.config.resource_store);return e.forEach((function(e){if(!i.hasChild(e.id)){const i=t.copy(e);i.key=e.id,i.label=e.text,n.push(i)}})),n}},t.attachEvent("onBeforeGanttReady",(function(){if(t.getDatastore(t.config.resource_store))return;const e=t.config.resources?t.config.resources.resource_store:void 0;let n=e?e.fetchTasks:void 0;t.config.resources&&t.config.resources.editable_resource_diagram&&(n=!0);let i=function(e){return e.parent=e.parent||t.config.root_id,e[t.config.resource_property]=e.parent,e.open=!0,e};e&&e.initItem&&(i=e.initItem);const a=e&&e.type?e.type:"treeDatastore";t.$resourcesStore=t.createDatastore({name:t.config.resource_store,type:a,fetchTasks:void 0!==n&&n,initItem:i}),t.$data.resourcesStore=t.$resourcesStore,t.$resourcesStore.attachEvent("onParse",(function(){let e=function(e){const n=[];return e.forEach((function(e){if(!t.$resourcesStore.hasChild(e.id)){var i=t.copy(e);i.key=e.id,i.label=e.text,n.push(i)}})),n};t.config.resources&&t.config.resources.lightbox_resources&&(e=t.config.resources.lightbox_resources);const n=e(t.$resourcesStore.getItems());t.updateCollection("resourceOptions",n)}))})),t.getTaskBy=e.getTaskBy,t.getResourceAssignments=e.getResourceAssignments,t.config.resource_property="owner_id",t.config.resource_store="resource",t.config.resource_render_empty_cells=!1,t.templates.histogram_cell_class=function(t,e,n,i,a){},t.templates.histogram_cell_label=function(t,e,n,i,a){return i.length+"/3"},t.templates.histogram_cell_allocated=function(t,e,n,i,a){return i.length/3},t.templates.histogram_cell_capacity=function(t,e,n,i,a){return 0};const n=function(t,e,n,i,a){return i.length<=1?"gantt_resource_marker_ok":"gantt_resource_marker_overtime"},i=function(t,e,n,i,a){return 8*i.length};t.templates.resource_cell_value=i,t.templates.resource_cell_class=n,t.attachEvent("onBeforeGanttReady",(function(){t.config.resources&&t.config.resources.editable_resource_diagram&&(t.config.resource_render_empty_cells=!0,t.templates.resource_cell_value===i&&(t.templates.resource_cell_value=t.ext.resources.editableResourceCellTemplate),t.templates.resource_cell_class===n&&(t.templates.resource_cell_class=t.ext.resources.editableResourceCellClass),t.ext.resources.initEditableDiagram(t))}))}function fe(t){var e="$resourceAssignments";t.config.resource_assignment_store="resourceAssignments",t.config.process_resource_assignments=!0;var n={auto:"auto",singleValue:"singleValue",valueArray:"valueArray",resourceValueArray:"resourceValueArray",assignmentsArray:"assignmentsArray"},i=n.auto,a={fixedDates:"fixedDates",fixedDuration:"fixedDuration",default:"default"};function r(e,n){e.start_date?e.start_date=t.date.parseDate(e.start_date,"parse_date"):e.start_date=null,e.end_date?e.end_date=t.date.parseDate(e.end_date,"parse_date"):e.end_date=null;var i=Number(e.delay),r=!1;if(isNaN(i)?(e.delay=0,r=!0):e.delay=i,t.defined(e.value)||(e.value=null),!e.task_id||!e.resource_id)return!1;if(e.mode=e.mode||a.default,e.mode===a.fixedDuration&&(isNaN(Number(e.duration))&&(n=n||t.getTask(e.task_id),e.duration=t.calculateDuration({start_date:e.start_date,end_date:e.end_date,id:n})),r&&(n=n||t.getTask(e.task_id),e.delay=t.calculateDuration({start_date:n.start_date,end_date:e.start_date,id:n}))),e.mode!==a.fixedDates&&(n||t.isTaskExists(e.task_id))){var s=o(e,n=n||t.getTask(e.task_id));e.start_date=s.start_date,e.end_date=s.end_date,e.duration=s.duration}}var s=t.createDatastore({name:t.config.resource_assignment_store,initItem:function(e){return e.id||(e.id=t.uid()),r(e),e}});function o(e,n){if(e.mode===a.fixedDates)return{start_date:e.start_date,end_date:e.end_date,duration:e.duration};var i,r,s=e.delay?t.calculateEndDate({start_date:n.start_date,duration:e.delay,task:n}):new Date(n.start_date);return e.mode===a.fixedDuration?(i=t.calculateEndDate({start_date:s,duration:e.duration,task:n}),r=e.duration):(i=new Date(n.end_date),r=n.duration-e.delay),{start_date:s,end_date:i,duration:r}}function l(e){const s=t.config.resource_property;let o=e[s];const l=[];let c=i===n.auto;if(t.defined(o)&&o){Array.isArray(o)||(o=[o],c&&(i=n.singleValue,c=!1));const s={};o.forEach((function(o){o.resource_id||(o={resource_id:o},c&&(i=n.valueArray,c=!1)),c&&(o.id&&o.resource_id?(i=n.assignmentsArray,c=!1):(i=n.resourceValueArray,c=!1));let d,u=a.default;o.mode||(o.start_date&&o.end_date||o.start_date&&o.duration)&&(u=a.fixedDuration),d=o.id||!o.$id||s[o.$id]?o.id&&!s[o.id]?o.id:t.uid():o.$id,s[d]=!0;const h={id:d,start_date:o.start_date,duration:o.duration,end_date:o.end_date,delay:o.delay,task_id:e.id,resource_id:o.resource_id,value:o.value,mode:o.mode||u};Object.keys(o).forEach((t=>{"$id"!=t&&(h[t]=o[t])})),h.start_date&&h.start_date.getMonth&&h.end_date&&h.end_date.getMonth&&"number"==typeof h.duration||r(h,e),l.push(h)}))}return l}function c(e){if(t.isTaskExists(e)){var n=t.getTask(e);d(n,t.getTaskAssignments(n.id))}}function d(a,r){r.sort((function(t,e){return t.start_date&&e.start_date&&t.start_date.valueOf()!=e.start_date.valueOf()?t.start_date-e.start_date:0})),i==n.assignmentsArray?a[t.config.resource_property]=r:i==n.resourceValueArray&&(a[t.config.resource_property]=r.map((function(t){return{$id:t.id,start_date:t.start_date,duration:t.duration,end_date:t.end_date,delay:t.delay,resource_id:t.resource_id,value:t.value,mode:t.mode}}))),a[e]=r}function u(e){var n=l(e);return n.forEach((function(e){e.id=e.id||t.uid()})),n}function h(t,e){var r=function(t,e){var a={inBoth:[],inTaskNotInStore:[],inStoreNotInTask:[]};if(i==n.singleValue){var r=t[0],s=r?r.resource_id:null,o=!1;e.forEach((function(t){t.resource_id!=s?a.inStoreNotInTask.push(t):t.resource_id==s&&(a.inBoth.push({store:t,task:r}),o=!0)})),!o&&r&&a.inTaskNotInStore.push(r)}else if(i==n.valueArray){var l={},c={},d={};t.forEach((function(t){l[t.resource_id]=t})),e.forEach((function(t){c[t.resource_id]=t})),t.concat(e).forEach((function(t){if(!d[t.resource_id]){d[t.resource_id]=!0;var e=l[t.resource_id],n=c[t.resource_id];e&&n?a.inBoth.push({store:n,task:e}):e&&!n?a.inTaskNotInStore.push(e):!e&&n&&a.inStoreNotInTask.push(n)}}))}else i!=n.assignmentsArray&&i!=n.resourceValueArray||(l={},c={},d={},t.forEach((function(t){l[t.id||t.$id]=t})),e.forEach((function(t){c[t.id]=t})),t.concat(e).forEach((function(t){var e=t.id||t.$id;if(!d[e]){d[e]=!0;var n=l[e],i=c[e];n&&i?a.inBoth.push({store:i,task:n}):n&&!i?a.inTaskNotInStore.push(n):!n&&i&&a.inStoreNotInTask.push(i)}})));return a}(l(t),e);r.inStoreNotInTask.forEach((function(t){s.removeItem(t.id)})),r.inTaskNotInStore.forEach((function(t){s.addItem(t)})),r.inBoth.forEach((function(e){if(function(t,e){var n={id:!0};for(var i in t)if(!n[i]&&String(t[i])!==String(e[i]))return!0;return!1}(e.task,e.store))(function(t,e){var n={id:!0};for(var i in t)n[i]||(e[i]=t[i])})(e.task,e.store),s.updateItem(e.store.id);else if(e.task.start_date&&e.task.end_date&&e.task.mode!==a.fixedDates){var n=o(e.store,t);e.store.start_date.valueOf()==n.start_date.valueOf()&&e.store.end_date.valueOf()==n.end_date.valueOf()||(e.store.start_date=n.start_date,e.store.end_date=n.end_date,e.store.duration=n.duration,s.updateItem(e.store.id))}})),c(t.id)}function _(t){var n=t[e]||s.find((function(e){return e.task_id==t.id}));h(t,n)}t.$data.assignmentsStore=s,t.attachEvent("onGanttReady",(function(){if(t.config.process_resource_assignments){t.attachEvent("onParse",(function(){t.silent((function(){s.clearAll();var e=[];t.eachTask((function(n){if(n.type!==t.config.types.project){var i=u(n);d(n,i),i.forEach((function(t){e.push(t)}))}})),s.parse(e)}))}));var e=!1,n=!1,i={},a=!1;t.attachEvent("onBeforeBatchUpdate",(function(){e=!0})),t.attachEvent("onAfterBatchUpdate",(function(){if(n){var a={};for(var r in i)a[r]=t.getTaskAssignments(i[r].id);for(var r in i)h(i[r],a[r])}n=!1,e=!1,i={}})),t.attachEvent("onTaskCreated",(function(t){var e=u(t);return s.parse(e),d(t,e),!0})),t.attachEvent("onAfterTaskUpdate",(function(t,a){e?(n=!0,i[t]=a):a.unscheduled||_(a)})),t.attachEvent("onAfterTaskAdd",(function(t,a){e?(n=!0,i[t]=a):_(a)})),t.attachEvent("onRowDragEnd",(function(e){_(t.getTask(e))})),t.$data.tasksStore.attachEvent("onAfterDeleteConfirmed",(function(e,n){var i,a=[e];t.eachTask((function(t){a.push(t.id)}),e),i={},a.forEach((function(t){i[t]=!0})),s.find((function(t){return i[t.task_id]})).forEach((function(t){s.removeItem(t.id)}))})),t.$data.tasksStore.attachEvent("onClearAll",(function(){return r=null,o=null,l=null,s.clearAll(),!0})),t.attachEvent("onTaskIdChange",(function(t,e){s.find((function(e){return e.task_id==t})).forEach((function(t){t.task_id=e,s.updateItem(t.id)})),c(e)})),t.attachEvent("onBeforeUndo",(function(t){return a=!0,!0})),t.attachEvent("onAfterUndo",(function(t){a=!0}));var r=null,o=null,l=null;s.attachEvent("onStoreUpdated",(function(){return e&&!a||(r=null,o=null,l=null),!0})),t.getResourceAssignments=function(e,n){var i=t.defined(n)&&null!==n;return null===r&&(r={},o={},s.eachItem((function(t){r[t.resource_id]||(r[t.resource_id]=[]),r[t.resource_id].push(t);var e=t.resource_id+"-"+t.task_id;o[e]||(o[e]=[]),o[e].push(t)}))),i?(o[e+"-"+n]||[]).slice():(r[e]||[]).slice()},t.getTaskAssignments=function(t){if(null===l){var e=[];l={},s.eachItem((function(n){l[n.task_id]||(l[n.task_id]=[]),l[n.task_id].push(n),n.task_id==t&&e.push(n)}))}return(l[t]||[]).slice()},t.getTaskResources=function(e){const n=t.getDatastore("resource"),i=t.getTaskAssignments(e),a={};i.forEach((function(t){a[t.resource_id]||(a[t.resource_id]=t.resource_id)}));const r=[];for(const t in a){const e=n.getItem(a[t]);e&&r.push(e)}return r},t.updateTaskAssignments=c}}),{once:!0})}function ge(t){function e(e){return function(){return!t.config.placeholder_task||e.apply(this,arguments)}}function n(){var e=t.getTaskBy("type",t.config.types.placeholder);if(!e.length||!t.isTaskExists(e[0].id)){var n={unscheduled:!0,type:t.config.types.placeholder,duration:0,text:t.locale.labels.new_task};if(!1===t.callEvent("onTaskCreated",[n]))return;t.addTask(n)}}function i(e){var n=t.getTask(e);n.type==t.config.types.placeholder&&(n.start_date&&n.end_date&&n.unscheduled&&(n.unscheduled=!1),t.batchUpdate((function(){var e=t.copy(n);t.silent((function(){t.deleteTask(n.id)})),delete e["!nativeeditor_status"],e.type=t.config.types.task,e.id=t.uid(),t.addTask(e)})))}t.config.types.placeholder="placeholder",t.attachEvent("onDataProcessorReady",e((function(n){n&&!n._silencedPlaceholder&&(n._silencedPlaceholder=!0,n.attachEvent("onBeforeUpdate",e((function(e,i,a){return a.type!=t.config.types.placeholder||(n.setUpdated(e,!1),!1)}))))})));var a=!1;function r(e){return!(!t.config.types.placeholder||!t.isTaskExists(e)||t.getTask(e).type!=t.config.types.placeholder)}function s(t){return!(!r(t.source)&&!r(t.target))}t.attachEvent("onGanttReady",(function(){a||(a=!0,t.attachEvent("onAfterTaskUpdate",e(i)),t.attachEvent("onAfterTaskAdd",e((function(e,i){i.type!=t.config.types.placeholder&&(t.getTaskBy("type",t.config.types.placeholder).forEach((function(e){t.silent((function(){t.isTaskExists(e.id)&&t.deleteTask(e.id)}))})),n())}))),t.attachEvent("onParse",e(n)))})),t.attachEvent("onLinkValidation",(function(t){return!s(t)})),t.attachEvent("onBeforeLinkAdd",(function(t,e){return!s(e)})),t.attachEvent("onBeforeUndoStack",(function(e){for(var n=0;n<e.commands.length;n++){var i=e.commands[n];"task"===i.entity&&i.value.type===t.config.types.placeholder&&(e.commands.splice(n,1),n--)}return!0}))}function pe(t){function e(e){return function(){return!t.config.auto_types||t.getTaskType(t.config.types.project)!=t.config.types.project||e.apply(this,arguments)}}function n(e,n){var i=t.getTask(e),a=r(i);!1!==a&&t.getTaskType(i)!==a&&(n.$needsUpdate=!0,n[i.id]={task:i,type:a})}function i(e){if(!t.getState().group_mode){var i=function(e,i){return n(e,i=i||{}),t.eachParent((function(t){n(t.id,i)}),e),i}(e);i.$needsUpdate&&t.batchUpdate((function(){(function(e){for(var n in e)if(e[n]&&e[n].task){var i=e[n].task;i.type=e[n].type,t.updateTask(i.id)}})(i)}))}}var a;function r(e){var n=t.config.types,i=t.hasChild(e.id),a=t.getTaskType(e.type);return i&&a===n.task?n.project:!i&&a===n.project&&n.task}var s,o,l=!0;function c(e){e!=t.config.root_id&&t.isTaskExists(e)&&i(e)}t.attachEvent("onParse",e((function(){l=!1,t.getState().group_mode||(t.batchUpdate((function(){t.eachTask((function(e){var n=r(e);!1!==n&&function(e,n){t.getState().group_mode||(e.type=n,t.updateTask(e.id))}(e,n)}))})),l=!0)}))),t.attachEvent("onAfterTaskAdd",e((function(t){l&&i(t)}))),t.attachEvent("onAfterTaskUpdate",e((function(t){l&&i(t)}))),t.attachEvent("onBeforeTaskDelete",e((function(e,n){return a=t.getParent(e),!0}))),t.attachEvent("onAfterTaskDelete",e((function(t,e){c(a)}))),t.attachEvent("onRowDragStart",e((function(e,n,i){return s=t.getParent(e),!0}))),t.attachEvent("onRowDragEnd",e((function(t,e){c(s),i(t)}))),t.attachEvent("onBeforeTaskMove",e((function(e,n,i){return o=t.getParent(e),!0}))),t.attachEvent("onAfterTaskMove",e((function(t,e,n){document.querySelector(".gantt_drag_marker")||(c(o),i(t))})))}const me=class{constructor(){this.canParse=t=>!isNaN(this.parse(t)),this.format=t=>String(t),this.parse=t=>parseInt(t,10)}};me.create=(t=null)=>new me;let ve=me;const ke=class{constructor(t){this.format=t=>this._getWBSCode(t.source),this.canParse=t=>this._linkReg.test(t),this.parse=t=>{if(!this.canParse(t))return null;const e=this._linkReg.exec(t)[0].trim();return{id:void 0,source:this._findSource(e)||null,target:null,type:this._gantt.config.links.finish_to_start,lag:0}},this._getWBSCode=t=>{const e=this._gantt.getTask(t);return this._gantt.getWBSCode(e)},this._findSource=t=>{const e=new RegExp("^[0-9.]+","i");if(e.exec(t)){const n=e.exec(t)[0],i=this._gantt.getTaskByWBSCode(n);if(i)return i.id}return null},this._linkReg=/^[0-9\.]+/,this._gantt=t}};ke.create=(t=null,e)=>new ke(e);let ye=ke;function be(t){t.ext.formatters={durationFormatter:function(e){return e||(e={}),e.store||(e.store=t.config.duration_unit),e.enter||(e.enter=t.config.duration_unit),ve.create(e,t)},linkFormatter:function(e){return ye.create(e,t)}}}function xe(t){t.ext=t.ext||{},t.config.show_empty_state=!1,t.ext.emptyStateElement=t.ext.emptyStateElement||{isEnabled:()=>!0===t.config.show_empty_state,isGanttEmpty:()=>!t.getTaskByTime().length,renderContent(e){const n=`<div class='gantt_empty_state'><div class='gantt_empty_state_image'></div><div class='gantt_empty_state_text'>\n    <div class='gantt_empty_state_text_link' data-empty-state-create-task>${t.locale.labels.empty_state_text_link}</div>\n    <div class='gantt_empty_state_text_description'>${t.locale.labels.empty_state_text_description}</div>\n    </div></div>`;e.innerHTML=n},clickEvents:[],attachAddTaskEvent(){const e=t.attachEvent("onEmptyClick",(function(e){t.utils.dom.closest(e.target,"[data-empty-state-create-task]")&&t.createTask({id:t.uid(),text:"New Task"})}));this.clickEvents.push(e)},detachAddTaskEvents(){this.clickEvents.forEach((function(e){t.detachEvent(e)})),this.clickEvents=[]},getContainer(){if(t.$container){const e=t.utils.dom;if(t.$container.contains(t.$grid_data))return e.closest(t.$grid_data,".gantt_layout_content");if(t.$container.contains(t.$task_data))return e.closest(t.$task_data,".gantt_layout_content")}return null},getNode(){const t=this.getContainer();return t?t.querySelector(".gantt_empty_state_wrapper"):null},show(){const e=this.getContainer();if(!e&&this.isGanttEmpty())return null;const n=document.createElement("div");n.className="gantt_empty_state_wrapper",n.style.marginTop=t.config.scale_height-e.offsetHeight+"px";const i=t.$container.querySelectorAll(".gantt_empty_state_wrapper");Array.prototype.forEach.call(i,(function(t){t.parentNode.removeChild(t)})),this.detachAddTaskEvents(),this.attachAddTaskEvent(),e.appendChild(n),this.renderContent(n)},hide(){const t=this.getNode();if(!t)return!1;t.parentNode.removeChild(t)},init(){}},t.attachEvent("onDataRender",(function(){const e=t.ext.emptyStateElement;e.isEnabled()&&e.isGanttEmpty()?e.show():e.hide()}))}const $e=function(t,e){const n=e.baselines&&e.baselines.length,i="separateRow"==t.config.baselines.render_mode||"individualRow"==t.config.baselines.render_mode;if(n&&i)return!0},we=function(t,e){let n=!1;return t.eachTask((function(e){n||(n=$e(t,e))}),e),n},Se=function(t){return t.render&&"split"==t.render&&!t.$open},Te=function(t,e,n,i){let a=i||e.$task_data.scrollHeight,r=!1,s=!1;return t.eachParent((function(t){if(Se(t)){s=!0;const n=e.getItemPosition(t).rowHeight;n<a&&(a=n,r=!0)}}),n.id),{maxHeight:a,shrinkHeight:r,splitChild:s}};function Ee(t){t.config.baselines={datastore:"baselines",render_mode:!1,dataprocessor_baselines:!1,row_height:16,bar_height:8};const e=t.createDatastore({name:t.config.baselines.datastore,initItem:function(e){return e.id||(e.id=t.uid()),function(e){if(!e.task_id||!e.start_date&&!e.end_date)return!1;e.start_date?e.start_date=t.date.parseDate(e.start_date,"parse_date"):e.start_date=null,e.end_date?e.end_date=t.date.parseDate(e.end_date,"parse_date"):e.end_date=null,e.duration=e.duration||1,e.start_date&&!e.end_date?e.end_date=t.calculateEndDate(e.start_date,e.duration):e.end_date&&!e.start_date&&(e.start_date=t.calculateEndDate(e.end_date,-e.duration))}(e),e}});function n(e){let n=0;t.adjustTaskHeightForBaselines(e),t.eachTask((function(e){let i=e.row_height||t.config.row_height;n=n||i,i>n&&(n=i)}),e.id),e.row_height<n&&(e.row_height=n)}function i(e){t.eachParent((function(n){if(Se(n)){const i=n.row_height||t.getLayoutView("timeline").getBarHeight(n.id);let a=e.row_height;t.getChildren(n.id).forEach((function(n){const i=t.getTask(n);if(i.id==e.id)return;const r=i.row_height||t.getLayoutView("timeline").getBarHeight(i.id);a=a||r,r>a&&(a=r)})),n.row_height=a,n.bar_height=n.bar_height||i}}),e.id)}t.$data.baselineStore=e,t.adjustTaskHeightForBaselines=function(e){let n,a,r=e.baselines&&e.baselines.length||0;const s=t.config.baselines.row_height;switch(t.config.baselines.render_mode){case"taskRow":e.row_height=e.bar_height+4;break;case"separateRow":n=t.getLayoutView("timeline").getBarHeight(e.id),r?(e.bar_height=e.bar_height||n,e.bar_height>n&&(n=e.bar_height),e.row_height=n+s):e.bar_height&&(e.row_height=e.bar_height+4),i(e);break;case"individualRow":n=t.getLayoutView("timeline").getBarHeight(e.id),r?(e.bar_height=e.bar_height||n,e.bar_height>n&&(n=e.bar_height),a=s*r,e.row_height=n+a+2):e.bar_height&&(e.row_height=e.bar_height+4),i(e)}},t.attachEvent("onGanttReady",(function(){!1!==t.config.baselines&&(t.attachEvent("onParse",(function(){e.eachItem((function(e){const i=e.task_id;if(t.isTaskExists(i)){const a=t.getTask(i);a.baselines=a.baselines||[];let r=!0;for(let n=0;n<a.baselines.length;n++){let i=a.baselines[n];if(i.id==e.id){r=!1,t.mixin(i,e,!0);break}}r&&a.baselines.push(e),Se(a)?n(a):t.adjustTaskHeightForBaselines(a)}}))})),t.attachEvent("onBeforeTaskUpdate",(function(i,a){return function(i){let a=!1;const r={},s=i.baselines||[],o=t.getTaskBaselines(i.id);s.length!=o.length&&(a=!0),s.forEach((function(t){r[t.id]=!0;const n=e.getItem(t.id);if(n){const i=+n.start_date!=+t.start_date,a=+n.end_date!=+t.end_date;(i||a)&&e.updateItem(t.id,t)}else e.addItem(t)})),o.forEach((function(t){r[t.id]||e.removeItem(t.id)})),a&&(Se(i)?n(i):t.adjustTaskHeightForBaselines(i),t.render())}(a),!0})),t.attachEvent("onAfterUndo",(function(e){if(("separateRow"==t.config.baselines.render_mode||"individualRow"==t.config.baselines.render_mode)&&e){let i=!1;e.commands.forEach((function(e){if("task"==e.entity){const a=e.value.id;if(t.isTaskExists(a)){const e=t.getTask(a);if(e.parent&&t.isTaskExists(e.parent)){const a=t.getTask(e.parent);Se(a)&&(n(a),i=!0)}}}})),i&&t.render()}})),t.attachEvent("onAfterTaskDelete",(function(i,a){if($e&&a.parent&&t.isTaskExists(a.parent)){const e=t.getTask(a.parent);Se(e)&&n(e)}e.eachItem((function(n){t.isTaskExists(n.task_id)||e.removeItem(n.id)}))})),t.getTaskBaselines=function(t){const n=[];return e.eachItem((function(e){e.task_id==t&&n.push(e)})),n},t.$data.baselineStore.attachEvent("onClearAll",(function(){return t.eachTask((function(t){t.baselines&&delete t.baselines})),!0})),t.$data.tasksStore.attachEvent("onClearAll",(function(){return e.clearAll(),!0})),t.attachEvent("onTaskIdChange",(function(t,n){e.find((function(e){return e.task_id==t})).forEach((function(t){t.task_id=n,e.updateItem(t.id)}))})))}),{once:!0})}function Ce(t){function e(e){throw t.assert(!1,"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: "+JSON.stringify(e)),new Error("Invalid argument for gantt.parse or gantt.load. An object or a JSON string of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#json is expected. Actual argument value: "+JSON.stringify(e))}t.load=function(){throw new Error("gantt.load() method is not available in the node.js, use gantt.parse() instead")},t.parse=function(t,e){this.on_load({xmlDoc:{responseText:t}},e)},t.serialize=function(t){return this[t=t||"json"].serialize()},t.on_load=function(e,n){if(e.xmlDoc&&404===e.xmlDoc.status)this.assert(!1,"Failed to load the data from <a href='"+e.xmlDoc.responseURL+"' target='_blank'>"+e.xmlDoc.responseURL+"</a>, server returns 404");else if(!t.$destroyed){this.callEvent("onBeforeParse",[]),n||(n="json"),this.assert(this[n],"Invalid data type:'"+n+"'");var i=e.xmlDoc.responseText,a=this[n].parse(i,e);this._process_loading(a)}},t._process_loading=function(e){e.collections&&this._load_collections(e.collections),e.resources&&this.$data.resourcesStore&&this.$data.resourcesStore.parse(e.resources),!1!==t.config.baselines&&e.baselines&&this.$data.baselineStore&&this.$data.baselineStore.parse(e.baselines);const n=e.data||e.tasks;e.assignments&&function(e,n){const i={};n.forEach((t=>{i[t.task_id]||(i[t.task_id]=[]),i[t.task_id].push(t)})),e.forEach((e=>{e[t.config.resource_property]=i[e.id]||[]}))}(n,e.assignments),this.$data.tasksStore.parse(n);var i=e.links||(e.collections?e.collections.links:[]);this.$data.linksStore.parse(i),this.callEvent("onParse",[]),this.render()},t._load_collections=function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){e=!0;var i=t[n];this.serverList[n]=this.serverList[n]||[];var a=this.serverList[n];if(!a)continue;a.splice(0,a.length);for(var r=0;r<i.length;r++){var s=i[r],o=this.copy(s);for(var l in o.key=o.value,s)if(s.hasOwnProperty(l)){if("value"==l||"label"==l)continue;o[l]=s[l]}a.push(o)}}e&&this.callEvent("onOptionsLoad",[])},t.attachEvent("onBeforeTaskDisplay",(function(t,e){return!e.$ignore})),t.json={parse:function(n){if(n||e(n),"string"==typeof n)if(null!=typeof JSON)try{n=JSON.parse(n)}catch{e(n)}else t.assert(!1,"JSON is not supported");return n.data||n.tasks||e(n),n.dhx_security&&(t.security_key=n.dhx_security),n},serializeTask:function(t){return this._copyObject(t)},serializeLink:function(t){return this._copyLink(t)},_copyLink:function(t){var e={};for(var n in t)e[n]=t[n];return e},_copyObject:function(e){var n={};for(var i in e)"$"!=i.charAt(0)&&(n[i]=e[i],Q(n[i])&&(n[i]=t.defined(t.templates.xml_format)?t.templates.xml_format(n[i]):t.templates.format_date(n[i])));return n},serialize:function(){var e=[],n=[];let i=[];t.eachTask((function(n){t.resetProjectDates(n),e.push(this.serializeTask(n))}),t.config.root_id,this);for(var a=t.getLinks(),r=0;r<a.length;r++)n.push(this.serializeLink(a[r]));return t.getDatastore("baselines").eachItem((function(e){const n=t.json.serializeTask(e);i.push(n)})),{data:e,links:n,baselines:i}}},t.xml={_xmlNodeToJSON:function(t,e){for(var n={},i=0;i<t.attributes.length;i++)n[t.attributes[i].name]=t.attributes[i].value;if(!e){for(i=0;i<t.childNodes.length;i++){var a=t.childNodes[i];1==a.nodeType&&(n[a.tagName]=a.firstChild?a.firstChild.nodeValue:"")}n.text||(n.text=t.firstChild?t.firstChild.nodeValue:"")}return n},_getCollections:function(e){for(var n={},i=t.ajax.xpath("//coll_options",e),a=0;a<i.length;a++)for(var r=n[i[a].getAttribute("for")]=[],s=t.ajax.xpath(".//item",i[a]),o=0;o<s.length;o++){for(var l=s[o].attributes,c={key:s[o].getAttribute("value"),label:s[o].getAttribute("label")},d=0;d<l.length;d++){var u=l[d];"value"!=u.nodeName&&"label"!=u.nodeName&&(c[u.nodeName]=u.nodeValue)}r.push(c)}return n},_getXML:function(e,n,i){i=i||"data",n.getXMLTopNode||(n=t.ajax.parse(n));var a=t.ajax.xmltop(i,n.xmlDoc);a&&a.tagName==i||function(e){throw t.assert(!1,"Can't parse data: incorrect value of gantt.parse or gantt.load method. Actual argument value: "+JSON.stringify(e)),new Error("Invalid argument for gantt.parse or gantt.load. An XML of format https://docs.dhtmlx.com/gantt/desktop__supported_data_formats.html#xmldhtmlxgantt20 is expected. Actual argument value: "+JSON.stringify(e))}(e);var r=a.getAttribute("dhx_security");return r&&(t.security_key=r),a},parse:function(e,n){n=this._getXML(e,n);for(var i={},a=i.data=[],r=t.ajax.xpath("//task",n),s=0;s<r.length;s++)a[s]=this._xmlNodeToJSON(r[s]);return i.collections=this._getCollections(n),i},_copyLink:function(t){return"<item id='"+t.id+"' source='"+t.source+"' target='"+t.target+"' type='"+t.type+"' />"},_copyObject:function(t){return"<task id='"+t.id+"' parent='"+(t.parent||"")+"' start_date='"+t.start_date+"' duration='"+t.duration+"' open='"+!!t.open+"' progress='"+t.progress+"' end_date='"+t.end_date+"'><![CDATA["+t.text+"]]></task>"},serialize:function(){for(var e=[],n=[],i=t.json.serialize(),a=0,r=i.data.length;a<r;a++)e.push(this._copyObject(i.data[a]));for(a=0,r=i.links.length;a<r;a++)n.push(this._copyLink(i.links[a]));return"<data>"+e.join("")+"<coll_options for='links'>"+n.join("")+"</coll_options></data>"}},t.oldxml={parse:function(e,n){n=t.xml._getXML(e,n,"projects");for(var i={collections:{links:[]}},a=i.data=[],r=t.ajax.xpath("//task",n),s=0;s<r.length;s++){a[s]=t.xml._xmlNodeToJSON(r[s]);var o=r[s].parentNode;"project"==o.tagName?a[s].parent="project-"+o.getAttribute("id"):a[s].parent=o.parentNode.getAttribute("id")}for(r=t.ajax.xpath("//project",n),s=0;s<r.length;s++)(l=t.xml._xmlNodeToJSON(r[s],!0)).id="project-"+l.id,a.push(l);for(s=0;s<a.length;s++){var l;(l=a[s]).start_date=l.startdate||l.est,l.end_date=l.enddate,l.text=l.name,l.duration=l.duration/8,l.open=1,l.duration||l.end_date||(l.duration=1),l.predecessortasks&&i.collections.links.push({target:l.id,source:l.predecessortasks,type:t.config.links.finish_to_start})}return i},serialize:function(){t.message("Serialization to 'old XML' is not implemented")}},t.serverList=function(t,e){return e?this.serverList[t]=e.slice(0):this.serverList[t]||(this.serverList[t]=[]),this.serverList[t]}}function De(t,e,n,i,a){return this.date=t,this.unit=e,this.task=n,this.id=i,this.calendar=a,this}function Ae(t,e,n,i,a,r){return this.date=t,this.dir=e,this.unit=n,this.task=i,this.id=a,this.calendar=r,this}function Ie(t,e,n,i,a,r,s){return this.start_date=t,this.duration=e,this.unit=n,this.step=i,this.task=a,this.id=r,this.calendar=s,this}function Me(t,e,n,i){return this.start_date=t,this.end_date=e,this.task=n,this.calendar=i,this.unit=null,this.step=null,this}var Ne=function(t){return{getWorkHoursArguments:function(){var e=arguments[0];if(!tt((e=Q(e)?{date:e}:ht({},e)).date))throw t.assert(!1,"Invalid date argument for getWorkHours method"),new Error("Invalid date argument for getWorkHours method");return e},setWorkTimeArguments:function(){return arguments[0]},unsetWorkTimeArguments:function(){return arguments[0]},isWorkTimeArguments:function(){var e,n=arguments[0];if(n instanceof De)return n;if((e=n.date?new De(n.date,n.unit,n.task,null,n.calendar):new De(arguments[0],arguments[1],arguments[2],null,arguments[3])).unit=e.unit||t.config.duration_unit,!tt(e.date))throw t.assert(!1,"Invalid date argument for isWorkTime method"),new Error("Invalid date argument for isWorkTime method");return e},getClosestWorkTimeArguments:function(e){var n,i=arguments[0];if(i instanceof Ae)return i;if(n=Q(i)?new Ae(i):new Ae(i.date,i.dir,i.unit,i.task,null,i.calendar),i.id&&(n.task=i),n.dir=i.dir||"any",n.unit=i.unit||t.config.duration_unit,!tt(n.date))throw t.assert(!1,"Invalid date argument for getClosestWorkTime method"),new Error("Invalid date argument for getClosestWorkTime method");return n},_getStartEndConfig:function(e){var n,i=Me;if(e instanceof i)return e;if(Q(e)?n=new i(arguments[0],arguments[1],arguments[2],arguments[3]):(n=new i(e.start_date,e.end_date,e.task),null!==e.id&&void 0!==e.id&&(n.task=e)),n.unit=n.unit||t.config.duration_unit,n.step=n.step||t.config.duration_step,n.start_date=n.start_date||n.start||n.date,!tt(n.start_date))throw t.assert(!1,"Invalid start_date argument for getDuration method"),new Error("Invalid start_date argument for getDuration method");if(!tt(n.end_date))throw t.assert(!1,"Invalid end_date argument for getDuration method"),new Error("Invalid end_date argument for getDuration method");return n},getDurationArguments:function(t,e,n,i){return this._getStartEndConfig.apply(this,arguments)},hasDurationArguments:function(t,e,n,i){return this._getStartEndConfig.apply(this,arguments)},calculateEndDateArguments:function(e,n,i,a){var r,s=arguments[0];if(s instanceof Ie)return s;if(r=Q(s)?new Ie(arguments[0],arguments[1],arguments[2],void 0,arguments[3],void 0,arguments[4]):new Ie(s.start_date,s.duration,s.unit,s.step,s.task,null,s.calendar),null!==s.id&&void 0!==s.id&&(r.task=s,r.unit=null,r.step=null),r.unit=r.unit||t.config.duration_unit,r.step=r.step||t.config.duration_step,!tt(r.start_date))throw t.assert(!1,"Invalid start_date argument for calculateEndDate method"),new Error("Invalid start_date argument for calculateEndDate method");return r}}};function Le(){}Le.prototype={_getIntervals:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push({start:t[n],end:t[n+1]});return e},_toHoursArray:function(t){var e=[];function n(t){var e,n=Math.floor(t/3600),i=t-60*n*60,a=Math.floor(i/60);return n+":"+((e=String(a)).length<2&&(e="0"+e),e)}for(var i=0;i<t.length;i++)e.push(n(t[i].start)+"-"+n(t[i].end));return e},_intersectHourRanges:function(t,e){var n=[],i=t.length>e.length?t:e,a=t===i?e:t;i=i.slice(),a=a.slice(),n=[];for(var r=0;r<i.length;r++)for(var s=i[r],o=0;o<a.length;o++){var l=a[o];l.start<s.end&&l.end>s.start&&(n.push({start:Math.max(s.start,l.start),end:Math.min(s.end,l.end)}),s.end>l.end&&(a.splice(o,1),o--,r--))}return n},_mergeAdjacentIntervals:function(t){var e=t.slice();e.sort((function(t,e){return t.start-e.start}));for(var n=e[0],i=1;i<e.length;i++){var a=e[i];a.start<=n.end?(a.end>n.end&&(n.end=a.end),e.splice(i,1),i--):n=a}return e},_mergeHoursConfig:function(t,e){return this._mergeAdjacentIntervals(this._intersectHourRanges(t,e))},merge:function(t,e){var n=ut(t.getConfig().parsed),i=ut(e.getConfig().parsed),a={hours:this._toHoursArray(this._mergeHoursConfig(n.hours,i.hours)),dates:{},customWeeks:{}};const r=(t,e)=>{for(let n in t.dates){const i=t.dates[n];+n>1e3&&(a.dates[n]=!1);for(const t in e.dates){const r=e.dates[t];if(t==n&&(a.dates[n]=!(!i||!r)),Array.isArray(i)){const t=Array.isArray(r)?r:e.hours;a.dates[n]=this._toHoursArray(this._mergeHoursConfig(i,t))}}}};if(r(n,i),r(i,n),n.customWeeks)for(var s in n.customWeeks)a.customWeeks[s]=n.customWeeks[s];if(i.customWeeks)for(var s in i.customWeeks)a.customWeeks[s]=i.customWeeks[s];return a}};class Pe{constructor(){this.clear()}getItem(t,e,n){if(this._cache.has(t)){const i=this._cache.get(t)[n.getFullYear()];if(i&&i.has(e))return i.get(e)}return-1}setItem(t,e,n,i){if(!t||!e)return;const a=this._cache,r=i.getFullYear();let s;a.has(t)?s=a.get(t):(s=[],a.set(t,s));let o=s[r];o||(o=s[r]=new Map),o.set(e,n)}clear(){this._cache=new Map}}class Re{constructor(){this.clear()}getItem(t,e,n){const i=this._cache;if(i&&i[t]){const a=i[t];if(void 0===a)return-1;const r=a[n.getFullYear()];if(r&&void 0!==r[e])return r[e]}return-1}setItem(t,e,n,i){if(!t||!e)return;const a=this._cache;if(!a)return;a[t]||(a[t]=[]);const r=a[t],s=i.getFullYear();let o=r[s];o||(o=r[s]={}),o[e]=n}clear(){this._cache={}}}class Oe{constructor(t){this.getMinutesPerWeek=t=>{const e=t.valueOf();if(this._weekCache.has(e))return this._weekCache.get(e);const n=this._calendar,i=this._calendar.$gantt;let a=0,r=i.date.week_start(new Date(t));for(let s=0;s<7;s++)a+=60*n.getHoursPerDay(r),r=i.date.add(r,1,"day");return this._weekCache.set(e,a),a},this.getMinutesPerMonth=t=>{const e=t.valueOf();if(this._monthCache.has(e))return this._monthCache.get(e);const n=this._calendar,i=this._calendar.$gantt;let a=0,r=i.date.week_start(new Date(t));const s=i.date.add(r,1,"month").valueOf();for(;r.valueOf()<s;)a+=60*n.getHoursPerDay(r),r=i.date.add(r,1,"day");return this._monthCache.set(e,a),a},this.clear=()=>{this._weekCache=new Map,this._monthCache=new Map},this.clear(),this._calendar=t}}class He{constructor(){this.clear()}_getCacheObject(t,e,n){const i=this._cache;i[e]||(i[e]=[]);let a=i[e];a||(a=i[e]={});let r=a[n];r||(r=a[n]={});const s=t.getFullYear();let o=r[s];return o||(o=r[s]={durations:{},endDates:{}}),o}_endDateCacheKey(t,e){return String(t)+"-"+String(e)}_durationCacheKey(t,e){return String(t)+"-"+String(e)}getEndDate(t,e,n,i,a){const r=this._getCacheObject(t,n,i),s=t.valueOf(),o=this._endDateCacheKey(s,e);let l;if(void 0===r.endDates[o]){const t=a(),n=t.valueOf();r.endDates[o]=n,r.durations[this._durationCacheKey(s,n)]=e,l=t}else l=new Date(r.endDates[o]);return l}getDuration(t,e,n,i,a){const r=this._getCacheObject(t,n,i),s=t.valueOf(),o=e.valueOf(),l=this._durationCacheKey(s,o);let c;if(void 0===r.durations[l]){const t=a();r.durations[l]=t.valueOf(),c=t}else c=r.durations[l];return c}clear(){this._cache={}}}function Be(t,e){this.argumentsHelper=e,this.$gantt=t,this._workingUnitsCache=typeof Map<"u"?new Pe:new Re,this._largeUnitsCache=new Oe(this),this._dateDurationCache=new He,this._worktime=null,this._cached_timestamps={},this._cached_timestamps_count=0}Be.prototype={units:["year","month","week","day","hour","minute"],_clearCaches:function(){this._workingUnitsCache.clear(),this._largeUnitsCache.clear(),this._dateDurationCache.clear()},_getUnitOrder:function(t){for(var e=0,n=this.units.length;e<n;e++)if(this.units[e]==t)return e},_resetTimestampCache:function(){this._cached_timestamps={},this._cached_timestamps_count=0},_timestamp:function(t){this._cached_timestamps_count>1e6&&this._resetTimestampCache();var e=null;if(t.day||0===t.day)e=t.day;else if(t.date){var n=String(t.date.valueOf());this._cached_timestamps[n]?e=this._cached_timestamps[n]:(e=Date.UTC(t.date.getFullYear(),t.date.getMonth(),t.date.getDate()),this._cached_timestamps[n]=e,this._cached_timestamps_count++)}return e},_checkIfWorkingUnit:function(t,e){if(!this["_is_work_"+e]){const n=this.$gantt.date[`${e}_start`](new Date(t)),i=this.$gantt.date.add(n,1,e);return this.hasDuration(n,i)}return this["_is_work_"+e](t)},_is_work_day:function(t){var e=this._getWorkHours(t);return!!Array.isArray(e)&&e.length>0},_is_work_hour:function(t){for(var e=this._getWorkHours(t),n=t.getHours(),i=0;i<e.length;i++)if(n>=e[i].startHour&&n<e[i].endHour)return!0;return!1},_getTimeOfDayStamp:function(t,e){var n=t.getHours();return t.getHours()||t.getMinutes()||!e||(n=24),60*n*60+60*t.getMinutes()},_is_work_minute:function(t){for(var e=this._getWorkHours(t),n=this._getTimeOfDayStamp(t),i=0;i<e.length;i++)if(n>=e[i].start&&n<e[i].end)return!0;return!1},_nextDate:function(t,e,n){return this.$gantt.date.add(t,n,e)},_getWorkUnitsBetweenGeneric:function(t,e,n,i){var a=this.$gantt.date,r=new Date(t),s=new Date(e);i=i||1;var o,l,c=0,d=null,u=!1;(o=a[n+"_start"](new Date(r))).valueOf()!=r.valueOf()&&(u=!0);var h=!1;(l=a[n+"_start"](new Date(e))).valueOf()!=e.valueOf()&&(h=!0);for(var _=!1;r.valueOf()<s.valueOf();){if(_=(d=this._nextDate(r,n,i)).valueOf()>s.valueOf(),this._isWorkTime(r,n))(u||h&&_)&&(o=a[n+"_start"](new Date(r)),l=a.add(o,i,n)),u?(u=!1,d=this._nextDate(o,n,i),c+=(l.valueOf()-r.valueOf())/(l.valueOf()-o.valueOf())):h&&_?(h=!1,c+=(s.valueOf()-r.valueOf())/(l.valueOf()-o.valueOf())):c++;else{var f=this._getUnitOrder(n),g=this.units[f-1];g&&!this._isWorkTime(r,g)&&(d=this._getClosestWorkTimeFuture(r,g))}r=d}return c},_getMinutesPerHour:function(t){var e=this._getTimeOfDayStamp(t),n=this._getTimeOfDayStamp(this._nextDate(t,"hour",1));0===n&&(n=86400);for(var i=this._getWorkHours(t),a=0;a<i.length;a++){var r=i[a];if(e>=r.start&&n<=r.end)return 60;if(e<r.end&&n>r.start)return(Math.min(n,r.end)-Math.max(e,r.start))/60}return 0},_getMinutesPerDay:function(t){var e=this._getWorkHours(t),n=0;return e.forEach((function(t){n+=t.durationMinutes})),n},getHoursPerDay:function(t){var e=this._getWorkHours(t),n=0;return e.forEach((function(t){n+=t.durationHours})),n},_getWorkUnitsForRange:function(t,e,n,i){var a,r=0,s=new Date(t),o=new Date(e);for(a=gt("minute"==n?this._getMinutesPerDay:this.getHoursPerDay,this);s.valueOf()<o.valueOf();)if(o-s>27648e5&&0===s.getDate()){var l=this._largeUnitsCache.getMinutesPerMonth(s);"hour"==n&&(l/=60),r+=l,s=this.$gantt.date.add(s,1,"month")}else{if(o-s>13824e5){var c=this.$gantt.date.week_start(new Date(s));if(s.valueOf()===c.valueOf()){l=this._largeUnitsCache.getMinutesPerWeek(s),"hour"==n&&(l/=60),r+=l,s=this.$gantt.date.add(s,7,"day");continue}}r+=a(s),s=this._nextDate(s,"day",1)}return r/i},_getMinutesBetweenSingleDay:function(t,e){for(var n=this._getIntervalTimestamp(t,e),i=this._getWorkHours(t),a=0,r=0;r<i.length;r++){var s=i[r];if(n.end>=s.start&&n.start<=s.end){var o=Math.max(s.start,n.start),l=Math.min(s.end,n.end);a+=(l-o)/60,n.start=l}}return Math.floor(a)},_getMinutesBetween:function(t,e,n,i){var a=new Date(t),r=new Date(e);i=i||1;var s=new Date(a),o=this.$gantt.date.add(this.$gantt.date.day_start(new Date(a)),1,"day");if(r.valueOf()<=o.valueOf())return this._getMinutesBetweenSingleDay(t,e);var l=this.$gantt.date.day_start(new Date(r)),c=r,d=this._getMinutesBetweenSingleDay(s,o),u=this._getMinutesBetweenSingleDay(l,c);return d+this._getWorkUnitsForRange(o,l,n,i)+u},_getHoursBetween:function(t,e,n,i){var a=new Date(t),r=new Date(e);i=i||1;var s=new Date(a),o=this.$gantt.date.add(this.$gantt.date.day_start(new Date(a)),1,"day");if(r.valueOf()<=o.valueOf())return Math.round(this._getMinutesBetweenSingleDay(t,e)/60);var l=this.$gantt.date.day_start(new Date(r)),c=r,d=this._getMinutesBetweenSingleDay(s,o,n,i)/60,u=this._getMinutesBetweenSingleDay(l,c,n,i)/60,h=d+this._getWorkUnitsForRange(o,l,n,i)+u;return Math.round(h)},getConfig:function(){return this._worktime},_setConfig:function(t){this._worktime=t,this._parseSettings(),this._clearCaches()},_parseSettings:function(){var t=this.getConfig();for(var e in t.parsed={dates:{},hours:null,haveCustomWeeks:!1,customWeeks:{},customWeeksRangeStart:null,customWeeksRangeEnd:null,customWeeksBoundaries:[]},t.parsed.hours=this._parseHours(t.hours),t.dates)t.parsed.dates[e]=this._parseHours(t.dates[e]);if(t.customWeeks){var n=null,i=null;for(var e in t.customWeeks){var a=t.customWeeks[e];if(a.from&&a.to){var r=a.from,s=a.to;(!n||n>r.valueOf())&&(n=r.valueOf()),(!i||i<s.valueOf())&&(i=s.valueOf()),t.parsed.customWeeksBoundaries.push({from:r.valueOf(),fromReadable:new Date(r),to:s.valueOf(),toReadable:new Date(s),name:e}),t.parsed.haveCustomWeeks=!0;var o=t.parsed.customWeeks[e]={from:a.from,to:a.to,hours:this._parseHours(a.hours),dates:{}};for(var l in a.dates)o.dates[l]=this._parseHours(a.dates[l])}}t.parsed.customWeeksRangeStart=n,t.parsed.customWeeksRangeEnd=i}},_tryChangeCalendarSettings:function(t){var e=JSON.stringify(this.getConfig());return t(),!!this.hasWorkTime()||(this._setConfig(JSON.parse(e)),this._clearCaches(),!1)},_arraysEqual:function(t,e){if(t===e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},_compareSettings:function(t,e){if(!this._arraysEqual(t.hours,e.hours))return!1;var n=Object.keys(t.dates),i=Object.keys(e.dates);if(n.sort(),i.sort(),!this._arraysEqual(n,i))return!1;for(var a=0;a<n.length;a++){var r=n[a],s=t.dates[r],o=t.dates[r];if(s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&this._arraysEqual(s,o)))return!1}return!0},equals:function(t){if(!(t instanceof Be))return!1;var e=this.getConfig(),n=t.getConfig();if(!this._compareSettings(e,n))return!1;if(e.parsed.haveCustomWeeks&&n.parsed.haveCustomWeeks){if(e.parsed.customWeeksBoundaries.length!=n.parsed.customWeeksBoundaries.length)return!1;for(var i in e.parsed.customWeeks){var a=e.parsed.customWeeks[i],r=n.parsed.customWeeks[i];if(!r||!this._compareSettings(a,r))return!1}}else if(e.parse.haveCustomWeeks!==n.parsed.haveCustomWeeks)return!1;return!0},getWorkHours:function(){var t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments);return this._getWorkHours(t.date,!1)},_getWorkHours:function(t,e){var n=this.getConfig();if(!1!==e&&(n=n.parsed),!t)return n.hours;var i=this._timestamp({date:t});if(n.haveCustomWeeks&&n.customWeeksRangeStart<=i&&n.customWeeksRangeEnd>i)for(var a=0;a<n.customWeeksBoundaries.length;a++)if(n.customWeeksBoundaries[a].from<=i&&n.customWeeksBoundaries[a].to>i){n=n.customWeeks[n.customWeeksBoundaries[a].name];break}var r=!0;return void 0!==n.dates[i]?r=n.dates[i]:void 0!==n.dates[t.getDay()]&&(r=n.dates[t.getDay()]),!0===r?n.hours:r||[]},_getIntervalTimestamp:function(t,e){var n={start:0,end:0};n.start=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds();var i=e.getHours();return!i&&!e.getMinutes()&&!e.getSeconds()&&t.valueOf()<e.valueOf()&&(i=24),n.end=60*i*60+60*e.getMinutes()+e.getSeconds(),n},_parseHours:function(t){if(Array.isArray(t)){var e=[];t.forEach((function(t){"number"==typeof t?e.push(60*t*60):"string"==typeof t&&t.split("-").map((function(t){return t.trim()})).forEach((function(t){var n=t.split(":").map((function(t){return t.trim()})),i=parseInt(60*n[0]*60);n[1]&&(i+=parseInt(60*n[1])),n[2]&&(i+=parseInt(n[2])),e.push(i)}))}));for(var n=[],i=0;i<e.length;i+=2){var a=e[i],r=e[i+1],s=r-a;n.push({start:a,end:r,startHour:Math.floor(a/3600),startMinute:Math.floor(a/60),endHour:Math.ceil(r/3600),endMinute:Math.ceil(r/60),durationSeconds:s,durationMinutes:s/60,durationHours:s/3600})}return n}return t},setWorkTime:function(t){return this._tryChangeCalendarSettings(gt((function(){var e=void 0===t.hours||t.hours,n=this._timestamp(t),i=this.getConfig();if(null!==n?i.dates[n]=e:t.customWeeks||(i.hours=e),t.customWeeks)if(i.customWeeks||(i.customWeeks={}),"string"==typeof t.customWeeks)null!==n?i.customWeeks[t.customWeeks].dates[n]=e:t.customWeeks||(i.customWeeks[t.customWeeks].hours=e);else if("object"==typeof t.customWeeks&&"function Object() { [native code] }"===Function.prototype.toString.call(t.customWeeks.constructor))for(var a in t.customWeeks)i.customWeeks[a]=t.customWeeks[a];this._parseSettings(),this._clearCaches()}),this))},unsetWorkTime:function(t){return this._tryChangeCalendarSettings(gt((function(){if(t){var e=this._timestamp(t);null!==e&&delete this.getConfig().dates[e]}else this.reset_calendar();this._parseSettings(),this._clearCaches()}),this))},_isWorkTime:function(t,e){var n,i=-1;return n=String(t.valueOf()),-1==(i=this._workingUnitsCache.getItem(e,n,t))&&(i=this._checkIfWorkingUnit(t,e),this._workingUnitsCache.setItem(e,n,i,t)),i},isWorkTime:function(){var t=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._isWorkTime(t.date,t.unit)},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);if(!t.unit)return!1;var e=this;return this._dateDurationCache.getDuration(t.start_date,t.end_date,t.unit,t.step,(function(){return e._calculateDuration(t.start_date,t.end_date,t.unit,t.step)}))},_calculateDuration:function(t,e,n,i){var a=0,r=1;if(t.valueOf()>e.valueOf()){var s=e;e=t,t=s,r=-1}return a="hour"==n&&1==i?this._getHoursBetween(t,e,n,i):"minute"==n&&1==i?this._getMinutesBetween(t,e,n,i):this._getWorkUnitsBetweenGeneric(t,e,n,i),r*Math.round(a)},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.end_date,i=t.unit,a=t.step;if(!i)return!1;var r=new Date(e),s=new Date(n);for(a=a||1;r.valueOf()<s.valueOf();){if(this._isWorkTime(r,i))return!0;r=this._nextDate(r,i,a)}return!1},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.duration,i=t.unit,a=t.step;if(!i)return!1;var r=t.duration>=0?1:-1;n=Math.abs(1*n);var s=this;return this._dateDurationCache.getEndDate(e,n,i,a*r,(function(){return s._calculateEndDate(e,n,i,a*r)}))},_calculateEndDate:function(t,e,n,i){return!!n&&(1==i&&"minute"==n?this._calculateMinuteEndDate(t,e,i):-1==i&&"minute"==n?this._subtractMinuteDate(t,e,i):1==i&&"hour"==n?this._calculateHourEndDate(t,e,i):this._addInterval(t,e,n,i,null).end)},_addInterval:function(t,e,n,i,a){for(var r=0,s=t,o=!1;r<e&&(!a||!a(s));){var l=this._nextDate(s,n,i);"day"==n&&(o=o||!s.getHours()&&l.getHours())&&(l.setHours(0),l.getHours()||(o=!1));var c=new Date(l.valueOf()+1);i>0&&(c=new Date(l.valueOf()-1)),this._isWorkTime(c,n)&&!o&&r++,s=l}return{end:s,start:t,added:r}},_addHoursUntilDayEnd:function(t,e){for(var n=this.$gantt.date.add(this.$gantt.date.day_start(new Date(t)),1,"day"),i=0,a=e,r=this._getIntervalTimestamp(t,n),s=this._getWorkHours(t),o=0;o<s.length&&i<e;o++){var l=s[o];if(r.end>=l.start&&r.start<=l.end){var c=Math.max(l.start,r.start),d=Math.min(l.end,r.end),u=(d-c)/3600;u>a&&(u=a,d=c+60*a*60);var h=Math.round((d-c)/3600);i+=h,a-=h,r.start=d}}var _=n;return i===e&&(_=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,r.start)),{added:i,end:_}},_calculateHourEndDate:function(t,e,n){var i=new Date(t),a=0;n=n||1,e=Math.abs(1*e);var r=this._addHoursUntilDayEnd(i,e);if(a=r.added,i=r.end,c=e-a){for(var s=i;a<e;){var o=this._nextDate(s,"day",n);o.setHours(0),o.setMinutes(0),o.setSeconds(0);var l=0;if(a+(l=n>0?this.getHoursPerDay(new Date(o.valueOf()-1)):this.getHoursPerDay(new Date(o.valueOf()+1)))>=e)break;a+=l,s=o}i=s}if(a<e){var c=e-a;i=(r=this._addHoursUntilDayEnd(i,c)).end}return i},_addMinutesUntilHourEnd:function(t,e){if(0===t.getMinutes())return{added:0,end:new Date(t)};for(var n=this.$gantt.date.add(this.$gantt.date.hour_start(new Date(t)),1,"hour"),i=0,a=e,r=this._getIntervalTimestamp(t,n),s=this._getWorkHours(t),o=0;o<s.length&&i<e;o++){var l=s[o];if(r.end>=l.start&&r.start<=l.end){var c=Math.max(l.start,r.start),d=Math.min(l.end,r.end),u=(d-c)/60;u>a&&(u=a,d=c+60*a);var h=Math.round((d-c)/60);a-=h,i+=h,r.start=d}}var _=n;return i===e&&(_=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,r.start)),{added:i,end:_}},_subtractMinutesUntilHourStart:function(t,e){for(var n=this.$gantt.date.hour_start(new Date(t)),i=0,a=e,r=60*n.getHours()*60+60*n.getMinutes()+n.getSeconds(),s=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),o=this._getWorkHours(t),l=o.length-1;l>=0&&i<e;l--){var c=o[l];if(s>c.start&&r<=c.end){var d=Math.min(s,c.end),u=Math.max(r,c.start),h=(d-u)/60;h>a&&(h=a,u=d-60*a);var _=Math.abs(Math.round((d-u)/60));a-=_,i+=_,s=u}}var f=n;return i===e&&(f=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,s)),{added:i,end:f}},_subtractMinuteDate:function(t,e,n){var i=new Date(t),a=0;n=n||-1,e=Math.abs(1*e),e=Math.round(e);const r=this._isMinutePrecision(i);let s=this._subtractMinutesUntilHourStart(i,e);a+=s.added,i=s.end;for(var o=0,l=[],c=0;a<e;){var d=this.$gantt.date.day_start(new Date(i)),u=!1;i.valueOf()===d.valueOf()&&(d=this.$gantt.date.add(d,-1,"day"),u=!0);var h=new Date(d.getFullYear(),d.getMonth(),d.getDate(),23,59,59,999).valueOf();h!==o&&(l=this._getWorkHours(d),c=this._getMinutesPerDay(d),o=h);var _=e-a,f=this._getTimeOfDayStamp(i,u);if(l.length&&c)if(l[l.length-1].end<=f&&_>c)a+=c,i=this.$gantt.date.add(i,-1,"day");else{for(var g=!1,p=null,m=null,v=l.length-1;v>=0;v--)if(l[v].start<f-1&&l[v].end>=f-1){g=!0,p=l[v],m=l[v-1];break}if(g)if(f===p.end&&_>=p.durationMinutes)a+=p.durationMinutes,i=this.$gantt.date.add(i,-p.durationMinutes,"minute");else if(!r&&_<=f/60-p.startMinute)a+=_,i=this.$gantt.date.add(i,-_,"minute");else if(r)_<=f/60-p.startMinute?(a+=_,i=this.$gantt.date.add(i,-_,"minute")):(a+=f/60-p.startMinute,i=m?new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,m.end):this.$gantt.date.day_start(i));else{var k=this._getMinutesPerHour(i);k<=_?(a+=k,i=this._nextDate(i,"hour",n)):(s=this._subtractMinutesUntilHourStart(i,_),a+=s.added,i=s.end)}else if(0===i.getHours()&&0===i.getMinutes()&&0===i.getSeconds()){if((y=this._getClosestWorkTimePast(i,"hour")).valueOf()===i.valueOf()){var y=this.$gantt.date.add(i,-1,"day"),b=this._getWorkHours(y);if(b.length){var x=b[b.length-1];y.setSeconds(x.durationSeconds)}}i=y}else i=this._getClosestWorkTimePast(new Date(i-1),"hour")}else i=this.$gantt.date.add(i,-1,"day")}if(a<e){var $=e-a;s=this._subtractMinutesUntilHourStart(i,$),a+=s.added,i=s.end}return i},_calculateMinuteEndDate:function(t,e,n){var i=new Date(t),a=0;n=n||1,e=Math.abs(1*e),e=Math.round(e);var r=this._addMinutesUntilHourEnd(i,e);a+=r.added,i=r.end;for(var s=0,o=[],l=0,c=this._isMinutePrecision(i);a<e;){var d=this.$gantt.date.day_start(new Date(i)).valueOf();d!==s&&(o=this._getWorkHours(i),l=this._getMinutesPerDay(i),s=d);var u=e-a,h=this._getTimeOfDayStamp(i);if(o.length&&l)if(o[0].start>=h&&u>=l){if(a+=l,u==l){i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,o[o.length-1].end);break}i=this.$gantt.date.add(i,1,"day"),i=this.$gantt.date.day_start(i)}else{for(var _=!1,f=null,g=0;g<o.length;g++)if(o[g].start<=h&&o[g].end>h){_=!0,f=o[g];break}if(_)if(h===f.start&&u>=f.durationMinutes)a+=f.durationMinutes,i=this.$gantt.date.add(i,f.durationMinutes,"minute");else if(u<=f.endMinute-h/60)a+=u,i=this.$gantt.date.add(i,u,"minute");else{var p=this._getMinutesPerHour(i);p<=u?(a+=p,i=c?this.$gantt.date.add(i,p,"minute"):this._nextDate(i,"hour",n)):(a+=(r=this._addMinutesUntilHourEnd(i,u)).added,i=r.end)}else i=this._getClosestWorkTimeFuture(i,"hour")}else i=this.$gantt.date.add(this.$gantt.date.day_start(i),1,"day")}if(a<e){var m=e-a;a+=(r=this._addMinutesUntilHourEnd(i,m)).added,i=r.end}return i},getClosestWorkTime:function(){var t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments);return this._getClosestWorkTime(t.date,t.unit,t.dir)},_getClosestWorkTime:function(t,e,n){var i=new Date(t);if(this._isWorkTime(i,e))return i;if(i=this.$gantt.date[e+"_start"](i),"any"!=n&&n)i="past"==n?this._getClosestWorkTimePast(i,e):this._getClosestWorkTimeFuture(i,e);else{var a=this._getClosestWorkTimeFuture(i,e),r=this._getClosestWorkTimePast(i,e);i=Math.abs(a-t)<=Math.abs(t-r)?a:r}return i},_getClosestWorkTimeFuture:function(t,e){return this._getClosestWorkTimeGeneric(t,e,1)},_getClosestWorkTimePast:function(t,e){var n=this._getClosestWorkTimeGeneric(t,e,-1);return this.$gantt.date.add(n,1,e)},_findClosestTimeInDay:function(t,e,n){var i=new Date(t),a=null,r=!1;this._getWorkHours(i).length||(i=this._getClosestWorkTime(i,"day",e<0?"past":"future"),e<0&&(i=new Date(i.valueOf()-1),r=!0),n=this._getWorkHours(i));var s=this._getTimeOfDayStamp(i);if(r&&(s=this._getTimeOfDayStamp(new Date(i.valueOf()+1),r)),e>0){for(var o=0;o<n.length;o++)if(n[o].start>=s){a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,n[o].start);break}}else for(o=n.length-1;o>=0;o--){if(n[o].end<=s){a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,n[o].end);break}if(n[o].end>s&&n[o].start<=s){a=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,s);break}}return a},_getClosestWorkMinute:function(t,e,n){var i=new Date(t),a=this._getWorkHours(i),r=this._findClosestTimeInDay(i,n,a);return r||(i=this.calculateEndDate(i,n,"day"),n>0?i=this.$gantt.date.day_start(i):(i=this.$gantt.date.day_start(i),i=this.$gantt.date.add(i,1,"day"),i=new Date(i.valueOf()-1)),a=this._getWorkHours(i),r=this._findClosestTimeInDay(i,n,a)),n<0&&(r=this.$gantt.date.add(r,-1,e)),r},_getClosestWorkTimeGeneric:function(t,e,n){if("hour"===e||"minute"===e)return this._getClosestWorkMinute(t,e,n);for(var i=this._getUnitOrder(e),a=this.units[i-1],r=t,s=0;!this._isWorkTime(r,e)&&(!a||this._isWorkTime(r,a)||(r=n>0?this._getClosestWorkTimeFuture(r,a):this._getClosestWorkTimePast(r,a),!this._isWorkTime(r,e)));){if(++s>3e3)return this.$gantt.assert(!1,"Invalid working time check"),!1;var o=r.getTimezoneOffset();r=this.$gantt.date.add(r,n,e),r=this.$gantt._correct_dst_change(r,o,n,e),this.$gantt.date[e+"_start"]&&(r=this.$gantt.date[e+"_start"](r))}return r},hasWorkTime:function(){var t=this.getConfig(),e=t.dates;for(var n in t.dates);var i=this._checkWorkHours(t.hours),a=!1;return[0,1,2,3,4,5,6].forEach(function(t){if(!a){var n=e[t];!0===n?a=i:Array.isArray(n)&&(a=this._checkWorkHours(n))}}.bind(this)),a},_checkWorkHours:function(t){if(0===t.length)return!1;for(var e=!1,n=0;n<t.length;n+=2)t[n]!==t[n+1]&&(e=!0);return e},_isMinutePrecision:function(t){let e=!1;return this._getWorkHours(t).forEach((function(t){(t.startMinute%60||t.endMinute%60)&&(e=!0)})),e}};const ze={isLegacyResourceCalendarFormat:function(t){if(!t)return!1;for(var e in t)if(t[e]&&"object"==typeof t[e])return!0;return!1},getResourceProperty:function(t){var e=t.resource_calendars,n=t.resource_property;if(this.isLegacyResourceCalendarFormat(e))for(var i in t){n=i;break}return n},getCalendarIdFromLegacyConfig:function(t,e){if(e)for(var n in e){var i=e[n];if(t[n]){var a=i[t[n]];if(a)return a}}return null}},je=(We={},{getCalendarIdFromMultipleResources:function(t,e){var n=function(t){return t.map((function(t){return t&&t.resource_id?t.resource_id:t})).sort().join("-")}(t);if(t.length){if(1===t.length)return e.getResourceCalendar(n).id;if(We[n])return We[n].id;var i=function(t,e){return e.mergeCalendars(t.map((function(t){var n=t&&t.resource_id?t.resource_id:t;return e.getResourceCalendar(n)})))}(t,e);return We[n]=i,e.addCalendar(i)}return null}});var We;function Fe(t){this.$gantt=t,this._calendars={},this._legacyConfig=void 0,this.$gantt.attachEvent("onGanttReady",function(){this.$gantt.config.resource_calendars&&(this._isLegacyConfig=ze.isLegacyResourceCalendarFormat(this.$gantt.config.resource_calendars))}.bind(this)),this.$gantt.attachEvent("onBeforeGanttReady",function(){this.createDefaultCalendars()}.bind(this)),this.$gantt.attachEvent("onBeforeGanttRender",function(){this.createDefaultCalendars()}.bind(this))}function Ve(t,e){this.argumentsHelper=e,this.$gantt=t}function Ue(t){this.$gantt=t.$gantt,this.argumentsHelper=Ne(this.$gantt),this.calendarManager=t,this.$disabledCalendar=new Ve(this.$gantt,this.argumentsHelper)}Fe.prototype={_calendars:{},_convertWorkTimeSettings:function(t){var e=t.days;if(e&&!t.dates){t.dates=t.dates||{};for(var n=0;n<e.length;n++)t.dates[n]=e[n],e[n]instanceof Array||(t.dates[n]=!!e[n])}return delete t.days,t},mergeCalendars:function(){var t=[],e=arguments;if(Array.isArray(e[0]))t=e[0].slice();else for(var n=0;n<arguments.length;n++)t.push(arguments[n]);var i,a=new Le;return t.forEach(function(t){i=i?this._createCalendarFromConfig(a.merge(i,t)):t}.bind(this)),this.createCalendar(i)},_createCalendarFromConfig:function(t){var e=new Be(this.$gantt,Ne(this.$gantt));e.id=String(ft());var n=this._convertWorkTimeSettings(t);if(n.customWeeks)for(var i in n.customWeeks)n.customWeeks[i]=this._convertWorkTimeSettings(n.customWeeks[i]);return e._setConfig(n),e},createCalendar:function(t){var e;return t||(t={}),ht(e=t.getConfig?ut(t.getConfig()):t.worktime?ut(t.worktime):ut(t),ut(this.defaults.fulltime.worktime)),this._createCalendarFromConfig(e)},getCalendar:function(t){t=t||"global";var e=this._calendars[t];return e||(this.createDefaultCalendars(),e=this._calendars[t]),e},getCalendars:function(){var t=[];for(var e in this._calendars)t.push(this.getCalendar(e));return t},_getOwnCalendar:function(t){var e=this.$gantt.config;if(t[e.calendar_property])return this.getCalendar(t[e.calendar_property]);if(e.resource_calendars){var n;if(n=!1===this._legacyConfig?e.resource_property:ze.getResourceProperty(e),Array.isArray(t[n]))e.dynamic_resource_calendars&&(i=je.getCalendarIdFromMultipleResources(t[n],this));else if(void 0===this._legacyConfig&&(this._legacyConfig=ze.isLegacyResourceCalendarFormat(e.resource_calendars)),this._legacyConfig)var i=ze.getCalendarIdFromLegacyConfig(t,e.resource_calendars);else if(n&&t[n]&&e.resource_calendars[t[n]])var a=this.getResourceCalendar(t[n]);if(i&&(a=this.getCalendar(i)),a)return a}return null},getResourceCalendar:function(t){if(null==t)return this.getCalendar();var e=null;e="number"==typeof t||"string"==typeof t?t:t.id||t.key;var n=this.$gantt.config,i=n.resource_calendars,a=null;if(i){if(void 0===this._legacyConfig&&(this._legacyConfig=ze.isLegacyResourceCalendarFormat(n.resource_calendars)),this._legacyConfig){for(var r in i)if(i[r][e]){a=i[r][e];break}}else a=i[e];if(a)return this.getCalendar(a)}return this.getCalendar()},getTaskCalendar:function(t){var e,n=this.$gantt;if(null==t)return this.getCalendar();if(!(e="number"!=typeof t&&"string"!=typeof t||!n.isTaskExists(t)?t:n.getTask(t)))return this.getCalendar();var i=this._getOwnCalendar(e),a=!!n.getState().group_mode;if(!i&&n.config.inherit_calendar&&n.isTaskExists(e.parent)){for(var r=e;n.isTaskExists(r.parent)&&(r=n.getTask(r.parent),!n.isSummaryTask(r)||!(i=this._getOwnCalendar(r))););a&&!i&&t.$effective_calendar&&(i=this.getCalendar(t.$effective_calendar))}return i||this.getCalendar()},addCalendar:function(t){if(!this.isCalendar(t)){var e=t.id;(t=this.createCalendar(t)).id=e}if(t._tryChangeCalendarSettings((function(){}))){var n=this.$gantt.config;return t.id=t.id||ft(),this._calendars[t.id]=t,n.worktimes||(n.worktimes={}),n.worktimes[t.id]=t.getConfig(),t.id}return this.$gantt.callEvent("onCalendarError",[{message:"Invalid calendar settings, no worktime available"},t]),null},deleteCalendar:function(t){var e=this.$gantt.config;return!!t&&!!this._calendars[t]&&(delete this._calendars[t],e.worktimes&&e.worktimes[t]&&delete e.worktimes[t],!0)},restoreConfigCalendars:function(t){for(var e in t)if(!this._calendars[e]){var n=t[e],i=this.createCalendar(n);i.id=e,this.addCalendar(i)}},defaults:{global:{id:"global",worktime:{hours:[8,12,13,17],days:[0,1,1,1,1,1,0]}},fulltime:{id:"fulltime",worktime:{hours:[0,24],days:[1,1,1,1,1,1,1]}}},createDefaultCalendars:function(){var t=this.$gantt.config;this.restoreConfigCalendars(this.defaults),this.restoreConfigCalendars(t.worktimes)},isCalendar:function(t){return[t.isWorkTime,t.setWorkTime,t.getWorkHours,t.unsetWorkTime,t.getClosestWorkTime,t.calculateDuration,t.hasDuration,t.calculateEndDate].every((function(t){return t instanceof Function}))}},Ve.prototype={getWorkHours:function(){return[0,24]},setWorkTime:function(){return!0},unsetWorkTime:function(){return!0},isWorkTime:function(){return!0},getClosestWorkTime:function(t){return this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments).date},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.end_date,i=t.unit,a=t.step;return this._calculateDuration(e,n,i,a)},_calculateDuration:function(t,e,n,i){var a=this.$gantt.date,r={week:6048e5,day:864e5,hour:36e5,minute:6e4},s=0;if(r[n])s=Math.round((e-t)/(i*r[n]));else{for(var o=new Date(t),l=new Date(e);o.valueOf()<l.valueOf();)s+=1,o=a.add(o,i,n);o.valueOf()!=e.valueOf()&&(s+=(l-o)/(a.add(o,i,n)-o))}return Math.round(s)},hasDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.end_date;return!!t.unit&&(e=new Date(e),n=new Date(n),e.valueOf()<n.valueOf())},hasWorkTime:function(){return!0},equals:function(t){return t instanceof Ve},calculateEndDate:function(){var t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),e=t.start_date,n=t.duration,i=t.unit,a=t.step;return this.$gantt.date.add(e,a*n,i)}},Ue.prototype={_getCalendar:function(t){var e;if(this.$gantt.config.work_time){var n=this.calendarManager;t.task?e=n.getTaskCalendar(t.task):t.id?e=n.getTaskCalendar(t):t.calendar&&(e=t.calendar),e||(e=n.getTaskCalendar())}else e=this.$disabledCalendar;return e},getWorkHours:function(t){return t=this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getWorkHours(t.date)},setWorkTime:function(t,e){return t=this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.setWorkTime(t)},unsetWorkTime:function(t,e){return t=this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper,arguments),e||(e=this.calendarManager.getCalendar()),e.unsetWorkTime(t)},isWorkTime:function(t,e,n,i){var a=this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper,arguments);return(i=this._getCalendar(a)).isWorkTime(a)},getClosestWorkTime:function(t){return t=this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).getClosestWorkTime(t)},calculateDuration:function(){var t=this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).calculateDuration(t)},hasDuration:function(){var t=this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper,arguments);return this._getCalendar(t).hasDuration(t)},calculateEndDate:function(t){return t=this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper,arguments),this._getCalendar(t).calculateEndDate(t)}};const qe={create:function(t,e){return{getWorkHours:function(t){return e.getWorkHours(t)},setWorkTime:function(t){return e.setWorkTime(t)},unsetWorkTime:function(t){e.unsetWorkTime(t)},isWorkTime:function(t,n,i){return e.isWorkTime(t,n,i)},getClosestWorkTime:function(t){return e.getClosestWorkTime(t)},calculateDuration:function(t,n,i){return e.calculateDuration(t,n,i)},_hasDuration:function(t,n,i){return e.hasDuration(t,n,i)},calculateEndDate:function(t,n,i,a){return e.calculateEndDate(t,n,i,a)},mergeCalendars:gt(t.mergeCalendars,t),createCalendar:gt(t.createCalendar,t),addCalendar:gt(t.addCalendar,t),getCalendar:gt(t.getCalendar,t),getCalendars:gt(t.getCalendars,t),getResourceCalendar:gt(t.getResourceCalendar,t),getTaskCalendar:gt(t.getTaskCalendar,t),deleteCalendar:gt(t.deleteCalendar,t)}}};function Ge(t){t.isUnscheduledTask=function(e){return t.assert(e&&e instanceof Object,"Invalid argument <b>task</b>="+e+" of gantt.isUnscheduledTask. Task object was expected"),!!e.unscheduled||!e.start_date},t._isAllowedUnscheduledTask=function(e){return!(!e.unscheduled||!t.config.show_unscheduled)},t._isTaskInTimelineLimits=function(t){var e=t.start_date?t.start_date.valueOf():null,n=t.end_date?t.end_date.valueOf():null;return!!(e&&n&&e<=this._max_date.valueOf()&&n>=this._min_date.valueOf())},t.isTaskVisible=function(t){if(!this.isTaskExists(t))return!1;var e=this.getTask(t);return!(!this._isAllowedUnscheduledTask(e)&&!this._isTaskInTimelineLimits(e))&&this.getGlobalTaskIndex(t)>=0},t._getProjectEnd=function(){if(t.config.project_end)return t.config.project_end;var e=t.getTaskByTime();return(e=e.sort((function(t,e){return+t.end_date>+e.end_date?1:-1}))).length?e[e.length-1].end_date:null},t._getProjectStart=function(){if(t.config.project_start)return t.config.project_start;if(t.config.start_date)return t.config.start_date;if(t.getState().min_date)return t.getState().min_date;var e=t.getTaskByTime();return(e=e.sort((function(t,e){return+t.start_date>+e.start_date?1:-1}))).length?e[0].start_date:null};var e=function(n,i){var a=!(!i||i==t.config.root_id||!t.isTaskExists(i))&&t.getTask(i),r=null;if(a)if(t.config.schedule_from_end)r=t.calculateEndDate({start_date:a.end_date,duration:-t.config.duration_step,task:n});else{if(!a.start_date)return e(a,t.getParent(a));r=a.start_date}else if(t.config.schedule_from_end)r=t.calculateEndDate({start_date:t._getProjectEnd(),duration:-t.config.duration_step,task:n});else{const e=t.getTaskByIndex(0),i=t.config.start_date||t.getState().min_date;r=e?e.start_date?e.start_date:e.end_date?t.calculateEndDate({start_date:e.end_date,duration:-t.config.duration_step,task:n}):i:i}return t.assert(r,"Invalid dates"),new Date(r)};t._set_default_task_timing=function(n){n.start_date=n.start_date||e(n,t.getParent(n)),n.duration=n.duration||t.config.duration_step,n.end_date=n.end_date||t.calculateEndDate(n)},t.createTask=function(n,i,a){if(n=n||{},t.defined(n.id)||(n.id=t.uid()),n.start_date||(n.start_date=e(n,i)),void 0===n.text&&(n.text=t.locale.labels.new_task),void 0===n.duration&&(n.duration=1),this.isTaskExists(i)){this.setParent(n,i,!0);var r=this.getTask(i);r.$open=!0,this.config.details_on_create||this.callEvent("onAfterParentExpand",[i,r])}return this.callEvent("onTaskCreated",[n])?(this.config.details_on_create?(t.isTaskExists(n.id)?t.getTask(n.id).$index!=n.$index&&(n.start_date&&"string"==typeof n.start_date&&(n.start_date=this.date.parseDate(n.start_date,"parse_date")),n.end_date&&"string"==typeof n.end_date&&(n.end_date=this.date.parseDate(n.end_date,"parse_date")),this.$data.tasksStore.updateItem(n.id,n)):(n.$new=!0,this.silent((function(){t.$data.tasksStore.addItem(n,a)}))),this.selectTask(n.id),this.refreshData(),this.showLightbox(n.id)):this.addTask(n,i,a)&&(this.showTask(n.id),this.selectTask(n.id)),n.id):null},t._update_flags=function(e,n){var i=t.$data.tasksStore;void 0===e?(this._lightbox_id=null,i.silent((function(){i.unselect()})),this.getSelectedTasks&&this._multiselect.reset(),this._tasks_dnd&&this._tasks_dnd.drag&&(this._tasks_dnd.drag.id=null)):(this._lightbox_id==e&&(this._lightbox_id=n),i.getSelectedId()==e&&i.silent((function(){i.unselect(e),i.select(n)})),this._tasks_dnd&&this._tasks_dnd.drag&&this._tasks_dnd.drag.id==e&&(this._tasks_dnd.drag.id=n))};var n=function(e,n){var i=t.getTaskType(e.type),a={type:i,$no_start:!1,$no_end:!1,scheduled_summary:!1};return i===t.config.types.project&&!1===e.auto_scheduling&&(a.scheduled_summary=!0),n||i!=e.$rendered_type?(i==t.config.types.project?a.$no_end=a.$no_start=!0:i!=t.config.types.milestone&&(a.$no_end=!(e.end_date||e.duration),a.$no_start=!e.start_date,t._isAllowedUnscheduledTask(e)&&(a.$no_end=a.$no_start=!1)),a):(a.$no_start=e.$no_start,a.$no_end=e.$no_end,a)};function i(e){e.$effective_calendar=t.getTaskCalendar(e).id,e.start_date=t.getClosestWorkTime({dir:"future",date:e.start_date,unit:t.config.duration_unit,task:e}),e.end_date=t.calculateEndDate(e)}function a(n,i,a,r){const s={start:"start_date",end:"end_date"},o={start:"$auto_start_date",end:"$auto_end_date"};let l;l=n.type===t.config.types.project&&!1===n.auto_scheduling?o:s,i.$no_start&&(n[l.start]=a?new Date(a):e(n,this.getParent(n))),i.$no_end&&(n[l.end]=r?new Date(r):this.calculateEndDate({start_date:n[l.start],duration:this.config.duration_step,task:n})),(i.$no_start||i.$no_end)&&this._init_task_timing(n)}function r(e){var n=null,i=null,a=void 0!==e?e:t.config.root_id,r=[];return t.eachTask((function(e){const a=t.getTaskType(e.type)==t.config.types.project&&!1===e.auto_scheduling;t.getTaskType(e.type)==t.config.types.project&&!a||t.isUnscheduledTask(e)||(e.rollup&&r.push(e.id),!e.start_date||e.$no_start&&!a||n&&!(n>e.start_date.valueOf())||(n=e.start_date.valueOf()),!e.end_date||e.$no_end&&!a||i&&!(i<e.end_date.valueOf())||(i=e.end_date.valueOf()))}),a),{start_date:n?new Date(n):null,end_date:i?new Date(i):null,rollup:r}}t._init_task_timing=function(t){var e=n(t,!0),a=t.$rendered_type!=e.type,r=e.type;a&&(t.$no_start=e.$no_start,t.$no_end=e.$no_end,t.$rendered_type=e.type),a&&r!=this.config.types.milestone&&r==this.config.types.project&&(this._set_default_task_timing(t),t.$calculate_duration=!1),r==this.config.types.milestone&&(t.end_date=t.start_date),t.start_date&&t.end_date&&!1!==t.$calculate_duration&&(t.duration=this.calculateDuration(t)),t.$calculate_duration||(t.$calculate_duration=!0),t.end_date||(t.end_date=t.start_date),t.duration=t.duration||0,0===this.config.min_duration&&0===t.duration&&(t.$no_end=!1);var s=this.getTaskCalendar(t);t.$effective_calendar&&t.$effective_calendar!==s.id&&(i(t),this.config.inherit_calendar&&this.isSummaryTask(t)&&this.eachTask((function(t){i(t)}),t.id)),t.$effective_calendar=s.id},t.isSummaryTask=function(e){t.assert(e&&e instanceof Object,"Invalid argument <b>task</b>="+e+" of gantt.isSummaryTask. Task object was expected");var i=n(e);return!(!i.$no_end&&!i.$no_start)},t.resetProjectDates=function(t){var e=n(t);if(e.$no_end||e.$no_start){var i=r(t.id);a.call(this,t,e,i.start_date,i.end_date),t.$rollup=i.rollup}},t.getSubtaskDuration=function(e){var n=0,i=void 0!==e?e:t.config.root_id;return this.eachTask((function(e){this.getTaskType(e.type)==t.config.types.project||this.isUnscheduledTask(e)||(n+=e.duration)}),i),n},t.getSubtaskDates=function(t){var e=r(t);return{start_date:e.start_date,end_date:e.end_date}},t._update_parents=function(e,i,a){if(e){var r=this.getTask(e);r.rollup&&(a=!0);var s=this.getParent(r),o=n(r),l=!0;if(a||r.start_date&&r.end_date&&(o.$no_start||o.$no_end)){const e=r.$auto_start_date?"$auto_start_date":"start_date",n=r.$auto_end_date?"$auto_end_date":"end_date";var c=r[e].valueOf(),d=r[n].valueOf();t.resetProjectDates(r),a||c!=r[e].valueOf()||d!=r[n].valueOf()||(l=!1),l&&!i&&this.refreshTask(r.id,!0),o.scheduled_summary&&(l=!0)}l&&s&&this.isTaskExists(s)&&this._update_parents(s,i,a)}},t.roundDate=function(e){var n=t.getScale();Q(e)&&(e={date:e,unit:n?n.unit:t.config.duration_unit,step:n?n.step:t.config.duration_step});var i,a,r,s=e.date,o=e.step,l=e.unit;if(!n)return s;if(l==n.unit&&o==n.step&&+s>=+n.min_date&&+s<=+n.max_date)r=Math.floor(t.columnIndexByDate(s)),n.trace_x[r]||(r-=1,n.rtl&&(r=0)),a=new Date(n.trace_x[r]),i=t.date.add(a,o,l);else{for(r=Math.floor(t.columnIndexByDate(s)),i=t.date[l+"_start"](new Date(n.min_date)),n.trace_x[r]&&(i=t.date[l+"_start"](n.trace_x[r]));+i<+s;){var c=(i=t.date[l+"_start"](t.date.add(i,o,l))).getTimezoneOffset();i=t._correct_dst_change(i,c,i,l),t.date[l+"_start"]&&(i=t.date[l+"_start"](i))}a=t.date.add(i,-1*o,l)}return e.dir&&"future"==e.dir?i:e.dir&&"past"==e.dir||Math.abs(s-a)<Math.abs(i-s)?a:i},t.correctTaskWorkTime=function(e){t.config.work_time&&t.config.correct_work_time&&(this.isWorkTime(e.start_date,void 0,e)?this.isWorkTime(new Date(+e.end_date-1),void 0,e)||(e.end_date=this.calculateEndDate(e)):(e.start_date=this.getClosestWorkTime({date:e.start_date,dir:"future",task:e}),e.end_date=this.calculateEndDate(e)))},t.attachEvent("onBeforeTaskUpdate",(function(e,n){return t._init_task_timing(n),!0})),t.attachEvent("onBeforeTaskAdd",(function(e,n){return t._init_task_timing(n),!0})),t.attachEvent("onAfterTaskMove",(function(e,n,i){return t._init_task_timing(t.getTask(e)),!0}))}function Ye(t,e){var n,i=t.config.container_resize_timeout||20;let a=Je(t);if("timeout"==t.config.container_resize_method)l();else try{t.event(e,"resize",(function(){if(t.$scrollbarRepaint)t.$scrollbarRepaint=null;else{let e=Je(t);if(a.x==e.x&&a.y==e.y)return;a=e,r()}}))}catch{l()}function r(){clearTimeout(n),n=setTimeout((function(){t.$destroyed||t.render()}),i)}var s=t.$root.offsetHeight,o=t.$root.offsetWidth;function l(){t.$root.offsetHeight==s&&t.$root.offsetWidth==o||r(),s=t.$root.offsetHeight,o=t.$root.offsetWidth,setTimeout(l,i)}}function Je(t){return{x:t.$root.offsetWidth,y:t.$root.offsetHeight}}function Ke(t){t.assert=function(t){return function(e,n){e||t.config.show_errors&&!1!==t.callEvent("onError",[n])&&(t.message?t.message({type:"error",text:n,expire:-1}):console.log(n))}}(t);var e="Invalid value of the first argument of `gantt.init`. Supported values: HTMLElement, String (element id).This error means that either invalid object is passed into `gantt.init` or that the element with the specified ID doesn't exist on the page when `gantt.init` is called.";function n(n){if(!n||"string"==typeof n&&document.getElementById(n)||function(t){try{t.cloneNode(!1)}catch{return!1}return!0}(n))return!0;throw t.assert(!1,e),new Error(e)}t.init=function(e,i,a){t.env.isNode?e=null:n(e),i&&a&&(this.config.start_date=this._min_date=new Date(i),this.config.end_date=this._max_date=new Date(a)),this.date.init(),this.init=function(e){t.env.isNode?e=null:n(e),this.$container&&this.$container.parentNode&&(this.$container.parentNode.removeChild(this.$container),this.$container=null),this.$layout&&this.$layout.clear(),this._reinit(e)},this._reinit(e)},t._quickRefresh=function(t){for(var e=this._getDatastores.call(this),n=0;n<e.length;n++)e[n]._quick_refresh=!0;for(t(),n=0;n<e.length;n++)e[n]._quick_refresh=!1};var i=function(){this._clearTaskLayers&&this._clearTaskLayers(),this._clearLinkLayers&&this._clearLinkLayers(),this.$layout&&(this.$layout.destructor(),this.$layout=null,this.$ui.reset())}.bind(t),a=function(){qt(t)||(this.$root.innerHTML="",this.$root.gantt=this,Qt(this),this.config.layout.id="main",this.$layout=this.$ui.createView("layout",this.$root,this.config.layout),this.$layout.attachEvent("onBeforeResize",(function(){for(var e=t.$services.getService("datastores"),n=0;n<e.length;n++)t.getDatastore(e[n]).filter(),t.$data.tasksStore._skipTaskRecalculation?"lightbox"!=t.$data.tasksStore._skipTaskRecalculation&&(t.$data.tasksStore._skipTaskRecalculation=!1):t.getDatastore(e[n]).callEvent("onBeforeRefreshAll",[])})),this.$layout.attachEvent("onResize",(function(){t._quickRefresh((function(){t.refreshData()}))})),this.callEvent("onGanttLayoutReady",[]),this.$layout.render(),this.$container=this.$layout.$container.firstChild,function(t){"static"==window.getComputedStyle(t.$root).getPropertyValue("position")&&(t.$root.style.position="relative");var e=document.createElement("iframe");e.className="gantt_container_resize_watcher",e.tabIndex=-1,t.config.wai_aria_attributes&&(e.setAttribute("role","none"),e.setAttribute("aria-hidden",!0)),(window.Sfdc||window.$A||window.Aura)&&(t.config.container_resize_method="timeout"),t.$root.appendChild(e),e.contentWindow?Ye(t,e.contentWindow):(t.$root.removeChild(e),Ye(t,window))}(this))}.bind(t);t.resetLayout=function(){i(),a(),this.render()},t._reinit=function(e){this.callEvent("onBeforeGanttReady",[]),this._update_flags(),this.$services.getService("templateLoader").initTemplates(this),i(),this.$root=null,e&&(this.$root=S(e),a(),this.$mouseEvents.reset(this.$root),function(t){t.$container&&!t.config.autosize&&t.$root.offsetHeight<50&&console.warn("The Gantt container has a small height, so you cannot see its content. If it is not intended, you need to set the 'height' style rule to the container:\nhttps://docs.dhtmlx.com/gantt/faq.html#theganttchartisntrenderedcorrectly")}(t)),this.callEvent("onTemplatesReady",[]),this.callEvent("onGanttReady",[]),this.render()},t.$click={buttons:{edit:function(e){t.isReadonly(t.getTask(e))||t.showLightbox(e)},delete:function(e){var n=t.getTask(e);if(!t.isReadonly(n)){var i=t.locale.labels.confirm_deleting,a=t.locale.labels.confirm_deleting_title;t._simple_confirm(i,a,(function(){t.isTaskExists(e)&&(n.$new?(t.$data.tasksStore._skipTaskRecalculation="lightbox",t.silent((function(){t.deleteTask(e,!0)})),t.$data.tasksStore._skipTaskRecalculation=!1,t.refreshData()):(t.$data.tasksStore._skipTaskRecalculation=!0,t.deleteTask(e))),t.hideLightbox()}))}}}},t.render=function(){var e;if(this.callEvent("onBeforeGanttRender",[]),!qt(t)){!this.config.sort&&this._sort&&(this._sort=void 0),this.$root&&(this.config.rtl?(this.$root.classList.add("gantt_rtl"),this.$root.firstChild.classList.add("gantt_rtl")):(this.$root.classList.remove("gantt_rtl"),this.$root.firstChild.classList.remove("gantt_rtl")));var n=this.getScrollState(),i=n?n.x:0;this._getHorizontalScrollbar()&&(i=this._getHorizontalScrollbar().$config.codeScrollLeft||i||0),e=null,i&&(e=t.dateFromPos(i+this.config.task_scroll_offset))}if(Qt(this),qt(t))t.refreshData();else{this.$layout.$config.autosize=this.config.autosize;var a=this.config.preserve_scroll;if(this.config.preserve_scroll=!1,this.$layout.resize(),this.config.preserve_scroll=a,this.config.preserve_scroll&&n){if(i||n.y){var r=t.getScrollState();if(+e!=+t.dateFromPos(r.x)||r.y!=n.y){i=null;var s=null;e&&(i=Math.max(t.posFromDate(e)-t.config.task_scroll_offset,0)),n.y&&(s=n.y),t.scrollTo(i,s)}}var o=t.$ui.getView("grid");if(o){var l=o.$config.scrollY,c=t.$ui.getView(l);c&&(t.utils.dom.isChildOf(c.$view,t.$container)||o.scrollTo(void 0,0))}}}this.callEvent("onGanttRender",[])},t.setSizes=t.render,t.getTaskRowNode=function(t){for(var e=this.$grid_data.childNodes,n=this.config.task_attribute,i=0;i<e.length;i++)if(e[i].getAttribute&&e[i].getAttribute(n)==t)return e[i];return null},t.changeLightboxType=function(e){if(this.getLightboxType()==e)return!0;t._silent_redraw_lightbox(e)},t._get_link_type=function(e,n){var i=null;return e&&n?i=t.config.links.start_to_start:!e&&n?i=t.config.links.finish_to_start:e||n?e&&!n&&(i=t.config.links.start_to_finish):i=t.config.links.finish_to_finish,i},t.isLinkAllowed=function(t,e,n,i){var a=null;if(!(a="object"==typeof t?t:{source:t,target:e,type:this._get_link_type(n,i)})||!(a.source&&a.target&&a.type)||a.source==a.target)return!1;var r=!0;return this.checkEvent("onLinkValidation")&&(r=this.callEvent("onLinkValidation",[a])),r},t._correct_dst_change=function(e,n,i,a){var r=Y(a)*i;if(r>3600&&r<86400){var s=e.getTimezoneOffset()-n;s&&(e=t.date.add(e,s,"minute"))}return e},t.isSplitTask=function(e){return t.assert(e&&e instanceof Object,"Invalid argument <b>task</b>="+e+" of gantt.isSplitTask. Task object was expected"),this.$data.tasksStore._isSplitItem(e)},t._is_icon_open_click=function(t){if(!t)return!1;var e=t.target||t.srcElement;if(!e||!e.className)return!1;var n=x(e);return-1!==n.indexOf("gantt_tree_icon")&&(-1!==n.indexOf("gantt_close")||-1!==n.indexOf("gantt_open"))}}const Xe={date:{month_full:["كانون الثاني","شباط","آذار","نيسان","أيار","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],month_short:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],day_full:["الأحد","الأثنين","ألثلاثاء","الأربعاء","ألحميس","ألجمعة","السبت"],day_short:["احد","اثنين","ثلاثاء","اربعاء","خميس","جمعة","سبت"]},labels:{new_task:"مهمة جديد",icon_save:"اخزن",icon_cancel:"الغاء",icon_details:"تفاصيل",icon_edit:"تحرير",icon_delete:"حذف",confirm_closing:"التغييرات سوف تضيع, هل انت متأكد؟",confirm_deleting:"الحدث سيتم حذفها نهائيا ، هل أنت متأكد؟",section_description:"الوصف",section_time:"الفترة الزمنية",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"الغاء",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Ze={date:{month_full:["Студзень","Люты","Сакавік","Красавік","Maй","Чэрвень","Ліпень","Жнівень","Верасень","Кастрычнік","Лістапад","Снежань"],month_short:["Студз","Лют","Сак","Крас","Maй","Чэр","Ліп","Жнів","Вер","Каст","Ліст","Снеж"],day_full:["Нядзеля","Панядзелак","Аўторак","Серада","Чацвер","Пятніца","Субота"],day_short:["Нд","Пн","Аўт","Ср","Чцв","Пт","Сб"]},labels:{new_task:"Новае заданне",icon_save:"Захаваць",icon_cancel:"Адмяніць",icon_details:"Дэталі",icon_edit:"Змяніць",icon_delete:"Выдаліць",confirm_closing:"",confirm_deleting:"Падзея будзе выдалена незваротна, працягнуць?",section_description:"Апісанне",section_time:"Перыяд часу",section_type:"Тып",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"ІСР",column_text:"Задача",column_start_date:"Пачатак",column_duration:"Працяг",column_add:"",link:"Сувязь",confirm_link_deleting:"будзе выдалена",link_start:"(пачатак)",link_end:"(канец)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Хвiлiна",hours:"Гадзiна",days:"Дзень",weeks:"Тыдзень",months:"Месяц",years:"Год",message_ok:"OK",message_cancel:"Адмяніць",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Qe={date:{month_full:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],month_short:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],day_full:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],day_short:["Dg","Dl","Dm","Dc","Dj","Dv","Ds"]},labels:{new_task:"Nova tasca",icon_save:"Guardar",icon_cancel:"Cancel·lar",icon_details:"Detalls",icon_edit:"Editar",icon_delete:"Esborrar",confirm_closing:"",confirm_deleting:"L'esdeveniment s'esborrarà definitivament, continuar ?",section_description:"Descripció",section_time:"Periode de temps",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancel·lar",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},tn={date:{month_full:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],month_short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],day_full:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],day_short:["日","一","二","三","四","五","六"]},labels:{new_task:"新任務",icon_save:"保存",icon_cancel:"关闭",icon_details:"详细",icon_edit:"编辑",icon_delete:"删除",confirm_closing:"请确认是否撤销修改!",confirm_deleting:"是否删除日程?",section_description:"描述",section_time:"时间范围",section_type:"类型",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"工作分解结构",column_text:"任务名",column_start_date:"开始时间",column_duration:"持续时间",column_add:"",link:"关联",confirm_link_deleting:"将被删除",link_start:" (开始)",link_end:" (结束)",type_task:"任务",type_project:"项目",type_milestone:"里程碑",minutes:"分钟",hours:"小时",days:"天",weeks:"周",months:"月",years:"年",message_ok:"OK",message_cancel:"关闭",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},en={date:{month_full:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],month_short:["Led","Ún","Bře","Dub","Kvě","Čer","Čec","Srp","Září","Říj","List","Pro"],day_full:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"],day_short:["Ne","Po","Út","St","Čt","Pá","So"]},labels:{new_task:"Nová práce",icon_save:"Uložit",icon_cancel:"Zpět",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Smazat",confirm_closing:"",confirm_deleting:"Událost bude trvale smazána, opravdu?",section_description:"Poznámky",section_time:"Doba platnosti",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Zpět",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},nn={date:{month_full:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],day_short:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},labels:{new_task:"Ny opgave",icon_save:"Gem",icon_cancel:"Fortryd",icon_details:"Detaljer",icon_edit:"Tilret",icon_delete:"Slet",confirm_closing:"Dine rettelser vil gå tabt.. Er dy sikker?",confirm_deleting:"Bigivenheden vil blive slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Fortryd",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},an={date:{month_full:[" Januar"," Februar"," März "," April"," Mai"," Juni"," Juli"," August"," September "," Oktober"," November "," Dezember"],month_short:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],day_full:["Sonntag","Montag","Dienstag"," Mittwoch"," Donnerstag","Freitag","Samstag"],day_short:["So","Mo","Di","Mi","Do","Fr","Sa"]},labels:{new_task:"Neue Aufgabe",icon_save:"Speichern",icon_cancel:"Abbrechen",icon_details:"Details",icon_edit:"Ändern",icon_delete:"Löschen",confirm_closing:"",confirm_deleting:"Der Eintrag wird gelöscht",section_description:"Beschreibung",section_time:"Zeitspanne",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"PSP",column_text:"Task-Namen",column_start_date:"Startzeit",column_duration:"Dauer",column_add:"",link:"Link",confirm_link_deleting:"werden gelöscht",link_start:"(starten)",link_end:"(ende)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minuten",hours:"Stunden",days:"Tage",weeks:"Wochen",months:"Monate",years:"Jahre",message_ok:"OK",message_cancel:"Abbrechen",section_constraint:"Regel",constraint_type:"Regel",constraint_date:"Regel - Datum",asap:"So bald wie möglich",alap:"So spät wie möglich",snet:"Beginn nicht vor",snlt:"Beginn nicht später als",fnet:"Fertigstellung nicht vor",fnlt:"Fertigstellung nicht später als",mso:"Muss beginnen am",mfo:"Muss fertig sein am",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},rn={date:{month_full:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάϊος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],month_short:["ΙΑΝ","ΦΕΒ","ΜΑΡ","ΑΠΡ","ΜΑΙ","ΙΟΥΝ","ΙΟΥΛ","ΑΥΓ","ΣΕΠ","ΟΚΤ","ΝΟΕ","ΔΕΚ"],day_full:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Κυριακή"],day_short:["ΚΥ","ΔΕ","ΤΡ","ΤΕ","ΠΕ","ΠΑ","ΣΑ"]},labels:{new_task:"Νέα εργασία",icon_save:"Αποθήκευση",icon_cancel:"Άκυρο",icon_details:"Λεπτομέρειες",icon_edit:"Επεξεργασία",icon_delete:"Διαγραφή",confirm_closing:"",confirm_deleting:"Το έργο θα διαγραφεί οριστικά. Θέλετε να συνεχίσετε;",section_description:"Περιγραφή",section_time:"Χρονική περίοδος",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Άκυρο",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},sn={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{new_task:"New task",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Task will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Cancel",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},on={date:{month_full:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],month_short:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],day_full:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],day_short:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},labels:{new_task:"Nueva tarea",icon_save:"Guardar",icon_cancel:"Cancelar",icon_details:"Detalles",icon_edit:"Editar",icon_delete:"Eliminar",confirm_closing:"",confirm_deleting:"El evento se borrará definitivamente, ¿continuar?",section_description:"Descripción",section_time:"Período",section_type:"Tipo",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"EDT",column_text:"Tarea",column_start_date:"Inicio",column_duration:"Duración",column_add:"",link:"Enlace",confirm_link_deleting:"será borrada",link_start:" (inicio)",link_end:" (fin)",type_task:"Tarea",type_project:"Proyecto",type_milestone:"Hito",minutes:"Minutos",hours:"Horas",days:"Días",weeks:"Semanas",months:"Meses",years:"Años",message_ok:"OK",message_cancel:"Cancelar",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},ln={date:{month_full:["ژانویه","فوریه","مارس","آوریل","مه","ژوئن","ژوئیه","اوت","سپتامبر","اکتبر","نوامبر","دسامبر"],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["يکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"],day_short:["ی","د","س","چ","پ","ج","ش"]},labels:{new_task:"وظیفه جدید",icon_save:"ذخیره",icon_cancel:"لغو",icon_details:"جزییات",icon_edit:"ویرایش",icon_delete:"حذف",confirm_closing:"تغییرات شما ازدست خواهد رفت، آیا مطمئن هستید؟",confirm_deleting:"این مورد برای همیشه حذف خواهد شد، آیا مطمئن هستید؟",section_description:"توضیحات",section_time:"مدت زمان",section_type:"نوع",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"عنوان",column_start_date:"زمان شروع",column_duration:"مدت",column_add:"",link:"ارتباط",confirm_link_deleting:"حذف خواهد شد",link_start:" (آغاز)",link_end:" (پایان)",type_task:"وظیفه",type_project:"پروژه",type_milestone:"نگارش",minutes:"دقایق",hours:"ساعات",days:"روزها",weeks:"هفته",months:"ماه‌ها",years:"سال‌ها",message_ok:"تایید",message_cancel:"لغو",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},cn={date:{month_full:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],month_short:["Tam","Hel","Maa","Huh","Tou","Kes","Hei","Elo","Syy","Lok","Mar","Jou"],day_full:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],day_short:["Su","Ma","Ti","Ke","To","Pe","La"]},labels:{new_task:"Uusi tehtävä",icon_save:"Tallenna",icon_cancel:"Peru",icon_details:"Tiedot",icon_edit:"Muokkaa",icon_delete:"Poista",confirm_closing:"",confirm_deleting:"Haluatko varmasti poistaa tapahtuman?",section_description:"Kuvaus",section_time:"Aikajakso",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Peru",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},dn={date:{month_full:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],month_short:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Aoû","Sep","Oct","Nov","Déc"],day_full:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],day_short:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},labels:{new_task:"Nouvelle tâche",icon_save:"Enregistrer",icon_cancel:"Annuler",icon_details:"Détails",icon_edit:"Modifier",icon_delete:"Effacer",confirm_closing:"",confirm_deleting:"L'événement sera effacé sans appel, êtes-vous sûr ?",section_description:"Description",section_time:"Période",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"OTP",column_text:"Nom de la tâche",column_start_date:"Date initiale",column_duration:"Durée",column_add:"",link:"Le lien",confirm_link_deleting:"sera supprimé",link_start:"(début)",link_end:"(fin)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Heures",days:"Jours",weeks:"Semaines",months:"Mois",years:"Années",message_ok:"OK",message_cancel:"Annuler",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},un={date:{month_full:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],month_short:["ינו","פבר","מרץ","אפר","מאי","יונ","יול","אוג","ספט","אוק","נוב","דצמ"],day_full:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],day_short:["א","ב","ג","ד","ה","ו","ש"]},labels:{new_task:"משימה חדש",icon_save:"שמור",icon_cancel:"בטל",icon_details:"פרטים",icon_edit:"ערוך",icon_delete:"מחק",confirm_closing:"",confirm_deleting:"ארוע ימחק סופית.להמשיך?",section_description:"הסבר",section_time:"תקופה",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"בטל",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},hn={date:{month_full:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],month_short:["Sij","Velj","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],day_full:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],day_short:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},labels:{new_task:"Novi Zadatak",icon_save:"Spremi",icon_cancel:"Odustani",icon_details:"Detalji",icon_edit:"Izmjeni",icon_delete:"Obriši",confirm_closing:"",confirm_deleting:"Zadatak će biti trajno izbrisan, jeste li sigurni?",section_description:"Opis",section_time:"Vremenski Period",section_type:"Tip",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Naziv Zadatka",column_start_date:"Početno Vrijeme",column_duration:"Trajanje",column_add:"",link:"Poveznica",confirm_link_deleting:"će biti izbrisan",link_start:" (početak)",link_end:" (kraj)",type_task:"Zadatak",type_project:"Projekt",type_milestone:"Milestone",minutes:"Minute",hours:"Sati",days:"Dani",weeks:"Tjedni",months:"Mjeseci",years:"Godine",message_ok:"OK",message_cancel:"Odustani",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},_n={date:{month_full:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],month_short:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],day_full:["Vasárnap","Hétfõ","Kedd","Szerda","Csütörtök","Péntek","szombat"],day_short:["Va","Hé","Ke","Sze","Csü","Pé","Szo"]},labels:{new_task:"Új feladat",icon_save:"Mentés",icon_cancel:"Mégse",icon_details:"Részletek",icon_edit:"Szerkesztés",icon_delete:"Törlés",confirm_closing:"",confirm_deleting:"Az esemény törölve lesz, biztosan folytatja?",section_description:"Leírás",section_time:"Idõszak",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Mégse",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},fn={date:{month_full:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],day_full:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],day_short:["Ming","Sen","Sel","Rab","Kam","Jum","Sab"]},labels:{new_task:"Tugas baru",icon_save:"Simpan",icon_cancel:"Batal",icon_details:"Detail",icon_edit:"Edit",icon_delete:"Hapus",confirm_closing:"",confirm_deleting:"Acara akan dihapus",section_description:"Keterangan",section_time:"Periode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Batal",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},gn={date:{month_full:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],month_short:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],day_full:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],day_short:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},labels:{new_task:"Nuovo compito",icon_save:"Salva",icon_cancel:"Chiudi",icon_details:"Dettagli",icon_edit:"Modifica",icon_delete:"Elimina",confirm_closing:"",confirm_deleting:"Sei sicuro di confermare l'eliminazione?",section_description:"Descrizione",section_time:"Periodo di tempo",section_type:"Tipo",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Nome Attività",column_start_date:"Inizio",column_duration:"Durata",column_add:"",link:"Link",confirm_link_deleting:"sarà eliminato",link_start:" (inizio)",link_end:" (fine)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minuti",hours:"Ore",days:"Giorni",weeks:"Settimane",months:"Mesi",years:"Anni",message_ok:"OK",message_cancel:"Chiudi",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},pn={date:{month_full:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],month_short:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],day_full:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],day_short:["日","月","火","水","木","金","土"]},labels:{new_task:"新しい仕事",icon_save:"保存",icon_cancel:"キャンセル",icon_details:"詳細",icon_edit:"編集",icon_delete:"削除",confirm_closing:"",confirm_deleting:"イベント完全に削除されます、宜しいですか？",section_description:"デスクリプション",section_time:"期間",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"キャンセル",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},mn={date:{month_full:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],month_short:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],day_full:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],day_short:["일","월","화","수","목","금","토"]},labels:{new_task:"이름없는 작업",icon_save:"저장",icon_cancel:"취소",icon_details:"세부 사항",icon_edit:"수정",icon_delete:"삭제",confirm_closing:"",confirm_deleting:"작업을 삭제하시겠습니까?",section_description:"설명",section_time:"기간",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"작업명",column_start_date:"시작일",column_duration:"기간",column_add:"",link:"전제",confirm_link_deleting:"삭제 하시겠습니까?",link_start:" (start)",link_end:" (end)",type_task:"작업",type_project:"프로젝트",type_milestone:"마일스톤",minutes:"분",hours:"시간",days:"일",weeks:"주",months:"달",years:"년",message_ok:"OK",message_cancel:"취소",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}};class vn{constructor(t){this.addLocale=(t,e)=>{this._locales[t]=e},this.getLocale=t=>this._locales[t],this._locales={};for(const e in t)this._locales[e]=t[e]}}const kn={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],day_short:["Søn","Mon","Tir","Ons","Tor","Fre","Lør"]},labels:{new_task:"Ny oppgave",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Rediger",icon_delete:"Slett",confirm_closing:"",confirm_deleting:"Hendelsen vil bli slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},yn={date:{month_full:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],month_short:["Jan","Feb","mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],day_short:["Zo","Ma","Di","Wo","Do","Vr","Za"]},labels:{new_task:"Nieuwe taak",icon_save:"Opslaan",icon_cancel:"Annuleren",icon_details:"Details",icon_edit:"Bewerken",icon_delete:"Verwijderen",confirm_closing:"",confirm_deleting:"Item zal permanent worden verwijderd, doorgaan?",section_description:"Beschrijving",section_time:"Tijd periode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Taak omschrijving",column_start_date:"Startdatum",column_duration:"Duur",column_add:"",link:"Koppeling",confirm_link_deleting:"zal worden verwijderd",link_start:" (start)",link_end:" (eind)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"minuten",hours:"uren",days:"dagen",weeks:"weken",months:"maanden",years:"jaren",message_ok:"OK",message_cancel:"Annuleren",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},bn={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],day_short:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},labels:{new_task:"Ny oppgave",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Endre",icon_delete:"Slett",confirm_closing:"Endringer blir ikke lagret, er du sikker?",confirm_deleting:"Oppføringen vil bli slettet, er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},xn={date:{month_full:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],month_short:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Paź","Lis","Gru"],day_full:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],day_short:["Nie","Pon","Wto","Śro","Czw","Pią","Sob"]},labels:{new_task:"Nowe zadanie",icon_save:"Zapisz",icon_cancel:"Anuluj",icon_details:"Szczegóły",icon_edit:"Edytuj",icon_delete:"Usuń",confirm_closing:"",confirm_deleting:"Zdarzenie zostanie usunięte na zawsze, kontynuować?",section_description:"Opis",section_time:"Okres czasu",section_type:"Typ",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Nazwa zadania",column_start_date:"Początek",column_duration:"Czas trwania",column_add:"",link:"Link",confirm_link_deleting:"zostanie usunięty",link_start:" (początek)",link_end:" (koniec)",type_task:"Zadanie",type_project:"Projekt",type_milestone:"Milestone",minutes:"Minuty",hours:"Godziny",days:"Dni",weeks:"Tydzień",months:"Miesiące",years:"Lata",message_ok:"OK",message_cancel:"Anuluj",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},$n={date:{month_full:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],month_short:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],day_full:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],day_short:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},labels:{new_task:"Nova tarefa",icon_save:"Salvar",icon_cancel:"Cancelar",icon_details:"Detalhes",icon_edit:"Editar",icon_delete:"Excluir",confirm_closing:"",confirm_deleting:"As tarefas serão excluidas permanentemente, confirme?",section_description:"Descrição",section_time:"Período",section_type:"Tipo",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"EAP",column_text:"Nome tarefa",column_start_date:"Data início",column_duration:"Duração",column_add:"",link:"Link",confirm_link_deleting:"Será excluído!",link_start:" (início)",link_end:" (fim)",type_task:"Task",type_project:"Projeto",type_milestone:"Marco",minutes:"Minutos",hours:"Horas",days:"Dias",weeks:"Semanas",months:"Meses",years:"Anos",message_ok:"OK",message_cancel:"Cancelar",section_constraint:"Restrição",constraint_type:"Tipo Restrição",constraint_date:"Data restrição",asap:"Mais breve possível",alap:"Mais tarde possível",snet:"Não começar antes de",snlt:"Não começar depois de",fnet:"Não terminar antes de",fnlt:"Não terminar depois de",mso:"Precisa começar em",mfo:"Precisa terminar em",resources_filter_placeholder:"Tipo de filtros",resources_filter_label:"Ocultar vazios",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},wn={date:{month_full:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","November","December"],month_short:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],day_full:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"],day_short:["Du","Lu","Ma","Mi","Jo","Vi","Sa"]},labels:{new_task:"Sarcina noua",icon_save:"Salveaza",icon_cancel:"Anuleaza",icon_details:"Detalii",icon_edit:"Editeaza",icon_delete:"Sterge",confirm_closing:"Schimbarile nu vor fi salvate, esti sigur?",confirm_deleting:"Evenimentul va fi sters permanent, esti sigur?",section_description:"Descriere",section_time:"Interval",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Anuleaza",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Sn={date:{month_full:["Январь","Февраль","Март","Апрель","Maй","Июнь","Июль","Август","Сентябрь","Oктябрь","Ноябрь","Декабрь"],month_short:["Янв","Фев","Maр","Aпр","Maй","Июн","Июл","Aвг","Сен","Окт","Ноя","Дек"],day_full:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],day_short:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},labels:{new_task:"Новое задание",icon_save:"Сохранить",icon_cancel:"Отменить",icon_details:"Детали",icon_edit:"Изменить",icon_delete:"Удалить",confirm_closing:"",confirm_deleting:"Событие будет удалено безвозвратно, продолжить?",section_description:"Описание",section_time:"Период времени",section_type:"Тип",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"ИСР",column_text:"Задача",column_start_date:"Начало",column_duration:"Длительность",column_add:"",link:"Связь",confirm_link_deleting:"будет удалена",link_start:" (начало)",link_end:" (конец)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Минута",hours:"Час",days:"День",weeks:"Неделя",months:"Месяц",years:"Год",message_ok:"OK",message_cancel:"Отменить",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"начните вводить слово для фильтрации",resources_filter_label:"спрятать не установленные",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Tn={date:{month_full:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Nedelja","Ponedeljek","Torek","Sreda","Četrtek","Petek","Sobota"],day_short:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},labels:{new_task:"Nova naloga",icon_save:"Shrani",icon_cancel:"Prekliči",icon_details:"Podrobnosti",icon_edit:"Uredi",icon_delete:"Izbriši",confirm_closing:"",confirm_deleting:"Dogodek bo izbrisan. Želite nadaljevati?",section_description:"Opis",section_time:"Časovni okvir",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Prekliči",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},En={date:{month_full:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],month_short:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sept","Okt","Nov","Dec"],day_full:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"],day_short:["Ne","Po","Ut","St","Št","Pi","So"]},labels:{new_task:"Nová úloha",icon_save:"Uložiť",icon_cancel:"Späť",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Zmazať",confirm_closing:"Vaše zmeny nebudú uložené. Skutočne?",confirm_deleting:"Udalosť bude natrvalo vymazaná. Skutočne?",section_description:"Poznámky",section_time:"Doba platnosti",section_type:"Type",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Späť",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Cn={date:{month_full:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],day_short:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},labels:{new_task:"Ny uppgift",icon_save:"Spara",icon_cancel:"Avbryt",icon_details:"Detajer",icon_edit:"Ändra",icon_delete:"Ta bort",confirm_closing:"",confirm_deleting:"Är du säker på att du vill ta bort händelsen permanent?",section_description:"Beskrivning",section_time:"Tid",section_type:"Typ",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Uppgiftsnamn",column_start_date:"Starttid",column_duration:"Varaktighet",column_add:"",link:"Länk",confirm_link_deleting:"kommer tas bort",link_start:" (start)",link_end:" (slut)",type_task:"Uppgift",type_project:"Projekt",type_milestone:"Milstolpe",minutes:"Minuter",hours:"Timmar",days:"Dagar",weeks:"Veckor",months:"Månader",years:"År",message_ok:"OK",message_cancel:"Avbryt",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},Dn={date:{month_full:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],month_short:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],day_full:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],day_short:["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"]},labels:{new_task:"Yeni görev",icon_save:"Kaydet",icon_cancel:"İptal",icon_details:"Detaylar",icon_edit:"Düzenle",icon_delete:"Sil",confirm_closing:"",confirm_deleting:"Görev silinecek, emin misiniz?",section_description:"Açıklama",section_time:"Zaman Aralığı",section_type:"Tip",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Görev Adı",column_start_date:"Başlangıç",column_duration:"Süre",column_add:"",link:"Bağlantı",confirm_link_deleting:"silinecek",link_start:" (başlangıç)",link_end:" (bitiş)",type_task:"Görev",type_project:"Proje",type_milestone:"Kilometretaşı",minutes:"Dakika",hours:"Saat",days:"Gün",weeks:"Hafta",months:"Ay",years:"Yıl",message_ok:"OK",message_cancel:"Ýptal",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}},An={date:{month_full:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],month_short:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],day_full:["Неділя","Понеділок","Вівторок","Середа","Четвер","П'ятниця","Субота"],day_short:["Нед","Пон","Вів","Сер","Чет","Птн","Суб"]},labels:{new_task:"Нове завдання",icon_save:"Зберегти",icon_cancel:"Відміна",icon_details:"Деталі",icon_edit:"Редагувати",icon_delete:"Вилучити",confirm_closing:"",confirm_deleting:"Подія вилучиться назавжди. Ви впевнені?",section_description:"Опис",section_time:"Часовий проміжок",section_type:"Тип",section_deadline:"Deadline",section_baselines:"Baselines",column_wbs:"WBS",column_text:"Task name",column_start_date:"Start time",column_duration:"Duration",column_add:"",link:"Link",confirm_link_deleting:"will be deleted",link_start:" (start)",link_end:" (end)",type_task:"Task",type_project:"Project",type_milestone:"Milestone",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Week",months:"Months",years:"Years",message_ok:"OK",message_cancel:"Відміна",section_constraint:"Constraint",constraint_type:"Constraint type",constraint_date:"Constraint date",asap:"As Soon As Possible",alap:"As Late As Possible",snet:"Start No Earlier Than",snlt:"Start No Later Than",fnet:"Finish No Earlier Than",fnlt:"Finish No Later Than",mso:"Must Start On",mfo:"Must Finish On",resources_filter_placeholder:"type to filter",resources_filter_label:"hide empty",empty_state_text_link:"Click here",empty_state_text_description:"to create your first task",baselines_section_placeholder:"Start adding a new baseline",baselines_add_button:"Add Baseline",baselines_remove_button:"Remove",baselines_remove_all_button:"Remove All",deadline_enable_button:"Set",deadline_disable_button:"Remove"}};function In(){this.constants=Et,this.version="9.0.3",this.license="gpl",this.templates={},this.ext={},this.keys={edit_save:this.constants.KEY_CODES.ENTER,edit_cancel:this.constants.KEY_CODES.ESC}}function Mn(t){var e=new In,n=new Ct(t),i={};e.plugins=function(t){for(var a in t)if(t[a]&&!i[a]){var r=n.getExtension(a);r&&(r(e),i[a]=!0)}return i},e.$services=function(){var t={};return{services:{},setService:function(e,n){t[e]=n},getService:function(e){return t[e]?t[e]():null},dropService:function(e){t[e]&&delete t[e]},destructor:function(){for(var e in t)if(t[e]){var n=t[e];n&&n.destructor&&n.destructor()}t=null}}}(),e.config=Dt(),e.ajax=function(t){return{cache:!0,method:"get",parse:function(t){return"string"!=typeof t?t:(t=t.replace(/^[\s]+/,""),typeof DOMParser>"u"||It.isIE?void 0!==W.ActiveXObject&&((e=new W.ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e);var e},xmltop:function(e,n,i){if(void 0===n.status||n.status<400){var a=n.responseXML?n.responseXML||n:this.parse(n.responseText||n);if(a&&null!==a.documentElement&&!a.getElementsByTagName("parsererror").length)return a.getElementsByTagName(e)[0]}return-1!==i&&t.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],i]),document.createElement("DIV")},xpath:function(t,e){if(e.nodeName||(e=e.responseXML||e),It.isIE)return e.selectNodes(t)||[];for(var n,i=[],a=(e.ownerDocument||e).evaluate(t,e,null,XPathResult.ANY_TYPE,null);n=a.iterateNext();)i.push(n);return i},query:function(t){return this._call(t.method||"GET",t.url,t.data||"",t.async||!0,t.callback,t.headers)},get:function(t,e,n){var i=Nt("GET",arguments);return this.query(i)},getSync:function(t,e){var n=Nt("GET",arguments);return n.async=!1,this.query(n)},put:function(t,e,n,i){var a=Nt("PUT",arguments);return this.query(a)},del:function(t,e,n){var i=Nt("DELETE",arguments);return this.query(i)},post:function(t,e,n,i){1==arguments.length?e="":2==arguments.length&&"function"==typeof e&&(n=e,e="");var a=Nt("POST",arguments);return this.query(a)},postSync:function(t,e,n){e=null===e?"":String(e);var i=Nt("POST",arguments);return i.async=!1,this.query(i)},_call:function(e,n,i,a,r,s){return new t.Promise((function(o,l){var c=void 0!==typeof XMLHttpRequest?new XMLHttpRequest:new W.ActiveXObject("Microsoft.XMLHTTP"),d=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);a&&(c.onreadystatechange=function(){if(4==c.readyState||d&&3==c.readyState){if((200!=c.status||""===c.responseText)&&!t.callEvent("onAjaxError",[c]))return;setTimeout((function(){"function"==typeof r&&r.apply(W,[{xmlDoc:c,filePath:n}]),o(c),"function"==typeof r&&(r=null,c=null)}),0)}});var u=!this||!this.cache;if("GET"==e&&u&&(n+=(n.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),c.open(e,n,a),s)for(var h in s)c.setRequestHeader(h,s[h]);else"POST"==e.toUpperCase()||"PUT"==e||"DELETE"==e?c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==e&&(i=null);if(c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.send(i),!a)return{xmlDoc:c,filePath:n}}))},urlSeparator:function(t){return-1!=t.indexOf("?")?"&":"?"}}}(e),e.date=Rt(e),e.RemoteEvents=Ht;var a=function(t){function e(t){return{target:t.target||t.srcElement,pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,metaKey:t.metaKey,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey,altKey:t.altKey}}function n(n,i){this._obj=n,this._settings=i||{},q(this);var a=this.getInputMethods();this._drag_start_timer=null,t.attachEvent("onGanttScroll",gt((function(t,e){this.clearDragTimer()}),this));for(var r={passive:!1},s=0;s<a.length;s++)gt((function(a){t.event(n,a.down,gt((function(r){a.accessor(r)&&(void 0!==r.button&&0!==r.button||(i.preventDefault&&i.selector&&R(r.target,i.selector)&&r.preventDefault(),t.config.touch&&r.timeStamp&&r.timeStamp-0<300||(this._settings.original_target=e(r),this._settings.original_element_sizes={...N(r,O(n)),width:r.target.offsetWidth,height:r.target.offsetHeight},t.config.touch?(this.clearDragTimer(),this._drag_start_timer=setTimeout(gt((function(){t.getState().lightbox||this.dragStart(n,r,a)}),this),t.config.touch_drag)):this.dragStart(n,r,a))))}),this),r);var s=document.body;t.event(s,a.up,gt((function(t){a.accessor(t)&&this.clearDragTimer()}),this),r)}),this)(a[s])}return n.prototype={traceDragEvents:function(e,n){var i=gt((function(t){return this.dragMove(e,t,n.accessor)}),this);gt((function(t){return this.dragScroll(e,t)}),this);var a=gt((function(t){if(!this.config.started||!_t(this.config.updates_per_second)||Bt(this,this.config.updates_per_second)){var e=i(t);if(e)try{t&&t.preventDefault&&t.cancelable&&t.preventDefault()}catch{}return e}}),this),r=z(t.$root),s=this.config.mousemoveContainer||z(t.$root),o={passive:!1},l=gt((function(i){return t.eventRemove(s,n.move,a),t.eventRemove(r,n.up,l,o),this.dragEnd(e)}),this);t.event(s,n.move,a,o),t.event(r,n.up,l,o)},checkPositionChange:function(t){var e=t.x-this.config.pos.x,n=t.y-this.config.pos.y;return Math.sqrt(Math.pow(Math.abs(e),2)+Math.pow(Math.abs(n),2))>this.config.sensitivity},initDnDMarker:function(){var t=this.config.marker=document.createElement("div");t.className="gantt_drag_marker",t.innerHTML="",document.body.appendChild(t)},backupEventTarget:function(n,i){if(t.config.touch){var a=i(n),r=a.target||a.srcElement,s=r.cloneNode(!0);this.config.original_target=e(a),this.config.original_target.target=s,this.config.backup_element=r,r.parentNode.appendChild(s),r.style.display="none",(this.config.mousemoveContainer||document.body).appendChild(r)}},getInputMethods:function(){var e=[];if(e.push({move:"mousemove",down:"mousedown",up:"mouseup",accessor:function(t){return t}}),t.config.touch){var n=!0;try{document.createEvent("TouchEvent")}catch{n=!1}n?e.push({move:"touchmove",down:"touchstart",up:"touchend",accessor:function(t){return t.touches&&t.touches.length>1?null:t.touches[0]?{target:document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY),pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t}}):W.navigator.pointerEnabled?e.push({move:"pointermove",down:"pointerdown",up:"pointerup",accessor:function(t){return"mouse"==t.pointerType?null:t}}):W.navigator.msPointerEnabled&&e.push({move:"MSPointerMove",down:"MSPointerDown",up:"MSPointerUp",accessor:function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t}})}return e},clearDragTimer:function(){this._drag_start_timer&&(clearTimeout(this._drag_start_timer),this._drag_start_timer=null)},dragStart:function(e,n,i){this.config&&this.config.started||(this.config={obj:e,marker:null,started:!1,pos:this.getPosition(n),sensitivity:4},this._settings&&ht(this.config,this._settings,!0),this.traceDragEvents(e,i),t._prevent_touch_scroll=!0,document.body.classList.add("gantt_noselect"),t.config.touch&&this.dragMove(e,n,i.accessor))},dragMove:function(e,n,i){var a=i(n);if(!a)return!1;if(!this.config.marker&&!this.config.started){var r=this.getPosition(a);if(t.config.touch||this.checkPositionChange(r)){if(this.config.started=!0,this.config.ignore=!1,t._touch_drag=!0,!1===this.callEvent("onBeforeDragStart",[e,this.config.original_target]))return this.config.ignore=!0,!1;this.backupEventTarget(n,i),this.initDnDMarker(),t._touch_feedback(),this.callEvent("onAfterDragStart",[e,this.config.original_target])}else this.config.ignore=!0}return!this.config.ignore&&(n.targetTouches&&!a.target?void 0:(a.pos=this.getPosition(a),this.config.marker.style.left=a.pos.x+"px",this.config.marker.style.top=a.pos.y+"px",this.callEvent("onDragMove",[e,a]),!0))},dragEnd:function(e){var n=this.config.backup_element;n&&n.parentNode&&n.parentNode.removeChild(n),t._prevent_touch_scroll=!1,this.config.marker&&(this.config.marker.parentNode.removeChild(this.config.marker),this.config.marker=null,this.callEvent("onDragEnd",[])),this.config.started=!1,t._touch_drag=!1,document.body.classList.remove("gantt_noselect")},getPosition:function(t){var e=0,n=0;return t.pageX||t.pageY?(e=t.pageX,n=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:e,y:n}}},n}(e);e.$services.setService("dnd",(function(){return a}));var r=function(t){var e={};function n(n,i,a){a=a||n;var r=t.config,s=t.templates;t.config[n]&&e[a]!=r[n]&&(i&&s[a]||(s[a]=t.date.date_to_str(r[n]),e[a]=r[n]))}return{initTemplates:function(){var e=t.locale.labels;e.gantt_save_btn=e.icon_save,e.gantt_cancel_btn=e.icon_cancel,e.gantt_delete_btn=e.icon_delete;var i=t.date,a=i.date_to_str,r=t.config,s=a(r.xml_date||r.date_format,r.server_utc),o=i.str_to_date(r.xml_date||r.date_format,r.server_utc);n("date_scale",!0,void 0,t.config,t.templates),n("date_grid",!0,"grid_date_format",t.config,t.templates),n("task_date",!0,void 0,t.config,t.templates),t.mixin(t.templates,{xml_format:void 0,format_date:s,xml_date:void 0,parse_date:o,progress_text:function(t,e,n){return""},grid_header_class:function(t,e){return""},task_text:function(t,e,n){return n.text},task_class:function(t,e,n){return""},task_end_date:function(e){return t.templates.task_date(e)},grid_row_class:function(t,e,n){return""},task_row_class:function(t,e,n){return""},timeline_cell_class:function(t,e){return""},timeline_cell_content:function(t,e){return""},scale_cell_class:function(t){return""},scale_row_class:function(t){return""},grid_indent:function(t){return"<div class='gantt_tree_indent'></div>"},grid_folder:function(t){return"<div class='gantt_tree_icon gantt_folder_"+(t.$open?"open":"closed")+"'></div>"},grid_file:function(t){return"<div class='gantt_tree_icon gantt_file'></div>"},grid_open:function(t){return"<div class='gantt_tree_icon gantt_"+(t.$open?"close":"open")+"'></div>"},grid_blank:function(t){return"<div class='gantt_tree_icon gantt_blank'></div>"},date_grid:function(e,n,i){return n&&t.isUnscheduledTask(n)&&t.config.show_unscheduled?t.templates.task_unscheduled_time(n):t.templates.grid_date_format(e,i)},task_time:function(e,n,i){return t.isUnscheduledTask(i)&&t.config.show_unscheduled?t.templates.task_unscheduled_time(i):t.templates.task_date(e)+" - "+t.templates.task_end_date(n)},task_unscheduled_time:function(t){return""},time_picker:a(r.time_picker),link_class:function(t){return""},link_description:function(e){var n=t.getTask(e.source),i=t.getTask(e.target);return"<b>"+n.text+"</b> &ndash;  <b>"+i.text+"</b>"},drag_link:function(e,n,i,a){e=t.getTask(e);var r=t.locale.labels,s="<b>"+e.text+"</b> "+(n?r.link_start:r.link_end)+"<br/>";return i&&(s+="<b> "+(i=t.getTask(i)).text+"</b> "+(a?r.link_start:r.link_end)+"<br/>"),s},drag_link_class:function(e,n,i,a){var r="";return e&&i&&(r=" "+(t.isLinkAllowed(e,i,n,a)?"gantt_link_allow":"gantt_link_deny")),"gantt_link_tooltip"+r},tooltip_date_format:i.date_to_str("%Y-%m-%d"),tooltip_text:function(e,n,i){return`<div>Task: ${i.text}</div>\n\t\t\t\t<div>Start date: ${t.templates.tooltip_date_format(e)}</div>\n\t\t\t\t<div>End date: ${t.templates.tooltip_date_format(n)}</div>`},baseline_text:function(t,e,n){return""}})},initTemplate:n}}(e);e.$services.setService("templateLoader",(function(){return r})),q(e);var s=new zt;s.registerProvider("global",(function(){var t={min_date:e._min_date,max_date:e._max_date,selected_task:null};return e.$data&&e.$data.tasksStore&&(t.selected_task=e.$data.tasksStore.getSelectedId()),t})),e.getState=s.getState,e.$services.setService("state",(function(){return s})),ht(e,vt),e.Promise=jt,e.env=It,function(t){var e=Jt.create();ht(t,e);var n,i=t.createDatastore({name:"task",type:"treeDatastore",rootId:function(){return t.config.root_id},initItem:gt((function(e){this.defined(e.id)||(e.id=this.uid()),e.start_date&&(e.start_date=t.date.parseDate(e.start_date,"parse_date")),e.end_date&&(e.end_date=t.date.parseDate(e.end_date,"parse_date"));var n=null;(e.duration||0===e.duration)&&(e.duration=n=1*e.duration),n&&(e.start_date&&!e.end_date?e.end_date=this.calculateEndDate(e):!e.start_date&&e.end_date&&(e.start_date=this.calculateEndDate({start_date:e.end_date,duration:-e.duration,task:e}))),!1!==t.config.deadlines&&e.deadline&&(e.deadline=t.date.parseDate(e.deadline,"parse_date")),e.progress=Number(e.progress)||0,this._isAllowedUnscheduledTask(e)&&this._set_default_task_timing(e),this._init_task_timing(e),e.start_date&&e.end_date&&this.correctTaskWorkTime(e),e.$source=[],e.$target=[];var i=this.$data.tasksStore.getItem(e.id);return i&&!_t(e.open)&&(e.$open=i.$open),void 0===e.parent&&(e.parent=this.config.root_id),e.open&&(e.$open=!0),e}),t),getConfig:function(){return t.config}}),a=t.createDatastore({name:"link",initItem:gt((function(t){return this.defined(t.id)||(t.id=this.uid()),t}),t)});function r(e){var n=t.isTaskVisible(e);if(!n&&t.isTaskExists(e)){var i=t.getParent(e);t.isTaskExists(i)&&t.isTaskVisible(i)&&(i=t.getTask(i),t.isSplitTask(i)&&(n=!0))}return n}function s(e){if(t.isTaskExists(e.source)){var n=t.getTask(e.source);n.$source=n.$source||[],n.$source.push(e.id)}if(t.isTaskExists(e.target)){var i=t.getTask(e.target);i.$target=i.$target||[],i.$target.push(e.id)}}function o(e){if(t.isTaskExists(e.source))for(var n=t.getTask(e.source),i=0;i<n.$source.length;i++)if(n.$source[i]==e.id){n.$source.splice(i,1);break}if(t.isTaskExists(e.target)){var a=t.getTask(e.target);for(i=0;i<a.$target.length;i++)if(a.$target[i]==e.id){a.$target.splice(i,1);break}}}function l(){for(var e=null,n=t.$data.tasksStore.getItems(),i=0,a=n.length;i<a;i++)(e=n[i]).$source=[],e.$target=[];var r=t.$data.linksStore.getItems();for(i=0,a=r.length;i<a;i++)s(r[i])}function c(t){var e=t.source,n=t.target;for(var i in t.events)(function(t,i){e.attachEvent(t,(function(){return n.callEvent(i,Array.prototype.slice.call(arguments))}),i)})(i,t.events[i])}t.attachEvent("onDestroy",(function(){i.destructor(),a.destructor()})),t.attachEvent("onLinkValidation",(function(e){if(t.isLinkExists(e.id)||"predecessor_generated"===e.id)return!0;for(var n=t.getTask(e.source).$source,i=0;i<n.length;i++){var a=t.getLink(n[i]),r=e.source==a.source,s=e.target==a.target,o=e.type==a.type;if(r&&s&&o)return!1}return!0})),i.attachEvent("onBeforeRefreshAll",(function(){if(!i._skipTaskRecalculation)for(var e=i.getVisibleItems(),n=0;n<e.length;n++){var a=e[n];a.$index=n,a.$local_index=t.getTaskIndex(a.id),t.resetProjectDates(a)}})),i.attachEvent("onFilterItem",(function(e,n){if(t.config.show_tasks_outside_timescale)return!0;var i=null,a=null;if(t.config.start_date&&t.config.end_date){if(t._isAllowedUnscheduledTask(n))return!0;if(i=t.config.start_date.valueOf(),a=t.config.end_date.valueOf(),+n.start_date>a||+n.end_date<+i)return!1}return!0})),i.attachEvent("onIdChange",(function(e,n){t._update_flags(e,n);var a=t.getTask(n);i.isSilent()||(a.$split_subtask||a.rollup)&&t.eachParent((function(e){t.refreshTask(e.id)}),n)})),i.attachEvent("onAfterUpdate",(function(e){if(t._update_parents(e),t.getState("batchUpdate").batch_update)return!0;var n=i.getItem(e);n.$source||(n.$source=[]);for(var r=0;r<n.$source.length;r++)a.refresh(n.$source[r]);for(n.$target||(n.$target=[]),r=0;r<n.$target.length;r++)a.refresh(n.$target[r])})),i.attachEvent("onBeforeItemMove",(function(e,n,a){return!Ft(e,t,i)||(console.log("The placeholder task cannot be moved to another position."),!1)})),i.attachEvent("onAfterItemMove",(function(e,n,i){var a=t.getTask(e);null!==this.getNextSibling(e)?a.$drop_target=this.getNextSibling(e):null!==this.getPrevSibling(e)?a.$drop_target="next:"+this.getPrevSibling(e):a.$drop_target="next:null"})),i.attachEvent("onStoreUpdated",(function(e,n,i){if("delete"==i&&t._update_flags(e,null),!t.$services.getService("state").getState("batchUpdate").batch_update){if(t.config.fit_tasks&&"paint"!==i){var r=t.getState();Qt(t);var s=t.getState();if(+r.min_date!=+s.min_date||+r.max_date!=+s.max_date)return t.render(),t.callEvent("onScaleAdjusted",[]),!0}"add"==i||"move"==i||"delete"==i?t.$layout&&("task"!=this.$config.name||"add"!=i&&"delete"!=i||"lightbox"!=this._skipTaskRecalculation&&(this._skipTaskRecalculation=!0),t.$layout.resize()):e||a.refresh()}})),a.attachEvent("onAfterAdd",(function(t,e){s(e)})),a.attachEvent("onAfterUpdate",(function(t,e){l()})),a.attachEvent("onAfterDelete",(function(t,e){o(e)})),a.attachEvent("onAfterSilentDelete",(function(t,e){o(e)})),a.attachEvent("onBeforeIdChange",(function(e,n){o(t.mixin({id:e},t.$data.linksStore.getItem(n))),s(t.$data.linksStore.getItem(n))})),a.attachEvent("onFilterItem",(function(e,n){if(!t.config.show_links)return!1;var i=r(n.source),a=r(n.target);return!(!i||!a||t._isAllowedUnscheduledTask(t.getTask(n.source))||t._isAllowedUnscheduledTask(t.getTask(n.target)))&&t.callEvent("onBeforeLinkDisplay",[e,n])})),n={},t.attachEvent("onBeforeTaskDelete",(function(e,i){return n[e]=ne.getSubtreeLinks(t,e),!0})),t.attachEvent("onAfterTaskDelete",(function(e,i){n[e]&&t.$data.linksStore.silent((function(){for(var i in n[e])t.isLinkExists(i)&&t.$data.linksStore.removeItem(i),o(n[e][i]);n[e]=null}))})),t.attachEvent("onAfterLinkDelete",(function(e,n){t.refreshTask(n.source),t.refreshTask(n.target)})),t.attachEvent("onParse",l),c({source:a,target:t,events:{onItemLoading:"onLinkLoading",onBeforeAdd:"onBeforeLinkAdd",onAfterAdd:"onAfterLinkAdd",onBeforeUpdate:"onBeforeLinkUpdate",onAfterUpdate:"onAfterLinkUpdate",onBeforeDelete:"onBeforeLinkDelete",onAfterDelete:"onAfterLinkDelete",onIdChange:"onLinkIdChange"}}),c({source:i,target:t,events:{onItemLoading:"onTaskLoading",onBeforeAdd:"onBeforeTaskAdd",onAfterAdd:"onAfterTaskAdd",onBeforeUpdate:"onBeforeTaskUpdate",onAfterUpdate:"onAfterTaskUpdate",onBeforeDelete:"onBeforeTaskDelete",onAfterDelete:"onAfterTaskDelete",onIdChange:"onTaskIdChange",onBeforeItemMove:"onBeforeTaskMove",onAfterItemMove:"onAfterTaskMove",onFilterItem:"onBeforeTaskDisplay",onItemOpen:"onTaskOpened",onItemClose:"onTaskClosed",onBeforeSelect:"onBeforeTaskSelected",onAfterSelect:"onTaskSelected",onAfterUnselect:"onTaskUnselected"}}),t.$data={tasksStore:i,linksStore:a}}(e),e.dataProcessor=oe.DEPRECATED_api,e.createDataProcessor=oe.createDataProcessor,function(t){t.ext||(t.ext={});for(var e=[ce,ue,_e,fe,ge,pe,be,xe,Ee],n=0;n<e.length;n++)e[n]&&e[n](t)}(e),function(t){t.getGridColumn=function(e){for(var n=t.config.columns,i=0;i<n.length;i++)if(n[i].name==e)return n[i];return null},t.getGridColumns=function(){return t.config.columns.slice()}}(e),function(t){t.isReadonly=function(e){return"number"!=typeof e&&"string"!=typeof e||!t.isTaskExists(e)||(e=t.getTask(e)),(!e||!e[this.config.editable_property])&&(e&&e[this.config.readonly_property]||this.config.readonly)}}(e),Ce(e),function(t){var e=new Fe(t),n=new Ue(e);ht(t,qe.create(e,n))}(e),Ge(e),function(t){t.getTaskType=function(t){return"task"}}(e),function(t){function e(){return t._cached_functions.update_if_changed(t),t._cached_functions.active||t._cached_functions.activate(),!0}t._cached_functions={cache:{},mode:!1,critical_path_mode:!1,wrap_methods:function(t,e){if(e._prefetch_originals)for(var n in e._prefetch_originals)e[n]=e._prefetch_originals[n];for(e._prefetch_originals={},n=0;n<t.length;n++)this.prefetch(t[n],e)},prefetch:function(t,e){var n=e[t];if(n){var i=this;e._prefetch_originals[t]=n,e[t]=function(){for(var e=new Array(arguments.length),a=0,r=arguments.length;a<r;a++)e[a]=arguments[a];if(i.active){var s=i.get_arguments_hash(Array.prototype.slice.call(e));i.cache[t]||(i.cache[t]={});var o=i.cache[t];if(i.has_cached_value(o,s))return i.get_cached_value(o,s);var l=n.apply(this,e);return i.cache_value(o,s,l),l}return n.apply(this,e)}}return n},cache_value:function(t,e,n){this.is_date(n)&&(n=new Date(n)),t[e]=n},has_cached_value:function(t,e){return t.hasOwnProperty(e)},get_cached_value:function(t,e){var n=t[e];return this.is_date(n)&&(n=new Date(n)),n},is_date:function(t){return t&&t.getUTCDate},get_arguments_hash:function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.stringify_argument(t[n]));return"("+e.join(";")+")"},stringify_argument:function(t){return(t.id?t.id:this.is_date(t)?t.valueOf():t)+""},activate:function(){this.clear(),this.active=!0},deactivate:function(){this.clear(),this.active=!1},clear:function(){this.cache={}},setup:function(t){var e=[],n=["_isProjectEnd","_getProjectEnd","_getSlack"];"auto"==this.mode?t.config.highlight_critical_path&&(e=n):!0===this.mode&&(e=n),this.wrap_methods(e,t)},update_if_changed:function(t){(this.critical_path_mode!=t.config.highlight_critical_path||this.mode!==t.config.optimize_render)&&(this.critical_path_mode=t.config.highlight_critical_path,this.mode=t.config.optimize_render,this.setup(t))}},t.attachEvent("onBeforeGanttRender",e),t.attachEvent("onBeforeDataRender",e),t.attachEvent("onBeforeSmartRender",(function(){e()})),t.attachEvent("onBeforeParse",e),t.attachEvent("onDataRender",(function(){t._cached_functions.deactivate()}));var n=null;t.attachEvent("onSmartRender",(function(){n&&clearTimeout(n),n=setTimeout((function(){t._cached_functions.deactivate()}),1e3)})),t.attachEvent("onBeforeGanttReady",(function(){return t._cached_functions.update_if_changed(t),!0}))}(e),Ke(e),function(t){t.destructor=function(){for(var t in this.clearAll(),this.callEvent("onDestroy",[]),this.$root&&delete this.$root.gantt,this._eventRemoveAll&&this._eventRemoveAll(),this.$layout&&this.$layout.destructor(),this.resetLightbox&&this.resetLightbox(),this.ext.inlineEditors&&this.ext.inlineEditors.destructor(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.$services.destructor(),this.detachAllEvents(),this)0===t.indexOf("$")&&delete this[t];this.$destroyed=!0}}(e);var o=new vn({en:sn,ar:Xe,be:Ze,ca:Qe,cn:tn,cs:en,da:nn,de:an,el:rn,es:on,fa:ln,fi:cn,fr:dn,he:un,hr:hn,hu:_n,id:fn,it:gn,jp:pn,kr:mn,nb:kn,nl:yn,no:bn,pl:xn,pt:$n,ro:wn,ru:Sn,si:Tn,sk:En,sv:Cn,tr:Dn,ua:An});return e.i18n={addLocale:o.addLocale,setLocale:function(t){if("string"==typeof t){var n=o.getLocale(t);n||(n=o.getLocale("en")),e.locale=n}else if(t)if(e.locale)for(var i in t)t[i]&&"object"==typeof t[i]?(e.locale[i]||(e.locale[i]={}),e.mixin(e.locale[i],t[i],!0)):e.locale[i]=t[i];else e.locale=t},getLocale:o.getLocale},e.i18n.setLocale("en"),e}function Nn(t){var e="data-dhxbox",n=null;function i(t,e){var i=t.callback;g.hide(t.box),n=t.box=null,i&&i(e)}function a(t){if(n){var e=t.which||t.keyCode,a=!1;if(p.keyboard){if(13==e||32==e){var r=t.target||t.srcElement;x(r).indexOf("gantt_popup_button")>-1&&r.click?r.click():(i(n,!0),a=!0)}27==e&&(i(n,!1),a=!0)}return a?(t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)):void 0}}var r=z(t.$root)||document;function s(t){s.cover||(s.cover=document.createElement("div"),s.cover.onkeydown=a,s.cover.className="dhx_modal_cover",document.body.appendChild(s.cover)),s.cover.style.display=t?"inline-block":"none"}function o(e,n,i){return"<div "+t._waiAria.messageButtonAttrString(e)+" class='gantt_popup_button gantt_"+n.toLowerCase().replace(/ /g,"_")+"_button' data-result='"+i+"' result='"+i+"' ><div>"+e+"</div></div>"}function l(){for(var t=[].slice.apply(arguments,[0]),e=0;e<t.length;e++)if(t[e])return t[e]}function c(r,c,d){var u=r.tagName?r:function(a,r,s){var c=document.createElement("div"),d=ft();t._waiAria.messageModalAttr(c,d),c.className=" gantt_modal_box gantt-"+a.type,c.setAttribute(e,1);var u="";if(a.width&&(c.style.width=a.width),a.height&&(c.style.height=a.height),a.title&&(u+='<div class="gantt_popup_title">'+a.title+"</div>"),u+='<div class="gantt_popup_text" id="'+d+'"><span>'+(a.content?"":a.text)+'</span></div><div  class="gantt_popup_controls">',r&&(u+=o(l(a.ok,t.locale.labels.message_ok,"OK"),"ok",!0)),s&&(u+=o(l(a.cancel,t.locale.labels.message_cancel,"Cancel"),"cancel",!1)),a.buttons)for(var h=0;h<a.buttons.length;h++){var _=a.buttons[h];u+="object"==typeof _?o(_.label,_.css||"gantt_"+_.label.toLowerCase()+"_button",_.value||h):o(_,_,h)}if(u+="</div>",c.innerHTML=u,a.content){var f=a.content;"string"==typeof f&&(f=document.getElementById(f)),"none"==f.style.display&&(f.style.display=""),c.childNodes[a.title?1:0].appendChild(f)}return c.onclick=function(t){var e=t.target||t.srcElement;if(e.className||(e=e.parentNode),R(e,".gantt_popup_button")){var n=e.getAttribute("data-result");i(a,n="true"==n||"false"!=n&&n)}},a.box=c,(r||s)&&(n=a),c}(r,c,d);r.hidden||s(!0),document.body.appendChild(u);var h=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-u.offsetWidth)/2)),_=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-u.offsetHeight)/2));return"top"==r.position?u.style.top="-3px":u.style.top=_+"px",u.style.left=h+"px",u.onkeydown=a,g.focus(u),r.hidden&&g.hide(u),t.callEvent("onMessagePopup",[u]),u}function d(t){return c(t,!0,!1)}function u(t){return c(t,!0,!0)}function h(t){return c(t)}function _(t,e,n){return"object"!=typeof t&&("function"==typeof e&&(n=e,e=""),t={text:t,type:e,callback:n}),t}function f(t,e,n,i){return"object"!=typeof t&&(t={text:t,type:e,expire:n,id:i}),t.id=t.id||ft(),t.expire=t.expire||p.expire,t}t.event(r,"keydown",a,!0);var g=function(){var t=_.apply(this,arguments);return t.type=t.type||"alert",h(t)};g.hide=function(n){for(;n&&n.getAttribute&&!n.getAttribute(e);)n=n.parentNode;n&&(n.parentNode.removeChild(n),s(!1),t.callEvent("onAfterMessagePopup",[n]))},g.focus=function(t){setTimeout((function(){var e=y(t);e.length&&e[0].focus&&e[0].focus()}),1)};var p=function(e,n,i,a){switch((e=f.apply(this,arguments)).type=e.type||"info",e.type.split("-")[0]){case"alert":return d(e);case"confirm":return u(e);case"modalbox":return h(e);default:return function(e){p.area||(p.area=document.createElement("div"),p.area.className="gantt_message_area",p.area.style[p.position]="5px",document.body.appendChild(p.area)),p.hide(e.id);var n=document.createElement("div");return n.innerHTML="<div>"+e.text+"</div>",n.className="gantt-info gantt-"+e.type,n.onclick=function(){p.hide(e.id),e=null},t._waiAria.messageInfoAttr(n),"bottom"==p.position&&p.area.firstChild?p.area.insertBefore(n,p.area.firstChild):p.area.appendChild(n),e.expire>0&&(p.timers[e.id]=window.setTimeout((function(){p&&p.hide(e.id)}),e.expire)),p.pull[e.id]=n,n=null,e.id}(e)}};p.seed=(new Date).valueOf(),p.uid=ft,p.expire=4e3,p.keyboard=!0,p.position="top",p.pull={},p.timers={},p.hideAll=function(){for(var t in p.pull)p.hide(t)},p.hide=function(t){var e=p.pull[t];e&&e.parentNode&&(window.setTimeout((function(){e.parentNode.removeChild(e),e=null}),2e3),e.className+=" hidden",p.timers[t]&&window.clearTimeout(p.timers[t]),delete p.pull[t])};var m=[];return t.attachEvent("onMessagePopup",(function(t){m.push(t)})),t.attachEvent("onAfterMessagePopup",(function(t){for(var e=0;e<m.length;e++)m[e]===t&&(m.splice(e,1),e--)})),t.attachEvent("onDestroy",(function(){s.cover&&s.cover.parentNode&&s.cover.parentNode.removeChild(s.cover);for(var t=0;t<m.length;t++)m[t].parentNode&&m[t].parentNode.removeChild(m[t]);m=null,p.area&&p.area.parentNode&&p.area.parentNode.removeChild(p.area),p=null})),{alert:function(){var t=_.apply(this,arguments);return t.type=t.type||"confirm",d(t)},confirm:function(){var t=_.apply(this,arguments);return t.type=t.type||"alert",u(t)},message:p,modalbox:g}}function Ln(t,e){var n=this.$config[t];return n?(n.$extendedConfig||(n.$extendedConfig=!0,Object.setPrototypeOf(n,e)),n):e}function Pn(t,e){var n,i,a;ht(t,(n=e,{$getConfig:function(){return i||(i=n?n.$getConfig():this.$gantt.config),this.$config.config?Ln.call(this,"config",i):i},$getTemplates:function(){return a||(a=n?n.$getTemplates():this.$gantt.templates),this.$config.templates?Ln.call(this,"templates",a):a}}))}const Rn=function(t){var e={},n={};function i(i,a,r,s){var o=e[i];if(!o||!o.create)return!1;"resizer"!=i||r.mode||(s.$config.cols?r.mode="x":r.mode="y"),"viewcell"!=i||"scrollbar"!=r.view||r.scroll||(s.$config.cols?r.scroll="y":r.scroll="x"),(r=ut(r)).id||n[r.view]||(r.id=r.view),r.id&&!r.css&&(r.css=r.id+"_cell");var l=new o.create(a,r,this,t);return o.configure&&o.configure(l),Pn(l,s),l.$id||(l.$id=r.id||t.uid()),l.$parent||"object"!=typeof a||(l.$parent=a),l.$config||(l.$config=r),n[l.$id]&&(l.$id=t.uid()),n[l.$id]=l,l}return{initUI:function(t,e){var n="cell";return t.view?n="viewcell":t.resizer?n="resizer":t.rows||t.cols?n="layout":t.views&&(n="multiview"),i.call(this,n,null,t,e)},reset:function(){n={}},registerView:function(t,n,i){e[t]={create:n,configure:i}},createView:i,getView:function(t){return n[t]}}};var On=function(t){return function(e){var n={click:{},doubleclick:{},contextMenu:{}};function i(t,e,i,a){n[t][e]||(n[t][e]=[]),n[t][e].push({handler:i,root:a})}function a(t){t=t||window.event;var i=e.locate(t),a=s(t,n.click),r=!0;if(null!==i?r=!e.checkEvent("onTaskClick")||e.callEvent("onTaskClick",[i,t]):e.callEvent("onEmptyClick",[t]),r){if(!o(a,t,i))return;switch(t.target.nodeName){case"SELECT":case"INPUT":return}i&&e.getTask(i)&&!e._multiselect&&e.config.select_task&&e.selectTask(i)}}function r(t){var n=(t=t||window.event).target||t.srcElement,i=e.locate(n),a=e.locate(n,e.config.link_attribute),r=!e.checkEvent("onContextMenu")||e.callEvent("onContextMenu",[i,a,t]);return r||(t.preventDefault?t.preventDefault():t.returnValue=!1),r}function s(e,n){for(var i=e.target||e.srcElement,a=[];i;){var r=t.getClassName(i);if(r){r=r.split(" ");for(var s=0;s<r.length;s++)if(r[s]&&n[r[s]])for(var o=n[r[s]],l=0;l<o.length;l++)o[l].root&&!t.isChildOf(i,o[l].root)||a.push(o[l].handler)}i=i.parentNode}return a}function o(t,n,i){for(var a=!0,r=0;r<t.length;r++){var s=t[r].call(e,n,i,n.target||n.srcElement);a=a&&!(void 0!==s&&!0!==s)}return a}function l(t){t=t||window.event;var i=e.locate(t),a=s(t,n.doubleclick),r=!e.checkEvent("onTaskDblClick")||null===i||e.callEvent("onTaskDblClick",[i,t]);if(r){if(!o(a,t,i))return;null!==i&&e.getTask(i)&&r&&e.config.details_on_dblclick&&!e.isReadonly(i)&&e.showLightbox(i)}}function c(t){if(e.checkEvent("onMouseMove")){var n=e.locate(t);e._last_move_event=t,e.callEvent("onMouseMove",[n,t])}}var d=e._createDomEventScope();function u(t){d.detachAll(),t&&(d.attach(t,"click",a),d.attach(t,"dblclick",l),d.attach(t,"mousemove",c),d.attach(t,"contextmenu",r))}return{reset:u,global:function(t,e,n){i(t,e,n,null)},delegate:i,detach:function(t,e,i,a){if(n[t]&&n[t][e]){for(var r=n[t],s=r[e],o=0;o<s.length;o++)s[o].root==a&&(s.splice(o,1),o--);s.length||delete r[e]}},callHandler:function(t,e,i,a){var r=n[t][e];if(r)for(var s=0;s<r.length;s++)(i||r[s].root)&&r[s].root!==i||r[s].handler.apply(this,a)},onDoubleClick:l,onMouseMove:c,onContextMenu:r,onClick:a,destructor:function(){u(),n=null,d=null}}}}(j);const Hn={init:On};function Bn(t,e,n){return!!e&&!(e.left>t.x_end||e.left+e.width<t.x)&&!(e.top>t.y_end||e.top+e.height<t.y)}function zn(t){return t.config.smart_rendering&&t._smart_render}function jn(t,e,n){return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:0,right:1/0}}function Wn(t,e,n,i,a){var r=e.getItemIndexByTopPosition(a.y)||0,s=e.getItemIndexByTopPosition(a.y_end)||i.count(),o=Math.max(0,r-1),l=Math.min(i.count(),s+1);const c=[];if(t.config.keyboard_navigation&&t.getSelectedId()&&c.push(t.getSelectedId()),t.$ui.getView("grid")&&t.ext.inlineEditors&&t.ext.inlineEditors.getState().id){let e=t.ext.inlineEditors.getState().id;i.exists(e)&&c.push(e)}return{start:o,end:l,ids:c}}var Fn=function(t){var e=function(t){var e={},n={};function i(e){var n=null;return"string"==typeof e.view?n=t.$ui.getView(e.view):e.view&&(n=e.view),n}function a(a,r,s){if(n[a])return n[a];r.renderer||t.assert(!1,"Invalid renderer call");var o=null,l=null,c=null,d=null,u=null;"function"==typeof r.renderer?(o=r.renderer,c=jn):(o=r.renderer.render,l=r.renderer.update,d=r.renderer.onrender,r.renderer.isInViewPort?u=r.renderer.isInViewPort:c=r.renderer.getRectangle,c||null===c||(c=jn));var h=r.filter;return s&&s.setAttribute(t.config.layer_attribute,!0),n[a]={render_item:function(e,n,a,l,_){if(n=n||s,!h||h(e)){var f=l||i(r),g=_||(f?f.$getConfig():null),p=a;!p&&g&&g.smart_rendering&&(p=f.getViewPort());var m=null;!zn(t)&&(c||u)&&p?(u?u(e,p,f,g,t):Bn(p,c(e,f,g,t)))&&(m=o.call(t,e,f,g,p)):m=o.call(t,e,f,g,p),this.append(e,m,n);var v=11==n.nodeType;d&&!v&&m&&d.call(t,e,m,f)}else this.remove_item(e.id)},clear:function(t){this.rendered=e[a]={},r.append||this.clear_container(t)},clear_container:function(t){(t=t||s)&&(t.innerHTML="")},get_visible_range:function(e){var n,a,s=i(r),o=s?s.$getConfig():null;return o&&o.smart_rendering&&(n=s.getViewPort()),s&&n&&("function"==typeof r.renderer?a=Wn(t,s,0,e,n):r.renderer&&r.renderer.getVisibleRange&&(a=r.renderer.getVisibleRange(t,s,o,e,n))),a||(a={start:0,end:e.count()}),a},prepare_data:function(e){if(r.renderer&&r.renderer.prepareData)return r.renderer.prepareData(e,t,r)},render_items:function(e,n){n=n||s;var a=document.createDocumentFragment();this.clear(n);var o=null,l=i(r),c=l?l.$getConfig():null;c&&c.smart_rendering&&(o=l.getViewPort());for(var u=0,h=e.length;u<h;u++)this.render_item(e[u],a,o,l,c);n.appendChild(a,n);var _={};e.forEach((function(t){_[t.id]=t}));var f={};if(d){var g={};for(var u in this.rendered)f[u]||(g[u]=this.rendered[u],d.call(t,_[u],this.rendered[u],l))}},update_items:function(e,n){var a=i(r),o=a?a.$getConfig():null;if(a&&a.$getConfig().smart_rendering&&!zn(t)&&this.rendered&&(c||u)){n=n||s;var h=document.createDocumentFragment(),_=null;a&&(_=a.getViewPort());var f={};e.forEach((function(t){f[t.id]=t}));var g={},p={};for(var m in this.rendered)p[m]=!0,g[m]=!0;for(var v={},k=(m=0,e.length);m<k;m++){var y=e[m],b=this.rendered[y.id];p[y.id]=!1,b&&b.parentNode?(u?u(y,_,a,o,t):Bn(_,c(y,a,o,t)))?(l&&l.call(t,y,b,a,o,_),this.restore(y,h)):p[y.id]=!0:(v[e[m].id]=!0,this.render_item(e[m],h,_,a,o))}for(var m in p)p[m]&&this.hide(m);if(h.childNodes.length&&n.appendChild(h,n),d){var x={};for(var m in this.rendered)g[m]&&!v[m]||(x[m]=this.rendered[m],d.call(t,f[m],this.rendered[m],a))}}},append:function(t,e,n){this.rendered&&(e?(this.rendered[t.id]&&this.rendered[t.id].parentNode?this.replace_item(t.id,e):n.appendChild(e),this.rendered[t.id]=e):this.rendered[t.id]&&this.remove_item(t.id))},replace_item:function(t,e){var n=this.rendered[t];n&&n.parentNode&&n.parentNode.replaceChild(e,n),this.rendered[t]=e},remove_item:function(t){this.hide(t),delete this.rendered[t]},hide:function(t){var e=this.rendered[t];e&&e.parentNode&&e.parentNode.removeChild(e)},restore:function(t,e){var n=this.rendered[t.id];n?n.parentNode||this.append(t,n,e||s):this.render_item(t,e||s)},change_id:function(t,e){this.rendered[e]=this.rendered[t],delete this.rendered[t]},rendered:e[a],node:s,destructor:function(){this.clear(),delete n[a],delete e[a]}},n[a]}return{getRenderer:a,clearRenderers:function(){for(var t in n)a(t).destructor()}}}(t);return{createGroup:function(n,i,a,r){var s={tempCollection:[],renderers:{},container:n,filters:[],getLayers:function(){this._add();var t=[];for(var e in this.renderers)t.push(this.renderers[e]);return t},getLayer:function(t){return this.renderers[t]},_add:function(n){n&&(n.id=n.id||ft(),this.tempCollection.push(n));for(var a=this.container(),s=this.tempCollection,o=0;o<s.length;o++)if(n=s[o],this.container()||n&&n.container&&P(n.container,document.body)){var l=n.container,c=n.id,d=n.topmost;if(!l.parentNode)if(d)a.appendChild(l);else{var u=i?i():a.firstChild;u&&u.parentNode==a?a.insertBefore(l,u):a.appendChild(l)}this.renderers[c]=e.getRenderer(c,n,l),r&&r(n,t),this.tempCollection.splice(o,1),o--}},addLayer:function(e){if(e){"function"==typeof e&&(e={renderer:e}),void 0===e.filter?e.filter=Vn(a||[]):e.filter instanceof Array&&(e.filter.push(a),e.filter=Vn(e.filter)),e.container||(e.container=document.createElement("div"));var n=this;e.requestUpdate=function(){t.config.smart_rendering&&!zn(t)&&n.renderers[e.id]&&n.onUpdateRequest(n.renderers[e.id])}}return this._add(e),e?e.id:void 0},onUpdateRequest:function(t){},eachLayer:function(t){for(var e in this.renderers)t(this.renderers[e])},removeLayer:function(t){this.renderers[t]&&(this.renderers[t].destructor(),delete this.renderers[t])},clear:function(){for(var t in this.renderers)this.renderers[t].destructor();this.renderers={}}};return t.attachEvent("onDestroy",(function(){s.clear(),s=null})),s}}};function Vn(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments,0)),function(e){for(var n=!0,i=0,a=t.length;i<a;i++){var r=t[i];r&&(n=n&&!1!==r(e.id,e))}return n}}function Un(t,e,n){if(!t.start_date||!t.end_date)return null;var i=e.posFromDate(t.start_date),a=e.posFromDate(t.end_date),r=Math.min(i,a)-200,s=Math.max(i,a)+200;return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:r,width:s-r}}function qn(){var t=[],e=!1;function n(){t=[],e=!1}function i(n,i,a){i.$getConfig(),n.getVisibleItems().forEach((function(e){var n=function(t,e,n,i){if(!i.isTaskExists(t.source)||!i.isTaskExists(t.target))return null;var a=Un(i.getTask(t.source),e),r=Un(i.getTask(t.target),e);if(!a||!r)return null;var s=100,o=Math.min(a.left,r.left)-s,l=Math.max(a.left+a.width,r.left+r.width)+s,c=Math.min(a.top,r.top)-s,d=Math.max(a.top+a.height,r.top+r.height)+s;return{top:c,height:d-c,bottom:d,left:o,width:l-o,right:l}}(e,i,0,a);n&&t.push({id:e.id,rec:n})})),t.sort((function(t,e){return t.rec.right<e.rec.right?-1:1})),e=!0}var a=!1;return function(r,s,o,l,c){(function(t){a||(a=!0,t.attachEvent("onPreFilter",n),t.attachEvent("onStoreUpdated",n),t.attachEvent("onClearAll",n),t.attachEvent("onBeforeStoreUpdate",n))})(l),e||i(l,s,r);for(var d=[],u=0;u<t.length;u++){var h=t[u],_=h.rec;_.right<c.x||_.left<c.x_end&&_.right>c.x&&_.top<c.y_end&&_.bottom>c.y&&d.push(h.id)}return{ids:d}}}function Gn(t,e,n,i,a){var r=n.$gantt.getTask(t.source),s=n.$gantt.getTask(t.target),o=n.getItemTop(r.id),l=n.getItemHeight(r.id),c=n.getItemTop(s.id),d=n.getItemHeight(s.id);if(e.y>o+l&&e.y>c+d||e.y_end<c&&e.y_end<o)return!1;var u=100,h=n.posFromDate(r.start_date),_=n.posFromDate(r.end_date),f=n.posFromDate(s.start_date),g=n.posFromDate(s.end_date);if(h>_){var p=_;_=h,h=p}return f>g&&(p=g,g=f,f=p),h+=-100,_+=u,f+=-100,g+=u,!(e.x>_&&e.x>g)&&!(e.x_end<h&&e.x_end<f)}function Yn(t,e){if(t.view){var n=t.view;"string"==typeof n&&(n=e.$ui.getView(n)),n&&n.attachEvent&&n.attachEvent("onScroll",(function(){e.$services.getService("state").getState("batchUpdate").batch_update||n.$config.$skipSmartRenderOnScroll||t.requestUpdate&&t.requestUpdate()}))}}var Jn=function(){function t(t,e,n,i){t&&(this.$container=S(t),this.$parent=t),this.$config=ht(e,{headerHeight:33}),this.$gantt=i,this.$domEvents=i._createDomEventScope(),this.$id=e.id||"c"+ft(),this.$name="cell",this.$factory=n,q(this)}return t.prototype.destructor=function(){this.$parent=this.$container=this.$view=null,this.$gantt.$services.getService("mouseEvents").detach("click","gantt_header_arrow",this._headerClickHandler),this.$domEvents.detachAll(),this.callEvent("onDestroy",[]),this.detachAllEvents()},t.prototype.cell=function(t){return null},t.prototype.scrollTo=function(t,e){var n=this.$view;this.$config.html&&(n=this.$view.firstChild),1*t==t&&(n.scrollLeft=t),1*e==e&&(n.scrollTop=e)},t.prototype.clear=function(){this.getNode().innerHTML="",this.getNode().className="gantt_layout_content",this.getNode().style.padding="0"},t.prototype.resize=function(t){if(this.$parent)return this.$parent.resize(t);!1===t&&(this.$preResize=!0);var e=this.$container,n=e.offsetWidth,i=e.offsetHeight,a=this.getSize();e===document.body&&(n=document.body.offsetWidth,i=document.body.offsetHeight),n<a.minWidth&&(n=a.minWidth),n>a.maxWidth&&(n=a.maxWidth),i<a.minHeight&&(i=a.minHeight),i>a.maxHeight&&(i=a.maxHeight),this.setSize(n,i),this.$preResize,this.$preResize=!1},t.prototype.hide=function(){this._hide(!0),this.resize()},t.prototype.show=function(t){this._hide(!1),t&&this.$parent&&this.$parent.show(),this.resize()},t.prototype._hide=function(t){if(!0===t&&this.$view.parentNode)this.$view.parentNode.removeChild(this.$view);else if(!1===t&&!this.$view.parentNode){var e=this.$parent.cellIndex(this.$id);this.$parent.moveView(this,e)}this.$config.hidden=t},t.prototype.$toHTML=function(t,e){void 0===t&&(t=""),e=[e||"",this.$config.css||""].join(" ");var n=this.$config,i="";return n.raw?t="string"==typeof n.raw?n.raw:"":(t||(t="<div class='gantt_layout_content' "+(e?" class='"+e+"' ":"")+" >"+(n.html||"")+"</div>"),n.header&&(i="<div class='gantt_layout_header'>"+(n.canCollapse?"<div class='gantt_layout_header_arrow'></div>":"")+"<div class='gantt_layout_header_content'>"+n.header+"</div></div>")),"<div class='gantt_layout_cell "+e+"' data-cell-id='"+this.$id+"'>"+i+t+"</div>"},t.prototype.$fill=function(t,e){this.$view=t,this.$parent=e,this.init()},t.prototype.getNode=function(){return this.$view.querySelector("gantt_layout_cell")||this.$view},t.prototype.init=function(){var t=this;this._headerClickHandler=function(e){A(e,"data-cell-id")==t.$id&&t.toggle()},this.$gantt.$services.getService("mouseEvents").delegate("click","gantt_header_arrow",this._headerClickHandler),this.callEvent("onReady",[])},t.prototype.toggle=function(){this.$config.collapsed=!this.$config.collapsed,this.resize()},t.prototype.getSize=function(){var t={height:this.$config.height||0,width:this.$config.width||0,gravity:this.$config.gravity||1,minHeight:this.$config.minHeight||0,minWidth:this.$config.minWidth||0,maxHeight:this.$config.maxHeight||1e11,maxWidth:this.$config.maxWidth||1e11};if(this.$config.collapsed){var e="x"===this.$config.mode;t[e?"width":"height"]=t[e?"maxWidth":"maxHeight"]=this.$config.headerHeight}return t},t.prototype.getContentSize=function(){var t=this.$lastSize.contentX;t!==1*t&&(t=this.$lastSize.width);var e=this.$lastSize.contentY;return e!==1*e&&(e=this.$lastSize.height),{width:t,height:e}},t.prototype._getBorderSizes=function(){var t={top:0,right:0,bottom:0,left:0,horizontal:0,vertical:0};return this._currentBorders&&(this._currentBorders[this._borders.left]&&(t.left=1,t.horizontal++),this._currentBorders[this._borders.right]&&(t.right=1,t.horizontal++),this._currentBorders[this._borders.top]&&(t.top=1,t.vertical++),this._currentBorders[this._borders.bottom]&&(t.bottom=1,t.vertical++)),t},t.prototype.setSize=function(t,e){this.$view.style.width=t+"px",this.$view.style.height=e+"px";var n=this._getBorderSizes(),i=e-n.vertical,a=t-n.horizontal;this.$lastSize={x:t,y:e,contentX:a,contentY:i},this.$config.header?this._sizeHeader():this._sizeContent()},t.prototype._borders={left:"gantt_layout_cell_border_left",right:"gantt_layout_cell_border_right",top:"gantt_layout_cell_border_top",bottom:"gantt_layout_cell_border_bottom"},t.prototype._setBorders=function(t,e){e||(e=this);var n=e.$view;for(var i in this._borders)w(n,this._borders[i]);"string"==typeof t&&(t=[t]);var a={};for(i=0;i<t.length;i++)$(n,t[i]),a[t[i]]=!0;e._currentBorders=a},t.prototype._sizeContent=function(){var t=this.$view.childNodes[0];t&&"gantt_layout_content"==t.className&&(t.style.height=this.$lastSize.contentY+"px")},t.prototype._sizeHeader=function(){var t=this.$lastSize;t.contentY-=this.$config.headerHeight;var e=this.$view.childNodes[0],n=this.$view.childNodes[1],i="x"===this.$config.mode;if(this.$config.collapsed)if(n.style.display="none",i){e.className="gantt_layout_header collapsed_x",e.style.width=t.y+"px";var a=Math.floor(t.y/2-t.x/2);e.style.transform="rotate(90deg) translate("+a+"px, "+a+"px)",n.style.display="none"}else e.className="gantt_layout_header collapsed_y";else e.className=i?"gantt_layout_header":"gantt_layout_header vertical",e.style.width="auto",e.style.transform="",n.style.display="",n.style.height=t.contentY+"px";e.style.height=this.$config.headerHeight+"px"},t}();function Kn(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);function i(){this.constructor=t}t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Xn=function(t){function e(e,n,i){var a=t.apply(this,arguments)||this;return e&&(a.$root=!0),a._parseConfig(n),a.$name="layout",a}return Kn(e,t),e.prototype.destructor=function(){this.$container&&this.$view&&E(this.$view);for(var e=0;e<this.$cells.length;e++)this.$cells[e].destructor();this.$cells=[],t.prototype.destructor.call(this)},e.prototype._resizeScrollbars=function(t,e){var n=!1,i=[],a=[];const r=[];function s(t){t.$parent.show(),n=!0,i.push(t)}function o(t){t.$parent.hide(),n=!0,a.push(t)}for(var l,c=0;c<e.length;c++)t[(l=e[c]).$config.scroll]?o(l):l.shouldHide()?r.push(l):l.shouldShow()?s(l):l.isVisible()?i.push(l):a.push(l);var d={};for(c=0;c<i.length;c++)i[c].$config.group&&(d[i[c].$config.group]=!0);for(r.forEach((function(t){t.$config.group&&d[t.$config.group]||o(t)})),c=0;c<a.length;c++)if((l=a[c]).$config.group&&d[l.$config.group]){s(l);for(var u=0;u<i.length;u++)if(i[u]==l){this.$gantt.$scrollbarRepaint=!0;break}}return n},e.prototype._syncCellSizes=function(t,e){if(t){var n={};return this._eachChild((function(t){t.$config.group&&"scrollbar"!=t.$name&&"resizer"!=t.$name&&(n[t.$config.group]||(n[t.$config.group]=[]),n[t.$config.group].push(t))})),n[t]&&this._syncGroupSize(n[t],e),n[t]}},e.prototype._syncGroupSize=function(t,e){if(t.length)for(var n=t[0].$parent._xLayout?"width":"height",i=t[0].$parent.getNextSibling(t[0].$id)?1:-1,a=e.value,r=e.isGravity,s=0;s<t.length;s++){var o=t[s].getSize(),l=i>0?t[s].$parent.getNextSibling(t[s].$id):t[s].$parent.getPrevSibling(t[s].$id);"resizer"==l.$name&&(l=i>0?l.$parent.getNextSibling(l.$id):l.$parent.getPrevSibling(l.$id));var c=l.getSize();if(r)t[s].$config.gravity=a;else if(l[n]){var d=o.gravity+c.gravity,u=o[n]+c[n],h=d/u;t[s].$config.gravity=h*a,l.$config[n]=u-a,l.$config.gravity=d-h*a}else t[s].$config[n]=a;var _=this.$gantt.$ui.getView("grid");!_||t[s].$content!==_||_.$config.scrollable||r||(this.$gantt.config.grid_width=a)}},e.prototype.resize=function(e){var n=!1;if(this.$root&&!this._resizeInProgress&&(this.callEvent("onBeforeResize",[]),n=!0,this._resizeInProgress=!0),t.prototype.resize.call(this,!0),t.prototype.resize.call(this,!1),n){var i=[];i=(i=(i=i.concat(this.getCellsByType("viewCell"))).concat(this.getCellsByType("viewLayout"))).concat(this.getCellsByType("hostCell"));for(var a=this.getCellsByType("scroller"),r=0;r<i.length;r++)i[r].$config.hidden||i[r].setContentSize();var s=this._getAutosizeMode(this.$config.autosize),o=this._resizeScrollbars(s,a);if(this.$config.autosize&&(this.autosize(this.$config.autosize),i.forEach((function(t){const e=t.$parent,n=e.getContentSize(s);s.x&&(e.$config.$originalWidthStored||(e.$config.$originalWidthStored=!0,e.$config.$originalWidth=e.$config.width),e.$config.width=n.width),s.y&&(e.$config.$originalHeightStored||(e.$config.$originalHeightStored=!0,e.$config.$originalHeight=e.$config.height),e.$config.height=n.height)})),o=!0),o)for(this.resize(),r=0;r<i.length;r++)i[r].$config.hidden||i[r].setContentSize();this.callEvent("onResize",[])}n&&(this._resizeInProgress=!1)},e.prototype._eachChild=function(t,e){if(t(e=e||this),e.$cells)for(var n=0;n<e.$cells.length;n++)this._eachChild(t,e.$cells[n])},e.prototype.isChild=function(t){var e=!1;return this._eachChild((function(n){n!==t&&n.$content!==t||(e=!0)})),e},e.prototype.getCellsByType=function(t){var n=[];if(t===this.$name&&n.push(this),this.$content&&this.$content.$name==t&&n.push(this.$content),this.$cells)for(var i=0;i<this.$cells.length;i++){var a=e.prototype.getCellsByType.call(this.$cells[i],t);a.length&&n.push.apply(n,a)}return n},e.prototype.getNextSibling=function(t){var e=this.cellIndex(t);return e>=0&&this.$cells[e+1]?this.$cells[e+1]:null},e.prototype.getPrevSibling=function(t){var e=this.cellIndex(t);return e>=0&&this.$cells[e-1]?this.$cells[e-1]:null},e.prototype.cell=function(t){for(var e=0;e<this.$cells.length;e++){var n=this.$cells[e];if(n.$id===t)return n;var i=n.cell(t);if(i)return i}},e.prototype.cellIndex=function(t){for(var e=0;e<this.$cells.length;e++)if(this.$cells[e].$id===t)return e;return-1},e.prototype.moveView=function(t,e){if(this.$cells[e]!==t)return window.alert("Not implemented");e+=this.$config.header?1:0;var n=this.$view;e>=n.childNodes.length?n.appendChild(t.$view):n.insertBefore(t.$view,n.childNodes[e])},e.prototype._parseConfig=function(t){this.$cells=[],this._xLayout=!t.rows;for(var e=t.rows||t.cols||t.views,n=0;n<e.length;n++){var i=e[n];i.mode=this._xLayout?"x":"y";var a=this.$factory.initUI(i,this);a?(a.$parent=this,this.$cells.push(a)):(e.splice(n,1),n--)}},e.prototype.getCells=function(){return this.$cells},e.prototype.render=function(){var t=T(this.$container,this.$toHTML());this.$fill(t,null),this.callEvent("onReady",[]),this.resize(),this.render=this.resize},e.prototype.$fill=function(t,e){this.$view=t,this.$parent=e;for(var n=C(t,"gantt_layout_cell"),i=n.length-1;i>=0;i--){var a=this.$cells[i];a.$fill(n[i],this),a.$config.hidden&&a.$view.parentNode.removeChild(a.$view)}},e.prototype.$toHTML=function(){for(var e=this._xLayout?"x":"y",n=[],i=0;i<this.$cells.length;i++)n.push(this.$cells[i].$toHTML());return t.prototype.$toHTML.call(this,n.join(""),(this.$root?"gantt_layout_root ":"")+"gantt_layout gantt_layout_"+e)},e.prototype.getContentSize=function(t){for(var e,n,i,a=0,r=0,s=0;s<this.$cells.length;s++)(n=this.$cells[s]).$config.hidden||(e=n.getContentSize(t),"scrollbar"===n.$config.view&&t[n.$config.scroll]&&(e.height=0,e.width=0),n.$config.resizer&&(this._xLayout?e.height=0:e.width=0),i=n._getBorderSizes(),this._xLayout?(a+=e.width+i.horizontal,r=Math.max(r,e.height+i.vertical)):(a=Math.max(a,e.width+i.horizontal),r+=e.height+i.vertical));return{width:a+=(i=this._getBorderSizes()).horizontal,height:r+=i.vertical}},e.prototype._cleanElSize=function(t){return 1*(t||"").toString().replace("px","")||0},e.prototype._getBoxStyles=function(t){var e=null,n=["width","height","paddingTop","paddingBottom","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],i={boxSizing:"border-box"==(e=window.getComputedStyle?window.getComputedStyle(t,null):{width:t.clientWidth,height:t.clientHeight}).boxSizing};e.MozBoxSizing&&(i.boxSizing="border-box"==e.MozBoxSizing);for(var a=0;a<n.length;a++)i[n[a]]=e[n[a]]?this._cleanElSize(e[n[a]]):0;var r={horPaddings:i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth,vertPaddings:i.paddingTop+i.paddingBottom+i.borderTopWidth+i.borderBottomWidth,borderBox:i.boxSizing,innerWidth:i.width,innerHeight:i.height,outerWidth:i.width,outerHeight:i.height};return r.borderBox?(r.innerWidth-=r.horPaddings,r.innerHeight-=r.vertPaddings):(r.outerWidth+=r.horPaddings,r.outerHeight+=r.vertPaddings),r},e.prototype._getAutosizeMode=function(t){var e={x:!1,y:!1};return"xy"===t?e.x=e.y=!0:"y"===t||!0===t?e.y=!0:"x"===t&&(e.x=!0),e},e.prototype.autosize=function(t){var e=this._getAutosizeMode(t),n=this._getBoxStyles(this.$container),i=this.getContentSize(t),a=this.$container;e.x&&(n.borderBox&&(i.width+=n.horPaddings),a.style.width=i.width+"px"),e.y&&(n.borderBox&&(i.height+=n.vertPaddings),a.style.height=i.height+"px")},e.prototype.getSize=function(){this._sizes=[];for(var e=0,n=0,i=1e11,a=0,r=1e11,s=0,o=0;o<this.$cells.length;o++){var l=this._sizes[o]=this.$cells[o].getSize();this.$cells[o].$config.hidden||(this._xLayout?(!l.width&&l.minWidth?e+=l.minWidth:e+=l.width,i+=l.maxWidth,n+=l.minWidth,a=Math.max(a,l.height),r=Math.min(r,l.maxHeight),s=Math.max(s,l.minHeight)):(!l.height&&l.minHeight?a+=l.minHeight:a+=l.height,r+=l.maxHeight,s+=l.minHeight,e=Math.max(e,l.width),i=Math.min(i,l.maxWidth),n=Math.max(n,l.minWidth)))}var c=t.prototype.getSize.call(this);return c.maxWidth>=1e5&&(c.maxWidth=i),c.maxHeight>=1e5&&(c.maxHeight=r),c.minWidth=c.minWidth!=c.minWidth?0:c.minWidth,c.minHeight=c.minHeight!=c.minHeight?0:c.minHeight,this._xLayout?(c.minWidth+=this.$config.margin*this.$cells.length||0,c.minWidth+=2*this.$config.padding||0,c.minHeight+=2*this.$config.padding||0):(c.minHeight+=this.$config.margin*this.$cells.length||0,c.minHeight+=2*this.$config.padding||0),c},e.prototype._calcFreeSpace=function(t,e,n){var i=n?e.minWidth:e.minHeight,a=e.maxWidth,r=t;return r?(r>a&&(r=a),r<i&&(r=i),this._free-=r):((r=Math.floor(this._free/this._gravity*e.gravity))>a&&(r=a,this._free-=r,this._gravity-=e.gravity),r<i&&(r=i,this._free-=r,this._gravity-=e.gravity)),r},e.prototype._calcSize=function(t,e,n){var i=t,a=n?e.minWidth:e.minHeight,r=n?e.maxWidth:e.maxHeight;return i||(i=Math.floor(this._free/this._gravity*e.gravity)),i>r&&(i=r),i<a&&(i=a),i},e.prototype._configureBorders=function(){this.$root&&this._setBorders([this._borders.left,this._borders.top,this._borders.right,this._borders.bottom],this);for(var t=this._xLayout?this._borders.right:this._borders.bottom,e=this.$cells,n=e.length-1,i=n;i>=0;i--)if(!e[i].$config.hidden){n=i;break}for(i=0;i<e.length;i++)if(!e[i].$config.hidden){var a=i>=n,r="";!a&&e[i+1]&&"scrollbar"==e[i+1].$config.view&&(this._xLayout?a=!0:r="gantt_layout_cell_border_transparent"),this._setBorders(a?[]:[t,r],e[i])}},e.prototype._updateCellVisibility=function(){for(var t=this._visibleCells||{},e=!this._visibleCells,n={},i=null,a=[],r=0;r<this._sizes.length;r++)(i=this.$cells[r]).$config.hide_empty&&a.push(i),!e&&i.$config.hidden&&t[i.$id]?i._hide(!0):i.$config.hidden||t[i.$id]||i._hide(!1),i.$config.hidden||(n[i.$id]=!0);for(this._visibleCells=n,r=0;r<a.length;r++){var s=(i=a[r]).$cells,o=!0;s.forEach((function(t){t.$config.hidden||t.$config.resizer||(o=!1)})),i.$config.hidden=o}},e.prototype.setSize=function(e,n){this._configureBorders(),t.prototype.setSize.call(this,e,n),n=this.$lastSize.contentY,e=this.$lastSize.contentX;var i,a,r=this.$config.padding||0;this.$view.style.padding=r+"px",this._gravity=0,this._free=this._xLayout?e:n,this._free-=2*r,this._updateCellVisibility();for(var s=0;s<this._sizes.length;s++)if(!(i=this.$cells[s]).$config.hidden){var o=this.$config.margin||0;"resizer"!=i.$name||o||(o=-1);var l=i.$view,c=this._xLayout?"marginRight":"marginBottom";s!==this.$cells.length-1&&(l.style[c]=o+"px",this._free-=o),a=this._sizes[s],this._xLayout?a.width||(this._gravity+=a.gravity):a.height||(this._gravity+=a.gravity)}for(s=0;s<this._sizes.length;s++)if(!(i=this.$cells[s]).$config.hidden){var d=(a=this._sizes[s]).width,u=a.height;this._xLayout?this._calcFreeSpace(d,a,!0):this._calcFreeSpace(u,a,!1)}for(s=0;s<this.$cells.length;s++)if(!(i=this.$cells[s]).$config.hidden){a=this._sizes[s];var h=void 0,_=void 0;this._xLayout?(h=this._calcSize(a.width,a,!0),_=n-2*r):(h=e-2*r,_=this._calcSize(a.height,a,!1)),i.setSize(h,_)}},e}(Jn),Zn=function(t){function e(e,n,i){for(var a=t.apply(this,arguments)||this,r=0;r<a.$cells.length;r++)a.$cells[r].$config.hidden=0!==r;return a.$cell=a.$cells[0],a.$name="viewLayout",a}return Kn(e,t),e.prototype.cell=function(e){var n=t.prototype.cell.call(this,e);return n.$view||this.$fill(null,this),n},e.prototype.moveView=function(t){var e=this.$view;this.$cell&&(this.$cell.$config.hidden=!0,e.removeChild(this.$cell.$view)),this.$cell=t,e.appendChild(t.$view)},e.prototype.setSize=function(t,e){Jn.prototype.setSize.call(this,t,e)},e.prototype.setContentSize=function(){var t=this.$lastSize;this.$cell.setSize(t.contentX,t.contentY)},e.prototype.getSize=function(){var e=t.prototype.getSize.call(this);if(this.$cell){var n=this.$cell.getSize();if(this.$config.byMaxSize)for(var i=0;i<this.$cells.length;i++){var a=this.$cells[i].getSize();for(var r in n)n[r]=Math.max(n[r],a[r])}for(var s in e)e[s]=e[s]||n[s];e.gravity=Math.max(e.gravity,n.gravity)}return e},e}(Xn),Qn=function(t){function e(e,n,i){var a=t.apply(this,arguments)||this;if(n.view){n.id&&(this.$id=ft());var r=ut(n);if(delete r.config,delete r.templates,this.$content=this.$factory.createView(n.view,this,r,this),!this.$content)return!1}return a.$name="viewCell",a}return Kn(e,t),e.prototype.destructor=function(){this.clear(),t.prototype.destructor.call(this)},e.prototype.clear=function(){if(this.$initialized=!1,this.$content){var e=this.$content.unload||this.$content.destructor;e&&e.call(this.$content)}t.prototype.clear.call(this)},e.prototype.scrollTo=function(e,n){this.$content&&this.$content.scrollTo?this.$content.scrollTo(e,n):t.prototype.scrollTo.call(this,e,n)},e.prototype._setContentSize=function(t,e){var n=this._getBorderSizes();if("number"==typeof t){var i=t+n.horizontal;this.$config.width=i}if("number"==typeof e){var a=e+n.vertical;this.$config.height=a}},e.prototype.setSize=function(e,n){if(t.prototype.setSize.call(this,e,n),!this.$preResize&&this.$content&&!this.$initialized){this.$initialized=!0;var i=this.$view.childNodes[0],a=this.$view.childNodes[1];a||(a=i),this.$content.init(a)}},e.prototype.setContentSize=function(){!this.$preResize&&this.$content&&this.$initialized&&this.$content.setSize(this.$lastSize.contentX,this.$lastSize.contentY)},e.prototype.getContentSize=function(){var e=t.prototype.getContentSize.call(this);if(this.$content&&this.$initialized){var n=this.$content.getSize();e.width=void 0===n.contentX?n.width:n.contentX,e.height=void 0===n.contentY?n.height:n.contentY}var i=this._getBorderSizes();return e.width+=i.horizontal,e.height+=i.vertical,e},e}(Jn),ti=function(t){var e=["altKey","shiftKey","metaKey"];function n(e,n,i,a){var r=t.apply(this,arguments)||this;this.$config=ht(n,{scroll:"x"}),r._scrollHorizontalHandler=gt(r._scrollHorizontalHandler,r),r._scrollVerticalHandler=gt(r._scrollVerticalHandler,r),r._outerScrollVerticalHandler=gt(r._outerScrollVerticalHandler,r),r._outerScrollHorizontalHandler=gt(r._outerScrollHorizontalHandler,r),r._mouseWheelHandler=gt(r._mouseWheelHandler,r),this.$config.hidden=!0;var s=a.config.scroll_size;return a.env.isIE&&(s+=1),this._isHorizontal()?(r.$config.height=s,r.$parent.$config.height=s):(r.$config.width=s,r.$parent.$config.width=s),this.$config.scrollPosition=0,r.$name="scroller",r}function i(t,e){if(e.push(t),t.$cells)for(var n=0;n<t.$cells.length;n++)i(t.$cells[n],e)}return Kn(n,t),n.prototype.init=function(t){t.innerHTML=this.$toHTML(),this.$view=t.firstChild,this.$view||this.init(),this._isVertical()?this._initVertical():this._initHorizontal(),this._initMouseWheel(),this._initLinkedViews()},n.prototype.$toHTML=function(){return"<div class='gantt_layout_cell "+(this._isHorizontal()?"gantt_hor_scroll":"gantt_ver_scroll")+"'><div style='"+(this._isHorizontal()?"width:2000px":"height:2000px")+"'></div></div>"},n.prototype._getRootParent=function(){for(var t=this.$parent;t&&t.$parent;)t=t.$parent;if(t)return t},n.prototype._eachView=function(){var t=[];return i(this._getRootParent(),t),t},n.prototype._getLinkedViews=function(){for(var t=this._eachView(),e=[],n=0;n<t.length;n++)t[n].$config&&(this._isVertical()&&t[n].$config.scrollY==this.$id||this._isHorizontal()&&t[n].$config.scrollX==this.$id)&&e.push(t[n]);return e},n.prototype._initHorizontal=function(){this.$scroll_hor=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollHorizontalHandler)},n.prototype._initLinkedViews=function(){for(var t=this._getLinkedViews(),e=this._isVertical()?"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical":"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal",n=0;n<t.length;n++)$(t[n].$view||t[n].getNode(),e)},n.prototype._initVertical=function(){this.$scroll_ver=this.$view,this.$domEvents.attach(this.$view,"scroll",this._scrollVerticalHandler)},n.prototype._updateLinkedViews=function(){},n.prototype._initMouseWheel=function(){It.isFF?this.$domEvents.attach(this._getRootParent().$view,"wheel",this._mouseWheelHandler,{passive:!1}):this.$domEvents.attach(this._getRootParent().$view,"mousewheel",this._mouseWheelHandler,{passive:!1})},n.prototype.scrollHorizontally=function(t){if(!this._scrolling){this._scrolling=!0,this.$scroll_hor.scrollLeft=t,this.$config.codeScrollLeft=t,t=this.$scroll_hor.scrollLeft;for(var e=this._getLinkedViews(),n=0;n<e.length;n++)e[n].scrollTo&&e[n].scrollTo(t,void 0);var i=this.$config.scrollPosition;this.$config.scrollPosition=t,this.callEvent("onScroll",[i,t,this.$config.scroll]),this._scrolling=!1}},n.prototype.scrollVertically=function(t){if(!this._scrolling){this._scrolling=!0,this.$scroll_ver.scrollTop=t,t=this.$scroll_ver.scrollTop;for(var e=this._getLinkedViews(),n=0;n<e.length;n++)e[n].scrollTo&&e[n].scrollTo(void 0,t);var i=this.$config.scrollPosition;this.$config.scrollPosition=t,this.callEvent("onScroll",[i,t,this.$config.scroll]),this._scrolling=!1}},n.prototype._isVertical=function(){return"y"==this.$config.scroll},n.prototype._isHorizontal=function(){return"x"==this.$config.scroll},n.prototype._scrollHorizontalHandler=function(t){if(!this._isVertical()&&!this._scrolling){if(new Date-(this._wheel_time||0)<100)return!0;var e=this.$scroll_hor.scrollLeft;this.scrollHorizontally(e),this._oldLeft=this.$scroll_hor.scrollLeft}},n.prototype._outerScrollHorizontalHandler=function(t){this._isVertical()},n.prototype.show=function(){this.$parent.show()},n.prototype.hide=function(){this.$parent.hide()},n.prototype._getScrollSize=function(){for(var t,e=0,n=0,i=this._isHorizontal(),a=this._getLinkedViews(),r=i?"scrollWidth":"scrollHeight",s=i?"contentX":"contentY",o=i?"x":"y",l=this._getScrollOffset(),c=0;c<a.length;c++)if((t=a[c])&&t.$content&&t.$content.getSize&&!t.$config.hidden){var d,u=t.$content.getSize();if(d=u.hasOwnProperty(r)?u[r]:u[s],l)u[s]>u[o]&&u[s]>e&&d>u[o]-l+2&&(e=d+(i?0:2),n=u[o]);else{var h=Math.max(u[s]-d,0);(d+=h)>Math.max(u[o]-h,0)&&d>e&&(e=d,n=u[o])}}return{outerScroll:n,innerScroll:e}},n.prototype.scroll=function(t){this._isHorizontal()?this.scrollHorizontally(t):this.scrollVertically(t)},n.prototype.getScrollState=function(){return{visible:this.isVisible(),direction:this.$config.scroll,size:this.$config.outerSize,scrollSize:this.$config.scrollSize||0,position:this.$config.scrollPosition||0}},n.prototype.setSize=function(e,n){t.prototype.setSize.apply(this,arguments);var i=this._getScrollSize(),a=(this._isVertical()?n:e)-this._getScrollOffset()+(this._isHorizontal()?1:0);i.innerScroll&&a>i.outerScroll&&(i.innerScroll+=a-i.outerScroll),this.$config.scrollSize=i.innerScroll,this.$config.width=e,this.$config.height=n,this._setScrollSize(i.innerScroll)},n.prototype.isVisible=function(){return!(!this.$parent||!this.$parent.$view.parentNode)},n.prototype.shouldShow=function(){var t=this._getScrollSize();return!(!t.innerScroll&&this.$parent&&this.$parent.$view.parentNode)&&!(!t.innerScroll||this.$parent&&this.$parent.$view.parentNode)},n.prototype.shouldHide=function(){return!(this._getScrollSize().innerScroll||!this.$parent||!this.$parent.$view.parentNode)},n.prototype.toggleVisibility=function(){this.shouldHide()?this.hide():this.shouldShow()&&this.show()},n.prototype._getScaleOffset=function(t){var e=0;return!t||"timeline"!=t.$config.view&&"grid"!=t.$config.view||(e=t.$content.$getConfig().scale_height),e},n.prototype._getScrollOffset=function(){var t=0;if(this._isVertical()){var e=this.$parent.$parent;t=Math.max(this._getScaleOffset(e.getPrevSibling(this.$parent.$id)),this._getScaleOffset(e.getNextSibling(this.$parent.$id)))}else for(var n=this._getLinkedViews(),i=0;i<n.length;i++){var a=n[i].$parent.$cells,r=a[a.length-1];if(r&&"scrollbar"==r.$config.view&&!1===r.$config.hidden){t=r.$config.width;break}}return t||0},n.prototype._setScrollSize=function(t){var e=this._isHorizontal()?"width":"height",n=this._isHorizontal()?this.$scroll_hor:this.$scroll_ver,i=this._getScrollOffset(),a=n.firstChild;i?this._isVertical()?(this.$config.outerSize=this.$config.height-i+3,n.style.height=this.$config.outerSize+"px",n.style.top=i-1+"px",$(n,this.$parent._borders.top),$(n.parentNode,"gantt_task_vscroll")):(this.$config.outerSize=this.$config.width-i+1,n.style.width=this.$config.outerSize+"px"):(n.style.top="auto",w(n,this.$parent._borders.top),w(n.parentNode,"gantt_task_vscroll"),this.$config.outerSize=this.$config.height),a.style[e]=t+"px"},n.prototype._scrollVerticalHandler=function(t){if(!this._scrollHorizontalHandler()&&!this._scrolling){var e=this.$scroll_ver.scrollTop;e!=this._oldTop&&(this.scrollVertically(e),this._oldTop=this.$scroll_ver.scrollTop)}},n.prototype._outerScrollVerticalHandler=function(t){this._scrollHorizontalHandler()},n.prototype._checkWheelTarget=function(t){for(var e=this._getLinkedViews().concat(this),n=0;n<e.length;n++)if(P(t,e[n].$view))return!0;return!1},n.prototype._mouseWheelHandler=function(t){var n=t.target||t.srcElement;if(this._checkWheelTarget(n)){this._wheel_time=new Date;var i={},a={x:1,y:1},r=this.$gantt.config.wheel_scroll_sensitivity;"number"==typeof r&&r?a={x:r,y:r}:"[object Object]"=={}.toString.apply(r)&&(a={x:r.x,y:r.y});var s=It.isFF,o=s?t.deltaX:t.wheelDeltaX,l=s?t.deltaY:t.wheelDelta,c=-20;s&&(c=0!==t.deltaMode?-40:-10);var d=s?o*c*a.x:2*o*a.x,u=s?l*c*a.y:l*a.y,h=this.$gantt.config.horizontal_scroll_key;if(!1!==h&&e.indexOf(h)>=0&&(!t[h]||t.deltaX||t.wheelDeltaX||(d=2*u,u=0)),d&&Math.abs(d)>Math.abs(u)){if(this._isVertical())return;if(i.x||!this.$scroll_hor||!this.$scroll_hor.offsetWidth)return!0;var _=d/-40,f=this._oldLeft,g=f+30*_;if(this.scrollHorizontally(g),this.$scroll_hor.scrollLeft=g,f==this.$scroll_hor.scrollLeft)return!0;this._oldLeft=this.$scroll_hor.scrollLeft}else{if(this._isHorizontal())return;if(i.y||!this.$scroll_ver||!this.$scroll_ver.offsetHeight)return!0;_=u/-40,void 0===u&&(_=t.detail);var p=this._oldTop,m=this.$scroll_ver.scrollTop+30*_;if(this.scrollVertically(m),this.$scroll_ver.scrollTop=m,p==this.$scroll_ver.scrollTop)return!0;this._oldTop=this.$scroll_ver.scrollTop}return t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1}},n}(Jn);function ei(t){var e={},n={},i=null,a=-1,r=null,s=function(t){var e=-1,n=-1;return{resetCache:function(){e=-1,n=-1},_getRowHeight:function(){return-1===e&&(e=t.$getConfig().row_height),e},_refreshState:function(){this.resetCache(),n=!0;var e=t.$config.rowStore;if(e)for(var i=this._getRowHeight(),a=0;a<e.fullOrder.length;a++){var r=e.getItem(e.fullOrder[a]);if(r&&r.row_height&&r.row_height!==i){n=!1;break}}},canUseSimpleCalculation:function(){return-1===n&&this._refreshState(),n},getRowTop:function(e){return t.$config.rowStore?e*this._getRowHeight():0},getItemHeight:function(t){return this._getRowHeight()},getTotalHeight:function(){return t.$config.rowStore?t.$config.rowStore.countVisible()*this._getRowHeight():0},getItemIndexByTopPosition:function(e){return t.$config.rowStore?Math.floor(e/this._getRowHeight()):0}}}(t);return{_resetTopPositionHeight:function(){e={},n={},s.resetCache()},_resetHeight:function(){var t=this.$config.rowStore,e=this.getCacheStateTotalHeight(t);r?this.shouldClearHeightCache(r,e)&&(r=e,i=null):r=e,a=-1,s.resetCache()},getRowTop:function(t){if(s.canUseSimpleCalculation())return s.getRowTop(t);var e=this.$config.rowStore;if(!e)return 0;if(void 0!==n[t])return n[t];for(var i=e.getIndexRange(),a=0,r=0,o=0;o<i.length;o++)n[o]=a,a+=this.getItemHeight(i[o].id),o<t&&(r=a);return r},getItemTop:function(t){if(this.$config.rowStore){if(void 0!==e[t])return e[t];var n=this.$config.rowStore;if(!n)return 0;var i=n.getIndexById(t);if(-1===i&&n.getParent&&n.exists(t)){var a=n.getParent(t);if(n.exists(a)){var r=n.getItem(a);if(this.$gantt.isSplitTask(r))return this.getItemTop(a)}}return e[t]=this.getRowTop(i),e[t]}return 0},getItemHeight:function(t){if(s.canUseSimpleCalculation())return s.getItemHeight(t);if(!i&&this.$config.rowStore&&this._fillHeightCache(this.$config.rowStore),void 0!==i[t])return i[t];var e=this.$getConfig().row_height;if(this.$config.rowStore){var n=this.$config.rowStore;if(!n)return e;var a=n.getItem(t);return i[t]=a&&a.row_height||e}return e},_fillHeightCache:function(t){if(t){i={};var e=this.$getConfig().row_height;t.eachItem((function(t){return i[t.id]=t&&t.row_height||e}))}},getCacheStateTotalHeight:function(t){var e=this.$getConfig().row_height,n={},i=[],a=0;return t&&t.eachItem((function(t){i.push(t),n[t.id]=t.row_height,a+=t.row_height||e})),{globalHeight:e,items:i,count:i.length,sumHeight:a}},shouldClearHeightCache:function(t,e){if(t.count!=e.count||t.globalHeight!=e.globalHeight||t.sumHeight!=e.sumHeight)return!0;for(var n in t.items){var i=e.items[n];if(void 0!==i&&i!=t.items[n])return!0}return!1},getTotalHeight:function(){if(s.canUseSimpleCalculation())return s.getTotalHeight();if(-1!=a)return a;if(this.$config.rowStore){var t=this.$config.rowStore;this._fillHeightCache(t);var e=this.getItemHeight.bind(this),n=t.getVisibleItems(),i=0;return n.forEach((function(t){i+=e(t.id)})),a=i,i}return 0},getItemIndexByTopPosition:function(t){if(this.$config.rowStore){if(s.canUseSimpleCalculation())return s.getItemIndexByTopPosition(t);for(var e=this.$config.rowStore,n=0;n<e.countVisible();n++){var i=this.getRowTop(n),a=this.getRowTop(n+1);if(!a){var r=e.getIdByIndex(n);a=i+this.getItemHeight(r)}if(t>=i&&t<a)return n}return e.countVisible()+2}return 0}}}const ni=function(){return{render:function(){},destroy:function(){}}};var ii=function(t,e,n,i){this.$config=ht({},e||{}),this.$scaleHelper=new Kt(i),this.$gantt=i,this._posFromDateCache={},this._timelineDragScroll=null,ht(this,ei(this)),q(this)};ii.prototype={init:function(t){t.innerHTML+="<div class='gantt_task' style='width:inherit;height:inherit;'></div>",this.$task=t.childNodes[0],this.$task.innerHTML="<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>",this.$task_scale=this.$task.childNodes[0],this.$task_data=this.$task.childNodes[1],this.$task_data.innerHTML="<div class='gantt_task_bg'></div><div class='gantt_task_baselines'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div><div class='gantt_task_constraints'></div><div class='gantt_task_deadlines'></div>",this.$task_bg=this.$task_data.childNodes[0],this.$task_baselines=this.$task_data.childNodes[1],this.$task_links=this.$task_data.childNodes[2],this.$task_bars=this.$task_data.childNodes[3],this.$task_constraints=this.$task_data.childNodes[4],this.$task_deadlines=this.$task_data.childNodes[5],this._tasks={col_width:0,width:[],full_width:0,trace_x:[],rendered:{}};var e=this.$getConfig(),n=e[this.$config.bind+"_attribute"],i=e[this.$config.bindLinks+"_attribute"];!n&&this.$config.bind&&(n="data-"+this.$config.bind+"-id"),!i&&this.$config.bindLinks&&(i="data-"+this.$config.bindLinks+"-id"),this.$config.item_attribute=n||null,this.$config.link_attribute=i||null;var a=this._createLayerConfig();this.$config.layers||(this.$config.layers=a.tasks),this.$config.linkLayers||(this.$config.linkLayers=a.links),this._attachLayers(this.$gantt),this.callEvent("onReady",[]),this.$gantt.ext.dragTimeline&&(this._timelineDragScroll=this.$gantt.ext.dragTimeline.create(),this._timelineDragScroll.attach(this))},setSize:function(t,e){var n=this.$getConfig();if(1*t===t&&(this.$config.width=t),1*e===e){this.$config.height=e;var i=Math.max(this.$config.height-n.scale_height);this.$task_data.style.height=i+"px"}this.refresh(),this.$task_bg.style.backgroundImage="",n.smart_rendering&&this.$config.rowStore?this.$task_bg.style.height=this.getTotalHeight()+"px":this.$task_bg.style.height="";for(var a=this._tasks,r=this.$task_data.childNodes,s=0,o=r.length;s<o;s++){var l=r[s];l.hasAttribute("data-layer")&&l.style&&(l.style.width=a.full_width+"px")}},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$task.offsetWidth},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore?this.getTotalHeight():0,n=this.isVisible()?this._tasks.full_width:0;return{x:this.isVisible()?this.$config.width:0,y:this.isVisible()?this.$config.height:0,contentX:this.isVisible()?n:0,contentY:this.isVisible()?t.scale_height+e:0,scrollHeight:this.isVisible()?e:0,scrollWidth:this.isVisible()?n:0}},scrollTo:function(t,e){if(this.isVisible()){var n=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*e===e&&(this.$config.scrollTop=e,this.$task_data.scrollTop=this.$config.scrollTop,n=!0),1*t===t&&(this.$task.scrollLeft=t,this.$config.scrollLeft=this.$task.scrollLeft,this._refreshScales(),n=!0),n&&this.callEvent("onScroll",[this.$config.scrollLeft,this.$config.scrollTop])}},_refreshScales:function(){if(this.isVisible()&&this.$getConfig().smart_scales){var t=this.getViewPort(),e=this._scales;this.$task_scale.innerHTML=this._getScaleChunkHtml(e,t.x,t.x_end)}},getViewPort:function(){var t=this.$config.scrollLeft||0,e=this.$config.scrollTop||0,n=this.$config.height||0,i=this.$config.width||0;return{y:e,y_end:e+n,x:t,x_end:t+i,height:n,width:i}},_createLayerConfig:function(){var t=this,e=function(){return t.isVisible()};this.$gantt;var n=[{expose:!0,renderer:this.$gantt.$ui.layers.taskBar(),container:this.$task_bars,filter:[e,function(t,e){return!e.hide_bar}]}];return n.push({renderer:this.$gantt.$ui.layers.taskBg(),container:this.$task_bg,filter:[e]}),{tasks:n,links:[{expose:!0,renderer:this.$gantt.$ui.layers.link(),container:this.$task_links,filter:[e]}]}},_attachLayers:function(t){this._taskLayers=[],this._linkLayers=[];var e=this,n=this.$gantt.$services.getService("layers");if(this.$config.bind){this._bindStore();var i=n.getDataRender(this.$config.bind);i||(i=n.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$task_data}})),i.container=function(){return e.$task_data};for(var a=this.$config.layers,r=0;a&&r<a.length;r++){"string"==typeof(c=a[r])&&(c=this.$gantt.$ui.layers[c]()),("function"==typeof c||c&&c.render&&c.update)&&(c={renderer:c}),c.view=this;var s=i.addLayer(c);this._taskLayers.push(s),c.expose&&(this._taskRenderer=i.getLayer(s))}this._initStaticBackgroundRender()}if(this.$config.bindLinks){e.$config.linkStore=e.$gantt.getDatastore(e.$config.bindLinks);var o=n.getDataRender(this.$config.bindLinks);o||(o=n.createDataRender({name:this.$config.bindLinks,defaultContainer:function(){return e.$task_data}}));var l=this.$config.linkLayers;for(r=0;l&&r<l.length;r++){var c;"string"==typeof c&&(c=this.$gantt.$ui.layers[c]()),(c=l[r]).view=this;var d=o.addLayer(c);this._taskLayers.push(d),l[r].expose&&(this._linkRenderer=o.getLayer(d))}}},_initStaticBackgroundRender:function(){var t=this,e=ni(),n=t.$config.rowStore;n&&(this._staticBgHandler=n.attachEvent("onStoreUpdated",(function(n,i,a){if(null===n&&t.isVisible()){var r=t.$getConfig();if(r.static_background||r.timeline_placeholder){var s=t.$gantt.getDatastore(t.$config.bind),o=t.$task_bg_static;if(o||((o=document.createElement("div")).className="gantt_task_bg",t.$task_bg_static=o,t.$task_bg.nextSibling?t.$task_data.insertBefore(o,t.$task_bg.nextSibling):t.$task_data.appendChild(o)),s){var l=t.getTotalHeight();r.timeline_placeholder&&(l=r.timeline_placeholder.height||t.$task_data.offsetHeight||99999),e.render(o,r,t.getScale(),l,t.getItemHeight(i?i.id:null))}}else r.static_background&&t.$task_bg_static&&t.$task_bg_static.parentNode&&t.$task_bg_static.parentNode.removeChild(t.$task_bg_static)}})),this.attachEvent("onDestroy",(function(){})),this._initStaticBackgroundRender=function(){})},_clearLayers:function(t){var e=this.$gantt.$services.getService("layers"),n=e.getDataRender(this.$config.bind),i=e.getDataRender(this.$config.bindLinks);if(this._taskLayers)for(var a=0;a<this._taskLayers.length;a++)n.removeLayer(this._taskLayers[a]);if(this._linkLayers)for(a=0;a<this._linkLayers.length;a++)i.removeLayer(this._linkLayers[a]);this._linkLayers=[],this._taskLayers=[]},_render_tasks_scales:function(){var t=this.$getConfig(),e="",n=0,i=0,a=this.$gantt.getState();if(this.isVisible()){var r=this.$scaleHelper,s=this._getScales();i=t.scale_height;var o=this.$config.width;"x"!=t.autosize&&"xy"!=t.autosize||(o=Math.max(t.autosize_min_width,0));var l=r.prepareConfigs(s,t.min_column_width,o,i-1,a.min_date,a.max_date,t.rtl),c=this._tasks=l[l.length-1];this._scales=l,this._posFromDateCache={},e=this._getScaleChunkHtml(l,0,this.$config.width),n=c.full_width+"px",i+="px"}this.$task_scale.style.height=i,this.$task_data.style.width=this.$task_scale.style.width=n,this.$task_scale.innerHTML=e},_getScaleChunkHtml:function(t,e,n){for(var i=[],a=this.$gantt.templates.scale_row_class,r=0;r<t.length;r++){var s="gantt_scale_line",o=a(t[r]);o&&(s+=" "+o),i.push('<div class="'+s+'" style="height:'+t[r].height+"px;position:relative;line-height:"+t[r].height+'px">'+this._prepareScaleHtml(t[r],e,n,r)+"</div>")}return i.join("")},_prepareScaleHtml:function(t,e,n,i){var a=this.$getConfig(),r=this.$gantt.templates,s=[],o=null,l=null,c=t.format||t.template||t.date;"string"==typeof c&&(c=this.$gantt.date.date_to_str(c));var d=0,u=t.count;!a.smart_scales||isNaN(e)||isNaN(n)||(d=at(t.left,e),u=at(t.left,n)+1),l=t.css||function(){},!t.css&&a.inherit_scale_class&&(l=r.scale_cell_class);for(var h=d;h<u&&t.trace_x[h];h++){o=new Date(t.trace_x[h]);var _=c.call(this,o),f=t.width[h];t.height;var g=t.left[h],p="",m="",v="";if(f){p="width:"+f+"px;"+(a.smart_scales?"position:absolute;left:"+g+"px":"");const e=this.getViewPort(),n=(a.scales[i]||{}).sticky;let r="";const c=70;if(!1!==n&&f>c||!0===n)if(g<e.x&&g+f/2-c/2<e.x)r=` style='position:absolute;left: ${e.x-g+10}px;' `;else if(g+f/2+c/2>e.x_end&&f>c){let t=e.x_end-g-10,n="-100%";t<c&&(t=c,n=`-${t}px`),r=` style='position:absolute;left: ${t}px;transform: translate(${n},0);' `}v="gantt_scale_cell"+(h==t.count-1?" gantt_last_cell":""),(m=l.call(this,o))&&(v+=" "+m);var k=`<div class='${v}' ${this.$gantt._waiAria.getTimelineCellAttr(_)} style='${p}'><span ${r}>${_}</span></div>`;s.push(k)}}return s.join("")},dateFromPos:function(t){var e=this._tasks;if(t<0||t>e.full_width||!e.full_width)return null;var n=at(this._tasks.left,t),i=this._tasks.left[n],a=e.width[n]||e.col_width,r=0;a&&(r=(t-i)/a,e.rtl&&(r=1-r));var s=0;return r&&(s=this._getColumnDuration(e,e.trace_x[n])),new Date(e.trace_x[n].valueOf()+Math.round(r*s))},posFromDate:function(t){if(!this.isVisible()||!t)return 0;var e=String(t.valueOf());if(void 0!==this._posFromDateCache[e])return this._posFromDateCache[e];var n=this.columnIndexByDate(t);this.$gantt.assert(n>=0,"Invalid day index");var i=Math.floor(n),a=n%1,r=this._tasks.left[Math.min(i,this._tasks.width.length-1)];i==this._tasks.width.length&&(r+=this._tasks.width[this._tasks.width.length-1]),a&&(i<this._tasks.width.length?r+=this._tasks.width[i]*(a%1):r+=1);var s=Math.round(r);return this._posFromDateCache[e]=s,Math.round(s)},_getNextVisibleColumn:function(t,e,n){for(var i=+e[t],a=t;n[i];)i=+e[++a];return a},_getPrevVisibleColumn:function(t,e,n){for(var i=+e[t],a=t;n[i];)i=+e[--a];return a},_getClosestVisibleColumn:function(t,e,n){var i=this._getNextVisibleColumn(t,e,n);return e[i]||(i=this._getPrevVisibleColumn(t,e,n)),i},columnIndexByDate:function(t){var e=new Date(t).valueOf(),n=this._tasks.trace_x_ascending,i=this._tasks.ignore_x,a=this.$gantt.getState();if(e<=a.min_date)return this._tasks.rtl?n.length:0;if(e>=a.max_date)return this._tasks.rtl?0:n.length;var r=at(n,e),s=this._getClosestVisibleColumn(r,n,i),o=n[s],l=this._tasks.trace_index_transition;if(!o)return l?l[0]:0;var c=(t-n[s])/this._getColumnDuration(this._tasks,n[s]);return l?l[s]+(1-c):s+c},getItemPosition:function(t,e,n){var i,a,r;let s=e||t.start_date||t.$auto_start_date,o=n||t.end_date||t.$auto_end_date;return this._tasks.rtl?(a=this.posFromDate(s),i=this.posFromDate(o)):(i=this.posFromDate(s),a=this.posFromDate(o)),r=Math.max(a-i,0),{left:i,top:this.getItemTop(t.id),height:this.getBarHeight(t.id),width:r,rowHeight:this.getItemHeight(t.id)}},getBarHeight:function(t,e){var n=this.$getConfig(),i=this.$config.rowStore.getItem(t),a=i.task_height||i.bar_height||n.bar_height||n.task_height,r=this.getItemHeight(t);return"full"==a&&(a=r-(n.bar_height_padding||3)),a=Math.min(a,r),e&&(a=Math.round(a/Math.sqrt(2))),Math.max(a,0)},getScale:function(){return this._tasks},_getScales:function(){var t=this.$getConfig(),e=this.$scaleHelper,n=[e.primaryScale(t)].concat(e.getSubScales(t));return e.sortScales(n),n},_getColumnDuration:function(t,e){return this.$gantt.date.add(e,t.step,t.unit)-e},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._timelineCacheAttached){var e=this;t._timelineCacheAttached=t.attachEvent("onBeforeFilter",(function(){e._resetTopPositionHeight()}))}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._timelineCacheAttached&&(t.detachEvent(t._timelineCacheAttached),t._timelineCacheAttached=!1)}},refresh:function(){this._bindStore(),this.$config.bindLinks&&(this.$config.linkStore=this.$gantt.getDatastore(this.$config.bindLinks)),this._resetTopPositionHeight(),this._resetHeight(),this._initStaticBackgroundRender(),this._render_tasks_scales()},destructor:function(){var t=this.$gantt;this._clearLayers(t),this._unbindStore(),this.$task=null,this.$task_scale=null,this.$task_data=null,this.$task_bg=null,this.$task_links=null,this.$task_bars=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.$config.linkStore&&(this.$config.linkStore=null),this._timelineDragScroll&&(this._timelineDragScroll.destructor(),this._timelineDragScroll=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}};class ai{constructor(t){this._scrollOrder=0;const{gantt:e,grid:n,dnd:i,getCurrentX:a}=t;this.$gantt=e,this.$grid=n,this._dnd=i,this.getCurrentX=a,this._scrollView=this.$gantt.$ui.getView(this.$grid.$config.scrollX),this.attachEvents()}attachEvents(){this.isScrollable()&&(this._dnd.attachEvent("onDragMove",((t,e)=>{const n=this.$grid.$grid.getBoundingClientRect(),i=n.right,a=n.left,r=this.getCurrentX(e.clientX);return r>=i-20&&(this.autoscrollRight(),this.autoscrollStart()),r<=a+20&&(this.autoscrollLeft(),this.autoscrollStart()),r<i-20&&r>a+20&&this.autoscrollStop(),!0})),this._dnd.attachEvent("onDragEnd",(()=>{this.autoscrollStop()})))}autoscrollStart(){if(0===this._scrollOrder)return;const t=10*this._scrollOrder,e=this._scrollView.getScrollState();this._scrollView.scrollTo(e.position+t),setTimeout((()=>{this.autoscrollStart()}),50)}autoscrollRight(){this._scrollOrder=1}autoscrollLeft(){this._scrollOrder=-1}autoscrollStop(){this._scrollOrder=0}getCorrection(){return this.isScrollable()?this._scrollView.getScrollState().position:0}isScrollable(){return!!this.$grid.$config.scrollable}}const ri="data-column-id";class si{constructor(t,e){this._targetMarker=null,this.calculateCurrentPosition=t=>{const e=this.$grid.$grid.getBoundingClientRect(),n=e.right,i=e.left;let a=t;return a>n&&(a=n),a<i&&(a=i),a},this.$gantt=t,this.$grid=e}init(){const t=this.$gantt.$services.getService("dnd");this._dnd=new t(this.$grid.$grid_scale,{updates_per_second:60}),this._scrollableGrid=new ai({gantt:this.$gantt,grid:this.$grid,dnd:this._dnd,getCurrentX:this.calculateCurrentPosition}),this.attachEvents()}attachEvents(){this._dnd.attachEvent("onBeforeDragStart",((t,e)=>{if(this._draggedCell=this.$gantt.utils.dom.closest(e.target,".gantt_grid_head_cell"),!this._draggedCell)return;const n=this.$grid.$getConfig().columns,i=this._draggedCell.getAttribute(ri);let a,r;return n.map((function(t,e){t.name===i&&(a=t,r=e)})),!1!==this.$grid.callEvent("onBeforeColumnDragStart",[{draggedColumn:a,draggedIndex:r}])&&!(!this._draggedCell||!a)&&(this._gridConfig=this.$grid.$getConfig(),this._originAutoscroll=this.$gantt.config.autoscroll,this.$gantt.config.autoscroll=!1,!0)})),this._dnd.attachEvent("onAfterDragStart",((t,e)=>{this._draggedCell&&(this._dnd.config.column=this._draggedCell.getAttribute(ri),this._dnd.config.marker.innerHTML=this._draggedCell.outerHTML,this._dnd.config.marker.classList.add("gantt_column_drag_marker"),this._dnd.config.marker.style.height=this._gridConfig.scale_height+"px",this._dnd.config.marker.style.lineHeight=this._gridConfig.scale_height+"px",this._draggedCell.classList.add("gantt_grid_head_cell_dragged"))})),this._dnd.attachEvent("onDragMove",((t,e)=>{if(!this._draggedCell)return;this._dragX=e.clientX;const n=this.calculateCurrentPosition(e.clientX),i=this.findColumnsIndexes(),a=i.targetIndex,r=i.draggedIndex,s=this.$grid.$getConfig().columns,o=s[r],l=s[a];return!1===this.$grid.callEvent("onColumnDragMove",[{draggedColumn:o,targetColumn:l,draggedIndex:r,targetIndex:a}])?(this.cleanTargetMarker(),!1):(this.setMarkerPosition(n),this.drawTargetMarker(i),!0)})),this._dnd.attachEvent("onDragEnd",(()=>{this._draggedCell&&(this.$gantt.config.autoscroll=this._originAutoscroll,this._draggedCell.classList.remove("gantt_grid_head_cell_dragged"),this.cleanTargetMarker(),this.reorderColumns())}))}reorderColumns(){const{targetIndex:t,draggedIndex:e}=this.findColumnsIndexes(),n=this.$grid.$getConfig().columns,i=n[e],a=n[t];!1!==this.$grid.callEvent("onBeforeColumnReorder",[{draggedColumn:i,targetColumn:a,draggedIndex:e,targetIndex:t}])&&t!==e&&(n.splice(e,1),n.splice(t,0,i),this.$gantt.render(),this.$grid.callEvent("onAfterColumnReorder",[{draggedColumn:i,targetColumn:a,draggedIndex:e,targetIndex:t}]))}findColumnsIndexes(){const t=this._dnd.config.column,e=this.$grid.$getConfig().columns;let n,i,a,r;const s={startX:0,endX:0};let o,l=0,c=e.length-1,d=(t,e)=>t<=e,u=t=>++t;this.$gantt.config.rtl&&(l=e.length-1,c=0,d=(t,e)=>t>=e,u=t=>--t);const h=this._dragX-this.$grid.$grid.getBoundingClientRect().left+this._scrollableGrid.getCorrection();for(let _=l;d(_,c)&&(void 0===n||void 0===i);_=u(_))e[_].hide||(s.startX=s.endX,s.endX+=e[_].width,h>=s.startX&&(h<=s.endX||!d(u(_),c))&&(n=_,a=s.startX,r=s.endX,o=(h-s.startX)/(s.endX-s.startX)),t===e[_].name&&(i=_));return{targetIndex:n,draggedIndex:i,xBefore:a,xAfter:r,columnRelativePos:o}}setMarkerPosition(t,e=10){const{marker:n}=this._dnd.config,i=this._dnd._obj.getBoundingClientRect();n.style.top=`${i.y+e}px`,n.style.left=`${t}px`}drawTargetMarker({targetIndex:t,draggedIndex:e,xBefore:n,xAfter:i,columnRelativePos:a}){let r;this._targetMarker||(this._targetMarker=document.createElement("div"),$(this._targetMarker,"gantt_grid_target_marker"),this._targetMarker.style.display="none",this._targetMarker.style.height=`${this._gridConfig.scale_height}px`),this._targetMarker.parentNode||this.$grid.$grid_scale.appendChild(this._targetMarker),r=t>e?i:t<e?n:a>.5?i:n,this._targetMarker.style.left=`${r}px`,this._targetMarker.style.display="block"}cleanTargetMarker(){this._targetMarker&&this._targetMarker.parentNode&&this.$grid.$grid_scale.removeChild(this._targetMarker),this._targetMarker=null}}function oi(t){var e=[];return{delegate:function(n,i,a,r){e.push([n,i,a,r]),t.$services.getService("mouseEvents").delegate(n,i,a,r)},destructor:function(){for(var n=t.$services.getService("mouseEvents"),i=0;i<e.length;i++){var a=e[i];n.detach(a[0],a[1],a[2],a[3])}e=[]}}}var li=function(t,e,n,i){this.$config=ht({},e||{}),this.$gantt=i,this.$parent=t,q(this),this.$state={},ht(this,ei(this))};li.prototype={init:function(t){var e=this.$gantt,n=e._waiAria.gridAttrString(),i=e._waiAria.gridDataAttrString(),a=this.$getConfig(),r=a.reorder_grid_columns||!1;void 0!==this.$config.reorder_grid_columns&&(r=this.$config.reorder_grid_columns),t.innerHTML="<div class='gantt_grid' style='height:inherit;width:inherit;' "+n+"></div>",this.$grid=t.childNodes[0],this.$grid.innerHTML="<div class='gantt_grid_scale' "+e._waiAria.gridScaleRowAttrString()+"></div><div class='gantt_grid_data' "+i+"></div>",this.$grid_scale=this.$grid.childNodes[0],this.$grid_data=this.$grid.childNodes[1];var s=a[this.$config.bind+"_attribute"];if(!s&&this.$config.bind&&(s="data-"+this.$config.bind+"-id"),this.$config.item_attribute=s||null,!this.$config.layers){var o=this._createLayerConfig();this.$config.layers=o}var l={init:function(){},doOnRender:function(){}};this._renderHeaderResizers=l.doOnRender,this._mouseDelegates=oi(e);var c=function(t,e){var n={row_before_start:t.bind((function(t,n,i){var a=e.$getConfig(),r=e.$config.rowStore;if(!A(i,a.task_grid_row_resizer_attribute))return!1;var s=this.locate(i,a.task_grid_row_resizer_attribute),o=r.getItem(s);return!1!==e.callEvent("onBeforeRowResize",[o])&&void 0}),t),row_after_start:t.bind((function(t,n,i){var a=e.$getConfig(),r=this.locate(i,a.task_grid_row_resizer_attribute);t.config.marker.innerHTML="",t.config.marker.className+=" gantt_row_grid_resize_area",t.config.marker.style.width=e.$grid.offsetWidth+"px",t.config.drag_id=r}),t),row_drag_move:t.bind((function(t,n,i){var a=e.$config.rowStore,r=e.$getConfig(),s=t.config,o=s.drag_id,l=e.getItemHeight(o),c=e.getItemTop(o)-n.scrollTop,d=g(e.$grid_data),u=parseInt(s.marker.style.top,10),h=c+d.y,_=0,f=r.min_task_grid_row_height;return(_=u-h)<f&&(_=f),s.marker.style.left=d.x+"px",s.marker.style.top=h-1+"px",s.marker.style.height=Math.abs(_)+1+"px",s.marker_height=_,e.callEvent("onRowResize",[o,a.getItem(o),_+l]),!0}),t),row_drag_end:t.bind((function(n,i,a){var r=e.$config.rowStore,s=n.config,o=s.drag_id,l=r.getItem(o),c=e.getItemHeight(o),d=s.marker_height;!1!==e.callEvent("onBeforeRowResizeEnd",[o,l,d])&&l.row_height!=d&&(l.row_height=d,t.updateTask(o),e.callEvent("onAfterRowResize",[o,l,c,d]),this.render())}),t)};return{init:function(){var i=t.$services.getService("dnd"),a=e.$getConfig(),r=new i(e.$grid_data,{updates_per_second:60});t.defined(a.dnd_sensitivity)&&(r.config.sensitivity=a.dnd_sensitivity),r.attachEvent("onBeforeDragStart",(function(t,e){return n.row_before_start(r,t,e)})),r.attachEvent("onAfterDragStart",(function(t,e){return n.row_after_start(r,t,e)})),r.attachEvent("onDragMove",(function(t,e){return n.row_drag_move(r,t,e)})),r.attachEvent("onDragEnd",(function(t,e){return n.row_drag_end(r,t,e)}))}}}(e,this);c.init(),this._addLayers(this.$gantt),this._initEvents(),r&&(this._columnDND=new si(e,this),this._columnDND.init()),this.callEvent("onReady",[])},_validateColumnWidth:function(t,e){var n=t[e];if(n&&"*"!=n){var i=this.$gantt,a=1*n;isNaN(a)?i.assert(!1,"Wrong "+e+" value of column "+t.name):t[e]=a}},setSize:function(t,e){this.$config.width=this.$state.width=t,this.$config.height=this.$state.height=e;for(var n,i=this.getGridColumns(),a=0,r=(c=this.$getConfig()).grid_elastic_columns,s=0,o=i.length;s<o;s++)this._validateColumnWidth(i[s],"min_width"),this._validateColumnWidth(i[s],"max_width"),this._validateColumnWidth(i[s],"width"),a+=1*i[s].width;if(!isNaN(a)&&this.$config.scrollable||(a=n=this._setColumnsWidth(t+1)),this.$config.scrollable&&r&&!isNaN(a)){let e="width";"min_width"==r&&(e="min_width");let s=0;i.forEach((function(t){s+=t[e]||c.min_grid_column_width}));var l=Math.max(s,t);a=this._setColumnsWidth(l),n=t}this.$config.scrollable?(this.$grid_scale.style.width=a+"px",this.$grid_data.style.width=a+"px"):(this.$grid_scale.style.width="inherit",this.$grid_data.style.width="inherit"),this.$config.width-=1;var c=this.$getConfig();n!==t&&(void 0!==n?(c.grid_width=n,this.$config.width=n-1):isNaN(a)||(this._setColumnsWidth(a),c.grid_width=a,this.$config.width=a-1));var d=Math.max(this.$state.height-c.scale_height,0);this.$grid_data.style.height=d+"px",this.refresh()},getSize:function(){var t=this.$getConfig(),e=this.$config.rowStore?this.getTotalHeight():0,n=this._getGridWidth();return{x:this.$state.width,y:this.$state.height,contentX:this.isVisible()?n:0,contentY:this.isVisible()?t.scale_height+e:0,scrollHeight:this.isVisible()?e:0,scrollWidth:this.isVisible()?n:0}},_bindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);if(this.$config.rowStore=t,t&&!t._gridCacheAttached){var e=this;t._gridCacheAttached=t.attachEvent("onBeforeFilter",(function(){e._resetTopPositionHeight()}))}}},_unbindStore:function(){if(this.$config.bind){var t=this.$gantt.getDatastore(this.$config.bind);t&&t._gridCacheAttached&&(t.detachEvent(t._gridCacheAttached),t._gridCacheAttached=!1)}},refresh:function(){this._bindStore(),this._resetTopPositionHeight(),this._resetHeight(),this._initSmartRenderingPlaceholder(),this._calculateGridWidth(),this._renderGridHeader()},getViewPort:function(){var t=this.$config.scrollLeft||0,e=this.$config.scrollTop||0,n=this.$config.height||0,i=this.$config.width||0;return{y:e,y_end:e+n,x:t,x_end:t+i,height:n,width:i}},scrollTo:function(t,e){if(this.isVisible()){var n=!1;this.$config.scrollTop=this.$config.scrollTop||0,this.$config.scrollLeft=this.$config.scrollLeft||0,1*t==t&&(this.$config.scrollLeft=this.$state.scrollLeft=this.$grid.scrollLeft=t,n=!0),1*e==e&&(this.$config.scrollTop=this.$state.scrollTop=this.$grid_data.scrollTop=e,n=!0),n&&this.callEvent("onScroll",[this.$config.scrollLeft,this.$config.scrollTop])}},getColumnIndex:function(t,e){for(var n=this.$getConfig().columns,i=0,a=0;a<n.length;a++)if(e&&n[a].hide&&i++,n[a].name==t)return a-i;return null},getColumn:function(t){var e=this.getColumnIndex(t);return null===e?null:this.$getConfig().columns[e]},getGridColumns:function(){return this.$getConfig().columns.slice()},isVisible:function(){return this.$parent&&this.$parent.$config?!this.$parent.$config.hidden:this.$grid.offsetWidth},_createLayerConfig:function(){var t=this.$gantt,e=this;return[{renderer:t.$ui.layers.gridLine(),container:this.$grid_data,filter:[function(){return e.isVisible()}]},{renderer:t.$ui.layers.gridTaskRowResizer(),container:this.$grid_data,append:!0,filter:[function(){return t.config.resize_rows}]}]},_addLayers:function(t){if(this.$config.bind){this._taskLayers=[];var e=this,n=this.$gantt.$services.getService("layers"),i=n.getDataRender(this.$config.bind);i||(i=n.createDataRender({name:this.$config.bind,defaultContainer:function(){return e.$grid_data}}));for(var a=this.$config.layers,r=0;a&&r<a.length;r++){var s=a[r];s.view=this;var o=i.addLayer(s);this._taskLayers.push(o)}this._bindStore(),this._initSmartRenderingPlaceholder()}},_refreshPlaceholderOnStoreUpdate:function(t){var e=this.$getConfig(),n=this.$config.rowStore;if(n&&null===t&&this.isVisible()&&e.smart_rendering){var i;if(this.$config.scrollY){var a=this.$gantt.$ui.getView(this.$config.scrollY);a&&(i=a.getScrollState().scrollSize)}if(i||(i=n?this.getTotalHeight():0),i){this.$rowsPlaceholder&&this.$rowsPlaceholder.parentNode&&this.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);var r=this.$rowsPlaceholder=document.createElement("div");r.style.visibility="hidden",r.style.height=i+"px",r.style.width="1px",this.$grid_data.appendChild(r)}}},_initSmartRenderingPlaceholder:function(){var t=this.$config.rowStore;t&&(this._initSmartRenderingPlaceholder=function(){},this._staticBgHandler=t.attachEvent("onStoreUpdated",gt(this._refreshPlaceholderOnStoreUpdate,this)))},_initEvents:function(){var t=this.$gantt;this._mouseDelegates.delegate("click","gantt_close",t.bind((function(t,e,n){var i=this.$config.rowStore;if(!i)return!0;var a=A(t,this.$config.item_attribute);return a&&i.close(a.getAttribute(this.$config.item_attribute)),!1}),this),this.$grid),this._mouseDelegates.delegate("click","gantt_open",t.bind((function(t,e,n){var i=this.$config.rowStore;if(!i)return!0;var a=A(t,this.$config.item_attribute);return a&&i.open(a.getAttribute(this.$config.item_attribute)),!1}),this),this.$grid)},_clearLayers:function(t){var e=this.$gantt.$services.getService("layers").getDataRender(this.$config.bind);if(this._taskLayers)for(var n=0;n<this._taskLayers.length;n++)e.removeLayer(this._taskLayers[n]);this._taskLayers=[]},_getColumnWidth:function(t,e,n){var i=t.min_width||e.min_grid_column_width,a=Math.max(n,i||10);return t.max_width&&(a=Math.min(a,t.max_width)),a},_checkGridColumnMinWidthLimits:function(t,e){for(var n=0,i=t.length;n<i;n++){var a=1*t[n].width;!t[n].min_width&&a<e.min_grid_column_width&&(t[n].min_width=a)}},_getGridWidthLimits:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),n=0,i=0,a=0;a<e.length;a++)n+=e[a].min_width?e[a].min_width:t.min_grid_column_width,void 0!==i&&(i=e[a].max_width?i+e[a].max_width:void 0);return this._checkGridColumnMinWidthLimits(e,t),[n,i]},_setColumnsWidth:function(t,e){var n=this.$getConfig(),i=this.getGridColumns(),a=0,r=t;e=window.isNaN(e)?-1:e;for(var s=0,o=i.length;s<o;s++)a+=1*i[s].width;if(window.isNaN(a))for(this._calculateGridWidth(),a=0,s=0,o=i.length;s<o;s++)a+=1*i[s].width;var l=r-a,c=0;for(s=0;s<e+1;s++)c+=i[s].width;for(a-=c,s=e+1;s<i.length;s++){var d=i[s],u=Math.round(l*(d.width/a));l<0?d.min_width&&d.width+u<d.min_width?u=d.min_width-d.width:!d.min_width&&n.min_grid_column_width&&d.width+u<n.min_grid_column_width&&(u=n.min_grid_column_width-d.width):d.max_width&&d.width+u>d.max_width&&(u=d.max_width-d.width),a-=d.width,d.width+=u,l-=u}for(var h=l>0?1:-1;l>0&&1===h||l<0&&-1===h;){var _=l;for(s=e+1;s<i.length;s++){var f;if((f=i[s].width+h)==this._getColumnWidth(i[s],n,f)&&(l-=h,i[s].width=f),!l)break}if(_==l)break}return l&&e>-1&&(f=i[e].width+l)==this._getColumnWidth(i[e],n,f)&&(i[e].width=f),this._getColsTotalWidth()},_getColsTotalWidth:function(){for(var t=this.getGridColumns(),e=0,n=0;n<t.length;n++){var i=parseFloat(t[n].width);if(window.isNaN(i))return!1;e+=i}return e},_calculateGridWidth:function(){for(var t=this.$getConfig(),e=this.getGridColumns(),n=0,i=[],a=[],r=0;r<e.length;r++){var s=parseFloat(e[r].width);window.isNaN(s)&&(s=t.min_grid_column_width||10,i.push(r)),a[r]=s,n+=s}var o=this._getGridWidth()+1;if(t.autofit||i.length){var l=o-n;if(t.autofit&&!t.grid_elastic_columns)for(r=0;r<a.length;r++){var c=Math.round(l/(a.length-r));a[r]+=c,(d=this._getColumnWidth(e[r],t,a[r]))!=a[r]&&(c=d-a[r],a[r]=d),l-=c}else if(i.length)for(r=0;r<i.length;r++){c=Math.round(l/(i.length-r));var d,u=i[r];a[u]+=c,(d=this._getColumnWidth(e[u],t,a[u]))!=a[u]&&(c=d-a[u],a[u]=d),l-=c}for(r=0;r<a.length;r++)e[r].width=a[r]}else{var h=o!=n;this.$config.width=n-1,t.grid_width=n,h&&this.$parent._setContentSize(this.$config.width,null)}},_renderGridHeader:function(){var t=this.$gantt,e=this.$getConfig(),n=this.$gantt.locale,i=this.$gantt.templates,a=this.getGridColumns();e.rtl&&(a=a.reverse());for(var r=[],s=0,o=n.labels,l=e.scale_height-1,c=0;c<a.length;c++){var d=c==a.length-1,u=a[c];u.name||(u.name=t.uid()+"");var h=1*u.width,_=this._getGridWidth();d&&_>s+h&&(u.width=h=_-s),s+=h;var f=t._sort&&u.name==t._sort.name?`<div data-column-id="${u.name}" class="gantt_sort gantt_${t._sort.direction}"></div>`:"",g=["gantt_grid_head_cell","gantt_grid_head_"+u.name,d?"gantt_last_cell":"",i.grid_header_class(u.name,u)].join(" "),p="width:"+(h-(d?1:0))+"px;",m=u.label||o["column_"+u.name]||o[u.name];m=m||"";var v="<div class='"+g+"' style='"+p+"' "+t._waiAria.gridScaleCellAttrString(u,m)+" data-column-id='"+u.name+"' column_id='"+u.name+"' data-column-name='"+u.name+"' data-column-index='"+c+"'>"+m+f+"</div>";r.push(v)}this.$grid_scale.style.height=e.scale_height+"px",this.$grid_scale.style.lineHeight=l+"px",this.$grid_scale.innerHTML=r.join(""),this._renderHeaderResizers&&this._renderHeaderResizers()},_getGridWidth:function(){return this.$config.width},destructor:function(){this._clearLayers(this.$gantt),this._mouseDelegates&&(this._mouseDelegates.destructor(),this._mouseDelegates=null),this._unbindStore(),this.$grid=null,this.$grid_scale=null,this.$grid_data=null,this.$gantt=null,this.$config.rowStore&&(this.$config.rowStore.detachEvent(this._staticBgHandler),this.$config.rowStore=null),this.callEvent("onDestroy",[]),this.detachAllEvents()}};const ci={init:function(t,e){var n=e.$gantt;n.attachEvent("onTaskClick",(function(e,i){if(n._is_icon_open_click(i))return!0;var a=t.getState(),r=t.locateCell(i.target);return!r||!t.getEditorConfig(r.columnName)||(t.isVisible()&&a.id==r.id&&a.columnName==r.columnName||t.startEdit(r.id,r.columnName),!1)})),n.attachEvent("onEmptyClick",(function(){return t.isVisible()&&t.isChanged()?t.save():t.hide(),!0})),n.attachEvent("onTaskDblClick",(function(e,n){var i=t.getState(),a=t.locateCell(n.target);return!a||!t.isVisible()||a.columnName!=i.columnName}))},onShow:function(t,e,n){var i=n.$gantt;i.ext&&i.ext.keyboardNavigation&&i.ext.keyboardNavigation.attachEvent("onKeyDown",(function(e,n){var a=i.constants.KEY_CODES,r=!1;return n.keyCode===a.SPACE&&t.isVisible()&&(r=!0),!r})),e.onkeydown=function(e){e=e||window.event;var n=i.constants.KEY_CODES;if(!(e.defaultPrevented||e.shiftKey&&e.keyCode!=n.TAB)){var a=!0;switch(e.keyCode){case i.keys.edit_save:t.save();break;case i.keys.edit_cancel:t.hide();break;case n.UP:case n.DOWN:t.isVisible()&&(t.hide(),a=!1);break;case n.TAB:e.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);break;default:a=!1}a&&e.preventDefault()}}},onHide:function(){},destroy:function(){}},di={init:function(t,e){var n=t,i=e.$gantt,a=null,r=i.ext.keyboardNavigation;r.attachEvent("onBeforeFocus",(function(e){var i=t.locateCell(e);if(clearTimeout(a),i){var r=i.columnName,s=i.id,o=n.getState();if(n.isVisible()&&o.id==s&&o.columnName===r)return!1}return!0})),r.attachEvent("onFocus",(function(e){var i=t.locateCell(e),r=t.getState();return clearTimeout(a),!i||i.id==r.id&&i.columnName==r.columnName||n.isVisible()&&n.save(),!0})),t.attachEvent("onHide",(function(){clearTimeout(a)})),r.attachEvent("onBlur",(function(){return a=setTimeout((function(){n.save()})),!0})),i.attachEvent("onTaskDblClick",(function(e,n){var i=t.getState(),a=t.locateCell(n.target);return!a||!t.isVisible()||a.columnName!=i.columnName})),i.attachEvent("onTaskClick",(function(e,n){if(i._is_icon_open_click(n))return!0;var a=t.getState(),r=t.locateCell(n.target);return!r||!t.getEditorConfig(r.columnName)||(t.isVisible()&&a.id==r.id&&a.columnName==r.columnName||t.startEdit(r.id,r.columnName),!1)})),i.attachEvent("onEmptyClick",(function(){return n.save(),!0})),r.attachEvent("onKeyDown",(function(e,a){var s=t.locateCell(a.target),o=!!s&&t.getEditorConfig(s.columnName),l=t.getState(),c=i.constants.KEY_CODES,d=a.keyCode,u=!1;switch(d){case c.ENTER:t.isVisible()?(t.save(),a.preventDefault(),u=!0):o&&!(a.ctrlKey||a.metaKey||a.shiftKey)&&(n.startEdit(s.id,s.columnName),a.preventDefault(),u=!0);break;case c.ESC:t.isVisible()&&(t.hide(),a.preventDefault(),u=!0);break;case c.UP:case c.DOWN:break;case c.LEFT:case c.RIGHT:(o&&t.isVisible()||"date"===l.editorType)&&(u=!0);break;case c.SPACE:t.isVisible()&&(u=!0),o&&!t.isVisible()&&(n.startEdit(s.id,s.columnName),a.preventDefault(),u=!0);break;case c.DELETE:o&&!t.isVisible()?(n.startEdit(s.id,s.columnName),u=!0):o&&t.isVisible()&&(u=!0);break;case c.TAB:if(t.isVisible()){a.shiftKey?t.editPrevCell(!0):t.editNextCell(!0);var h=t.getState();h.id&&r.focus({type:"taskCell",id:h.id,column:h.columnName}),a.preventDefault(),u=!0}break;default:if(t.isVisible())u=!0;else if(d>=48&&d<=57||d>95&&d<112||d>=64&&d<=91||d>185&&d<193||d>218&&d<223){var _=e.modifiers,f=_.alt||_.ctrl||_.meta||_.shift;_.alt||f&&r.getCommandHandler(e,"taskCell")||o&&!t.isVisible()&&(n.startEdit(s.id,s.columnName),u=!0)}}return!u}))},onShow:function(t,e,n){},onHide:function(t,e,n){const i=n.$gantt;i&&i.focus()},destroy:function(){}};function ui(t){var e=function(){};return e.prototype={show:function(t,e,n,i){},hide:function(){},set_value:function(t,e,n,i){this.get_input(i).value=t},get_value:function(t,e,n){return this.get_input(n).value||""},is_changed:function(t,e,n,i){var a=this.get_value(e,n,i);return a&&t&&a.valueOf&&t.valueOf?a.valueOf()!=t.valueOf():a!=t},is_valid:function(t,e,n,i){return!0},save:function(t,e,n){},get_input:function(t){return t.querySelector("input")},focus:function(t){var e=this.get_input(t);e&&(e.focus&&e.focus(),e.select&&e.select())}},e}function hi(t){var e=ui();function n(){return e.apply(this,arguments)||this}return Kn(n,e),ht(n.prototype,{show:function(t,e,n,i){var a=`<div role='cell'><input type='text' name='${e.name}' title='${e.name}'></div>`;i.innerHTML=a}},!0),n}function _i(t){var e=ui();function n(){return e.apply(this,arguments)||this}return Kn(n,e),ht(n.prototype,{show:function(t,e,n,i){var a=n.min||0,r=n.max||100,s=`<div role='cell'><input type='number' min='${a}' max='${r}' name='${e.name}' title='${e.name}'></div>`;i.innerHTML=s,i.oninput=function(t){+t.target.value<a&&(t.target.value=a),+t.target.value>r&&(t.target.value=r)}},get_value:function(t,e,n){return this.get_input(n).value||""},is_valid:function(t,e,n,i){return!isNaN(parseInt(t,10))}},!0),n}function fi(t){var e=ui();function n(){return e.apply(this,arguments)||this}return Kn(n,e),ht(n.prototype,{show:function(t,e,n,i){for(var a=`<div role='cell'><select name='${e.name}' title='${e.name}'>`,r=[],s=n.options||[],o=0;o<s.length;o++)r.push("<option value='"+n.options[o].key+"'>"+s[o].label+"</option>");a+=r.join("")+"</select></div>",i.innerHTML=a},get_input:function(t){return t.querySelector("select")}},!0),n}function gi(t){var e=ui(),n="%Y-%m-%d",i=null,a=null;function r(){return e.apply(this,arguments)||this}return Kn(r,e),ht(r.prototype,{show:function(e,r,s,o){i||(i=t.date.date_to_str(n)),a||(a=t.date.str_to_date(n));var l=null,c=null;l="function"==typeof s.min?s.min(e,r):s.min,c="function"==typeof s.max?s.max(e,r):s.max;var d=`<div style='width:140px' role='cell'><input type='date' ${l?" min='"+i(l)+"' ":""} ${c?" max='"+i(c)+"' ":""} name='${r.name}' title='${r.name}'></div>`;o.innerHTML=d,o.oninput=function(e){+t.date.str_to_date("%Y-%m-%d")(e.target.value)<+l&&(e.target.value=t.date.date_to_str("%Y-%m-%d")(l)),+t.date.str_to_date("%Y-%m-%d")(e.target.value)>+c&&(e.target.value=t.date.date_to_str("%Y-%m-%d")(c))}},set_value:function(t,e,n,a){t&&t.getFullYear?this.get_input(a).value=i(t):this.get_input(a).value=t},is_valid:function(t,e,n,i){return!(!t||isNaN(t.getTime()))},get_value:function(t,e,n){var i;try{i=a(this.get_input(n).value||"")}catch{i=null}return i}},!0),r}function pi(t){var e=ui();function n(){return e.apply(this,arguments)||this}function i(e){return e.formatter||t.ext.formatters.linkFormatter()}function a(t,e){for(var n=(t||"").split(e.delimiter||","),i=0;i<n.length;i++){var a=n[i].trim();a?n[i]=a:(n.splice(i,1),i--)}return n.sort(),n}function r(t,e,n){for(var a=t.$target,r=[],s=0;s<a.length;s++){var o=n.getLink(a[s]);r.push(i(e).format(o))}return r.join((e.delimiter||",")+" ")}function s(t){return t.source+"_"+t.target+"_"+t.type+"_"+(t.lag||0)}function o(e,n,a){var r=function(e,n,a){var r=[];return[...new Set(n)].forEach((function(n){var s=i(a).parse(n);s&&(s.target=e,s.id="predecessor_generated",t.isLinkAllowed(s)&&(s.id=void 0,r.push(s)))})),r}(e.id,n,a),o={};e.$target.forEach((function(e){var n=t.getLink(e);o[s(n)]=n.id}));var l=[];r.forEach((function(t){var e=s(t);o[e]?delete o[e]:l.push(t)}));var c=[];for(var d in o)c.push(o[d]);return{add:l,remove:c}}return Kn(n,e),ht(n.prototype,{show:function(t,e,n,i){var a=`<div role='cell'><input type='text' name='${e.name}' title='${e.name}'></div>`;i.innerHTML=a},hide:function(){},set_value:function(e,n,i,a){this.get_input(a).value=r(e,i.editor,t)},get_value:function(t,e,n){return a(this.get_input(n).value||"",e.editor)},save:function(e,n,i){var a=o(t.getTask(e),this.get_value(e,n,i),n.editor);(a.add.length||a.remove.length)&&t.batchUpdate((function(){a.add.forEach((function(e){t.addLink(e)})),a.remove.forEach((function(e){t.deleteLink(e)})),t.autoSchedule&&t.autoSchedule()}))},is_changed:function(e,n,i,s){var o=this.get_value(n,i,s),l=a(r(e,i.editor,t),i.editor);return o.join()!==l.join()}},!0),n}function mi(t){var e=ui();function n(){return e.apply(this,arguments)||this}function i(e){return e.formatter||t.ext.formatters.durationFormatter()}return Kn(n,e),ht(n.prototype,{show:function(t,e,n,i){var a=`<div role='cell'><input type='text' name='${e.name}' title='${e.name}'></div>`;i.innerHTML=a},set_value:function(t,e,n,a){this.get_input(a).value=i(n.editor).format(t)},get_value:function(t,e,n){return i(e.editor).parse(this.get_input(n).value||"")}},!0),n}function vi(t){return function(n,i,a){"keepDates"==a?function(e,n){"duration"==n?e.end_date=t.calculateEndDate(e):"end_date"!=n&&"start_date"!=n||(e.duration=t.calculateDuration(e))}(n,i):"keepDuration"==a?function(n,i){"end_date"==i?n.start_date=e(n):"start_date"!=i&&"duration"!=i||(n.end_date=t.calculateEndDate(n))}(n,i):function(n,i){t.config.schedule_from_end?"end_date"==i||"duration"==i?n.start_date=e(n):"start_date"==i&&(n.duration=t.calculateDuration(n)):"start_date"==i||"duration"==i?n.end_date=t.calculateEndDate(n):"end_date"==i&&(n.duration=t.calculateDuration(n))}(n,i)};function e(e){return t.calculateEndDate({start_date:e.end_date,duration:-e.duration,task:e})}}function ki(t){t.config.editor_types={text:new(hi()),number:new(_i()),select:new(fi()),date:new(gi(t)),predecessor:new(pi(t)),duration:new(mi(t))}}function yi(t){var e=function(t){var e=null;return{setMapping:function(t){e=t},getMapping:function(){return e||(t.config.keyboard_navigation_cells&&t.ext.keyboardNavigation?di:ci)}}}(t),n={};q(n);var i={init:ki,createEditors:function(i){function a(e,n){var a=i.$getConfig(),r=function(t,e){for(var n=i.$getConfig(),a=i.getItemTop(t),r=i.getItemHeight(t),s=i.getGridColumns(),o=0,l=0,c=0,d=0;d<s.length;d++){if(s[d].name==e){c=s[d].width;break}n.rtl?l+=s[d].width:o+=s[d].width}return n.rtl?{top:a,right:l,height:r,width:c}:{top:a,left:o,height:r,width:c}}(e,n),s=document.createElement("div");s.className="gantt_grid_editor_placeholder",s.setAttribute(i.$config.item_attribute,e),s.setAttribute(i.$config.bind+"_id",e),s.setAttribute("data-column-name",n);var o=function(t,e){for(var n=t.getGridColumns(),i=0;i<n.length;i++)if(n[i].name==e)return i;return 0}(i,n);return s.setAttribute("data-column-index",o),t._waiAria.inlineEditorAttr(s),a.rtl?s.style.cssText=["top:"+r.top+"px","right:"+r.right+"px","width:"+r.width+"px","height:"+r.height+"px"].join(";"):s.style.cssText=["top:"+r.top+"px","left:"+r.left+"px","width:"+r.width+"px","height:"+r.height+"px"].join(";"),s}var r=vi(t),s=[],o=[],l=null,c={_itemId:null,_columnName:null,_editor:null,_editorType:null,_placeholder:null,locateCell:function(t){if(!P(t,i.$grid))return null;var e=A(t,i.$config.item_attribute),n=A(t,"data-column-name");if(e&&n){var a=n.getAttribute("data-column-name");return{id:e.getAttribute(i.$config.item_attribute),columnName:a}}return null},getEditorConfig:function(t){return i.getColumn(t).editor},init:function(){var n=e.getMapping();n.init&&n.init(this,i),l=i.$gantt.getDatastore(i.$config.bind);var a=this;s.push(l.attachEvent("onIdChange",(function(t,e){a._itemId==t&&(a._itemId=e)}))),s.push(l.attachEvent("onStoreUpdated",(function(){i.$gantt.getState("batchUpdate").batch_update||a.isVisible()&&!l.isVisible(a._itemId)&&a.hide()}))),o.push(t.attachEvent("onDataRender",(function(){a._editor&&a._placeholder&&!P(a._placeholder,t.$root)&&i.$grid_data.appendChild(a._placeholder)}))),this.init=function(){}},getState:function(){return{editor:this._editor,editorType:this._editorType,placeholder:this._placeholder,id:this._itemId,columnName:this._columnName}},startEdit:function(e,n){if(this.isVisible()&&this.save(),l.exists(e)){var i={id:e,columnName:n};t.isReadonly(l.getItem(e))?this.callEvent("onEditPrevent",[i]):!1!==this.callEvent("onBeforeEditStart",[i])?(this.show(i.id,i.columnName),this.setValue(),this.callEvent("onEditStart",[i])):this.callEvent("onEditPrevent",[i])}},isVisible:function(){return!(!this._editor||!P(this._placeholder,t.$root))},show:function(t,n){this.isVisible()&&this.save();var r={id:t,columnName:n},s=i.getColumn(r.columnName),o=this.getEditorConfig(s.name);if(o){var l=i.$getConfig().editor_types[o.type],c=a(r.id,r.columnName);i.$grid_data.appendChild(c),l.show(r.id,s,o,c),this._editor=l,this._placeholder=c,this._itemId=r.id,this._columnName=r.columnName,this._editorType=o.type;var d=e.getMapping();d.onShow&&d.onShow(this,c,i)}},setValue:function(){var t=this.getState(),e=t.id,n=t.columnName,a=i.getColumn(n),r=l.getItem(e),s=this.getEditorConfig(n);if(s){var o=r[s.map_to];"auto"==s.map_to&&(o=l.getItem(e)),this._editor.set_value(o,e,a,this._placeholder),this.focus()}},focus:function(){this._editor.focus(this._placeholder)},getValue:function(){var t=i.getColumn(this._columnName);return this._editor.get_value(this._itemId,t,this._placeholder)},_getItemValue:function(){var e=this.getEditorConfig(this._columnName);if(e){var n=t.getTask(this._itemId)[e.map_to];return"auto"==e.map_to&&(n=l.getItem(this._itemId)),n}},isChanged:function(){var t=i.getColumn(this._columnName),e=this._getItemValue();return this._editor.is_changed(e,this._itemId,t,this._placeholder)},hide:function(){if(this._itemId){var t=this._itemId,n=this._columnName,a=e.getMapping();a.onHide&&a.onHide(this,this._placeholder,i),this._itemId=null,this._columnName=null,this._editorType=null,this._placeholder&&(this._editor&&this._editor.hide&&this._editor.hide(this._placeholder),this._editor=null,this._placeholder.parentNode&&this._placeholder.parentNode.removeChild(this._placeholder),this._placeholder=null,this.callEvent("onEditEnd",[{id:t,columnName:n}]))}},save:function(){if(this.isVisible()&&l.exists(this._itemId)&&this.isChanged()){var e=this._itemId,n=this._columnName;if(l.exists(e)){var a=l.getItem(e),s=this.getEditorConfig(n),o={id:e,columnName:n,newValue:this.getValue(),oldValue:this._getItemValue()};if(!1!==this.callEvent("onBeforeSave",[o])&&(!this._editor.is_valid||this._editor.is_valid(o.newValue,o.id,i.getColumn(n),this._placeholder))){var c=s.map_to,d=o.newValue;"auto"!=c?(a[c]=d,r(a,c,t.config.inline_editors_date_processing),l.updateItem(e)):this._editor.save(e,i.getColumn(n),this._placeholder),this.callEvent("onSave",[o])}this.hide()}}else this.hide()},_findEditableCell:function(t,e){var n=t,a=i.getGridColumns()[n],r=a?a.name:null;if(r){for(;r&&!this.getEditorConfig(r);)r=this._findEditableCell(t+e,e);return r}return null},getNextCell:function(t){return this._findEditableCell(i.getColumnIndex(this._columnName,!0)+t,t)},getFirstCell:function(){return this._findEditableCell(0,1)},getLastCell:function(){return this._findEditableCell(i.getGridColumns().length-1,-1)},editNextCell:function(t){var e=this.getNextCell(1);if(e){var n=this.getNextCell(1);n&&this.getEditorConfig(n)&&this.startEdit(this._itemId,n)}else if(t&&this.moveRow(1)){var i=this.moveRow(1);(e=this.getFirstCell())&&this.getEditorConfig(e)&&this.startEdit(i,e)}},editPrevCell:function(t){var e=this.getNextCell(-1);if(e){var n=this.getNextCell(-1);n&&this.getEditorConfig(n)&&this.startEdit(this._itemId,n)}else if(t&&this.moveRow(-1)){var i=this.moveRow(-1);(e=this.getLastCell())&&this.getEditorConfig(e)&&this.startEdit(i,e)}},moveRow:function(e){for(var n=e>0?t.getNext:t.getPrev,i=(n=t.bind(n,t))(this._itemId);t.isTaskExists(i)&&t.isReadonly(t.getTask(i));)i=n(i);return i},editNextRow:function(e){var n=this.getState().id;if(t.isTaskExists(n)){var i=null;i=e?this.moveRow(1):t.getNext(n),t.isTaskExists(i)&&this.startEdit(i,this._columnName)}},editPrevRow:function(e){var n=this.getState().id;if(t.isTaskExists(n)){var i=null;i=e?this.moveRow(-1):t.getPrev(n),t.isTaskExists(i)&&this.startEdit(i,this._columnName)}},detachStore:function(){s.forEach((function(t){l.detachEvent(t)})),o.forEach((function(e){t.detachEvent(e)})),s=[],o=[],l=null,this.hide()},destructor:function(){this.detachStore(),this.detachAllEvents()}};return ht(c,e),ht(c,n),c}};return ht(i,e),ht(i,n),i}function bi(t,e,n,i,a){if(!t.start_date||!t.end_date)return null;var r=n.getItemTop(t.id),s=n.getItemHeight(t.id);if(r>e.y_end||r+s<e.y)return!1;var o=n.posFromDate(t.start_date),l=n.posFromDate(t.end_date),c=Math.min(o,l)-200,d=Math.max(o,l)+200;return!(c>e.x_end||d<e.x)}function xi(t){function e(e,r,s){if(t._isAllowedUnscheduledTask(e)||!t._isTaskInTimelineLimits(e))return;var o=r.getItemPosition(e),l=s,c=r.$getTemplates(),d=t.getTaskType(e.type),u=r.getBarHeight(e.id,d==l.types.milestone),h=0;d==l.types.milestone&&(h=(u-o.height)/2);var _=Math.floor((r.getItemHeight(e.id)-u)/2);const f=!1!==t.config.baselines&&e.baselines&&e.baselines.length,g=!1!==t.config.baselines&&("separateRow"==t.config.baselines.render_mode||"individualRow"==t.config.baselines.render_mode);if(f&&g&&"full"!==e.bar_height&&e.bar_height<e.row_height)if(d===l.types.milestone){let t=r.getBarHeight(e.id,!0),n=Math.sqrt(2*t*t);_=Math.floor((n-u)/2)+2}else _=2;d==l.types.milestone&&(o.left-=Math.round(u/2),o.width=u);var p=document.createElement("div"),m=Math.round(o.width);r.$config.item_attribute&&(p.setAttribute(r.$config.item_attribute,e.id),p.setAttribute(r.$config.bind+"_id",e.id)),l.show_progress&&d!=l.types.milestone&&function(e,n,i,a,r){var s=1*e.progress||0;i=Math.max(i-2,0);var o=document.createElement("div"),l=Math.round(i*s);l=Math.min(i,l),o.style.width=l+"px",o.className="gantt_task_progress",o.innerHTML=r.progress_text(e.start_date,e.end_date,e),a.rtl&&(o.style.position="absolute",o.style.right="0px");var c=document.createElement("div");if(c.className="gantt_task_progress_wrapper",c.appendChild(o),n.appendChild(c),t.config.drag_progress&&!t.isReadonly(e)){var d=document.createElement("div"),u=l;a.rtl&&(u=i-l),d.style.left=u+"px",d.className="gantt_task_progress_drag",d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="9" viewBox="0 0 12 9" fill="none">\n<path d="M5.58397 1.52543C5.78189 1.22856 6.21811 1.22856 6.41602 1.52543L10.5475 7.72265C10.769 8.05493 10.5308 8.5 10.1315 8.5L1.86852 8.5C1.46917 8.5 1.23097 8.05493 1.45249 7.72265L5.58397 1.52543Z" fill="var(--dhx-gantt-progress-handle-background)" stroke="var(--dhx-gantt-progress-handle-border)"/>\n</svg>',o.appendChild(d),n.appendChild(d)}}(e,p,m,l,c);var v=function(e,n,i){var a=document.createElement("div");return t.getTaskType(e.type)!=t.config.types.milestone?a.innerHTML=i.task_text(e.start_date,e.end_date,e):t.getTaskType(e.type)==t.config.types.milestone&&n&&(a.style.height=a.style.width=n+"px"),a.className="gantt_task_content",a}(e,m,c);p.appendChild(v);var k=function(e,n,i,a){var r=a.$getConfig(),s=[e];n&&s.push(n);var o=t.getState(),l=t.getTask(i);if(t.getTaskType(l.type)==r.types.milestone?s.push("gantt_milestone"):t.getTaskType(l.type)==r.types.project&&s.push("gantt_project"),s.push("gantt_bar_"+t.getTaskType(l.type)),t.isSummaryTask(l)&&s.push("gantt_dependent_task"),t.isSplitTask(l)&&(r.open_split_tasks&&!l.$open||!r.open_split_tasks)&&s.push("gantt_split_parent"),r.select_task&&t.isSelectedTask(i)&&s.push("gantt_selected"),i==o.drag_id&&(s.push("gantt_drag_"+o.drag_mode),o.touch_drag&&s.push("gantt_touch_"+o.drag_mode)),o.link_source_id==i&&(s.push("gantt_link_source"),o.link_from_start?s.push("gantt_link_from_start"):s.push("gantt_link_from_end")),o.link_target_id==i&&s.push("gantt_link_target"),r.highlight_critical_path&&t.isCriticalTask&&t.isCriticalTask(l)&&s.push("gantt_critical_task"),o.link_landing_area&&o.link_target_id&&o.link_source_id&&o.link_target_id!=o.link_source_id&&(o.link_target_id==i||o.link_source_id==i)){var c=o.link_source_id,d=o.link_from_start,u=o.link_to_start,h="";h=t.isLinkAllowed(c,i,d,u)?u?"link_start_allow":"link_finish_allow":u?"link_start_deny":"link_finish_deny",s.push(h)}return s.join(" ")}("gantt_task_line",c.task_class(e.start_date,e.end_date,e),e.id,r);(e.color||e.progressColor||e.textColor)&&(k+=" gantt_task_inline_color"),o.width<20&&(k+=" gantt_thin_task"),p.className=k;var y=["left:"+o.left+"px","top:"+(_+o.top)+"px","height:"+u+"px","line-height:"+Math.max(u<30?u-2:u,0)+"px","width:"+m+"px"];p.style.cssText=y.join(";"),e.color&&p.style.setProperty("--dhx-gantt-task-background",e.color),e.textColor&&p.style.setProperty("--dhx-gantt-task-color",e.textColor),e.progressColor&&p.style.setProperty("--dhx-gantt-task-progress-color",e.progressColor);var b=function(t,e,a,r){var s="gantt_left "+i(!e.rtl,t),o=null;return r&&(o={type:"marginRight",value:r}),n(t,a.leftside_text,s,o)}(e,l,c,h);b&&p.appendChild(b),b=function(t,e,a,r){var s="gantt_right "+i(!!e.rtl,t),o=null;return r&&(o={type:"marginLeft",value:r}),n(t,a.rightside_text,s,o)}(e,l,c,h),b&&p.appendChild(b),t._waiAria.setTaskBarAttr(e,p);var x=t.getState();return t.isReadonly(e)||(l.drag_resize&&!t.isSummaryTask(e)&&d!=l.types.milestone&&a(p,"gantt_task_drag",e,(function(t){var e=document.createElement("div");return e.className=t,e}),l),l.drag_links&&l.show_links&&a(p,"gantt_link_control",e,(function(t){var e=document.createElement("div");e.className=t,e.style.cssText=["height:"+u+"px","line-height:"+u+"px"].join(";");var n=document.createElement("div");n.className="gantt_link_point";var i=!1;return x.link_source_id&&l.touch&&(i=!0),n.style.display=i?"block":"",e.appendChild(n),e}),l,h)),p}function n(t,e,n,i){if(!e)return null;var a=e(t.start_date,t.end_date,t);if(!a)return null;var r=document.createElement("div");return r.className="gantt_side_content "+n,r.innerHTML=a,i&&(r.style[i.type]=Math.abs(i.value)+"px"),r}function i(e,n){var i=e?{$source:[t.config.links.start_to_start],$target:[t.config.links.start_to_start,t.config.links.finish_to_start]}:{$source:[t.config.links.finish_to_start,t.config.links.finish_to_finish],$target:[t.config.links.finish_to_finish]};for(var a in i)for(var r=n[a],s=0;s<r.length;s++)for(var o=t.getLink(r[s]),l=0;l<i[a].length;l++)if(o.type==i[a][l])return"gantt_link_crossing";return""}function a(e,n,i,a,r,s){var o,l=t.getState();+i.start_date>=+l.min_date&&((o=a([n,r.rtl?"task_right":"task_left","task_start_date"].join(" "))).setAttribute("data-bind-property","start_date"),s&&(o.style.marginLeft=s+"px"),e.appendChild(o)),+i.end_date<=+l.max_date&&((o=a([n,r.rtl?"task_left":"task_right","task_end_date"].join(" "))).setAttribute("data-bind-property","end_date"),s&&(o.style.marginRight=s+"px"),e.appendChild(o))}return function(n,i,a){var r=(a=i.$getConfig()).type_renderers[t.getTaskType(n.type)],s=e;return r?r.call(t,n,(function(e){return s.call(t,e,i,a)}),i):s.call(t,n,i,a)}}function $i(t){return{render:xi(t),update:null,isInViewPort:bi,getVisibleRange:Wn}}function wi(){return console.error("You are trying to use a Pro feature that is not available in the GPL version."),{render:function(){},isInViewPort:function(){},getVisibleRange:function(){}}}function Si(t,e,n){return{top:e.getItemTop(t.id),height:e.getItemHeight(t.id),left:0,right:1/0}}function Ti(t,e){var n=0,i=t.left.length-1;if(e)for(var a=0;a<t.left.length;a++){var r=t.left[a];if(r<e.x&&(n=a),r>e.x_end){i=a;break}}return{start:n,end:i}}function Ei(t,e,n,i){var a=e.width[t];if(a<=0)return!1;if(!i.config.smart_rendering||zn(i))return!0;var r=e.left[t]-a,s=e.left[t]+a;return r<=n.x_end&&s>=n.x}function Ci(t,e){var n=e.config.timeline_placeholder;if(t=t||[],n&&0===t.filter((t=>"timeline_placeholder_task"===t.id)).length){var i=e.getState(),a=null,r=i.min_date,s=i.max_date;t.length&&(a=t[t.length-1].id);var o={start_date:r,end_date:s,row_height:n.height||0,id:"timeline_placeholder_task",unscheduled:!0,lastTaskId:a,calendar_id:n.calendar||"global",$source:[],$target:[]};t.push(o)}}function Di(t){var e={current_pos:null,dirs:{left:"left",right:"right",up:"up",down:"down"},path:[],clear:function(){this.current_pos=null,this.path=[]},point:function(e){this.current_pos=t.copy(e)},get_lines:function(t){this.clear(),this.point(t[0]);for(var e=1;e<t.length;e++)this.line_to(t[e]);return this.get_path()},line_to:function(e){var n=t.copy(e),i=this.current_pos,a=this._get_line(i,n);this.path.push(a),this.current_pos=n},get_path:function(){return this.path},get_wrapper_sizes:function(t,e,n){var i,a=e.$getConfig().link_wrapper_width,r=t.y-a/2;switch(t.direction){case this.dirs.left:i={top:r,height:a,lineHeight:a,left:t.x-t.size-a/2,width:t.size+a};break;case this.dirs.right:i={top:r,lineHeight:a,height:a,left:t.x-a/2,width:t.size+a};break;case this.dirs.up:i={top:r-t.size,lineHeight:t.size+a,height:t.size+a,left:t.x-a/2,width:a};break;case this.dirs.down:i={top:r,lineHeight:t.size+a,height:t.size+a,left:t.x-a/2,width:a}}return i},get_line_sizes:function(t,e){var n,i=e.$getConfig(),a=i.link_line_width,r=i.link_wrapper_width,s=t.size+a;switch(t.direction){case this.dirs.left:case this.dirs.right:n={height:a,width:s,marginTop:(r-a)/2,marginLeft:(r-a)/2};break;case this.dirs.up:case this.dirs.down:n={height:s,width:a,marginTop:(r-a)/2,marginLeft:(r-a)/2}}return n},render_line:function(t,e,n,i){var a=this.get_wrapper_sizes(t,n,i),r=document.createElement("div");r.style.cssText=["top:"+a.top+"px","left:"+a.left+"px","height:"+a.height+"px","width:"+a.width+"px"].join(";"),r.className="gantt_line_wrapper";var s=this.get_line_sizes(t,n),o=document.createElement("div");return o.style.cssText=["height:"+s.height+"px","width:"+s.width+"px","margin-top:"+s.marginTop+"px","margin-left:"+s.marginLeft+"px"].join(";"),o.className="gantt_link_line_"+t.direction,r.appendChild(o),r},render_corner:function(t,e){const n=t.radius,i=e.$getConfig(),a=i.link_line_width||2,r=document.createElement("div");let s,o;return r.classList.add("gantt_link_corner"),r.classList.add(`gantt_link_corner_${t.direction.from}_${t.direction.to}`),r.style.width=`${n}px`,r.style.height=`${n}px`,"right"===t.direction.from&&"down"===t.direction.to?(s="Right",o="Top",r.style.left=t.x-i.link_line_width/2+"px",r.style.top=`${t.y}px`):"down"===t.direction.from&&"right"===t.direction.to?(s="Left",o="Bottom",r.style.left=t.x-i.link_line_width/2+"px",r.style.top=`${t.y}px`):"right"===t.direction.from&&"up"===t.direction.to?(s="Right",o="Bottom",r.style.left=t.x-i.link_line_width/2+"px",r.style.top=t.y-n+"px"):"up"===t.direction.from&&"right"===t.direction.to?(s="Left",o="Top",r.style.left=t.x-i.link_line_width/2+"px",r.style.top=t.y-n+"px"):"left"===t.direction.from&&"down"===t.direction.to?(s="Left",o="Top",r.style.left=t.x-n-i.link_line_width/2+"px",r.style.top=`${t.y}px`):"down"===t.direction.from&&"left"===t.direction.to?(s="Right",o="Bottom",r.style.left=t.x-n-i.link_line_width/2+"px",r.style.top=`${t.y}px`):"left"===t.direction.from&&"up"===t.direction.to?(s="Left",o="Bottom",r.style.left=t.x-n-i.link_line_width/2+"px",r.style.top=t.y-n+"px"):"up"===t.direction.from&&"left"===t.direction.to&&(s="Right",o="Top",r.style.left=t.x-n-i.link_line_width/2+"px",r.style.top=t.y-n+"px"),r.style[`border${o}Width`]=`${a}px`,r.style[`border${s}Width`]=`${a}px`,r.style[`border${s}Style`]="solid",r.style[`border${o}Style`]="solid",r.style[`border${o}${s}Radius`]=`${n}px`,r},render_arrow(t,e){var n=document.createElement("div"),i=t.y,a=t.x,r=e.link_arrow_size;n.style.setProperty("--dhx-gantt-icon-size",`${r}px`);var s="gantt_link_arrow gantt_link_arrow_"+t.direction;return n.style.top=i+"px",n.style.left=a+"px",n.className=s,n},_get_line:function(t,e){var n=this.get_direction(t,e),i={x:t.x,y:t.y,direction:this.get_direction(t,e)};return n==this.dirs.left||n==this.dirs.right?i.size=Math.abs(t.x-e.x):i.size=Math.abs(t.y-e.y),i},get_direction:function(t,e){return e.x<t.x?this.dirs.left:e.x>t.x?this.dirs.right:e.y>t.y?this.dirs.down:this.dirs.up}},n={path:[],clear:function(){this.path=[]},current:function(){return this.path[this.path.length-1]},point:function(e){return e?(this.path.push(t.copy(e)),e):this.current()},point_to:function(n,i,a){a=a?{x:a.x,y:a.y}:t.copy(this.point());var r=e.dirs;switch(n){case r.left:a.x-=i;break;case r.right:a.x+=i;break;case r.up:a.y-=i;break;case r.down:a.y+=i}return this.point(a)},get_points:function(n,i,a,r){var s=this.get_endpoint(n,i,a,r),o=t.config,l=s.e_y-s.y,c=s.e_x-s.x,d=e.dirs,u=i.getItemHeight(n.source);this.clear(),this.point({x:s.x,y:s.y});var h=2*o.link_arrow_size,_=this.get_line_type(n,i.$getConfig()),f=s.e_x>s.x;if(_.from_start&&_.to_start)this.point_to(d.left,h),f?(this.point_to(d.down,l),this.point_to(d.right,c)):(this.point_to(d.right,c),this.point_to(d.down,l)),this.point_to(d.right,h);else if(!_.from_start&&_.to_start)if(0!==l&&(f=s.e_x>s.x+2*h),this.point_to(d.right,h),f)c-=h,this.point_to(d.down,l),this.point_to(d.right,c);else{c-=2*h;var g=l>0?1:-1;this.point_to(d.down,g*(u/2)),this.point_to(d.right,c),this.point_to(d.down,g*(Math.abs(l)-u/2)),this.point_to(d.right,h)}else _.from_start||_.to_start?_.from_start&&!_.to_start&&(0!==l&&(f=s.e_x>s.x-2*h),this.point_to(d.left,h),f?(c+=2*h,g=l>0?1:-1,this.point_to(d.down,g*(u/2)),this.point_to(d.right,c),this.point_to(d.down,g*(Math.abs(l)-u/2)),this.point_to(d.left,h)):(c+=h,this.point_to(d.down,l),this.point_to(d.right,c))):(this.point_to(d.right,h),f?(this.point_to(d.right,c),this.point_to(d.down,l)):(this.point_to(d.down,l),this.point_to(d.right,c)),this.point_to(d.left,h));return this.path},get_line_type:function(e,n){var i=n.links,a=!1,r=!1;return e.type==i.start_to_start?a=r=!0:e.type==i.finish_to_finish?a=r=!1:e.type==i.finish_to_start?(a=!1,r=!0):e.type==i.start_to_finish?(a=!0,r=!1):t.assert(!1,"Invalid link type"),n.rtl&&(a=!a,r=!r),{from_start:a,to_start:r}},get_endpoint:function(t,e,n,a){var r=e.$getConfig(),s=this.get_line_type(t,r),o=s.from_start,l=s.to_start,c=i(n,e,r),d=i(a,e,r);return{x:o?c.left:c.left+c.width,e_x:l?d.left:d.left+d.width,y:c.top+c.rowHeight/2-1,e_y:d.top+d.rowHeight/2-1}}};function i(e,n,i){var a=n.getItemPosition(e);let r=Te(t,n,e),s=r.maxHeight,o=r.splitChild;const l=!1!==t.config.baselines&&("separateRow"==t.config.baselines.render_mode||"individualRow"==t.config.baselines.render_mode)&&e.baselines&&e.baselines.length;let c;r.shrinkHeight&&(a.rowHeight=s);let d=t.getTaskType(e.type)==i.types.milestone;if(d){let t=n.getBarHeight(e.id,!0);c=Math.sqrt(2*t*t),r.shrinkHeight&&s<t&&(t=s,c=s),a.left-=c/2,a.width=c}if(o)if(s>=a.height){const n=we(t,e.parent);l||n?d?(a.rowHeight=a.height+4,a.left+=(a.width-a.rowHeight+4)/2,a.width=a.rowHeight-3):a.rowHeight=a.height+6:d&&(a.left+=(c-a.height)/2)}else a.rowHeight=s+2,d&&(a.left+=(a.width-a.rowHeight+4)/2,a.width=a.rowHeight-3);else l&&(a.rowHeight=a.height+4);return a}return{render:function(i,a,r){var s=t.getTask(i.source);if(s.hide_bar)return;var o=t.getTask(i.target);if(o.hide_bar)return;var l=n.get_endpoint(i,a,s,o),c=l.e_y-l.y;if(!(l.e_x-l.x)&&!c)return null;var d=n.get_points(i,a,s,o);const u=function(t,e){const n=e.link_radius||4,i=e.link_arrow_size||6,a=[];for(let s=0;s<t.length;s++){const i=t[s],r=t[s+1];if(!r||e.link_radius<=1)a.push({type:"line",data:i});else if(i.direction!==r.direction){if(i.size<n||r.size<n){a.push({type:"line",data:i});continue}i.size-=n,a.push({type:"line",data:i});let t=i.x,s=i.y-e.link_line_width/2;switch(i.direction){case"right":t+=i.size;break;case"left":t-=i.size;break;case"down":s+=i.size;break;case"up":s-=i.size}const o={x:t,y:s,direction:{from:i.direction,to:r.direction},radius:n};switch(a.push({type:"corner",data:o}),r.direction){case"right":r.x+=n,r.size-=n;break;case"left":r.x-=n,r.size-=n;break;case"down":r.y+=n,r.size-=n;break;case"up":r.y-=n,r.size-=n}}else a.push({type:"line",data:i})}const r=t[t.length-1];if("right"===r.direction||"left"===r.direction){r.size-=3*i/4;let t="right"===r.direction?r.x+r.size:r.x-r.size-i/2,n=r.y-e.link_line_width/2-i/2+1;"left"===r.direction?(n-=1,t-=2):t-=1;const s={x:t,y:n,size:i,direction:r.direction};a.push({type:"line",data:r}),a.push({type:"arrow",data:s})}else a.push({type:"line",data:r});return a}(e.get_lines(d,a).filter((t=>t.size>0)),r),h=function(t,n,i,a){const r=document.createElement("div");return t.forEach((t=>{let s;"line"===t.type?s=e.render_line(t.data,null,n,i.source):"corner"===t.type?s=e.render_corner(t.data,n):"arrow"===t.type&&(s=e.render_arrow(t.data,a)),r.appendChild(s)})),r}(u,a,i,r);var _="gantt_task_link";i.color&&(_+=" gantt_link_inline_color");var f=t.templates.link_class?t.templates.link_class(i):"";return f&&(_+=" "+f),r.highlight_critical_path&&t.isCriticalLink&&t.isCriticalLink(i)&&(_+=" gantt_critical_link"),h.className=_,a.$config.link_attribute&&(h.setAttribute(a.$config.link_attribute,i.id),h.setAttribute("link_id",i.id)),i.color&&h.style.setProperty("--dhx-gantt-link-background",i.color),t._waiAria.linkAttr(i,h),h},update:null,isInViewPort:Gn,getVisibleRange:qn()}}function Ai(t,e,n,i,a){if(a.$ui.getView("grid")&&(a.config.keyboard_navigation&&a.getSelectedId()||a.ext.inlineEditors&&a.ext.inlineEditors.getState().id))return!0;var r=n.getItemTop(t.id),s=n.getItemHeight(t.id);return!(r>e.y_end||r+s<e.y)}function Ii(t){let e={};return t.$data.tasksStore.attachEvent("onStoreUpdated",(function(){e={}})),function(n,i,a,r){const s=n.id+"_"+i+"_"+a.unit+"_"+a.step;let o;return o=e[s]?e[s]:e[s]=function(e,n,i,a){let r,s=!1,o={};t.config.process_resource_assignments&&n===t.config.resource_property?(r="task"==e.$role?t.getResourceAssignments(e.$resource_id,e.$task_id):t.getResourceAssignments(e.id),s=!0):r="task"==e.$role?[]:t.getTaskBy(n,e.id),o=function(e,n,i){const a=n.unit,r=n.step,s={},o={};for(let l=0;l<e.length;l++){const c=e[l];let d=c;if(i&&(d=t.getTask(c.task_id)),d.unscheduled)continue;let u=c.start_date||d.start_date,h=c.end_date||d.end_date;i&&(c.start_date&&(u=new Date(Math.max(c.start_date.valueOf(),d.start_date.valueOf()))),c.end_date&&(h=new Date(Math.min(c.end_date.valueOf(),d.end_date.valueOf()))),c.mode&&"fixedDates"==c.mode&&(u=c.start_date,h=c.end_date));let _=at(n.trace_x,u.valueOf()),f=new Date(n.trace_x[_]||t.date[a+"_start"](new Date(u))),g=new Date(Math.min(u.valueOf(),f.valueOf())),p=t.config.work_time?t.getTaskCalendar(d):t;for(o[p.id]={};g<h;){const e=o[p.id],n=g.valueOf();g=t.date.add(g,r,a),!1!==e[n]&&(s[n]||(s[n]={tasks:[],assignments:[]}),s[n].tasks.push(d),i&&s[n].assignments.push(c))}}return s}(r,i,s);const l=i.unit,c=i.step,d=[];let u,h,_,f,g;const p=a.$getConfig();for(let m=0;m<i.trace_x.length;m++)u=new Date(i.trace_x[m]),h=t.date.add(u,c,l),g=o[u.valueOf()]||{},_=g.tasks||[],f=g.assignments||[],_.length||p.resource_render_empty_cells?d.push({start_date:u,end_date:h,tasks:_,assignments:f}):d.push(null);return d}(n,i,a,r),o}}const Mi={init:function(t,e){var n=t.$services.getService("dnd");if(e.$config.bind&&t.getDatastore(e.$config.bind)){var i=new n(e.$grid_data,{updates_per_second:60});t.defined(e.$getConfig().dnd_sensitivity)&&(i.config.sensitivity=e.$getConfig().dnd_sensitivity),i.attachEvent("onBeforeDragStart",t.bind((function(n,o){var l=a(o);if(!l||(t.hideQuickInfo&&t.hideQuickInfo(),R(o.target,".gantt_grid_editor_placeholder")))return!1;var c=l.getAttribute(e.$config.item_attribute);if(s(c))return!1;var d=r().getItem(c);return!t.isReadonly(d)&&(i.config.initial_open_state=d.$open,!!t.callEvent("onRowDragStart",[c,o.target||o.srcElement,o])&&void 0)}),t)),i.attachEvent("onAfterDragStart",t.bind((function(t,n){var s=a(n);i.config.marker.innerHTML=s.outerHTML;var o=i.config.marker.firstChild;o&&(o.style.position="static"),i.config.id=s.getAttribute(e.$config.item_attribute);var l=r(),c=l.getItem(i.config.id);i.config.index=l.getBranchIndex(i.config.id),i.config.parent=c.parent,c.$open=!1,c.$transparent=!0,this.refreshData()}),t)),i.lastTaskOfLevel=function(t){for(var e=null,n=r().getItems(),i=0,a=n.length;i<a;i++)n[i].$level==t&&(e=n[i]);return e?e.id:null},i._getGridPos=t.bind((function(t){var n=g(e.$grid_data),a=n.x+e.$grid.scrollLeft,r=t.pos.y-10,s=e.getItemHeight(i.config.id);r<n.y&&(r=n.y);var o=e.getTotalHeight();r>n.y+o-s&&(r=n.y+o-s);const l=n.y+n.height;return r>l-s&&(r=l-s),n.x=a,n.y=r,n}),t),i._getTargetY=t.bind((function(n){var i=g(e.$grid_data),a=e.$state.scrollTop||0,r=t.$grid_data.getBoundingClientRect().height+a,s=n.pageY-i.y+a;return s>r?s=r:s<a&&(s=a),s}),t),i._getTaskByY=t.bind((function(t,n){var i=r();t=t||0;var a=e.getItemIndexByTopPosition(t);return(a=n<a?a-1:a)>i.countVisible()-1?null:i.getIdByIndex(a)}),t),i.attachEvent("onDragMove",t.bind((function(n,a){var o=t.$grid_data.getBoundingClientRect(),l=o.height+o.y+(e.$state.scrollTop||0)+window.scrollY,c=i.config,d=i._getGridPos(a);t._waiAria.reorderMarkerAttr(c.marker);var u=e.$getConfig(),h=r();d.y<l?c.marker.style.top=d.y+"px":c.marker.style.top=l+"px",c.marker.style.left=d.x+10+"px";const _=g(t.$root);d.width>_.width&&(c.marker.style.width=_.width-10-2+"px",c.marker.style.overflow="hidden");var f=h.getItem(i.config.id),p=i._getTargetY(a),m=i._getTaskByY(p,h.getIndexById(f.id));function v(t,e){return!h.isChildOf(k.id,e.id)&&(t.$level==e.$level||u.order_branch_free)}if(h.exists(m)||(m=i.lastTaskOfLevel(u.order_branch_free?f.$level:0))==i.config.id&&(m=null),h.exists(m)){var k=h.getItem(m),y=e.getItemTop(k.id),b=e.getItemHeight(k.id);if(y+b/2<p){var x=h.getIndexById(k.id),$=h.getNext(k.id),w=h.getItem($);if(s($)){var S=h.getPrev(w.id);w=h.getItem(S)}if(w){if(w.id==f.id)return u.order_branch_free&&h.isChildOf(f.id,k.id)&&1==h.getChildren(k.id).length?void h.move(f.id,h.getBranchIndex(k.id)+1,h.getParent(k.id)):void 0;k=w}else if($=h.getIdByIndex(x),w=h.getItem($),s($)&&(S=h.getPrev(w.id),w=h.getItem(S)),v(w,f)&&w.id!=f.id)return void h.move(f.id,-1,h.getParent(w.id))}else if(u.order_branch_free&&k.id!=f.id&&v(k,f)&&!s(k.id)){if(!h.hasChild(k.id))return k.$open=!0,void h.move(f.id,-1,k.id);if(h.getIndexById(k.id)||b/3<p)return}x=h.getIndexById(k.id),S=h.getIdByIndex(x-1);for(var T=h.getItem(S),E=1;(!T||T.id==k.id)&&x-E>=0;)S=h.getIdByIndex(x-E),T=h.getItem(S),E++;if(f.id==k.id||s(k.id))return;v(k,f)&&f.id!=k.id?h.move(f.id,0,0,k.id):k.$level!=f.$level-1||h.getChildren(k.id).length?T&&v(T,f)&&f.id!=T.id&&h.move(f.id,-1,h.getParent(T.id)):h.move(f.id,0,k.id)}return!0}),t)),i.attachEvent("onDragEnd",t.bind((function(){var e=r(),n=e.getItem(i.config.id);n.$transparent=!1,n.$open=i.config.initial_open_state,!1===this.callEvent("onBeforeRowDragEnd",[i.config.id,i.config.parent,i.config.index])?(e.move(i.config.id,i.config.index,i.config.parent),n.$drop_target=null):this.callEvent("onRowDragEnd",[i.config.id,n.$drop_target]),t.render(),this.refreshData()}),t))}function a(t){return A(t,e.$config.item_attribute)}function r(){return t.getDatastore(e.$config.bind)}function s(e){return Ft(e,t,r())}}},Ni={createDropTargetObject:function(t){var e={targetParent:null,targetIndex:0,targetId:null,child:!1,nextSibling:!1,prevSibling:!1};return t&&ht(e,t,!0),e},nextSiblingTarget:function(t,e,n){var i=this.createDropTargetObject();return i.targetId=e,i.nextSibling=!0,i.targetParent=n.getParent(i.targetId),i.targetIndex=n.getBranchIndex(i.targetId),(n.getParent(t)!=i.targetParent||i.targetIndex<n.getBranchIndex(t))&&(i.targetIndex+=1),i},prevSiblingTarget:function(t,e,n){var i=this.createDropTargetObject();return i.targetId=e,i.prevSibling=!0,i.targetParent=n.getParent(i.targetId),i.targetIndex=n.getBranchIndex(i.targetId),n.getParent(t)==i.targetParent&&i.targetIndex>n.getBranchIndex(t)&&(i.targetIndex-=1),i},firstChildTarget:function(t,e,n){var i=this.createDropTargetObject();return i.targetId=e,i.targetParent=i.targetId,i.targetIndex=0,i.child=!0,i},lastChildTarget:function(t,e,n){var i=n.getChildren(e),a=this.createDropTargetObject();return a.targetId=i[i.length-1],a.targetParent=e,a.targetIndex=i.length,a.nextSibling=!0,a}};function Li(t,e,n,i,a){for(var r=e;i.exists(r);){var s=i.calculateItemLevel(i.getItem(r));if((s===n||s===n-1)&&i.getBranchIndex(r)>-1)break;r=a?i.getPrev(r):i.getNext(r)}return i.exists(r)?i.calculateItemLevel(i.getItem(r))===n?a?Ni.nextSiblingTarget(t,r,i):Ni.prevSiblingTarget(t,r,i):Ni.firstChildTarget(t,r,i):null}function Pi(t,e,n,i){return Li(t,e,n,i,!0)}function Ri(t,e,n,i){return Li(t,e,n,i,!1)}function Oi(t,e,n,i,a,r){var s;if(e!==a.$getRootId()){var o=a.getItem(e),l=a.calculateItemLevel(o);if(l===r){var c=a.getPrevSibling(e);n<.5&&!c?s=Ni.prevSiblingTarget(t,e,a):(n<.5&&(e=c),s=Ni.nextSiblingTarget(t,e,a))}else if(l>r)a.eachParent((function(t){a.calculateItemLevel(t)===r&&(e=t.id)}),o),s=Pi(t,e,r,a);else{var d=Pi(t,e,r,a),u=Ri(t,e,r,a);s=n<.5?d:u}}else{var h=a.$getRootId(),_=a.getChildren(h);s=Ni.createDropTargetObject(),s=_.length&&i>=0?Pi(t,function(t){for(var e=t.getNext();t.exists(e);){var n=t.getNext(e);if(!t.exists(n))return e;e=n}return null}(a),r,a):Ri(t,h,r,a)}return s}function Hi(t,e){var n=g(e.$grid_data);return t.x+=n.x+e.$grid.scrollLeft,t.y+=n.y-e.$grid_data.scrollTop,t}function Bi(t,e,n=0){const i=g(t.$root);return e>i.width&&(e=i.width-n-2),e}const zi={removeLineHighlight:function(t){t.markerLine&&t.markerLine.parentNode&&t.markerLine.parentNode.removeChild(t.markerLine),t.markerLine=null},highlightPosition:function(t,e,n){var i=function(t,e){var n=g(e.$grid_data),i=N(t,e.$grid_data),a=n.x+e.$grid.scrollLeft,r=i.y-10,s=e.getItemHeight(t.targetId);r<n.y&&(r=n.y);var o=e.getTotalHeight();return r>n.y+o-s&&(r=n.y+o-s),n.x=a,n.y=r,n.width=Bi(e.$gantt,n.width,9),n}(t,n);e.marker.style.left=i.x+9+"px",e.marker.style.width=i.width+"px",e.marker.style.overflow="hidden";var a=e.markerLine;a||((a=document.createElement("div")).className="gantt_drag_marker gantt_grid_dnd_marker",a.innerHTML="<div class='gantt_grid_dnd_marker_line'></div>",a.style.pointerEvents="none"),t.child?function(t,e,n){var i=t.targetParent,a=Hi({x:0,y:n.getItemTop(i)},n),r=n.$grid_data.getBoundingClientRect().bottom+window.scrollY;let s=Bi(n.$gantt,n.$grid_data.offsetWidth);e.innerHTML="<div class='gantt_grid_dnd_marker_folder'></div>",e.style.width=s+"px",e.style.top=a.y+"px",e.style.left=a.x+"px",e.style.height=n.getItemHeight(i)+"px",a.y>r&&(e.style.top=r+"px")}(t,a,n):function(t,e,n){var i=function(t,e){var n=e.$config.rowStore,i={x:0,y:0},a=e.$grid_data.querySelector(".gantt_tree_indent"),r=15,s=0;a&&(r=a.offsetWidth);var o=40;if(t.targetId!==n.$getRootId()){var l=e.getItemTop(t.targetId),c=e.getItemHeight(t.targetId);if(s=n.exists(t.targetId)?n.calculateItemLevel(n.getItem(t.targetId)):0,t.prevSibling)i.y=l;else if(t.nextSibling){var d=0;n.eachItem((function(t){-1!==n.getIndexById(t.id)&&d++}),t.targetId),i.y=l+c+d*c}else i.y=l+c,s+=1}return i.x=o+s*r,i.width=Bi(e.$gantt,Math.max(e.$grid_data.offsetWidth-i.x,0),i.x),Hi(i,e)}(t,n),a=n.$grid_data.getBoundingClientRect().bottom+window.scrollY;e.innerHTML="<div class='gantt_grid_dnd_marker_line'></div>",e.style.left=i.x+"px",e.style.height="4px";var r=i.y-2;e.style.top=r+"px",e.style.width=i.width+"px",r>a&&(e.style.top=a+"px")}(t,a,n),e.markerLine||(document.body.appendChild(a),e.markerLine=a)}},ji={init:function(t,e){var n=t.$services.getService("dnd");if(e.$config.bind&&t.getDatastore(e.$config.bind)){var i=new n(e.$grid_data,{updates_per_second:60});t.defined(e.$getConfig().dnd_sensitivity)&&(i.config.sensitivity=e.$getConfig().dnd_sensitivity),i.attachEvent("onBeforeDragStart",t.bind((function(n,s){var o=a(s);if(!o||(t.hideQuickInfo&&t.hideQuickInfo(),R(s.target,".gantt_grid_editor_placeholder")))return!1;var l=o.getAttribute(e.$config.item_attribute),c=e.$config.rowStore.getItem(l);return!t.isReadonly(c)&&!r(l)&&(i.config.initial_open_state=c.$open,!!t.callEvent("onRowDragStart",[l,s.target||s.srcElement,s])&&void 0)}),t)),i.attachEvent("onAfterDragStart",t.bind((function(t,n){var r=a(n);i.config.marker.innerHTML=r.outerHTML;var s=i.config.marker.firstChild;s&&(i.config.marker.style.opacity=.4,s.style.position="static",s.style.pointerEvents="none"),i.config.id=r.getAttribute(e.$config.item_attribute);var o=e.$config.rowStore,l=o.getItem(i.config.id);i.config.level=o.calculateItemLevel(l),i.config.drop_target=Ni.createDropTargetObject({targetParent:o.getParent(l.id),targetIndex:o.getBranchIndex(l.id),targetId:l.id,nextSibling:!0}),l.$open=!1,l.$transparent=!0,this.refreshData()}),t)),i.attachEvent("onDragMove",t.bind((function(n,a){var r=s(a);return r&&!1!==t.callEvent("onBeforeRowDragMove",[i.config.id,r.targetParent,r.targetIndex])||(r=Ni.createDropTargetObject(i.config.drop_target)),zi.highlightPosition(r,i.config,e),i.config.drop_target=r,t._waiAria.reorderMarkerAttr(i.config.marker),this.callEvent("onRowDragMove",[i.config.id,r.targetParent,r.targetIndex]),!0}),t)),i.attachEvent("onDragEnd",t.bind((function(){var n=e.$config.rowStore,a=n.getItem(i.config.id);zi.removeLineHighlight(i.config),a.$transparent=!1,a.$open=i.config.initial_open_state;var r=i.config.drop_target;!1===this.callEvent("onBeforeRowDragEnd",[i.config.id,r.targetParent,r.targetIndex])?a.$drop_target=null:(n.move(i.config.id,r.targetIndex,r.targetParent),t.render(),this.callEvent("onRowDragEnd",[i.config.id,r.targetParent,r.targetIndex])),n.refresh(a.id)}),t))}function a(t){return A(t,e.$config.item_attribute)}function r(n){return Ft(n,t,t.getDatastore(e.$config.bind))}function s(n){var a,s=function(n){var a=N(n,e.$grid_data).y,s=e.$config.rowStore;document.doctype||(a+=window.scrollY),a=a||0;var o=e.$state.scrollTop||0,l=t.$grid_data.getBoundingClientRect().height+o+window.scrollY,c=o,d=e.getItemIndexByTopPosition(e.$state.scrollTop);if(s.exists(d)||(d=s.countVisible()-1),d<0)return s.$getRootId();var u=s.getIdByIndex(d),h=e.$state.scrollTop/e.getItemHeight(u),_=h-Math.floor(h);_>.1&&_<.9&&(l-=e.getItemHeight(u)*_,c+=e.getItemHeight(u)*(1-_));const f=g(e.$grid_data),p=f.y+f.height,m=i.config.marker.offsetHeight;a+m+window.scrollY>=l&&(i.config.marker.style.top=p-m+"px"),a>=l?a=l:a<=c&&(a=c,i.config.marker.style.top=f.y+"px");var v=e.getItemIndexByTopPosition(a);if(v>s.countVisible()-1||v<0)return s.$getRootId();var k=s.getIdByIndex(v);return r(k)?s.getPrevSibling(k):s.getIdByIndex(v)}(n),o=null,l=e.$config.rowStore,c=!e.$getConfig().order_branch_free,d=N(n,e.$grid_data).y;return document.doctype||(d+=window.scrollY),s!==l.$getRootId()&&(o=(d-e.getItemTop(s))/e.getItemHeight(s)),c?(a=Oi(i.config.id,s,o,d,l,i.config.level))&&a.targetParent&&r(a.targetParent)&&(s=l.getPrevSibling(a.targetParent),a=Oi(i.config.id,s,o,d,l,i.config.level)):a=function(t,e,n,i,a){var r;if(e!==a.$getRootId())r=n<.25?Ni.prevSiblingTarget(t,e,a):!(n>.6)||a.hasChild(e)&&a.getItem(e).$open?Ni.firstChildTarget(t,e,a):Ni.nextSiblingTarget(t,e,a);else{var s=a.$getRootId();r=a.hasChild(s)&&i>=0?Ni.lastChildTarget(t,s,a):Ni.firstChildTarget(t,s,a)}return r}(i.config.id,s,o,d,l),a}}};var Wi=function(t){return{onCreated:function(e){e.$config=ht(e.$config,{bind:"task"}),"grid"==e.$config.id&&(this.extendGantt(e),t.ext.inlineEditors=t.ext._inlineEditors.createEditors(e),t.ext.inlineEditors.init()),this._mouseDelegates=oi(t)},onInitialized:function(e){var n=e.$getConfig();n.order_branch&&("marker"==n.order_branch?ji.init(e.$gantt,e):Mi.init(e.$gantt,e)),this.initEvents(e,t),"grid"==e.$config.id&&this.extendDom(e)},onDestroyed:function(e){"grid"==e.$config.id&&t.ext.inlineEditors.detachStore(),this.clearEvents(e,t)},initEvents:function(t,e){this._mouseDelegates.delegate("click","gantt_row",e.bind((function(n,i,a){var r=t.$getConfig();if(null!==i){var s=this.getTask(i);r.scroll_on_click&&!e._is_icon_open_click(n)&&this.showDate(s.start_date),e.callEvent("onTaskRowClick",[i,a])}}),e),t.$grid),this._mouseDelegates.delegate("click","gantt_grid_head_cell",e.bind((function(n,i,a){var r=a.getAttribute("data-column-id");if(e.callEvent("onGridHeaderClick",[r,n])){var s=t.$getConfig();if("add"!=r){if(s.sort&&r){for(var o,l=r,c=0;c<s.columns.length;c++)if(s.columns[c].name==r){o=s.columns[c];break}if(o&&void 0!==o.sort&&!0!==o.sort&&!(l=o.sort))return;var d=this._sort&&this._sort.direction&&this._sort.name==r?this._sort.direction:"desc";d="desc"==d?"asc":"desc",this._sort={name:r,direction:d},this.sort(l,"desc"==d)}}else e.$services.getService("mouseEvents").callHandler("click","gantt_add",t.$grid,[n,s.root_id])}}),e),t.$grid),this._mouseDelegates.delegate("click","gantt_add",e.bind((function(n,i,a){if(!t.$getConfig().readonly)return this.createTask({},i||e.config.root_id),!1}),e),t.$grid)},clearEvents:function(t,e){this._mouseDelegates.destructor(),this._mouseDelegates=null},extendDom:function(e){t.$grid=e.$grid,t.$grid_scale=e.$grid_scale,t.$grid_data=e.$grid_data},extendGantt:function(e){t.getGridColumns=t.bind(e.getGridColumns,e),e.attachEvent("onColumnResizeStart",(function(){return t.callEvent("onColumnResizeStart",arguments)})),e.attachEvent("onColumnResize",(function(){return t.callEvent("onColumnResize",arguments)})),e.attachEvent("onColumnResizeEnd",(function(){return t.callEvent("onColumnResizeEnd",arguments)})),e.attachEvent("onColumnResizeComplete",(function(e,n){t.config.grid_width=n})),e.attachEvent("onBeforeRowResize",(function(){return t.callEvent("onBeforeRowResize",arguments)})),e.attachEvent("onRowResize",(function(){return t.callEvent("onRowResize",arguments)})),e.attachEvent("onBeforeRowResizeEnd",(function(){return t.callEvent("onBeforeRowResizeEnd",arguments)})),e.attachEvent("onAfterRowResize",(function(){return t.callEvent("onAfterRowResize",arguments)}))}}};const Fi={createTaskDND:function(){var t;return{extend:function(e){e.roundTaskDates=function(e){t.round_task_dates(e)}},init:function(e,n){return t=function(t,e){var n=e.$services;return{drag:null,dragMultiple:{},_events:{before_start:{},before_finish:{},after_finish:{}},_handlers:{},init:function(){this._domEvents=e._createDomEventScope(),this.clear_drag_state();var t=e.config.drag_mode;this.set_actions(),n.getService("state").registerProvider("tasksDnd",gt((function(){return{drag_id:this.drag?this.drag.id:void 0,drag_mode:this.drag?this.drag.mode:void 0,drag_from_start:this.drag?this.drag.left:void 0}}),this));var i={before_start:"onBeforeTaskDrag",before_finish:"onBeforeTaskChanged",after_finish:"onAfterTaskDrag"};for(var a in this._events)for(var r in t)this._events[a][r]=i[a];this._handlers[t.move]=this._move,this._handlers[t.resize]=this._resize,this._handlers[t.progress]=this._resize_progress},set_actions:function(){var n=t.$task_data;this._domEvents.attach(n,"mousemove",e.bind((function(t){this.on_mouse_move(t)}),this)),this._domEvents.attach(n,"mousedown",e.bind((function(t){this.on_mouse_down(t)}),this)),this._domEvents.attach(document.body,"mouseup",e.bind((function(t){this.on_mouse_up(t)}),this))},clear_drag_state:function(){this.drag={id:null,mode:null,pos:null,start_x:null,start_y:null,obj:null,left:null},this.dragMultiple={}},_resize:function(n,i,a){var r=t.$getConfig(),s=this._drag_task_coords(n,a);a.left?(n.start_date=e.dateFromPos(s.start+i),n.start_date||(n.start_date=new Date(e.getState().min_date))):(n.end_date=e.dateFromPos(s.end+i),n.end_date||(n.end_date=new Date(e.getState().max_date)));var o=this._calculateMinDuration(r.min_duration,r.duration_unit);n.end_date-n.start_date<r.min_duration&&(a.left?n.start_date=e.calculateEndDate(n.end_date,-o,r.duration_unit,n):n.end_date=e.calculateEndDate(n.start_date,o,r.duration_unit,n)),e._init_task_timing(n)},_calculateMinDuration:function(t,e){return Math.ceil(t/{minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:31356e6}[e])},_resize_progress:function(e,n,i){var a=this._drag_task_coords(e,i),r=t.$getConfig().rtl?a.start-i.pos.x:i.pos.x-a.start,s=Math.max(0,r);e.progress=Math.min(1,s/Math.abs(a.end-a.start))},_find_max_shift:function(t,n){var i;for(var a in t){var r=t[a],s=e.getTask(r.id),o=this._drag_task_coords(s,r),l=e.posFromDate(new Date(e.getState().min_date)),c=e.posFromDate(new Date(e.getState().max_date));if(o.end+n>c){var d=c-o.end;(d<i||void 0===i)&&(i=d)}else if(o.start+n<l){var u=l-o.start;(u>i||void 0===i)&&(i=u)}}return i},_move:function(t,n,i,a){var r=this._drag_task_coords(t,i),s=null,o=null;a?(s=new Date(+i.obj.start_date+a),o=new Date(+i.obj.end_date+a)):(s=e.dateFromPos(r.start+n),o=e.dateFromPos(r.end+n)),s?o?(t.start_date=s,t.end_date=o):(t.end_date=new Date(e.getState().max_date),t.start_date=e.dateFromPos(e.posFromDate(t.end_date)-(r.end-r.start))):(t.start_date=new Date(e.getState().min_date),t.end_date=e.dateFromPos(e.posFromDate(t.start_date)+(r.end-r.start)))},_drag_task_coords:function(t,n){return{start:n.obj_s_x=n.obj_s_x||e.posFromDate(t.start_date),end:n.obj_e_x=n.obj_e_x||e.posFromDate(t.end_date)}},_mouse_position_change:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},_is_number:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},on_mouse_move:function(t){if(this.drag.start_drag){var n=N(t,e.$task_data),i=this.drag.start_drag.start_x,a=this.drag.start_drag.start_y;(Date.now()-this.drag.timestamp>50||this._is_number(i)&&this._is_number(a)&&this._mouse_position_change({x:i,y:a},n)>20)&&this._start_dnd(t)}if(this.drag.mode){if(!Bt(this,40))return;this._update_on_move(t)}},_update_item_on_move:function(t,n,i,a,r,s){var o=e.getTask(n),l=e.mixin({},o),c=e.mixin({},o);this._handlers[i].apply(this,[c,t,a,s]),e.mixin(o,c,!0),e.callEvent("onTaskDrag",[o.id,i,c,l,r]),e.mixin(o,c,!0),e.refreshTask(n)},_update_on_move:function(n){var i=this.drag,a=t.$getConfig();if(i.mode){var r=N(n,t.$task_data);if(i.pos&&i.pos.x==r.x)return;i.pos=r;var s=e.dateFromPos(r.x);if(!s||isNaN(s.getTime()))return;var o=r.x-i.start_x,l=e.getTask(i.id);if(this._handlers[i.mode]){if(i.mode===a.drag_mode.move){var c={};this._isMultiselect()&&e.getSelectedTasks().indexOf(i.id)>=0&&(c=this.dragMultiple);var d=!1;if(e.isSummaryTask(l)&&e.config.drag_project){var u={};u[i.id]=ut(i),d=!0,c=ht(u,this.dragMultiple)}var h=this._find_max_shift(c,o);for(var _ in void 0!==h&&(o=h),this._update_item_on_move(o,i.id,i.mode,i,n),c){var f=c[_];if(d&&f.id!=i.id&&(e._bulk_dnd=!0),void 0===h&&(d||Object.keys(c).length>1))var g=s-e.dateFromPos(i.start_x);this._update_item_on_move(o,f.id,f.mode,f,n,g)}e._bulk_dnd=!1}else this._update_item_on_move(o,i.id,i.mode,i,n);e._update_parents(i.id)}}},on_mouse_down:function(n,i){if(2!=n.button||void 0===n.button){var a=t.$getConfig(),r=e.locate(n),s=null;if(e.isTaskExists(r)&&(s=e.getTask(r)),!e.isReadonly(s)&&!this.drag.mode){this.clear_drag_state();var o=x(i=i||n.target||n.srcElement),l=this._get_drag_mode(o,i);if(!o||!l)return i.parentNode?this.on_mouse_down(n,i.parentNode):void 0;if(l)if(l.mode&&l.mode!=a.drag_mode.ignore&&a["drag_"+l.mode]){if(r=e.locate(i),s=e.copy(e.getTask(r)||{}),e.isReadonly(s))return this.clear_drag_state(),!1;if(e.isSummaryTask(s)&&!1!==s.auto_scheduling&&!a.drag_project&&l.mode!=a.drag_mode.progress)return void this.clear_drag_state();l.id=r;var c=N(n,e.$task_data);l.start_x=c.x,l.start_y=c.y,l.obj=s,this.drag.start_drag=l,this.drag.timestamp=Date.now()}else this.clear_drag_state();else if(e.checkEvent("onMouseDown")&&e.callEvent("onMouseDown",[o.split(" ")[0]])&&i.parentNode)return this.on_mouse_down(n,i.parentNode)}}},_fix_dnd_scale_time:function(n,i){var a=t.$getConfig(),r=e.getScale().unit,s=e.getScale().step;function o(n){if(e.config.correct_work_time){var i=t.$getConfig();e.isWorkTime(n.start_date,void 0,n)||(n.start_date=e.calculateEndDate({start_date:n.start_date,duration:-1,unit:i.duration_unit,task:n}))}}a.round_dnd_dates||(r="minute",s=a.time_step),i.mode==a.drag_mode.resize?i.left?(n.start_date=e.roundDate({date:n.start_date,unit:r,step:s}),o(n)):(n.end_date=e.roundDate({date:n.end_date,unit:r,step:s}),function(n){if(e.config.correct_work_time){var i=t.$getConfig();e.isWorkTime(new Date(n.end_date-1),void 0,n)||(n.end_date=e.calculateEndDate({start_date:n.end_date,duration:1,unit:i.duration_unit,task:n}))}}(n)):i.mode==a.drag_mode.move&&(n.start_date=e.roundDate({date:n.start_date,unit:r,step:s}),o(n),n.end_date=e.calculateEndDate(n))},_fix_working_times:function(n,i){var a=t.$getConfig();(i=i||{mode:a.drag_mode.move}).mode==a.drag_mode.resize?i.left?n.start_date=e.getClosestWorkTime({date:n.start_date,dir:"future",task:n}):n.end_date=e.getClosestWorkTime({date:n.end_date,dir:"past",task:n}):i.mode==a.drag_mode.move&&e.correctTaskWorkTime(n)},_finalize_mouse_up:function(t,n,i,a){var r=e.getTask(t);if(n.work_time&&n.correct_work_time&&this._fix_working_times(r,i),this._fix_dnd_scale_time(r,i),this._fireEvent("before_finish",i.mode,[t,i.mode,e.copy(i.obj),a])){var s=t;e._init_task_timing(r),this.clear_drag_state(),e.updateTask(r.id),this._fireEvent("after_finish",i.mode,[s,i.mode,a])}else this.clear_drag_state(),t==i.id&&(i.obj._dhx_changed=!1,e.mixin(r,i.obj,!0)),e.refreshTask(r.id)},on_mouse_up:function(n){var i=this.drag;if(i.mode&&i.id){var a=t.$getConfig(),r=e.getTask(i.id),s=this.dragMultiple,o=!1,l=0;i.mode===a.drag_mode.move&&(e.isSummaryTask(r)&&a.drag_project||this._isMultiselect())&&(o=!0,l=Object.keys(s).length);var c=function(){if(o)for(var t in s)s[t].id!=i.id&&this._finalize_mouse_up(s[t].id,a,s[t],n);this._finalize_mouse_up(i.id,a,i,n)};o&&l>10?e.batchUpdate(function(){c.call(this)}.bind(this)):c.call(this)}this.clear_drag_state()},_get_drag_mode:function(e,n){var i=t.$getConfig().drag_mode,a={mode:null,left:null};switch((e||"").split(" ")[0]){case"gantt_task_line":case"gantt_task_content":a.mode=i.move;break;case"gantt_task_drag":a.mode=i.resize;var r=n.getAttribute("data-bind-property");a.left="start_date"==r;break;case"gantt_task_progress_drag":a.mode=i.progress;break;case"gantt_link_control":case"gantt_link_point":a.mode=i.ignore;break;default:a=null}return a},_start_dnd:function(n){var i=this.drag=this.drag.start_drag;delete i.start_drag;var a=t.$getConfig(),r=i.id;if(a["drag_"+i.mode]&&e.callEvent("onBeforeDrag",[r,i.mode,n])&&this._fireEvent("before_start",i.mode,[r,i.mode,n])){delete i.start_drag;var s=e.getTask(r);if(e.isReadonly(s))return void this.clear_drag_state();if(this._isMultiselect()){var o=e.getSelectedTasks();o.indexOf(i.id)>=0&&J(o,e.bind((function(t){var n=e.getTask(t);e.isSummaryTask(n)&&e.config.drag_project&&i.mode==a.drag_mode.move&&this._addSubtasksToDragMultiple(n.id),this.dragMultiple[t]=e.mixin({id:n.id,obj:e.copy(n)},this.drag)}),this))}e.isSummaryTask(s)&&e.config.drag_project&&i.mode==a.drag_mode.move&&this._addSubtasksToDragMultiple(s.id),e.callEvent("onTaskDragStart",[])}else this.clear_drag_state()},_fireEvent:function(t,n,i){e.assert(this._events[t],"Invalid stage:{"+t+"}");var a=this._events[t][n];return e.assert(a,"Unknown after drop mode:{"+n+"}"),e.assert(i,"Invalid event arguments"),!e.checkEvent(a)||e.callEvent(a,i)},round_task_dates:function(e){var n=this.drag,i=t.$getConfig();n||(n={mode:i.drag_mode.move}),this._fix_dnd_scale_time(e,n)},destructor:function(){this._domEvents.detachAll()},_isMultiselect:function(){return e.config.drag_multiple&&!!(e.getSelectedTasks&&e.getSelectedTasks().length>0)},_addSubtasksToDragMultiple:function(t){e.eachTask((function(t){this.dragMultiple[t.id]=e.mixin({id:t.id,obj:e.copy(t)},this.drag)}),t,this)}}}(e,n),e._tasks_dnd=t,t.init(n)},destructor:function(){t&&(t.destructor(),t=null)}}}};var Vi=function(t,e){var n,i,a,r,s;function o(){return{link_source_id:r,link_target_id:i,link_from_start:s,link_to_start:a,link_landing_area:n}}var l=e.$services,c=l.getService("state"),d=l.getService("dnd");c.registerProvider("linksDnD",o);var u="gantt_link_point",h="gantt_link_control",_=new d(t.$task_bars,{sensitivity:0,updates_per_second:60,mousemoveContainer:e.$root,selector:"."+u,preventDefault:!0});function f(t,n){var i,a=_.getPosition(t),r=function(t){var e=0,n=0;return t&&(e=t.offsetWidth||0,n=t.offsetHeight||0),{width:e,height:n}}(n),s={right:(i=e.$root).offsetWidth,bottom:i.offsetHeight},o=e.config.tooltip_offset_x||10,l=e.config.tooltip_offset_y||10,c=e.config.scroll_size||18,d=e.$container.getBoundingClientRect().y+window.scrollY,u={y:a.y+l,x:a.x+o,bottom:a.y+r.height+l+c,right:a.x+r.width+o+c};return u.bottom>s.bottom+d&&(u.y=s.bottom+d-r.height-l),u.right>s.right&&(u.x=s.right-r.width-o),u}function g(t){var n=o();n.link_source_id&&n.link_target_id&&e.isLinkAllowed(n.link_source_id,n.link_target_id,n.link_from_start,n.link_to_start);var i="<div class='"+e.templates.drag_link_class(n.link_source_id,n.link_from_start,n.link_target_id,n.link_to_start)+"'>"+e.templates.drag_link(n.link_source_id,n.link_from_start,n.link_target_id,n.link_to_start)+"</div>";t.innerHTML=i}function p(){r=s=i=null,a=!0}function m(n,i,a,r){var s=function(){return _._direction&&_._direction.parentNode||(_._direction=document.createElement("div"),t.$task_links.appendChild(_._direction)),_._direction}(),l=o(),c=["gantt_link_direction"];e.templates.link_direction_class&&c.push(e.templates.link_direction_class(l.link_source_id,l.link_from_start,l.link_target_id,l.link_to_start));var d=Math.sqrt(Math.pow(a-n,2)+Math.pow(r-i,2));if(d=Math.max(0,d-3)){s.className=c.join(" ");var u=(r-i)/(a-n),h=Math.atan(u);2==v(n,a,i,r)?h+=Math.PI:3==v(n,a,i,r)&&(h-=Math.PI);var f=Math.sin(h),g=Math.cos(h),p=Math.round(i),m=Math.round(n),k=["-webkit-transform: rotate("+h+"rad)","-moz-transform: rotate("+h+"rad)","-ms-transform: rotate("+h+"rad)","-o-transform: rotate("+h+"rad)","transform: rotate("+h+"rad)","width:"+Math.round(d)+"px"];if(-1!=window.navigator.userAgent.indexOf("MSIE 8.0")){k.push('-ms-filter: "'+function(t,e){return"progid:DXImageTransform.Microsoft.Matrix(M11 = "+e+",M12 = -"+t+",M21 = "+t+",M22 = "+e+",SizingMethod = 'auto expand')"}(f,g)+'"');var y=Math.abs(Math.round(n-a)),b=Math.abs(Math.round(r-i));switch(v(n,a,i,r)){case 1:p-=b;break;case 2:m-=y,p-=b;break;case 3:m-=y}}k.push("top:"+p+"px"),k.push("left:"+m+"px"),s.style.cssText=k.join(";")}}function v(t,e,n,i){return e>=t?i<=n?1:4:i<=n?2:3}_.attachEvent("onBeforeDragStart",e.bind((function(t,n){var i=n.target||n.srcElement;if(p(),e.getState("tasksDnd").drag_id)return!1;if(M(i,u)){M(i,"task_start_date")&&(s=!0);var a=e.locate(n);r=a;var o=e.getTask(a);return e.isReadonly(o)?(p(),!1):(this._dir_start={x:_.config.original_element_sizes.x+_.config.original_element_sizes.width/2,y:_.config.original_element_sizes.y+_.config.original_element_sizes.height/2},!0)}return!1}),this)),_.attachEvent("onAfterDragStart",e.bind((function(t,n){e.config.touch&&e.refreshData(),g(_.config.marker)}),this)),_.attachEvent("onDragMove",e.bind((function(r,s){var o=_.config,l=f(s,o.marker);(function(t,e){t.style.left=e.x+"px",t.style.top=e.y+"px"})(o.marker,l);var c=!!M(s,h),d=i,p=n,v=a,k=e.locate(s),y=!0;if(P(D(s),e.$root)||(c=!1,k=null),c&&(y=!M(s,"task_end_date"),c=!!k),i=k,n=c,a=y,c){const e=M(s,h).querySelector(`.${u}`);if(e){const n=L(e,t.$task_bg);this._dir_end={x:n.x+e.offsetWidth/2,y:n.y+e.offsetHeight/2}}}else this._dir_end=N(s,t.$task_data),e.env.isEdge&&(this._dir_end.y+=window.scrollY);var b=!(p==c&&d==k&&v==y);return b&&(d&&e.refreshTask(d,!1),k&&e.refreshTask(k,!1)),b&&g(o.marker),m(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y),!0}),this)),_.attachEvent("onDragEnd",e.bind((function(){var t=o();if(t.link_source_id&&t.link_target_id&&t.link_source_id!=t.link_target_id){var n=e._get_link_type(t.link_from_start,t.link_to_start),i={source:t.link_source_id,target:t.link_target_id,type:n};i.type&&e.isLinkAllowed(i)&&e.callEvent("onLinkCreated",[i])&&e.addLink(i)}p(),e.config.touch?e.refreshData():(t.link_source_id&&e.refreshTask(t.link_source_id,!1),t.link_target_id&&e.refreshTask(t.link_target_id,!1)),_._direction&&(_._direction.parentNode&&_._direction.parentNode.removeChild(_._direction),_._direction=null)}),this)),e.attachEvent("onGanttRender",e.bind((function(){_._direction&&m(this._dir_start.x,this._dir_start.y,this._dir_end.x,this._dir_end.y)}),this))};const Ui=function(){return{init:Vi}};var qi=function(t){var e=t.$services;return{onCreated:function(e){var n=e.$config;n.bind=_t(n.bind)?n.bind:"task",n.bindLinks=_t(n.bindLinks)?n.bindLinks:"link",e._linksDnD=Ui(),e._tasksDnD=Fi.createTaskDND(),e._tasksDnD.extend(e),this._mouseDelegates=oi(t)},onInitialized:function(e){this._attachDomEvents(t),this._attachStateProvider(t,e),e._tasksDnD.init(e,t),e._linksDnD.init(e,t),"timeline"==e.$config.id&&this.extendDom(e)},onDestroyed:function(e){this._clearDomEvents(t),this._clearStateProvider(t),e._tasksDnD&&e._tasksDnD.destructor()},extendDom:function(e){t.$task=e.$task,t.$task_scale=e.$task_scale,t.$task_data=e.$task_data,t.$task_bg=e.$task_bg,t.$task_links=e.$task_links,t.$task_bars=e.$task_bars},_clearDomEvents:function(){this._mouseDelegates.destructor(),this._mouseDelegates=null},_attachDomEvents:function(t){function e(e,n){if(e&&this.callEvent("onLinkDblClick",[e,n])){var i=this.getLink(e);if(this.isReadonly(i))return;var a=this.locale.labels.link+" "+this.templates.link_description(this.getLink(e))+" "+this.locale.labels.confirm_link_deleting;window.setTimeout((function(){t._simple_confirm(a,"",(function(){t.deleteLink(e)}))}),this.config.touch?300:1)}}this._mouseDelegates.delegate("click","gantt_task_link",t.bind((function(t,e){var n=this.locate(t,this.config.link_attribute);n&&this.callEvent("onLinkClick",[n,t])}),t),this.$task),this._mouseDelegates.delegate("click","gantt_scale_cell",t.bind((function(e,n){var i=N(e,t.$task_data),a=t.dateFromPos(i.x),r=Math.floor(t.columnIndexByDate(a)),s=t.getScale().trace_x[r];t.callEvent("onScaleClick",[e,s])}),t),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_task_link",t.bind((function(n,i,a){i=this.locate(n,t.config.link_attribute),e.call(this,i,n)}),t),this.$task),this._mouseDelegates.delegate("doubleclick","gantt_link_point",t.bind((function(t,n,i){n=this.locate(t);var a=this.getTask(n),r=null;return i.parentNode&&x(i.parentNode)&&(r=x(i.parentNode).indexOf("_left")>-1?a.$target[0]:a.$source[0]),r&&e.call(this,r,t),!1}),t),this.$task)},_attachStateProvider:function(t,n){var i=n;e.getService("state").registerProvider("tasksTimeline",(function(){return{scale_unit:i._tasks?i._tasks.unit:void 0,scale_step:i._tasks?i._tasks.step:void 0}}))},_clearStateProvider:function(){e.getService("state").unregisterProvider("tasksTimeline")}}},Gi=function(t){return{getVerticalScrollbar:function(){return t.$ui.getView("scrollVer")},getHorizontalScrollbar:function(){return t.$ui.getView("scrollHor")},_legacyGridResizerClass:function(t){for(var e=t.getCellsByType("resizer"),n=0;n<e.length;n++){var i=e[n],a=!1,r=i.$parent.getPrevSibling(i.$id);if(r&&r.$config&&"grid"===r.$config.id)a=!0;else{var s=i.$parent.getNextSibling(i.$id);s&&s.$config&&"grid"===s.$config.id&&(a=!0)}a&&(i.$config.css=(i.$config.css?i.$config.css+" ":"")+"gantt_grid_resize_wrap")}},onCreated:function(e){var n=!0;this._legacyGridResizerClass(e),e.attachEvent("onBeforeResize",(function(){var i=t.$ui.getView("timeline");i&&(i.$config.hidden=i.$parent.$config.hidden=!t.config.show_chart);var a=t.$ui.getView("grid");if(a){var r=a._getColsTotalWidth(),s=!t.config.show_grid||!t.config.grid_width||0===r;if(n&&!s&&!1!==r&&(t.config.grid_width=r),a.$config.hidden=a.$parent.$config.hidden=s,!a.$config.hidden){var o=a._getGridWidthLimits();if(o[0]&&t.config.grid_width<o[0]&&(t.config.grid_width=o[0]),o[1]&&t.config.grid_width>o[1]&&(t.config.grid_width=o[1]),i&&t.config.show_chart){if(a.$config.width=t.config.grid_width-1,!a.$config.scrollable&&a.$config.scrollY&&t.$root.offsetWidth){var l=a.$gantt.$layout.$container.offsetWidth,c=t.$ui.getView(a.$config.scrollY).$config.width,d=l-(a.$config.width+c)-4;d<0&&(a.$config.width+=d,t.config.grid_width+=d)}if(n)a.$parent.$config.width=t.config.grid_width,a.$parent.$config.group&&t.$layout._syncCellSizes(a.$parent.$config.group,{value:a.$parent.$config.width,isGravity:!1});else if(i&&!P(i.$task,e.$view)){if(!a.$config.original_grid_width){var u=t.skins[t.skin];u&&u.config&&u.config.grid_width?a.$config.original_grid_width=u.config.grid_width:a.$config.original_grid_width=0}t.config.grid_width=a.$config.original_grid_width,a.$parent.$config.width=t.config.grid_width}else a.$parent._setContentSize(a.$config.width,null),t.$layout._syncCellSizes(a.$parent.$config.group,{value:t.config.grid_width,isGravity:!1})}else i&&P(i.$task,e.$view)&&(a.$config.original_grid_width=t.config.grid_width),n||(a.$parent.$config.width=0)}n=!1}})),this._initScrollStateEvents(e)},_initScrollStateEvents:function(e){t._getVerticalScrollbar=this.getVerticalScrollbar,t._getHorizontalScrollbar=this.getHorizontalScrollbar;var n=this.getVerticalScrollbar(),i=this.getHorizontalScrollbar();n&&n.attachEvent("onScroll",(function(e,n,i){var a=t.getScrollState();t.callEvent("onGanttScroll",[a.x,e,a.x,n])})),i&&i.attachEvent("onScroll",(function(e,n,i){var a=t.getScrollState();t.callEvent("onGanttScroll",[e,a.y,n,a.y]);var r=t.$ui.getView("grid");r&&r.$grid_data&&!r.$config.scrollable&&(r.$grid_data.style.left=r.$grid.scrollLeft+"px",r.$grid_data.scrollLeft=r.$grid.scrollLeft)})),e.attachEvent("onResize",(function(){n&&!t.$scroll_ver&&(t.$scroll_ver=n.$scroll_ver),i&&!t.$scroll_hor&&(t.$scroll_hor=i.$scroll_hor)}))},_findGridResizer:function(t,e){for(var n,i=t.getCellsByType("resizer"),a=!0,r=0;r<i.length;r++){var s=i[r];s._getSiblings();var o=s._behind,l=s._front;if(o&&o.$content===e||o.isChild&&o.isChild(e)){n=s,a=!0;break}if(l&&l.$content===e||l.isChild&&l.isChild(e)){n=s,a=!1;break}}return{resizer:n,gridFirst:a}},onInitialized:function(e){var n=t.$ui.getView("grid"),i=this._findGridResizer(e,n);if(i.resizer){var a,r=i.gridFirst,s=i.resizer;if("x"!==s.$config.mode)return;s.attachEvent("onResizeStart",(function(e,n){var i=t.$ui.getView("grid"),s=i?i.$parent:null;if(s){var o=i._getGridWidthLimits();i.$config.scrollable||(s.$config.minWidth=o[0]),s.$config.maxWidth=o[1]}return a=r?e:n,t.callEvent("onGridResizeStart",[a])})),s.attachEvent("onResize",(function(e,n){var i=r?e:n;return t.callEvent("onGridResize",[a,i])})),s.attachEvent("onResizeEnd",(function(e,n,i,a){var s=r?e:n,o=r?i:a,l=t.$ui.getView("grid"),c=l?l.$parent:null;c&&(c.$config.minWidth=void 0);var d=t.callEvent("onGridResizeEnd",[s,o]);return d&&0!==o&&(t.config.grid_width=o),d}))}},onDestroyed:function(t){}}};const Yi={init:function(t){function e(e,n){var i=n(t);i.onCreated&&i.onCreated(e),e.attachEvent("onReady",(function(){i.onInitialized&&i.onInitialized(e)})),e.attachEvent("onDestroy",(function(){i.onDestroyed&&i.onDestroyed(e)}))}var n=Rn(t);n.registerView("cell",Jn),n.registerView("resizer",null),n.registerView("scrollbar",ti),n.registerView("layout",Xn,(function(t){"main"===(t.$config?t.$config.id:null)&&e(t,Gi)})),n.registerView("viewcell",Qn),n.registerView("multiview",Zn),n.registerView("timeline",ii,(function(t){"timeline"!==(t.$config?t.$config.id:null)&&"task"!=t.$config.bind||e(t,qi)})),n.registerView("grid",li,(function(t){"grid"!==(t.$config?t.$config.id:null)&&"task"!=t.$config.bind||e(t,Wi)})),n.registerView("resourceGrid",li),n.registerView("resourceTimeline",ii),n.registerView("resourceHistogram",ii);var i=function(t){var e=Fn(t);return{getDataRender:function(e){return t.$services.getService("layer:"+e)||null},createDataRender:function(n){var i=n.name,a=n.defaultContainer,r=n.defaultContainerSibling,s=e.createGroup(a,r,(function(t,e){if(!s.filters)return!0;for(var n=0;n<s.filters.length;n++)if(!1===s.filters[n](t,e))return!1}),Yn);return t.$services.setService("layer:"+i,(function(){return s})),t.attachEvent("onGanttReady",(function(){s.addLayer()})),s},init:function(){var e=this.createDataRender({name:"task",defaultContainer:function(){return t.$task_data?t.$task_data:t.$ui.getView("timeline")?t.$ui.getView("timeline").$task_data:void 0},defaultContainerSibling:function(){return t.$task_links?t.$task_links:t.$ui.getView("timeline")?t.$ui.getView("timeline").$task_links:void 0},filter:function(t){}},t),n=this.createDataRender({name:"link",defaultContainer:function(){return t.$task_data?t.$task_data:t.$ui.getView("timeline")?t.$ui.getView("timeline").$task_data:void 0}},t);return{addTaskLayer:function(t){const n=Wn;return"function"==typeof t?t={renderer:{render:t,getVisibleRange:n}}:t.renderer&&!t.renderer.getVisibleRange&&(t.renderer.getVisibleRange=n),t.view="timeline",e.addLayer(t)},_getTaskLayers:function(){return e.getLayers()},removeTaskLayer:function(t){e.removeLayer(t)},_clearTaskLayers:function(){e.clear()},addLinkLayer:function(t){const e=qn();return"function"==typeof t?t={renderer:{render:t,getVisibleRange:e}}:t.renderer&&!t.renderer.getVisibleRange&&(t.renderer.getVisibleRange=e),t.view="timeline",t&&t.renderer&&(t.renderer.getRectangle||t.renderer.isInViewPort||(t.renderer.isInViewPort=Gn)),n.addLayer(t)},_getLinkLayers:function(){return n.getLayers()},removeLinkLayer:function(t){n.removeLayer(t)},_clearLinkLayers:function(){n.clear()}}}}}(t),a=yi(t);return t.ext.inlineEditors=a,t.ext._inlineEditors=a,a.init(t),{factory:n,mouseEvents:Hn.init(t),layersApi:i.init(),render:{gridLine:function(){return function(t){return{render:function(e,n,i,a){for(var r=n.getGridColumns(),s=n.$getTemplates(),o=n.$config.rowStore,l=[],c=0;c<r.length;c++){var d,u,h,_=c==r.length-1,f=r[c];"add"==f.name?(u="<div "+(y=t._waiAria.gridAddButtonAttrString(f))+" class='gantt_add'></div>",h=""):(Q(u=f.template?f.template(e):e[f.name])&&(u=s.date_grid(u,e,f.name)),null==u&&(u=""),h=u,u="<div class='gantt_tree_content'>"+u+"</div>");var g="gantt_cell"+(_?" gantt_last_cell":""),p=[];if(f.tree){g+=" gantt_cell_tree";for(var m=0;m<e.$level;m++)p.push(s.grid_indent(e));!o.hasChild(e.id)||t.isSplitTask(e)&&!t.config.open_split_tasks?(p.push(s.grid_blank(e)),p.push(s.grid_file(e))):(p.push(s.grid_open(e)),p.push(s.grid_folder(e)))}var v="width:"+(f.width-(_?1:0))+"px;";if(this.defined(f.align)){var k={right:"flex-end",left:"flex-start",center:"center"}[f.align];v+="text-align:"+f.align+";justify-content:"+k+";"}var y=t._waiAria.gridCellAttrString(f,h,e);p.push(u),d="<div class='"+g+"' data-column-index='"+c+"' data-column-name='"+f.name+"' style='"+v+"' "+y+">"+p.join("")+"</div>",l.push(d)}switch(g="",o.$config.name){case"task":g=t.getGlobalTaskIndex(e.id)%2==0?"":" odd";break;case"resource":g=o.visibleOrder.indexOf(e.id)%2==0?"":" odd"}if(g+=e.$transparent?" gantt_transparent":"",g+=e.$dataprocessor_class?" "+e.$dataprocessor_class:"",s.grid_row_class){var b=s.grid_row_class.call(t,e.start_date,e.end_date,e);b&&(g+=" "+b)}o.isSelected(e.id)&&(g+=" gantt_selected");var x=document.createElement("div");x.className="gantt_row"+g+" gantt_row_"+t.getTaskType(e.type);var $=n.getItemHeight(e.id);return x.style.height=$+"px",x.style.lineHeight=$+"px",i.smart_rendering&&(x.style.position="absolute",x.style.left="0px",x.style.top=n.getItemTop(e.id)+"px"),n.$config.item_attribute&&(x.setAttribute(n.$config.item_attribute,e.id),x.setAttribute(n.$config.bind+"_id",e.id)),t._waiAria.taskRowAttr(e,x),x.innerHTML=l.join(""),x},update:null,getRectangle:jn,isInViewPort:Ai,getVisibleRange:Wn,onrender:function(e,n,i){for(var a=i.getGridColumns(),r=0;r<a.length;r++){var s=a[r];if(s.onrender){var o=n.querySelector("[data-column-name="+s.name+"]");if(o){var l=s.onrender(e,o);if(l&&"string"==typeof l)o.innerHTML=l;else if(l&&"object"==typeof l&&t.config.external_render){var c=t.config.external_render;c.isElement(l)&&c.renderElement(l,o)}}}}}}}(t)},taskBg:function(){return function(t){var e={},n={};function i(t,n){return!(!e[t.id][n]||!e[t.id][n].parentNode)}function a(t,n){e[t]&&e[t][n]&&e[t][n].parentNode&&e[t][n].parentNode.removeChild(e[t][n])}function r(t){var e,n=t.$getTemplates();return void 0!==n.task_cell_class?(e=n.task_cell_class,(console.warn||console.log)("gantt.templates.task_cell_class template is deprecated and will be removed soon. Please use gantt.templates.timeline_cell_class instead.")):e=n.timeline_cell_class,e}function s(t){return t.$getTemplates().timeline_cell_content}function o(i,a,r,s,o,l,c,d){var u=i.width[a],h="";if(Ei(a,i,s,t)){var _=l(r,i.trace_x[a]),f="";if(c&&(f=c(r,i.trace_x[a])),d.static_background){var g=!(!_&&!f);if(!d.static_background_cells||!g)return null}if(e[r.id][a])return n[r.id][a]=a,e[r.id][a];var p=document.createElement("div");return p.style.width=u+"px",h="gantt_task_cell"+(a==o-1?" gantt_last_cell":""),_&&(h+=" "+_),p.className=h,f&&(p.innerHTML=f),p.style.position="absolute",p.style.left=i.left[a]+"px",e[r.id][a]=p,n[r.id][a]=a,p}return null}return{render:function(i,a,l,c){var d=a.$getTemplates(),u=a.getScale(),h=u.count;if(l.static_background&&!l.static_background_cells)return null;var _,f=document.createElement("div"),g=r(a),p=s(a);if(_=c&&l.smart_rendering&&!zn(t)?Ti(u,c.x):{start:0,end:h-1},l.show_task_cells){e[i.id]={},n[i.id]={};for(var m=_.start;m<=_.end;m++){var v=o(u,m,i,c,h,g,p,l);v&&f.appendChild(v)}}const k=a.$config.rowStore,y=k.getIndexById(i.id)%2!=0;var b=d.task_row_class(i.start_date,i.end_date,i),x="gantt_task_row"+(y?" odd":"")+(b?" "+b:"");if(k.isSelected(i.id)&&(x+=" gantt_selected"),f.className=x,l.smart_rendering?(f.style.position="absolute",f.style.top=a.getItemTop(i.id)+"px",f.style.width="100%"):f.style.position="relative",f.style.height=a.getItemHeight(i.id)+"px","timeline_placeholder_task"==i.id){var $=0;i.lastTaskId&&($=a.getItemTop(i.lastTaskId)+a.getItemHeight(i.lastTaskId));var w=(i.row_height||a.$task_data.offsetHeight)-$;w<0&&(w=0),l.smart_rendering&&(f.style.top=$+"px"),f.style.height=w+"px"}return a.$config.item_attribute&&(f.setAttribute(a.$config.item_attribute,i.id),f.setAttribute(a.$config.bind+"_id",i.id)),f},update:function(t,l,c,d,u){var h=c.getScale(),_=h.count,f=r(c),g=s(c);if(d.show_task_cells){e[t.id]||(e[t.id]={}),n[t.id]||(n[t.id]={});var p=Ti(h,u);for(var m in n[t.id]){var v=n[t.id][m];(Number(v)<p.start||Number(v)>p.end)&&a(t.id,v)}n[t.id]={};for(var k=p.start;k<=p.end;k++){var y=o(h,k,t,u,_,f,g,d);!y&&i(t,k)?a(t.id,k):y&&!y.parentNode&&l.appendChild(y)}}},getRectangle:Si,getVisibleRange:Wn,prepareData:Ci}}(t)},taskBar:function(){return $i(t)},timedProjectBar:function(){return $i(t)},taskRollupBar:function(){return function(t){const e=xi(t),n={};function i(t,e,n,i,a){let r=!0;return i.smart_rendering&&(r=bi(t,e,n)),r}function a(n,i,a,r){const s=t.copy(t.getTask(i.id));if(s.$rendered_at=n.id,!1===t.callEvent("onBeforeRollupTaskDisplay",[s.id,s,n.id]))return;const o=e(s,a);if(!o)return;const l=a.getBarHeight(n.id,i.type==t.config.types.milestone),c=Math.floor((a.getItemHeight(n.id)-l)/2);return o.style.top=r.top+c+"px",o.classList.add("gantt_rollup_child"),o.setAttribute("data-rollup-parent-id",n.id),o}function r(t,e){return t+"_"+e}return{render:function(e,s,o,l){if(!1!==e.rollup&&e.$rollup&&e.$rollup.length){const c=document.createElement("div"),d=t.getTaskPosition(e);return l&&(l.y=0,l.y_end=t.$task_bg.scrollHeight),e.$rollup.forEach((function(u){if(!t.isTaskExists(u))return;const h=t.getTask(u);if(!i(h,l,s,o))return;const _=a(e,h,s,d);_?(n[r(h.id,e.id)]=_,c.appendChild(_)):n[r(h.id,e.id)]=!1})),c}return!1},update:function(e,s,o,l,c){const d=document.createElement("div"),u=t.getTaskPosition(e);c.y=0,c.y_end=t.$task_bg.scrollHeight,e.$rollup.forEach((function(h){const _=t.getTask(h),f=r(_.id,e.id);let g=i(_,c,o,l);if(g!==!!n[f])if(g){const t=a(e,_,o,u);n[f]=t||!1}else n[f]=!1;n[f]&&d.appendChild(n[f]),s.innerHTML="",s.appendChild(d)}))},isInViewPort:bi,getVisibleRange:Wn}}(t)},taskSplitBar:function(){return wi()},taskConstraints:function(){return wi()},taskDeadline:function(){return wi()},taskBaselines:function(){return wi()},link:function(){return Di(t)},resourceRow:function(){return function(t){var e=Ii(t),n={};function i(t,e,n,i,a){var r=n.resource_cell_class(e.start_date,e.end_date,t,e.tasks,e.assignments),s=n.resource_cell_value(e.start_date,e.end_date,t,e.tasks,e.assignments),o=a.getItemHeight(t.id)-1;if(r||s){var l=a.getItemPosition(t,e.start_date,e.end_date),c=document.createElement("div");return c.setAttribute(a.$config.item_attribute,t.id),c.className=["gantt_resource_marker",r].join(" "),c.style.cssText=["left:"+l.left+"px","width:"+l.width+"px","height:"+o+"px","line-height:"+o+"px","top:"+l.top+"px"].join(";"),s&&(c.innerHTML=s),c}return null}function a(t,e){n[t]&&n[t][e]&&n[t][e].parentNode&&n[t][e].parentNode.removeChild(n[t][e])}return{render:function(a,r,s,o){var l=r.$getTemplates(),c=r.getScale(),d=e(a,s.resource_property,r.getScale(),r),u=!!o,h=[];n[a.id]={};for(var _=Ti(c,o),f=_.start;f<=_.end;f++){var g=d[f];if(g&&(!u||Ei(f,c,o,t))){var p=i(a,g,l,0,r);p&&(h.push(p),n[a.id][f]=p)}}var m=null;if(h.length){m=document.createElement("div");for(var v=0;v<h.length;v++)m.appendChild(h[v])}return m},update:function(r,s,o,l,c){var d=o.$getTemplates(),u=o.getScale(),h=e(r,l.resource_property,o.getScale(),o),_=Ti(u,c),f={};if(n&&n[r.id])for(var g in n[r.id])f[g]=g;for(var p=_.start;p<=_.end;p++){var m=h[p];if(f[p]=!1,m)if(Ei(p,u,c,t))if(n[r.id]&&n[r.id][p])n[r.id]&&n[r.id][p]&&!n[r.id][p].parentNode&&s.appendChild(n[r.id][p]);else{var v=i(r,m,d,0,o);v&&(s.appendChild(v),n[r.id][p]=v)}else a(r.id,p)}for(var g in f)!1!==f[g]&&a(r.id,g)},getRectangle:Si,getVisibleRange:Wn}}(t)},resourceHistogram:function(){return wi()},gridTaskRowResizer:function(){return function(t){return{render:function(e,n,i){var a=n.$getConfig(),r=document.createElement("div");return r.className="gantt_task_grid_row_resize_wrap",r.style.top=n.getItemTop(e.id)+n.getItemHeight(e.id)+"px",r.innerHTML="<div class='gantt_task_grid_row_resize' role='cell'></div>",r.setAttribute(a.task_grid_row_resizer_attribute,e.id),t._waiAria.rowResizerAttr(r),r},update:null,getRectangle:jn,getVisibleRange:Wn}}(t)}},layersService:{getDataRender:function(e){return i.getDataRender(e,t)},createDataRender:function(e){return i.createDataRender(e,t)}}}}};function Ji(t,e){const n=getComputedStyle(e.$root).getPropertyValue("--dhx-gantt-theme");let i,a=!!n;if(a)i=n;else{var r=e.skin;if(i=r,!r||t)for(var s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var l=s[o].href.match("dhtmlxgantt_([a-z_]+).css");if(l&&(e.skins[l[1]]||!r)){i=l[1];break}}}e._theme_info={theme:i,cssVarTheme:a},e.skin=i||"terrace";var c=e.skins[e.skin]||e.skins.terrace;(function(t,e,n){for(var i in e)(void 0===t[i]||n)&&(t[i]=e[i])})(e.config,c.config,t),a||(e.config.link_radius=1);var d=e.getGridColumns();for(d[1]&&!e.defined(d[1].width)&&(d[1].width=c._second_column_width),d[2]&&!e.defined(d[2].width)&&(d[2].width=c._third_column_width),o=0;o<d.length;o++){var u=d[o];"add"==u.name&&(u.width||(u.width=44),e.defined(u.min_width)&&e.defined(u.max_width)||(u.min_width=u.min_width||u.width,u.max_width=u.max_width||u.width),u.min_width&&(u.min_width=+u.min_width),u.max_width&&(u.max_width=+u.max_width),u.width&&(u.width=+u.width,u.width=u.min_width&&u.min_width>u.width?u.min_width:u.width,u.width=u.max_width&&u.max_width<u.width?u.max_width:u.width))}c.config.task_height&&(e.config.task_height=c.config.task_height||"full"),c.config.bar_height&&(e.config.bar_height=c.config.bar_height||"full"),c._lightbox_template&&(e._lightbox_template=c._lightbox_template),c._redefine_lightbox_buttons&&(e.config.buttons_right=c._redefine_lightbox_buttons.buttons_right,e.config.buttons_left=c._redefine_lightbox_buttons.buttons_left),e.resetLightbox()}function Ki(t){var e=50,n=30,i=10,a=50,r=null,s=!1,o=null,l={started:!1},c={};function d(e){return e&&P(e,t.$root)&&e.offsetHeight}function u(){var e=!!document.querySelector(".gantt_drag_marker"),n=!!document.querySelector(".gantt_drag_marker.gantt_grid_resize_area")||!!document.querySelector(".gantt_drag_marker.gantt_row_grid_resize_area"),i=!!document.querySelector(".gantt_link_direction"),a=t.getState(),r=a.autoscroll;return s=e&&!n&&!i,!(!a.drag_mode&&!e||n)||r}function h(e){if(o&&(clearTimeout(o),o=null),e){var n=t.config.autoscroll_speed;n&&n<10&&(n=10),o=setTimeout((function(){r=setInterval(p,n||a)}),t.config.autoscroll_delay||i)}}function _(t){t?(h(!0),l.started||(l.x=c.x,l.y=c.y,l.started=!0)):(r&&(clearInterval(r),r=null),h(!1),l.started=!1)}function f(e){var n=u();if(!r&&!o||n||_(!1),!t.config.autoscroll||!n)return!1;c={x:e.clientX,y:e.clientY},"touchmove"==e.type&&(c.x=e.targetTouches[0].clientX,c.y=e.targetTouches[0].clientY),!r&&n&&_(!0)}function p(){if(!u())return _(!1),!1;var e=d(t.$task)?t.$task:d(t.$grid)?t.$grid:t.$root;if(e){var i=!1;[".gantt_drag_marker.gantt_grid_resize_area",".gantt_drag_marker .gantt_row.gantt_row_task",".gantt_drag_marker.gantt_grid_dnd_marker"].forEach((function(t){i=i||!!document.querySelector(t)})),i&&(e=t.$grid);var a=g(e),r=c.x-a.x,o=c.y-a.y+window.scrollY,h=s?0:m(r,a.width,l.x-a.x),f=m(o,a.height,l.y-a.y+window.scrollY),p=t.getScrollState(),v=p.y,k=p.inner_height,y=p.height,b=p.x,x=p.inner_width,$=p.width;(f&&!k||f<0&&!v||f>0&&v+k>=y+2)&&(f=0),(h&&!x||h<0&&!b||h>0&&b+x>=$)&&(h=0);var w=t.config.autoscroll_step;w&&w<2&&(w=2),f*=w||n,((h*=w||n)||f)&&function(e,n){var i=t.getScrollState(),a=null,r=null;e&&(a=i.x+e,a=Math.min(i.width,a),a=Math.max(0,a)),n&&(r=i.y+n,r=Math.min(i.height,r),r=Math.max(0,r)),t.scrollTo(a,r)}(h,f)}}function m(t,n,i){return t-e<0&&t<i?-1:t>n-e&&t>i?1:0}t.attachEvent("onGanttReady",(function(){if(!qt(t)){var e=z(t.$root)||document.body;t.eventRemove(e,"mousemove",f),t.event(e,"mousemove",f),t.eventRemove(e,"touchmove",f),t.event(e,"touchmove",f),t.eventRemove(e,"pointermove",f),t.event(e,"pointermove",f)}})),t.attachEvent("onDestroy",(function(){_(!1)}))}var Xi,Zi;window.jQuery&&(Xi=window.jQuery,Zi=[],Xi.fn.dhx_gantt=function(t){if("string"!=typeof(t=t||{})){var e=[];return this.each((function(){if(this&&this.getAttribute)if(this.gantt||window.gantt.$root==this)e.push("object"==typeof this.gantt?this.gantt:window.gantt);else{var n=window.gantt.$container&&window.Gantt?window.Gantt.getGanttInstance():window.gantt;for(var i in t)"data"!=i&&(n.config[i]=t[i]);n.init(this),t.data&&n.parse(t.data),e.push(n)}})),1===e.length?e[0]:e}if(Zi[t])return Zi[t].apply(this,[]);Xi.error("Method "+t+" does not exist on jQuery.dhx_gantt")});const Qi=null;window.dhtmlx&&(window.dhtmlx.attaches||(window.dhtmlx.attaches={}),window.dhtmlx.attaches.attachGantt=function(t,e,n){var i=document.createElement("DIV");n=n||window.gantt,i.id="gantt_"+n.uid(),i.style.width="100%",i.style.height="100%",i.cmp="grid",document.body.appendChild(i),this.attachObject(i.id),this.dataType="gantt",this.dataObj=n;var a=this.vs[this.av];return a.grid=n,n.init(i.id,t,e),i.firstChild.style.border="none",a.gridId=i.id,a.gridObj=i,this.vs[this._viewRestore()].grid}),void 0!==window.dhtmlXCellObject&&(window.dhtmlXCellObject.prototype.attachGantt=function(t,e,n){n=n||window.gantt;var i=document.createElement("DIV");return i.id="gantt_"+n.uid(),i.style.width="100%",i.style.height="100%",i.cmp="grid",document.body.appendChild(i),this.attachObject(i.id),this.dataType="gantt",this.dataObj=n,n.init(i.id,t,e),i.firstChild.style.border="none",i=null,this.callEvent("_onContentAttach",[]),this.dataObj});const ta=null,ea=["ctrlKey","altKey","shiftKey","metaKey"],na=[[{unit:"month",date:"%M",step:1},{unit:"day",date:"%d",step:1}],[{unit:"day",date:"%d %M",step:1}],[{unit:"day",date:"%d %M",step:1},{unit:"hour",date:"%H:00",step:8}],[{unit:"day",date:"%d %M",step:1},{unit:"hour",date:"%H:00",step:1}]];class ia{constructor(t){this.zoomIn=()=>{const t=this.getCurrentLevel()-1;t<0||this.setLevel(t)},this.zoomOut=()=>{const t=this.getCurrentLevel()+1;t>this._levels.length-1||this.setLevel(t)},this.getCurrentLevel=()=>this._activeLevelIndex,this.getLevels=()=>this._levels,this.setLevel=t=>{const e=this._getZoomIndexByName(t);-1===e&&this.$gantt.assert(-1!==e,"Invalid zoom level for gantt.ext.zoom.setLevel. "+t+" is not an expected value."),this._setLevel(e,0)},this._getZoomIndexByName=t=>{let e=-1;if("string"==typeof t){if(!isNaN(Number(t))&&this._levels[Number(t)])e=Number(t);else for(let n=0;n<this._levels.length;n++)if(this._levels[n].name===t){e=n;break}}else e=t;return e},this._getVisibleDate=()=>{if(!this.$gantt.$task)return null;const t=this.$gantt.getScrollState().x,e=this.$gantt.$task.offsetWidth;this._visibleDate=this.$gantt.dateFromPos(t+e/2)},this._setLevel=(t,e)=>{this._activeLevelIndex=t;const n=this.$gantt,i=n.copy(this._levels[this._activeLevelIndex]),a=n.copy(i);if(delete a.name,n.mixin(n.config,a,!0),["resourceTimeline","resourceHistogram"].forEach((function(t){const e=n.$ui.getView(t);if(e){const t=e.$getConfig();t.fixed_scales||n.mixin(t,a,!0)}})),n.$root&&n.$task){if(e){const t=this.$gantt.dateFromPos(e+this.$gantt.getScrollState().x);this.$gantt.render();const n=this.$gantt.posFromDate(t);this.$gantt.scrollTo(n-e)}else{const t=this.$gantt.$task.offsetWidth;this._visibleDate||this._getVisibleDate();const e=this._visibleDate;this.$gantt.render();const n=this.$gantt.posFromDate(e);this.$gantt.scrollTo(n-t/2)}this.callEvent("onAfterZoom",[this._activeLevelIndex,i])}},this._attachWheelEvent=t=>{const e=It.isFF?"wheel":"mousewheel";let n;n="function"==typeof t.element?t.element():t.element,n&&this._domEvents.attach(n,e,this.$gantt.bind((function(t){return!(this._useKey&&(ea.indexOf(this._useKey)<0||!t[this._useKey]))&&("function"==typeof this._handler?(this._handler.apply(this,[t]),!0):void 0)}),this),{passive:!1})},this._defaultHandler=t=>{const e=this.$gantt.$task.getBoundingClientRect().x,n=t.clientX-e;let i=!1;(this.$gantt.env.isFF?-40*t.deltaY:t.wheelDelta)>0&&(i=!0),t.preventDefault(),t.stopPropagation(),this._setScaleSettings(i,n)},this._setScaleDates=()=>{this._initialStartDate&&this._initialEndDate&&(this.$gantt.config.start_date=this._initialStartDate,this.$gantt.config.end_date=this._initialEndDate)},this.$gantt=t,this._domEvents=this.$gantt._createDomEventScope()}init(t){this.$gantt.env.isNode||(this._initialStartDate=t.startDate,this._initialEndDate=t.endDate,this._activeLevelIndex=t.activeLevelIndex?t.activeLevelIndex:0,this._levels=this._mapScales(t.levels||na),this._handler=t.handler||this._defaultHandler,this._minColumnWidth=t.minColumnWidth||60,this._maxColumnWidth=t.maxColumnWidth||240,this._widthStep=t.widthStep||3/8*t.minColumnWidth,this._useKey=t.useKey,this._initialized||(q(this),this.$gantt.attachEvent("onGanttScroll",(()=>{this._getVisibleDate()}))),this._domEvents.detachAll(),"wheel"===t.trigger&&(this.$gantt.$root?this._attachWheelEvent(t):this.$gantt.attachEvent("onGanttReady",(()=>{this._attachWheelEvent(t)}))),this._initialized=!0,this.setLevel(this._activeLevelIndex))}_mapScales(t){return t.map((t=>Array.isArray(t)?{scales:t}:t))}_setScaleSettings(t,e){t?this._stepUp(e):this._stepDown(e)}_stepUp(t){if(this._activeLevelIndex>=this._levels.length-1)return;let e=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let t=this.$gantt.config.min_column_width+this._widthStep;t>this._maxColumnWidth&&(t=this._minColumnWidth,e++),this.$gantt.config.min_column_width=t}else e++;this._setLevel(e,t)}_stepDown(t){if(this._activeLevelIndex<1)return;let e=this._activeLevelIndex;if(this._setScaleDates(),this._widthStep){let t=this.$gantt.config.min_column_width-this._widthStep;t<this._minColumnWidth&&(t=this._maxColumnWidth,e--),this.$gantt.config.min_column_width=t}else e--;this._setLevel(e,t)}}function aa(t){function e(){if("force"!=t.config.touch&&(t.config.touch=t.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),t.config.touch){var e=!0;try{document.createEvent("TouchEvent")}catch{e=!1}e?t._touch_events(["touchmove","touchstart","touchend"],(function(t){return t.touches&&t.touches.length>1?null:t.touches[0]?{target:t.target,pageX:t.touches[0].pageX,pageY:t.touches[0].pageY,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:t}),(function(){return!1})):window.navigator.pointerEnabled?t._touch_events(["pointermove","pointerdown","pointerup"],(function(t){return"mouse"==t.pointerType?null:t}),(function(t){return!t||"mouse"==t.pointerType})):window.navigator.msPointerEnabled&&t._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],(function(t){return t.pointerType==t.MSPOINTER_TYPE_MOUSE?null:t}),(function(t){return!t||t.pointerType==t.MSPOINTER_TYPE_MOUSE}))}}function n(e){var n=e.$config.scrollX?t.$ui.getView(e.$config.scrollX):null,i=e.$config.scrollY?t.$ui.getView(e.$config.scrollY):null,a={x:null,y:null};return n&&n.getScrollState().visible&&(a.x=n.$view.scrollLeft),i&&i.getScrollState().visible&&(a.y=i.$view.scrollTop),a}function i(){var e;return t.$ui.getView("timeline")&&(e=t.$ui.getView("timeline")._tasks_dnd),e}t.config.touch_drag=75,t.config.touch=!0,t.config.touch_feedback=!0,t.config.touch_feedback_duration=1,t._prevent_touch_scroll=!1,t._touch_feedback=function(){t.config.touch_feedback&&navigator.vibrate&&navigator.vibrate(t.config.touch_feedback_duration)},t.attachEvent("onGanttReady",(function(){t.$container&&e()})),t.attachEvent("onGanttLayoutReady",(function(){t.$container&&t.attachEvent("onGanttRender",e,{once:!0})}));var a=[];t._touch_events=function(e,r,s){var o,l=0,c=!1,d=!1,u=null,h=null,_=null,f=[],g=null;let p={};for(var m=0;m<a.length;m++)t.eventRemove(a[m][0],a[m][1],a[m][2]);(a=[]).push([t.$container,e[0],function(e){var a=i();if(!s(e)&&c){h&&clearTimeout(h);var _=r(e);if(a&&(a.drag.id||a.drag.start_drag))return a.on_mouse_move(_),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1;if(!t._prevent_touch_scroll){if(_&&u){var f=u.pageX-_.pageX,p=u.pageY-_.pageY;if(!d&&(Math.abs(f)>5||Math.abs(p)>5)&&(d=!0,l=0,o=g?n(g):t.getScrollState()),d){var m,k=o.x+f,y=o.y+p;if(g?(function(e,n,i){var a=e.$config.scrollX?t.$ui.getView(e.$config.scrollX):null,r=e.$config.scrollY?t.$ui.getView(e.$config.scrollY):null;a&&a.scrollTo(n,null),r&&r.scrollTo(null,i)}(g,k,y),m=n(g)):(t.scrollTo(k,y),m=t.getScrollState()),o.x!=m.x&&p>2*f||o.y!=m.y&&f>2*p)return v(e)}}return v(e)}return!0}}]);try{document.addEventListener("touchmove",(function(e){t._touch_drag&&v(e)}),{passive:!1})}catch{console.warn("Cannot prevent touch event for the page drag")}for(a.push([this.$container,"contextmenu",function(t){if(c)return v(t)}]),a.push([this.$container,e[1],function(e){if(p=e.touches.length,document&&document.body&&document.body.classList.add("gantt_touch_active"),!s(e))if(e.touches&&e.touches.length>1)c=!1;else{u=r(e),g=function(e){for(var n=t.$layout.getCellsByType("viewCell"),i=0;i<n.length;i++){var a=n[i].$view.getBoundingClientRect();if(e.clientX>=a.left&&e.clientX<=a.right&&e.clientY<=a.bottom&&e.clientY>=a.top)return n[i]}}(u),t._locate_css(u,"gantt_hor_scroll")||t._locate_css(u,"gantt_ver_scroll")||(c=!0);var n=i();h=setTimeout((function(){var e=t.locate(u);n&&e&&!t._locate_css(u,"gantt_link_control")&&!t._locate_css(u,"gantt_grid_data")&&(n.on_mouse_down(u),n.drag&&n.drag.start_drag&&(function(e){const n=t._getTaskLayers();let i=t.getTask(e);if(i){let a=t.isTaskVisible(e);if(a){_=e;for(let a=0;a<n.length;a++)if(i=n[a].rendered[e],i&&i.getAttribute(t.config.task_attribute)&&i.getAttribute(t.config.task_attribute)==e){const t=i.cloneNode(!0);f.push(i),n[a].rendered[e]=t,i.style.display="none",t.className+=" gantt_drag_move ",i.parentNode.appendChild(t)}}else if(i.$split_subtask){let r=i.$rendered_parent;if(a=t.isTaskVisible(r),!a)return;_=e;for(let e=0;e<n.length;e++){const a=n[e].rendered[r];let s;if(a&&a.childNodes&&(s=a.querySelector(`[${t.config.task_attribute}="${i.id}"]`)),s){const e=s.cloneNode(!0);s.parentNode.appendChild(e),t.$task_bars.appendChild(s),s.style.display="none",f.push(s),s=null}}}}}(e),n._start_dnd(u),t._touch_drag=!0,t.refreshTask(e),t._touch_feedback())),h=null}),t.config.touch_drag)}}]),a.push([this.$container,e[2],function(e){if(document&&document.body&&document.body.classList.remove("gantt_touch_active"),!s(e)){h&&clearTimeout(h),t._touch_drag=!1,c=!1;var n=r(e),a=i();if(a&&a.on_mouse_up(n),_&&t.isTaskExists(_)&&(t.refreshTask(_),f.length&&(f.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)})),t._touch_feedback())),c=d=!1,f=[],_=null,u&&l){var o=new Date;o-l<500&&p<=1?(t.$services.getService("mouseEvents").onDoubleClick(u),v(e)):l=o}else l=new Date}}]),m=0;m<a.length;m++)t.event(a[m][0],a[m][1],a[m][2]);function v(t){return t&&t.preventDefault&&t.cancelable&&t.preventDefault(),t.cancelBubble=!0,!1}}}function ra(){console.log("Method is not implemented.")}function sa(){}function oa(t){return sa}sa.prototype.render=ra,sa.prototype.set_value=ra,sa.prototype.get_value=ra,sa.prototype.focus=ra;var la={getHtmlSelect:function(t,e,n){var i="",a=this;return J(t=t||[],(function(t){var e=[{key:"value",value:t.key}];n==t.key&&(e[e.length]={key:"selected",value:"selected"}),t.attributes&&(e=e.concat(t.attributes)),i+=a.getHtmlOption({innerHTML:t.label},e)})),ca("select",{innerHTML:i},e)},getHtmlOption:function(t,e){return ca("option",t,e)},getHtmlButton:function(t,e){return ca("button",t,e)},getHtmlDiv:function(t,e){return ca("div",t,e)},getHtmlLabel:function(t,e){return ca("label",t,e)},getHtmlInput:function(t){return"<input"+da(t||[])+">"}};function ca(t,e,n){return e=e||[],"<"+t+da(n||[])+">"+(e.innerHTML||"")+"</"+t+">"}function da(t){var e="";return J(t,(function(t){e+=" "+t.key+"='"+t.value+"'"})),e}function ua(t){const e=oa();function n(){return e.apply(this,arguments)||this}return Kn(n,e),n.prototype.render=function(t){const e=t.height?`height:${t.height}px;`:"";let n=`<div class='gantt_cal_ltext gantt_section_${t.name}' ${e?`style='${e}'`:""}>`;return n+=la.getHtmlSelect(t.options,[{key:"style",value:"width:100%;"},{key:"title",value:t.name}]),n+="</div>",n},n.prototype.set_value=function(t,e,n,i){var a=t.firstChild;!a._dhx_onchange&&i.onchange&&(a.onchange=i.onchange,a._dhx_onchange=!0),void 0===e&&(e=(a.options[0]||{}).value),a.value=e||""},n.prototype.get_value=function(t){return t.firstChild.value},n.prototype.focus=function(e){var n=e.firstChild;t._focus(n,!0)},n}function ha(t){var e=ua(t);function n(){return e.apply(this,arguments)||this}function i(e,n){var i=[],a=[];n&&(i=t.getTaskByTime(),e.allow_root&&i.unshift({id:t.config.root_id,text:e.root_label||""}),i=function(e,n,i){var a=n.filter||function(){return!0};e=e.slice(0);for(var r=0;r<e.length;r++){var s=e[r];(s.id==i||t.isChildOf(s.id,i)||!1===a(s.id,s))&&(e.splice(r,1),r--)}return e}(i,e,n),e.sort&&i.sort(e.sort));for(var r=e.template||t.templates.task_text,s=0;s<i.length;s++){var o=r.apply(t,[i[s].start_date,i[s].end_date,i[s]]);void 0===o&&(o=""),a.push({key:i[s].id,label:o})}return e.options=a,e.map_to=e.map_to||"parent",t.form_blocks.select.render.apply(this,arguments)}return Kn(n,e),n.prototype.render=function(t){return i(t,!1)},n.prototype.set_value=function(e,n,a,r){0===n&&(n="0");var s=document.createElement("div");s.innerHTML=i(r,a.id);var o=s.removeChild(s.firstChild);return e.onselect=null,e.parentNode.replaceChild(o,e),t.form_blocks.select.set_value.apply(t,[o,n,a,r])},n}function _a(t){var e=function(){const t=oa();function e(){return t.apply(this,arguments)||this}return Kn(e,t),e.prototype.render=function(t){let e=t.height?`${t.height}px`:"";return`<div class='gantt_cal_ltext gantt_cal_template gantt_section_${t.name}' ${e?`style='height:${e};'`:""}></div>`},e.prototype.set_value=function(t,e){t.innerHTML=e||""},e.prototype.get_value=function(t){return t.innerHTML||""},e.prototype.focus=function(){},e}(),n=function(t){const e=oa();function n(){return e.apply(this,arguments)||this}return Kn(n,e),n.prototype.render=function(t){const e=(t.height||"130")+"px",n=t.placeholder?`placeholder='${t.placeholder}'`:"";return`<div class='gantt_cal_ltext gantt_section_${t.name}' style='height:${e};' ${n}><textarea></textarea></div>`},n.prototype.set_value=function(e,n){t.form_blocks.textarea._get_input(e).value=n||""},n.prototype.get_value=function(e){return t.form_blocks.textarea._get_input(e).value},n.prototype.focus=function(e){var n=t.form_blocks.textarea._get_input(e);t._focus(n,!0)},n.prototype._get_input=function(t){return t.querySelector("textarea")},n}(t),i=function(t){const e=oa();function n(){return e.apply(this,arguments)||this}return Kn(n,e),n.prototype.render=function(e){var n=t.form_blocks.getTimePicker.call(this,e);let i="gantt_section_time";"time"!==e.name&&(i+=" gantt_section_"+e.name);var a="<div style='padding-top:0px;font-size:inherit;text-align:center;' class='"+i+"'>";return a+=n,e.single_date?(n=t.form_blocks.getTimePicker.call(this,e,!0),a+="<span></span>"):a+="<span class='gantt_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>",(a+=n)+"</div>"},n.prototype.set_value=function(e,n,i,a){var r=a,s=e.getElementsByTagName("select"),o=a._time_format_order;if(r.auto_end_date)for(var l=function(){u=new Date(s[o[2]].value,s[o[1]].value,s[o[0]].value,0,0),h=t.calculateEndDate({start_date:u,duration:1,task:i}),t.form_blocks._fill_lightbox_select(s,o.size,h,o,r)},c=0;c<4;c++)s[c].onchange=l;var d=t._resolve_default_mapping(a);"string"==typeof d&&(d={start_date:d});var u=i[d.start_date]||new Date,h=i[d.end_date]||t.calculateEndDate({start_date:u,duration:1,task:i});t.form_blocks._fill_lightbox_select(s,0,u,o,r),t.form_blocks._fill_lightbox_select(s,o.size,h,o,r)},n.prototype.get_value=function(e,n,i){var a,r=e.getElementsByTagName("select"),s=i._time_format_order;return a=t.form_blocks.getTimePickerValue(r,i),"string"==typeof t._resolve_default_mapping(i)?a:{start_date:a,end_date:function(e,n,a){var r=t.form_blocks.getTimePickerValue(e,i,n.size);return r<=a&&(!1!==i.autofix_end||i.single_date)?t.date.add(a,t._get_timepicker_step(),"minute"):r}(r,s,a)}},n.prototype.focus=function(e){t._focus(e.getElementsByTagName("select")[0])},n}(t),a=ua(t),r=function(t){var e=oa();function n(){return e.apply(this,arguments)||this}return Kn(n,e),n.prototype.render=function(t){const e=t.height?`height:${t.height}px;`:"";let n=`<div class='gantt_cal_ltext gantt_cal_lcheckbox gantt_section_${t.name}' ${e?`style='${e}'`:""}>`;if(t.options&&t.options.length)for(var i=0;i<t.options.length;i++)n+="<label><input type='checkbox' value='"+t.options[i].key+"' name='"+t.name+"'>"+t.options[i].label+"</label>";else t.single_value=!0,n+="<label><input type='checkbox' name='"+t.name+"'></label>";return n+="</div>",n},n.prototype.set_value=function(t,e,n,i){var a=Array.prototype.slice.call(t.querySelectorAll("input[type=checkbox]"));!t._dhx_onchange&&i.onchange&&(t.onchange=i.onchange,t._dhx_onchange=!0),i.single_value?a[0].checked=!!e:J(a,(function(t){t.checked=!!e&&e.indexOf(t.value)>=0}))},n.prototype.get_value=function(t,e,n){return n.single_value?t.querySelector("input[type=checkbox]").checked:function(t,e){if(t.map)return t.map(e);for(var n=t.slice(),i=[],a=0;a<n.length;a++)i.push(e(n[a],a));return i}(Array.prototype.slice.call(t.querySelectorAll("input[type=checkbox]:checked")),(function(t){return t.value}))},n.prototype.focus=function(e){t._focus(e.querySelector("input[type=checkbox]"))},n}(t),s=function(t){const e=oa();function n(){return e.apply(this,arguments)||this}return Kn(n,e),n.prototype.render=function(t){const e=t.height?`${t.height}px`:"";let n=`<div class='gantt_cal_ltext gantt_cal_lradio gantt_section_${t.name}' ${e?`style='height:${e};'`:""}>`;if(t.options&&t.options.length)for(var i=0;i<t.options.length;i++)n+="<label><input type='radio' value='"+t.options[i].key+"' name='"+t.name+"'>"+t.options[i].label+"</label>";return n+="</div>",n},n.prototype.set_value=function(t,e,n,i){var a;i.options&&i.options.length&&(a=t.querySelector("input[type=radio][value='"+e+"']")||t.querySelector("input[type=radio][value='"+i.default_value+"']"))&&(!t._dhx_onchange&&i.onchange&&(t.onchange=i.onchange,t._dhx_onchange=!0),a.checked=!0)},n.prototype.get_value=function(t,e){var n=t.querySelector("input[type=radio]:checked");return n?n.value:""},n.prototype.focus=function(e){t._focus(e.querySelector("input[type=radio]"))},n}(t),o=function(t){var e=oa();function n(){return e.apply(this,arguments)||this}function i(t){return t.formatter||new ve}function a(e,n){var i=e.getElementsByTagName("select"),a=n._time_format_order,r=0,s=0;if(t.defined(a[3])){var o=i[a[3]],l=parseInt(o.value,10);isNaN(l)&&o.hasAttribute("data-value")&&(l=parseInt(o.getAttribute("data-value"),10)),r=Math.floor(l/60),s=l%60}return new Date(i[a[2]].value,i[a[1]].value,i[a[0]].value,r,s)}function r(t,e){var n=t.getElementsByTagName("input")[1];return(n=i(e).parse(n.value))&&!window.isNaN(n)||(n=1),n<0&&(n*=-1),n}return Kn(n,e),n.prototype.render=function(e){var n="<div class='gantt_time_selects'>"+t.form_blocks.getTimePicker.call(this,e)+"</div>",i=" "+t.locale.labels[t.config.duration_unit+"s"]+" ",a=e.single_date?" style='display:none'":"",r=e.readonly?" disabled='disabled'":"",s=t._waiAria.lightboxDurationInputAttrString(e),o="gantt_duration_value";e.formatter&&(i="",o+=" gantt_duration_value_formatted");var l="<div class='gantt_duration' "+a+"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value='−'"+r+"><input type='text' value='5days' class='"+o+"'"+r+" "+s+"><input type='button' class='gantt_duration_inc' value='+'"+r+"></div><div class='gantt_duration_end_date'>"+i+"<span></span></div></div></div>";let c="gantt_section_time gantt_section_duration";return"time"!==e.name&&(c+=" gantt_section_"+e.name),"<div style='padding-top:0px;font-size:inherit;' class='"+c+"'>"+n+" "+l+"</div>"},n.prototype.set_value=function(e,n,s,o){var l,c,d,u,h=e.getElementsByTagName("select"),_=e.getElementsByTagName("input"),f=_[1],g=[_[0],_[2]],p=e.getElementsByTagName("span")[0],m=o._time_format_order;function v(){var n=a.call(t,e,o),i=r.call(t,e,o),l=t.calculateEndDate({start_date:n,duration:i,task:s}),c=t.templates.task_end_date||t.templates.task_date;p.innerHTML=c(l)}function k(t){var e=f.value;e=i(o).parse(e),window.isNaN(e)&&(e=0),(e+=t)<1&&(e=1),f.value=i(o).format(e),v()}g[0].onclick=t.bind((function(){k(-1*t.config.duration_step)}),this),g[1].onclick=t.bind((function(){k(1*t.config.duration_step)}),this),h[0].onchange=v,h[1].onchange=v,h[2].onchange=v,h[3]&&(h[3].onchange=v),f.onkeydown=t.bind((function(e){var n;return(n=(e=e||window.event).charCode||e.keyCode||e.which)==t.constants.KEY_CODES.DOWN?(k(-1*t.config.duration_step),!1):n==t.constants.KEY_CODES.UP?(k(1*t.config.duration_step),!1):void window.setTimeout(v,1)}),this),f.onchange=t.bind(v,this),"string"==typeof(l=t._resolve_default_mapping(o))&&(l={start_date:l}),c=s[l.start_date]||new Date,d=s[l.end_date]||t.calculateEndDate({start_date:c,duration:1,task:s}),u=Math.round(s[l.duration])||t.calculateDuration({start_date:c,end_date:d,task:s}),u=i(o).format(u),t.form_blocks._fill_lightbox_select(h,0,c,m,o),f.value=u,v()},n.prototype.get_value=function(e,n,i){var s=a(e,i),o=r(e,i),l=t.calculateEndDate({start_date:s,duration:o,task:n});return"string"==typeof t._resolve_default_mapping(i)?s:{start_date:s,end_date:l,duration:o}},n.prototype.focus=function(e){t._focus(e.getElementsByTagName("select")[0])},n}(t),l=ha(t),c=ua(t),d=function(t){var e=oa();function n(){return e.apply(this,arguments)||this}function i(e){return!e||e===t.config.constraint_types.ASAP||e===t.config.constraint_types.ALAP}function a(t,e){for(var n=i(e),a=0;a<t.length;a++)t[a].disabled=n}return Kn(n,e),n.prototype.render=function(e){const n=e.height?`height:${e.height}px;`:"";let i=`<div class='gantt_cal_ltext gantt_section_${e.name}' ${n?`style='${n}'`:""}>`;var a=[];for(var r in t.config.constraint_types)a.push({key:t.config.constraint_types[r],label:t.locale.labels[t.config.constraint_types[r]]});return e.options=e.options||a,i+="<span data-constraint-type-select>"+la.getHtmlSelect(e.options,[{key:"data-type",value:"constraint-type"}])+"</span>",i+="<label data-constraint-time-select>"+(t.locale.labels.constraint_date||"Constraint date")+": "+t.form_blocks.getTimePicker.call(this,e)+"</label>",i+="</div>",i},n.prototype.set_value=function(e,n,i,r){var s=e.querySelector("[data-constraint-type-select] select"),o=e.querySelectorAll("[data-constraint-time-select] select"),l=r._time_format_order,c=t._resolve_default_mapping(r);s._eventsInitialized||(s.addEventListener("change",(function(t){a(o,t.target.value)})),s._eventsInitialized=!0);var d=i[c.constraint_date]||new Date;t.form_blocks._fill_lightbox_select(o,0,d,l,r);var u=i[c.constraint_type]||t.getConstraintType(i);s.value=u,a(o,u)},n.prototype.get_value=function(e,n,a){var r=e.querySelector("[data-constraint-type-select] select"),s=e.querySelectorAll("[data-constraint-time-select] select"),o=r.value,l=null;return i(o)||(l=t.form_blocks.getTimePickerValue(s,a)),{constraint_type:o,constraint_date:l}},n.prototype.focus=function(e){t._focus(e.querySelector("select"))},n}(t),u=function(t){const e=ua(t);function n(){return e.apply(this,arguments)||this}return Kn(n,e),n.prototype.render=function(n){var i=t.config.types,a=t.locale.labels,r=[],s=n.filter||function(t,e){return!i.placeholder||e!==i.placeholder};for(var o in i)0==!s(o,i[o])&&r.push({key:i[o],label:a["type_"+o]});n.options=r;var l=n.onchange;return n.onchange=function(){t._lightbox_current_type=this.value,t.changeLightboxType(this.value),"function"==typeof l&&l.apply(this,arguments)},e.prototype.render.apply(this,arguments)},n}(t),h=function(t){var e=oa();function n(){return e.apply(this,arguments)||this}function i(t){return t.formatter||new ve}function a(e,n,a,o){const l="<div class='gantt_time_selects'>"+t.form_blocks.getTimePicker.call(t,o)+"</div>";let c=" "+t.locale.labels[t.config.duration_unit+"s"]+" ";const d=o.single_date?" style='display:none'":"",u=o.readonly?" disabled='disabled'":"",h=t._waiAria.lightboxDurationInputAttrString(o),_=t.locale.labels.baselines_remove_button;let f="gantt_duration_value";o.formatter&&(c="",f+=" gantt_duration_value_formatted");const g="<div class='gantt_duration' "+d+"><div class='gantt_duration_inputs'><input type='button' class='gantt_duration_dec' value='−'"+u+"><input type='text' value='5days' class='"+f+"'"+u+" "+h+"><input type='button' class='gantt_duration_inc' value='+'"+u+"></div><div class='gantt_duration_end_date'>"+c+"<span></span></div></div></div>",p=`<div><div class='baseline_delete_button gantt_custom_button'>${_}</div></div>`,m=document.createElement("div");m.className="gantt_section_time gantt_section_duration",m.setAttribute("data-baseline-id",n.id),m.innerHTML=l+g+p+"<br>",e.appendChild(m);var v,k,y,b=m.getElementsByTagName("select"),x=m.getElementsByTagName("input"),$=x[1],w=[x[0],x[2]],S=m.getElementsByTagName("span")[0],T=o._time_format_order;function E(){var e=r.call(t,m,o),n=s.call(t,m,o),i=t.calculateEndDate({start_date:e,duration:n,task:a}),l=t.templates.task_end_date||t.templates.task_date;S.innerHTML=l(i)}function C(t){var e=$.value;e=i(o).parse(e),window.isNaN(e)&&(e=0),(e+=t)<1&&(e=1),$.value=i(o).format(e),E()}m.querySelector(".baseline_delete_button").onclick=function(e){const n=m.parentNode;m.innerHTML="",m.remove(),""===n.innerHTML&&(n.innerHTML=t.locale.labels.baselines_section_placeholder)},w[0].onclick=t.bind((function(){C(-1*t.config.duration_step)}),t),w[1].onclick=t.bind((function(){C(1*t.config.duration_step)}),t),b[0].onchange=E,b[1].onchange=E,b[2].onchange=E,b[3]&&(b[3].onchange=E),$.onkeydown=t.bind((function(e){var n;return(n=(e=e||window.event).charCode||e.keyCode||e.which)==t.constants.KEY_CODES.DOWN?(C(-1*t.config.duration_step),!1):n==t.constants.KEY_CODES.UP?(C(1*t.config.duration_step),!1):void window.setTimeout(E,1)}),t),$.onchange=t.bind(E,t),t._resolve_default_mapping(o),v=n.start_date||new Date,k=n.end_date||t.calculateEndDate({start_date:v,duration:1,task:a}),y=t.calculateDuration({start_date:v,end_date:k,task:a}),y=i(o).format(y),t.form_blocks._fill_lightbox_select(b,0,v,T,o),$.value=y,E()}function r(e,n){var i=e.getElementsByTagName("select"),a=n._time_format_order,r=0,s=0;if(t.defined(a[3])){var o=i[a[3]],l=parseInt(o.value,10);isNaN(l)&&o.hasAttribute("data-value")&&(l=parseInt(o.getAttribute("data-value"),10)),r=Math.floor(l/60),s=l%60}return new Date(i[a[2]].value,i[a[1]].value,i[a[0]].value,r,s)}function s(t,e){var n=t.getElementsByTagName("input")[1];return(n=i(e).parse(n.value))&&!window.isNaN(n)||(n=1),n<0&&(n*=-1),n}return Kn(n,e),n.prototype.render=function(t){return`<div style='height: ${t.height||100}px; padding-top:0px; font-size:inherit;' class='gantt_section_baselines'></div>`},n.prototype.set_value=function(e,n,i,r){i.baselines?(e.innerHTML="",i.baselines.forEach((t=>{a(e,t,i,r)}))):e.innerHTML=t.locale.labels.baselines_section_placeholder},n.prototype.get_value=function(e,n,i){const a=[];return e.querySelectorAll("[data-baseline-id]").forEach((e=>{const o=e.dataset.baselineId;let l,c=t.getDatastore("baselines").getItem(o);l=c?t.copy(c):{id:t.uid(),task_id:n.id,text:"Baseline 1"},l.start_date=r(e,i),l.duration=s(e,i),l.end_date=t.calculateEndDate({start_date:l.start_date,duration:l.duration,task:n}),a.push(l)})),a},n.prototype.button_click=function(e,n,i,r){if(!1!==t.callEvent("onSectionButton",[t._lightbox_id,i])&&(n.closest(".gantt_custom_button.gantt_remove_baselines")&&(r.innerHTML=t.locale.labels.baselines_section_placeholder),n.closest(".gantt_custom_button.gantt_add_baselines"))){r.innerHTML==t.locale.labels.baselines_section_placeholder&&(r.innerHTML="");const n=t.getTask(t._lightbox_id);a(r,{id:t.uid(),task_id:n.id,text:"Baseline 1",start_date:n.start_date,end_date:n.end_date},n,t._get_typed_lightbox_config()[e])}},n.prototype.focus=function(e){t._focus(e.getElementsByTagName("select")[0])},n}(t);t._lightbox_methods={},t._lightbox_template="<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>",t._lightbox_template="<div class='gantt_cal_ltitle'><div class=\"dhx_cal_ltitle_descr\"><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='dhx_title'></span>\n</div>\n<div class=\"gantt_cal_ltitle_controls\">\n\t<a class=\"gantt_cal_ltitle_close_btn dhx_gantt_icon dhx_gantt_icon_close\"></a>\n\n</div></div><div class='gantt_cal_larea'></div>",t._lightbox_root=t.$root,t.$services.getService("state").registerProvider("lightbox",(function(){return{lightbox:t._lightbox_id}})),t.showLightbox=function(e){var n=this.getTask(e);if(this.callEvent("onBeforeLightbox",[e])){var i=this.getLightbox(this.getTaskType(n.type));this.showCover(i),this._fill_lightbox(e,i),this._setLbPosition(i),this._waiAria.lightboxVisibleAttr(i),this.callEvent("onLightbox",[e])}else t.isTaskExists(e)&&t.getTask(e).$new&&this.$data.tasksStore._updateOrder()},t._get_timepicker_step=function(){if(this.config.round_dnd_dates){var e;if(function(t){var e=t.$ui.getView("timeline");return!(!e||!e.isVisible())}(this)){var n=t.getScale();e=Y(n.unit)*n.step/60}return(!e||e>=1440)&&(e=this.config.time_step),e}return this.config.time_step},t.getLabel=function(t,e){for(var n=this._get_typed_lightbox_config(),i=0;i<n.length;i++)if(n[i].map_to==t)for(var a=n[i].options,r=0;r<a.length;r++)if(a[r].key==e)return a[r].label;return""},t.updateCollection=function(e,n){n=n.slice(0);var i=t.serverList(e);if(!i)return!1;i.splice(0,i.length),i.push.apply(i,n||[]),t.resetLightbox()},t.getLightboxType=function(){return this.getTaskType(this._lightbox_type)},t.getLightbox=function(e){var n,i,a,r,s,o="";if(function(){const e=!0===t.config.csp,n=!!window.Sfdc||!!window.$A||window.Aura||"$shadowResolver$"in document.body;t._lightbox_root=e||n?t.$root:document.body}(),void 0===e&&(e=this.getLightboxType()),!this._lightbox||this.getLightboxType()!=this.getTaskType(e)){this._lightbox_type=this.getTaskType(e),n=document.createElement("div"),o="gantt_cal_light",i=this._is_lightbox_timepicker(),t.config.wide_form&&(o+=" gantt_cal_light_wide"),i&&(o+=" gantt_cal_light_full"),n.className=o,n.style.visibility="hidden",a=this._lightbox_template,a+="<div class='gantt_cal_lcontrols'>",a+=g(this.config.buttons_left),a+="<div class='gantt_cal_lcontrols_push_right'></div>",a+=g(this.config.buttons_right),a+="</div>",n.innerHTML=a,t._waiAria.lightboxAttr(n),t.config.drag_lightbox&&(n.firstChild.onmousedown=t._ready_to_dnd,n.firstChild.ontouchstart=function(e){t._ready_to_dnd(e.touches[0])},n.firstChild.onselectstart=function(){return!1},n.firstChild.style.cursor="pointer",t._init_dnd_events()),this._lightbox&&this.resetLightbox(),_(),this._cover.insertBefore(n,this._cover.firstChild),this._lightbox=n,r=this._get_typed_lightbox_config(e),a=this._render_sections(r);var l=(s=n.querySelector("div.gantt_cal_larea")).style.overflow;s.style.overflow="hidden",s.innerHTML=a,function(e){var n,i,a,r,s,o;for(o=0;o<e.length;o++)n=e[o],a=t._lightbox_root.querySelector("#"+n.id),n.id&&a&&(i=a.querySelector("label"),(r=a.nextSibling)&&(s=r.querySelector("input, select, textarea"))&&(s.id=s.id||"input_"+t.uid(),n.inputId=s.id,i.setAttribute("for",n.inputId)))}(r),s.style.overflow=l,this._init_lightbox_events(this),n.style.display="none",n.style.visibility="visible"}return this._lightbox},t._render_sections=function(t){for(var e="",n=0;n<t.length;n++){var i=this.form_blocks[t[n].type];if(i){t[n].id="area_"+this.uid();var a=t[n].hidden?" style='display:none'":"",r="";t[n].button&&(r="<div class='gantt_custom_button' data-index='"+n+"'><div class='gantt_custom_button_"+t[n].button+"'></div><div class='gantt_custom_button_label'>"+this.locale.labels["button_"+t[n].button]+"</div></div>"),"baselines"==t[n].type&&(r="<div class='gantt_custom_button gantt_remove_baselines' data-index='"+n+"'><div class='gantt_custom_button_delete_baselines'></div><div class='gantt_custom_button_label'>"+this.locale.labels.baselines_remove_all_button+"</div></div><div class='gantt_custom_button gantt_add_baselines' data-index='"+n+"'><div class='gantt_custom_button_add_baseline'></div><div class='gantt_custom_button_label'>"+this.locale.labels.baselines_add_button+"</div></div>"),this.config.wide_form&&(e+="<div class='gantt_wrap_section' "+a+">"),e+="<div id='"+t[n].id+"' class='gantt_cal_lsection'><label>"+r+this.locale.labels["section_"+t[n].name]+"</label></div>"+i.render.call(this,t[n]),e+="</div>"}}return e},t._center_lightbox=function(e){t._setLbPosition(e)},t._setLbPosition=function(e){if(!e)return;const n=t._lightbox_root||t.$root;e.style.top=Math.max(n.offsetHeight/2-e.offsetHeight/2,0)+"px",e.style.left=Math.max(n.offsetWidth/2-e.offsetWidth/2,0)+"px"},t.showCover=function(t){t&&(t.style.display="block",this._setLbPosition(t)),_(),this._cover.style.display=""};const _=function(){t._cover||(t._cover=document.createElement("div"),t._cover.className="gantt_cal_cover",t._cover.style.display="none",t.event(t._cover,"mousemove",t._move_while_dnd),t.event(t._cover,"mouseup",t._finish_dnd),(t._lightbox_root||t.$root).appendChild(t._cover))};function f(t){for(var e in this.config.types)if(this.config.types[e]==t)return e;return"task"}function g(e,n){var i,a,r="";for(a=0;a<e.length;a++)i=t.config._migrate_buttons[e[a]]?t.config._migrate_buttons[e[a]]:e[a],r+="<div "+t._waiAria.lightboxButtonAttrString(i)+" class='gantt_btn_set gantt_left_btn_set "+i+"_set'><div dhx_button='1' data-dhx-button='1' class='"+i+"'></div><div>"+t.locale.labels[i]+"</div></div>";return r}function p(e){var n,i;return e.time_format?e.time_format:(i=["%d","%m","%Y"],Y((n=t.getScale())?n.unit:t.config.duration_unit)<Y("day")&&i.push("%H:%i"),i)}function m(e,n,i){var a,r,s,o,l,c,d="";switch(i.timeFormat[n]){case"%Y":for(e._time_format_order[2]=n,e._time_format_order.size++,e.year_range&&(isNaN(e.year_range)?e.year_range.push&&(s=e.year_range[0],o=e.year_range[1]):a=e.year_range),a=a||10,r=r||Math.floor(a/2),s=s||i.date.getFullYear()-r,o=o||t.getState().max_date.getFullYear()+r,l=s;l<o;l++)d+="<option value='"+l+"'>"+l+"</option>";break;case"%m":for(e._time_format_order[1]=n,e._time_format_order.size++,l=0;l<12;l++)d+="<option value='"+l+"'>"+t.locale.date.month_full[l]+"</option>";break;case"%d":for(e._time_format_order[0]=n,e._time_format_order.size++,l=1;l<32;l++)d+="<option value='"+l+"'>"+l+"</option>";break;case"%H:%i":for(e._time_format_order[3]=n,e._time_format_order.size++,l=i.first,c=i.date.getDate(),e._time_values=[];l<i.last;)d+="<option value='"+l+"'>"+t.templates.time_picker(i.date)+"</option>",e._time_values.push(l),i.date.setTime(i.date.valueOf()+60*t._get_timepicker_step()*1e3),l=24*(i.date.getDate()!=c?1:0)*60+60*i.date.getHours()+i.date.getMinutes()}return d}t._init_lightbox_events=function(){t.lightbox_events={},t.lightbox_events.gantt_save_btn=function(){t._save_lightbox()},t.lightbox_events.gantt_delete_btn=function(){t._lightbox_current_type=null,t.callEvent("onLightboxDelete",[t._lightbox_id])&&(t.isTaskExists(t._lightbox_id)?t.$click.buttons.delete(t._lightbox_id):t.hideLightbox())},t.lightbox_events.gantt_cancel_btn=function(){t._cancel_lightbox()},t.lightbox_events.default=function(e,n){if(n.getAttribute("data-dhx-button"))t.callEvent("onLightboxButton",[n.className,n,e]);else{var i,a,r=x(n);if(-1!=r.indexOf("gantt_custom_button"))if(-1!=r.indexOf("gantt_custom_button_"))for(i=n.parentNode.getAttribute("data-index"),a=n;a&&-1==x(a).indexOf("gantt_cal_lsection");)a=a.parentNode;else i=n.getAttribute("data-index"),a=n.closest(".gantt_cal_lsection"),n=n.firstChild;var s=t._get_typed_lightbox_config();i&&(i*=1,t.form_blocks[s[1*i].type].button_click(i,n,a,a.nextSibling))}},this.event(t.getLightbox(),"click",(function(e){e.target.closest(".gantt_cal_ltitle_close_btn")&&t._cancel_lightbox();var n=D(e),i=x(n);return i||(i=x(n=n.previousSibling)),n&&i&&0===i.indexOf("gantt_btn_set")&&(i=x(n=n.firstChild)),!(!n||!i)&&(t.defined(t.lightbox_events[n.className])?t.lightbox_events[n.className]:t.lightbox_events.default)(e,n)})),t.getLightbox().onkeydown=function(e){var n=e||window.event,i=e.target||e.srcElement,a=x(i).indexOf("gantt_btn_set")>-1;switch((e||n).keyCode){case t.constants.KEY_CODES.SPACE:if((e||n).shiftKey)return;a&&i.click&&i.click();break;case t.keys.edit_save:if((e||n).shiftKey)return;a&&i.click?i.click():t._save_lightbox();break;case t.keys.edit_cancel:t._cancel_lightbox()}}},t._cancel_lightbox=function(){var e=this.getLightboxValues();t._lightbox_current_type=null,this.callEvent("onLightboxCancel",[this._lightbox_id,e.$new]),t.isTaskExists(e.id)&&e.$new&&(this.silent((function(){t.$data.tasksStore.removeItem(e.id),t._update_flags(e.id,null)})),this.refreshData()),this.hideLightbox()},t._save_lightbox=function(){var e=this.getLightboxValues();t._lightbox_current_type=null,this.callEvent("onLightboxSave",[this._lightbox_id,e,!!e.$new])&&(t.$data.tasksStore._skipTaskRecalculation="lightbox",e.$new?(delete e.$new,this.addTask(e,e.parent,this.getTaskIndex(e.id))):this.isTaskExists(e.id)&&(this.mixin(this.getTask(e.id),e,!0),this.refreshTask(e.id),this.updateTask(e.id)),t.$data.tasksStore._skipTaskRecalculation=!1,this.refreshData(),this.hideLightbox())},t._resolve_default_mapping=function(t){var e=t.map_to;return{time:!0,time_optional:!0,duration:!0,duration_optional:!0}[t.type]?"auto"==t.map_to?e={start_date:"start_date",end_date:"end_date",duration:"duration"}:"string"==typeof t.map_to&&(e={start_date:t.map_to}):"constraint"===t.type&&(t.map_to&&"string"!=typeof t.map_to||(e={constraint_type:"constraint_type",constraint_date:"constraint_date"})),e},t.getLightboxValues=function(){var e={};t.isTaskExists(this._lightbox_id)&&(e=this.mixin({},this.getTask(this._lightbox_id)));for(var n=this._get_typed_lightbox_config(),i=0;i<n.length;i++){var a=t._lightbox_root.querySelector("#"+n[i].id);a=a&&a.nextSibling;var r=this.form_blocks[n[i].type];if(r){var s=r.get_value.call(this,a,e,n[i]),o=t._resolve_default_mapping(n[i]);if("string"==typeof o&&"auto"!=o)e[o]=s;else if("object"==typeof o)for(var l in o)o[l]&&(e[o[l]]=s[l])}}return t._lightbox_current_type&&(e.type=t._lightbox_current_type),e},t.hideLightbox=function(){var t=this.getLightbox();t&&(t.style.display="none"),this._waiAria.lightboxHiddenAttr(t),this._lightbox_id=null,this.hideCover(t),this.resetLightbox(),this.callEvent("onAfterLightbox",[])},t.hideCover=function(t){t&&(t.style.display="none"),this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},t.resetLightbox=function(){t._lightbox&&!t._custom_lightbox&&t._lightbox.remove(),t._lightbox=null},t._set_lightbox_values=function(e,n){var i=e,a=n.getElementsByTagName("span"),r=[];t.templates.lightbox_header?(r.push(""),r.push(t.templates.lightbox_header(i.start_date,i.end_date,i)),a[1].innerHTML="",a[2].innerHTML=t.templates.lightbox_header(i.start_date,i.end_date,i)):(r.push(this.templates.task_time(i.start_date,i.end_date,i)),r.push(String(this.templates.task_text(i.start_date,i.end_date,i)||"").substr(0,70)),a[1].innerHTML=this.templates.task_time(i.start_date,i.end_date,i),a[2].innerHTML=String(this.templates.task_text(i.start_date,i.end_date,i)||"").substr(0,70)),a[1].innerHTML=r[0],a[2].innerHTML=r[1],t._waiAria.lightboxHeader(n,r.join(" "));for(var s=this._get_typed_lightbox_config(this.getLightboxType()),o=0;o<s.length;o++){var l=s[o];if(this.form_blocks[l.type]){var c=t._lightbox_root.querySelector("#"+l.id).nextSibling,d=this.form_blocks[l.type],u=t._resolve_default_mapping(s[o]),h=this.defined(i[u])?i[u]:l.default_value;d.set_value.call(t,c,h,i,l),l.focus&&d.focus.call(t,c)}}t.isTaskExists(e.id)&&(t._lightbox_id=e.id)},t._fill_lightbox=function(t,e){var n=this.getTask(t);this._set_lightbox_values(n,e)},t.getLightboxSection=function(e){for(var n=this._get_typed_lightbox_config(),i=0;i<n.length&&n[i].name!=e;i++);var a=n[i];if(!a)return null;this._lightbox||this.getLightbox();var r=t._lightbox_root.querySelector("#"+a.id),s=r.nextSibling,o={section:a,header:r,node:s,getValue:function(e){return t.form_blocks[a.type].get_value.call(t,s,e||{},a)},setValue:function(e,n){return t.form_blocks[a.type].set_value.call(t,s,e,n||{},a)}},l=this._lightbox_methods["get_"+a.type+"_control"];return l?l(o):o},t._lightbox_methods.get_template_control=function(t){return t.control=t.node,t},t._lightbox_methods.get_select_control=function(t){return t.control=t.node.getElementsByTagName("select")[0],t},t._lightbox_methods.get_textarea_control=function(t){return t.control=t.node.getElementsByTagName("textarea")[0],t},t._lightbox_methods.get_time_control=function(t){return t.control=t.node.getElementsByTagName("select"),t},t._init_dnd_events=function(){var e=t._lightbox_root;this.event(e,"mousemove",t._move_while_dnd),this.event(e,"mouseup",t._finish_dnd),this.event(e,"touchmove",(function(e){t._move_while_dnd(e.touches[0])})),this.event(e,"touchend",(function(e){t._finish_dnd(e.touches[0])}))},t._move_while_dnd=function(e){if(t._dnd_start_lb){document.gantt_unselectable||(t._lightbox_root.className+=" gantt_unselectable",document.gantt_unselectable=!0);var n=t.getLightbox(),i=[e.pageX,e.pageY];n.style.top=t._lb_start[1]+i[1]-t._dnd_start_lb[1]+"px",n.style.left=t._lb_start[0]+i[0]-t._dnd_start_lb[0]+"px"}},t._ready_to_dnd=function(e){var n=t.getLightbox();t._lb_start=[n.offsetLeft,n.offsetTop],t._dnd_start_lb=[e.pageX,e.pageY]},t._finish_dnd=function(){t._lb_start&&(t._lb_start=t._dnd_start_lb=!1,t._lightbox_root.className=t._lightbox_root.className.replace(" gantt_unselectable",""),document.gantt_unselectable=!1)},t._focus=function(e,n){if(e&&e.focus&&!t.config.touch)try{n&&e.select&&e.select(),e.focus()}catch{}},t.form_blocks={getTimePicker:function(e,n){var i,a,r,s="",o=this.config,l={first:0,last:1440,date:this.date.date_part(new Date(t._min_date.valueOf())),timeFormat:p(e)};for(e._time_format_order={size:0},t.config.limit_time_select&&(l.first=60*o.first_hour,l.last=60*o.last_hour+1,l.date.setHours(o.first_hour)),i=0;i<l.timeFormat.length;i++)i>0&&(s+=" "),(a=m(e,i,l))&&(r=t._waiAria.lightboxSelectAttrString(l.timeFormat[i]),s+="<select "+(e.readonly?"disabled='disabled'":"")+(n?" style='display:none' ":"")+r+">"+a+"</select>");return s},getTimePickerValue:function(e,n,i){var a,r=n._time_format_order,s=0,o=0,l=i||0;return t.defined(r[3])&&(a=parseInt(e[r[3]+l].value,10),s=Math.floor(a/60),o=a%60),new Date(e[r[2]+l].value,e[r[1]+l].value,e[r[0]+l].value,s,o)},_fill_lightbox_select:function(e,n,i,a){if(e[n+a[0]].value=i.getDate(),e[n+a[1]].value=i.getMonth(),e[n+a[2]].value=i.getFullYear(),t.defined(a[3])){var r=60*i.getHours()+i.getMinutes();r=Math.round(r/t._get_timepicker_step())*t._get_timepicker_step();var s=e[n+a[3]];s.value=r,s.setAttribute("data-value",r)}},template:new e,textarea:new n,select:new a,time:new i,duration:new o,parent:new l,radio:new s,checkbox:new r,resources:new c,constraint:new d,baselines:new h,typeselect:new u},t._is_lightbox_timepicker=function(){for(var t=this._get_typed_lightbox_config(),e=0;e<t.length;e++)if("time"==t[e].name&&"time"==t[e].type)return!0;return!1},t._simple_confirm=function(e,n,i,a){if(!e)return i();var r={text:e};n&&(r.title=n),a&&(r.ok=a),i&&(r.callback=function(t){t&&i()}),t.confirm(r)},t._get_typed_lightbox_config=function(e){void 0===e&&(e=this.getLightboxType());var n=f.call(this,e);return t.config.lightbox[n+"_sections"]?t.config.lightbox[n+"_sections"]:t.config.lightbox.sections},t._silent_redraw_lightbox=function(t){var e=this.getLightboxType();if(this.getState().lightbox){var n=this.getState().lightbox,i=this.getLightboxValues(),a=this.copy(this.getTask(n));this.resetLightbox();var r=this.mixin(a,i,!0),s=this.getLightbox(t||void 0);this._set_lightbox_values(r,s),this.showCover(s)}else this.resetLightbox(),this.getLightbox(t||void 0);this.callEvent("onLightboxChange",[e,this.getLightboxType()])}}function fa(t){if(!It.isNode){t.utils={arrayFind:K,dom:j};var e=kt();t.event=e.attach,t.eventRemove=e.detach,t._eventRemoveAll=e.detachAll,t._createDomEventScope=e.extend,ht(t,Nn(t));var n=Yi.init(t);t.$ui=n.factory,t.$ui.layers=n.render,t.$mouseEvents=n.mouseEvents,t.$services.setService("mouseEvents",(function(){return t.$mouseEvents})),t.mixin(t,n.layersApi),function(t){delete t.addTaskLayer,delete t.addLinkLayer}(t),t.$services.setService("layers",(function(){return n.layersService})),t.mixin(t,function(){function t(t){return t.$ui.getView("timeline")}function e(t){return t.$ui.getView("grid")}function n(n){var i=t(n);if(i&&!i.$config.hidden)return i;var a=e(n);return a&&!a.$config.hidden?a:null}function i(t){var i=null,a=!1;return[".gantt_drag_marker.gantt_grid_resize_area",".gantt_drag_marker .gantt_row.gantt_row_task",".gantt_drag_marker.gantt_grid_dnd_marker"].forEach((function(t){a=a||!!document.querySelector(t)})),(i=a?e(t):n(t))?r(t,i,"scrollY"):null}function a(t){var e=n(t);return e&&"grid"!=e.id?r(t,e,"scrollX"):null}function r(t,e,n){var i=e.$config[n];return t.$ui.getView(i)}var s="DEFAULT_VALUE";function o(t,e,n,i){var a=t(this);return a&&a.isVisible()?a[e].apply(a,n):i?i():s}return{getColumnIndex:function(t){var n=o.call(this,e,"getColumnIndex",[t]);return n===s?0:n},dateFromPos:function(e){var n=o.call(this,t,"dateFromPos",Array.prototype.slice.call(arguments));return n===s?this.getState().min_date:n},posFromDate:function(e){var n=o.call(this,t,"posFromDate",[e]);return n===s?0:n},getRowTop:function(n){var i=this,a=o.call(i,t,"getRowTop",[n],(function(){return o.call(i,e,"getRowTop",[n])}));return a===s?0:a},getTaskTop:function(n){var i=this,a=o.call(i,t,"getItemTop",[n],(function(){return o.call(i,e,"getItemTop",[n])}));return a===s?0:a},getTaskPosition:function(e,n,i){var a=o.call(this,t,"getItemPosition",[e,n,i]);return a===s?{left:0,top:this.getTaskTop(e.id),height:this.getTaskBarHeight(e.id),width:0}:a},getTaskBarHeight:function(n,i){var a=this,r=o.call(a,t,"getBarHeight",[n,i],(function(){return o.call(a,e,"getItemHeight",[n])}));return r===s?0:r},getTaskHeight:function(n){var i=this,a=o.call(i,t,"getItemHeight",[n],(function(){return o.call(i,e,"getItemHeight",[n])}));return a===s?0:a},columnIndexByDate:function(e){var n=o.call(this,t,"columnIndexByDate",[e]);return n===s?0:n},roundTaskDates:function(){o.call(this,t,"roundTaskDates",[])},getScale:function(){var e=o.call(this,t,"getScale",[]);return e===s?null:e},getTaskNode:function(e){var n=t(this);if(n&&n.isVisible()){var i=n._taskRenderer.rendered[e];if(!i){var a=n.$config.item_attribute;i=n.$task_bars.querySelector("["+a+"='"+e+"']")}return i||null}return null},getLinkNode:function(e){var n=t(this);return n.isVisible()?n._linkRenderer.rendered[e]:null},scrollTo:function(t,e){var n=i(this),r=a(this),s={position:0},o={position:0};n&&(o=n.getScrollState()),r&&(s=r.getScrollState());var l=r&&1*t==t,c=n&&1*e==e;if(l&&c)for(var d=n._getLinkedViews(),u=r._getLinkedViews(),h=[],_=0;_<d.length;_++)for(var f=0;f<u.length;f++)d[_].$config.id&&u[f].$config.id&&d[_].$config.id===u[f].$config.id&&h.push(d[_].$config.id);l&&(h&&h.forEach(function(t){this.$ui.getView(t).$config.$skipSmartRenderOnScroll=!0}.bind(this)),r.scroll(t),h&&h.forEach(function(t){this.$ui.getView(t).$config.$skipSmartRenderOnScroll=!1}.bind(this))),c&&n.scroll(e);var g={position:0},p={position:0};n&&(g=n.getScrollState()),r&&(p=r.getScrollState()),this.callEvent("onGanttScroll",[s.position,o.position,p.position,g.position])},showDate:function(t){var e=this.posFromDate(t),n=Math.max(e-this.config.task_scroll_offset,0);this.scrollTo(n)},showTask:function(n){var i=this.getTaskPosition(this.getTask(n)),a=i.left;this.config.rtl&&(a=i.left+i.width);var s,o=Math.max(a-this.config.task_scroll_offset,0),l=this._scroll_state().y;s=l?i.top-(l-this.getTaskBarHeight(n))/2:i.top,this.scrollTo(o,s);var c=e(this),d=t(this);c&&d&&c.$config.scrollY!=d.$config.scrollY&&r(this,c,"scrollY").scrollTo(null,s)},_scroll_state:function(){var t={x:!1,y:!1,x_pos:0,y_pos:0,scroll_size:this.config.scroll_size+1,x_inner:0,y_inner:0},e=i(this),n=a(this);if(n){var r=n.getScrollState();r.visible&&(t.x=r.size,t.x_inner=r.scrollSize),t.x_pos=r.position||0}if(e){var s=e.getScrollState();s.visible&&(t.y=s.size,t.y_inner=s.scrollSize),t.y_pos=s.position||0}return t},getScrollState:function(){var t=this._scroll_state();return{x:t.x_pos,y:t.y_pos,inner_width:t.x,inner_height:t.y,width:t.x_inner,height:t.y_inner}},getLayoutView:function(t){return this.$ui.getView(t)},scrollLayoutCell:function(t,e,n){const i=this.$ui.getView(t);if(!i)return!1;if(null!==e){const t=this.$ui.getView(i.$config.scrollX);t&&t.scrollTo(e,null)}if(null!==n){const t=this.$ui.getView(i.$config.scrollY);t&&t.scrollTo(null,n)}}}}()),function(t){t.resetSkin||(t.resetSkin=function(){this.skin="",Ji(!0,this)},t.skins={},t.attachEvent("onGanttLayoutReady",(function(){Ji(!1,this),n()}))),t._addThemeClass=function(){document.documentElement.setAttribute("data-gantt-theme",t.skin)},t.setSkin=function(e){this.skin=e,t._addThemeClass(),n(),t.$root&&(Ji(!0,t),this.render())};let e=null;function n(){const n=t.$root;e&&clearInterval(e),n&&(e=setInterval((()=>{const e=getComputedStyle(n).getPropertyValue("--dhx-gantt-theme");e&&e!==t.skin&&t.setSkin(e)}),100))}t.attachEvent("onDestroy",(function(){clearInterval(e)}))}(t),function(t){t.skins.skyblue={config:{grid_width:370,row_height:27,bar_height_padding:4,scale_height:27,link_line_width:1,link_arrow_size:8,link_radius:2,lightbox_additional_height:75},_second_column_width:95,_third_column_width:80}}(t),function(t){t.skins.dark={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70}}(t),function(t){t.skins.meadow={config:{grid_width:380,row_height:27,scale_height:30,link_line_width:2,link_arrow_size:10,bar_height_padding:4,lightbox_additional_height:72},_second_column_width:95,_third_column_width:80}}(t),function(t){t.skins.terrace={config:{grid_width:390,row_height:36,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:75},_second_column_width:100,_third_column_width:70}}(t),function(t){t.skins.broadway={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:1,link_arrow_size:9,bar_height_padding:4,lightbox_additional_height:86},_second_column_width:100,_third_column_width:80,_lightbox_template:"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>",_config_buttons_left:{},_config_buttons_right:{gantt_delete_btn:"icon_delete",gantt_save_btn:"icon_save"}}}(t),function(t){t.skins.material={config:{grid_width:411,row_height:34,scale_height:36,link_line_width:2,link_arrow_size:12,bar_height_padding:9,lightbox_additional_height:80},_second_column_width:110,_third_column_width:75,_redefine_lightbox_buttons:{buttons_left:["dhx_delete_btn"],buttons_right:["dhx_cancel_btn","dhx_save_btn"]}},t.attachEvent("onAfterTaskDrag",(function(e){var n=t.getTaskNode(e);n&&(n.className+=" gantt_drag_animation",setTimeout((function(){var t=n.className.indexOf(" gantt_drag_animation");t>-1&&(n.className=n.className.slice(0,t))}),200))}))}(t),function(t){t.skins.contrast_black={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}(t),function(t){t.skins.contrast_white={config:{grid_width:390,row_height:35,scale_height:35,link_line_width:2,link_arrow_size:12,lightbox_additional_height:75},_second_column_width:100,_third_column_width:80}}(t),function(t){t.ext||(t.ext={});for(var e=[Ki,Qi,ta],n=0;n<e.length;n++)e[n]&&e[n](t);t.ext.zoom=new ia(t)}(t),aa(t),_a(t),function(t){t._extend_to_optional=function(e){var n=e,i={render:n.render,focus:n.focus,set_value:function(e,a,r,s){var o=t._resolve_default_mapping(s);if(!r[o.start_date]||"start_date"==o.start_date&&this._isAllowedUnscheduledTask(r)){i.disable(e,s);var l={};for(var c in o)l[o[c]]=r[c];return n.set_value.call(t,e,a,l,s)}return i.enable(e,s),n.set_value.call(t,e,a,r,s)},get_value:function(e,i,a){return a.disabled?{start_date:null}:n.get_value.call(t,e,i,a)},update_block:function(e,n){if(t.callEvent("onSectionToggle",[t._lightbox_id,n]),e.style.display=n.disabled?"none":"",n.button){var i=e.previousSibling.querySelector(".gantt_custom_button_label"),a=t.locale.labels,r=n.disabled?a[n.name+"_enable_button"]:a[n.name+"_disable_button"];i.innerHTML=r}},disable:function(t,e){e.disabled=!0,i.update_block(t,e)},enable:function(t,e){e.disabled=!1,i.update_block(t,e)},button_click:function(e,n,a,r){if(!1!==t.callEvent("onSectionButton",[t._lightbox_id,a])){var s=t._get_typed_lightbox_config()[e];s.disabled?i.enable(r,s):i.disable(r,s)}}};return i},t.form_blocks.duration_optional=t._extend_to_optional(t.form_blocks.duration),t.form_blocks.time_optional=t._extend_to_optional(t.form_blocks.time)}(t),function(t){var e=new RegExp("<(?:.|\n)*?>","gm"),n=new RegExp(" +","gm");function i(t){return(t+"").replace(e," ").replace(n," ")}var a=new RegExp("'","gm");function r(t){return(t+"").replace(a,"&#39;")}for(var s in t._waiAria={getAttributeString:function(t){var e=[" "];for(var n in t){var a=r(i(t[n]));e.push(n+"='"+a+"'")}return e.push(" "),e.join(" ")},getTimelineCellAttr:function(e){return t._waiAria.getAttributeString({"aria-label":e})},_taskCommonAttr:function(e,n){e.start_date&&e.end_date&&(n.setAttribute("aria-label",i(t.templates.tooltip_text(e.start_date,e.end_date,e))),e.$dataprocessor_class&&n.setAttribute("aria-busy",!0))},setTaskBarAttr:function(e,n){this._taskCommonAttr(e,n),n.setAttribute("role","img"),!t.isReadonly(e)&&t.config.drag_move&&(e.id!=t.getState("tasksDnd").drag_id?n.setAttribute("aria-grabbed",!1):n.setAttribute("aria-grabbed",!0))},taskRowAttr:function(e,n){this._taskCommonAttr(e,n),!t.isReadonly(e)&&t.config.order_branch&&n.setAttribute("aria-grabbed",!1),n.setAttribute("role","row"),n.setAttribute("aria-selected",t.isSelectedTask(e.id)?"true":"false"),n.setAttribute("aria-level",e.$level+1||1),t.hasChild(e.id)&&n.setAttribute("aria-expanded",e.$open?"true":"false")},linkAttr:function(e,n){var a=t.config.links,r=e.type==a.finish_to_start||e.type==a.start_to_start,s=e.type==a.start_to_start||e.type==a.start_to_finish,o=t.locale.labels.link+" "+t.templates.drag_link(e.source,s,e.target,r);n.setAttribute("role","img"),n.setAttribute("aria-label",i(o)),t.isReadonly(e)&&n.setAttribute("aria-readonly",!0)},gridSeparatorAttr:function(t){t.setAttribute("role","columnheader")},rowResizerAttr:function(t){t.setAttribute("role","row")},lightboxHiddenAttr:function(t){t.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},lightboxAttr:function(t){t.setAttribute("role","dialog"),t.setAttribute("aria-hidden","true"),t.firstChild.setAttribute("role","heading"),t.firstChild.setAttribute("aria-level","1")},lightboxButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":t.locale.labels[e],tabindex:"0"})},lightboxHeader:function(t,e){t.setAttribute("aria-label",e)},lightboxSelectAttrString:function(e){var n="";switch(e){case"%Y":n=t.locale.labels.years;break;case"%m":n=t.locale.labels.months;break;case"%d":n=t.locale.labels.days;break;case"%H:%i":n=t.locale.labels.hours+t.locale.labels.minutes}return t._waiAria.getAttributeString({"aria-label":n})},lightboxDurationInputAttrString:function(e){return this.getAttributeString({"aria-label":t.locale.labels.column_duration,"aria-valuemin":"0",role:"spinbutton"})},inlineEditorAttr:function(t){t.setAttribute("role","row")},gridAttrString:function(){return[" role='treegrid'",t.config.multiselect?"aria-multiselectable='true'":"aria-multiselectable='false'"," "].join(" ")},gridScaleRowAttrString:function(){return"role='row'"},gridScaleCellAttrString:function(e,n){var i="";if("add"==e.name)i=this.getAttributeString({role:"columnheader","aria-label":t.locale.labels.new_task});else{var a={role:"columnheader","aria-label":n};t._sort&&t._sort.name==e.name&&("asc"==t._sort.direction?a["aria-sort"]="ascending":a["aria-sort"]="descending"),i=this.getAttributeString(a)}return i},gridDataAttrString:function(){return"role='rowgroup'"},reorderMarkerAttr:function(t){t.setAttribute("role","grid"),t.firstChild.removeAttribute("aria-level"),t.firstChild.setAttribute("aria-grabbed","true")},gridCellAttrString:function(e,n,i){var a={role:"gridcell","aria-label":n};return e.editor&&!t.isReadonly(i)||(a["aria-readonly"]=!0),this.getAttributeString(a)},gridAddButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":t.locale.labels.new_task})},messageButtonAttrString:function(t){return"tabindex='0' role='button' aria-label='"+t+"'"},messageInfoAttr:function(t){t.setAttribute("role","alert")},messageModalAttr:function(t,e){t.setAttribute("role","dialog"),e&&t.setAttribute("aria-labelledby",e)},quickInfoAttr:function(t){t.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' aria-level='1' "},quickInfoHeader:function(t,e){t.setAttribute("aria-label",e)},quickInfoButtonAttrString:function(e){return t._waiAria.getAttributeString({role:"button","aria-label":e,tabindex:"0"})},tooltipAttr:function(t){t.setAttribute("role","tooltip")},tooltipVisibleAttr:function(t){t.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(t){t.setAttribute("aria-hidden","true")}},t._waiAria)t._waiAria[s]=function(e){return function(){return t.config.wai_aria_attributes?e.apply(this,arguments):""}}(t._waiAria[s])}(t),t.locate=function(t){var e=D(t);if(R(e,".gantt_task_row"))return null;var n=arguments[1]||this.config.task_attribute,i=A(e,n);return i?i.getAttribute(n):null},t._locate_css=function(t,e,n){return M(t,e,n)},t._locateHTML=function(t,e){return A(t,e||this.config.task_attribute)}}t.attachEvent("onParse",(function(){qt(t)||t.attachEvent("onGanttRender",(function(){if(t.config.initial_scroll){var e=t.getTaskByIndex(0),n=e?e.id:t.config.root_id;t.isTaskExists(n)&&t.$task&&t.utils.dom.isChildOf(t.$task,t.$container)&&t.showTask(n)}}),{once:!0})})),t.attachEvent("onBeforeGanttReady",(function(){this.config.scroll_size||(this.config.scroll_size=b()||15),qt(t)||(this._eventRemoveAll(),this.$mouseEvents.reset(),this.resetLightbox())})),t.attachEvent("onGanttReady",(function(){!qt(t)&&t.config.rtl&&t.$layout.getCellsByType("viewCell").forEach((function(e){var n=e.$config.scrollX;if(n){var i=t.$ui.getView(n);i&&i.scrollTo(i.$config.scrollSize,0)}}))})),t.attachEvent("onGanttReady",(function(){if(!qt(t)){var e=t.plugins(),n={auto_scheduling:t.autoSchedule,click_drag:t.ext.clickDrag,critical_path:t.isCriticalTask,drag_timeline:t.ext.dragTimeline,export_api:t.exportToPDF,fullscreen:t.ext.fullscreen,grouping:t.groupBy,keyboard_navigation:t.ext.keyboardNavigation,marker:t.addMarker,multiselect:t.eachSelectedTask,overlay:t.ext.overlay,quick_info:t.templates.quick_info_content,tooltip:t.ext.tooltips,undo:t.undo};for(let t in n)n[t]&&!e[t]&&console.warn(`You connected the '${t}' extension via an obsolete file. \nTo fix it, you need to remove the obsolete file and connect the extension via the plugins method: https://docs.dhtmlx.com/gantt/api__gantt_plugins.html`)}}))}const ga=W.gantt=function(t){var e=Mn(t);return e.env.isNode||(fa(e),function(t){t.load=function(e,n,i){this._load_url=e,this.assert(arguments.length,"Invalid load arguments");var a="json",r=null;return arguments.length>=3?(a=n,r=i):"string"==typeof arguments[1]?a=arguments[1]:"function"==typeof arguments[1]&&(r=arguments[1]),this._load_type=a,this.callEvent("onLoadStart",[e,a]),this.ajax.get(e,t.bind((function(t){this.on_load(t,a),this.callEvent("onLoadEnd",[e,a]),"function"==typeof r&&r.call(this)}),this))}}(e)),e}(Tt);var pa=n(4747),ma=n.n(pa),va={name:"xlmGantt",props:{createdIsNeed:{type:Boolean,default:!1},title:{type:String,default:"全天用车情况"},date:{type:String,default:ma()().format("YYYY-MM-DD")},columns:{type:Array,default:()=>[{name:"vehicleBase",label:"基地",align:"center",width:120},{name:"vehicleLicensePlate",label:"车牌号",align:"center",width:120},{name:"vehicleBrand",label:"品牌",align:"center",width:120},{name:"vehicleSeat",label:"座位数",align:"center",width:120}]}},data(){return{tasks:{data:[]}}},mounted(){},methods:{rerender(t){this.tasks.data=t,this.$nextTick((()=>{this.init()}))},renderGantt(t){Array.isArray(t)?this.tasks.data=t:this.tasks=t,this.$nextTick((()=>{this.init()}))},init(){ga.config.work_time=!0,ga.config.date_format="%Y-%m-%d %H-%i",ga.config.min_column_width=50,ga.config.duration_unit="minute",ga.config.duration_step=1,ga.config.scale_height=75,ga.config.scales=[{unit:"hour",step:1,format:"%H:00"},{unit:"day",step:"1",format:this.title}],ga.config.start_date=ma()(this.date).format("YYYY-MM-DD 00:00"),ga.config.end_date=ma()(this.date).format("YYYY-MM-DD 23:59"),ga.config.columns=this.columns,ga.config.autofit=!0,ga.config.fit_tasks=!0,ga.config.grid_width=400,ga.config.readonly=!0,ga.plugins({tooltip:!0}),ga.templates.task_text=function(t,e,n){return`${ma()(t).format("HH:mm")}~${ma()(e).format("HH:mm")} 司机：${n.driver}`},ga.init(this.$refs.gantt),ga.parse(this.tasks),ga.attachEvent("onTaskClick",(t=>(this.$emit("onClick",t),!0))),ga.templates.tooltip_text=function(t,e,n){const i=n.driver?n.driver:"";return"<b>开始时间：</b>"+ma()(t).format("YYYY-MM-DD HH:mm")+"</br><b>结束时间：</b>"+ma()(e).format("YYYY-MM-DD HH:mm")+"</br><b>司机：</b>"+i}},clear(){ga.clearAll(),ga.config.start_date=ma()(this.date).format("YYYY-MM-DD 00:00"),ga.config.end_date=ma()(this.date).format("YYYY-MM-DD 23:59"),ga.parse(this.tasks),ga.render(),ga.refreshData(),this.$emit("onClear")}},destroyed(){ga.destructor()}},ka=va,ya=l(ka,_,f,!1,null,"5e2bec83",null),ba=ya.exports;ba.install=function(t){t.component(ba.name,ba)};var xa=ba;const $a=[h,xa],wa=function(t){wa.installed||(wa.installed=!0,$a.map((e=>{t.component(e.name,e)})))};"undefined"!==typeof window&&window.Vue&&wa(window.Vue);var Sa={install:wa,...$a},Ta=Sa}(),i}()}));
//# sourceMappingURL=xlm-mh.umd.min.js.map